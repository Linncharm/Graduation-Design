"use strict";var Wy=Object.defineProperty;var Qy=(e,t,r)=>t in e?Wy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var we=(e,t,r)=>(Qy(e,typeof t!="symbol"?t+"":t,r),r),Bd=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var ut=(e,t,r)=>(Bd(e,t,"read from private field"),r?r.call(e):t.get(e)),za=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},Wa=(e,t,r,n)=>(Bd(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);const Be=require("node:path"),We=require("electron"),Nr=require("fs"),qm=require("fs/promises"),Tn=require("path"),jc=require("child_process"),wi=require("os"),zm=require("util"),Pt=require("events"),Xy=require("http"),Jy=require("https"),Ct=require("node:process"),yt=require("node:util"),Ae=require("node:fs"),Qa=require("node:crypto"),Zy=require("node:assert"),Hs=require("node:os"),Gs=require("node:child_process"),Vc=require("net"),eE=require("async_hooks"),Wm=require("tty"),qs=require("crypto"),zs=require("stream"),tE=require("assert");var Qm=typeof global=="object"&&global&&global.Object===Object&&global,rE=typeof self=="object"&&self&&self.Object===Object&&self,Rr=Qm||rE||Function("return this")(),yn=Rr.Symbol,Xm=Object.prototype,nE=Xm.hasOwnProperty,aE=Xm.toString,Xa=yn?yn.toStringTag:void 0;function iE(e){var t=nE.call(e,Xa),r=e[Xa];try{e[Xa]=void 0;var n=!0}catch{}var a=aE.call(e);return n&&(t?e[Xa]=r:delete e[Xa]),a}var sE=Object.prototype,oE=sE.toString;function uE(e){return oE.call(e)}var cE="[object Null]",lE="[object Undefined]",kd=yn?yn.toStringTag:void 0;function Ii(e){return e==null?e===void 0?lE:cE:kd&&kd in Object(e)?iE(e):uE(e)}function Gn(e){return e!=null&&typeof e=="object"}var _i=Array.isArray;function Oi(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var fE="[object AsyncFunction]",dE="[object Function]",hE="[object GeneratorFunction]",pE="[object Proxy]";function Jm(e){if(!Oi(e))return!1;var t=Ii(e);return t==dE||t==hE||t==fE||t==pE}var Uo=Rr["__core-js_shared__"],Ud=function(){var e=/[^.]+$/.exec(Uo&&Uo.keys&&Uo.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function mE(e){return!!Ud&&Ud in e}var vE=Function.prototype,gE=vE.toString;function Xn(e){if(e!=null){try{return gE.call(e)}catch{}try{return e+""}catch{}}return""}var _E=/[\\^$.*+?()[\]{}|]/g,yE=/^\[object .+?Constructor\]$/,EE=Function.prototype,CE=Object.prototype,SE=EE.toString,bE=CE.hasOwnProperty,TE=RegExp("^"+SE.call(bE).replace(_E,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function AE(e){if(!Oi(e)||mE(e))return!1;var t=Jm(e)?TE:yE;return t.test(Xn(e))}function wE(e,t){return e==null?void 0:e[t]}function Jn(e,t){var r=wE(e,t);return AE(r)?r:void 0}var nc=Jn(Rr,"WeakMap"),Fd=Object.create,IE=function(){function e(){}return function(t){if(!Oi(t))return{};if(Fd)return Fd(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function OE(){}function xE(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var Md=function(){try{var e=Jn(Object,"defineProperty");return e({},"",{}),e}catch{}}();function DE(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}function $E(e,t,r,n){for(var a=e.length,i=r+-1;++i<a;)if(t(e[i],i,e))return i;return-1}function NE(e){return e!==e}function RE(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}function PE(e,t,r){return t===t?RE(e,t,r):$E(e,NE,r)}function LE(e,t){var r=e==null?0:e.length;return!!r&&PE(e,t,0)>-1}var BE=9007199254740991,kE=/^(?:0|[1-9]\d*)$/;function UE(e,t){var r=typeof e;return t=t??BE,!!t&&(r=="number"||r!="symbol"&&kE.test(e))&&e>-1&&e%1==0&&e<t}function Zm(e,t,r){t=="__proto__"&&Md?Md(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Yc(e,t){return e===t||e!==e&&t!==t}var FE=Object.prototype,ME=FE.hasOwnProperty;function ev(e,t,r){var n=e[t];(!(ME.call(e,t)&&Yc(n,r))||r===void 0&&!(t in e))&&Zm(e,t,r)}function Ws(e,t,r,n){var a=!r;r||(r={});for(var i=-1,s=t.length;++i<s;){var o=t[i],u=void 0;u===void 0&&(u=e[o]),a?Zm(r,o,u):ev(r,o,u)}return r}var jE=9007199254740991;function tv(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=jE}function rv(e){return e!=null&&tv(e.length)&&!Jm(e)}var VE=Object.prototype;function Kc(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||VE;return e===r}function YE(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var KE="[object Arguments]";function jd(e){return Gn(e)&&Ii(e)==KE}var nv=Object.prototype,HE=nv.hasOwnProperty,GE=nv.propertyIsEnumerable,qE=jd(function(){return arguments}())?jd:function(e){return Gn(e)&&HE.call(e,"callee")&&!GE.call(e,"callee")};function zE(){return!1}var av=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Vd=av&&typeof module=="object"&&module&&!module.nodeType&&module,WE=Vd&&Vd.exports===av,Yd=WE?Rr.Buffer:void 0,QE=Yd?Yd.isBuffer:void 0,Es=QE||zE,XE="[object Arguments]",JE="[object Array]",ZE="[object Boolean]",e1="[object Date]",t1="[object Error]",r1="[object Function]",n1="[object Map]",a1="[object Number]",i1="[object Object]",s1="[object RegExp]",o1="[object Set]",u1="[object String]",c1="[object WeakMap]",l1="[object ArrayBuffer]",f1="[object DataView]",d1="[object Float32Array]",h1="[object Float64Array]",p1="[object Int8Array]",m1="[object Int16Array]",v1="[object Int32Array]",g1="[object Uint8Array]",_1="[object Uint8ClampedArray]",y1="[object Uint16Array]",E1="[object Uint32Array]",rt={};rt[d1]=rt[h1]=rt[p1]=rt[m1]=rt[v1]=rt[g1]=rt[_1]=rt[y1]=rt[E1]=!0;rt[XE]=rt[JE]=rt[l1]=rt[ZE]=rt[f1]=rt[e1]=rt[t1]=rt[r1]=rt[n1]=rt[a1]=rt[i1]=rt[s1]=rt[o1]=rt[u1]=rt[c1]=!1;function C1(e){return Gn(e)&&tv(e.length)&&!!rt[Ii(e)]}function Hc(e){return function(t){return e(t)}}var iv=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ci=iv&&typeof module=="object"&&module&&!module.nodeType&&module,S1=ci&&ci.exports===iv,Fo=S1&&Qm.process,Oa=function(){try{var e=ci&&ci.require&&ci.require("util").types;return e||Fo&&Fo.binding&&Fo.binding("util")}catch{}}(),Kd=Oa&&Oa.isTypedArray,sv=Kd?Hc(Kd):C1,b1=Object.prototype,T1=b1.hasOwnProperty;function ov(e,t){var r=_i(e),n=!r&&qE(e),a=!r&&!n&&Es(e),i=!r&&!n&&!a&&sv(e),s=r||n||a||i,o=s?YE(e.length,String):[],u=o.length;for(var c in e)(t||T1.call(e,c))&&!(s&&(c=="length"||a&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||UE(c,u)))&&o.push(c);return o}function uv(e,t){return function(r){return e(t(r))}}var A1=uv(Object.keys,Object),w1=Object.prototype,I1=w1.hasOwnProperty;function O1(e){if(!Kc(e))return A1(e);var t=[];for(var r in Object(e))I1.call(e,r)&&r!="constructor"&&t.push(r);return t}function Gc(e){return rv(e)?ov(e):O1(e)}function x1(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var D1=Object.prototype,$1=D1.hasOwnProperty;function N1(e){if(!Oi(e))return x1(e);var t=Kc(e),r=[];for(var n in e)n=="constructor"&&(t||!$1.call(e,n))||r.push(n);return r}function qc(e){return rv(e)?ov(e,!0):N1(e)}var yi=Jn(Object,"create");function R1(){this.__data__=yi?yi(null):{},this.size=0}function P1(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var L1="__lodash_hash_undefined__",B1=Object.prototype,k1=B1.hasOwnProperty;function U1(e){var t=this.__data__;if(yi){var r=t[e];return r===L1?void 0:r}return k1.call(t,e)?t[e]:void 0}var F1=Object.prototype,M1=F1.hasOwnProperty;function j1(e){var t=this.__data__;return yi?t[e]!==void 0:M1.call(t,e)}var V1="__lodash_hash_undefined__";function Y1(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=yi&&t===void 0?V1:t,this}function qn(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}qn.prototype.clear=R1;qn.prototype.delete=P1;qn.prototype.get=U1;qn.prototype.has=j1;qn.prototype.set=Y1;function K1(){this.__data__=[],this.size=0}function Qs(e,t){for(var r=e.length;r--;)if(Yc(e[r][0],t))return r;return-1}var H1=Array.prototype,G1=H1.splice;function q1(e){var t=this.__data__,r=Qs(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():G1.call(t,r,1),--this.size,!0}function z1(e){var t=this.__data__,r=Qs(t,e);return r<0?void 0:t[r][1]}function W1(e){return Qs(this.__data__,e)>-1}function Q1(e,t){var r=this.__data__,n=Qs(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function Xr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Xr.prototype.clear=K1;Xr.prototype.delete=q1;Xr.prototype.get=z1;Xr.prototype.has=W1;Xr.prototype.set=Q1;var Ei=Jn(Rr,"Map");function X1(){this.size=0,this.__data__={hash:new qn,map:new(Ei||Xr),string:new qn}}function J1(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Xs(e,t){var r=e.__data__;return J1(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Z1(e){var t=Xs(this,e).delete(e);return this.size-=t?1:0,t}function eC(e){return Xs(this,e).get(e)}function tC(e){return Xs(this,e).has(e)}function rC(e,t){var r=Xs(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function Zn(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Zn.prototype.clear=X1;Zn.prototype.delete=Z1;Zn.prototype.get=eC;Zn.prototype.has=tC;Zn.prototype.set=rC;function cv(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var lv=uv(Object.getPrototypeOf,Object);function nC(){this.__data__=new Xr,this.size=0}function aC(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function iC(e){return this.__data__.get(e)}function sC(e){return this.__data__.has(e)}var oC=200;function uC(e,t){var r=this.__data__;if(r instanceof Xr){var n=r.__data__;if(!Ei||n.length<oC-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Zn(n)}return r.set(e,t),this.size=r.size,this}function Hr(e){var t=this.__data__=new Xr(e);this.size=t.size}Hr.prototype.clear=nC;Hr.prototype.delete=aC;Hr.prototype.get=iC;Hr.prototype.has=sC;Hr.prototype.set=uC;function cC(e,t){return e&&Ws(t,Gc(t),e)}function lC(e,t){return e&&Ws(t,qc(t),e)}var fv=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Hd=fv&&typeof module=="object"&&module&&!module.nodeType&&module,fC=Hd&&Hd.exports===fv,Gd=fC?Rr.Buffer:void 0,qd=Gd?Gd.allocUnsafe:void 0;function dC(e,t){if(t)return e.slice();var r=e.length,n=qd?qd(r):new e.constructor(r);return e.copy(n),n}function hC(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var s=e[r];t(s,r,e)&&(i[a++]=s)}return i}function dv(){return[]}var pC=Object.prototype,mC=pC.propertyIsEnumerable,zd=Object.getOwnPropertySymbols,zc=zd?function(e){return e==null?[]:(e=Object(e),hC(zd(e),function(t){return mC.call(e,t)}))}:dv;function vC(e,t){return Ws(e,zc(e),t)}var gC=Object.getOwnPropertySymbols,hv=gC?function(e){for(var t=[];e;)cv(t,zc(e)),e=lv(e);return t}:dv;function _C(e,t){return Ws(e,hv(e),t)}function pv(e,t,r){var n=t(e);return _i(e)?n:cv(n,r(e))}function ac(e){return pv(e,Gc,zc)}function yC(e){return pv(e,qc,hv)}var ic=Jn(Rr,"DataView"),sc=Jn(Rr,"Promise"),Aa=Jn(Rr,"Set"),Wd="[object Map]",EC="[object Object]",Qd="[object Promise]",Xd="[object Set]",Jd="[object WeakMap]",Zd="[object DataView]",CC=Xn(ic),SC=Xn(Ei),bC=Xn(sc),TC=Xn(Aa),AC=Xn(nc),pr=Ii;(ic&&pr(new ic(new ArrayBuffer(1)))!=Zd||Ei&&pr(new Ei)!=Wd||sc&&pr(sc.resolve())!=Qd||Aa&&pr(new Aa)!=Xd||nc&&pr(new nc)!=Jd)&&(pr=function(e){var t=Ii(e),r=t==EC?e.constructor:void 0,n=r?Xn(r):"";if(n)switch(n){case CC:return Zd;case SC:return Wd;case bC:return Qd;case TC:return Xd;case AC:return Jd}return t});var wC=Object.prototype,IC=wC.hasOwnProperty;function OC(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&IC.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var Cs=Rr.Uint8Array;function Wc(e){var t=new e.constructor(e.byteLength);return new Cs(t).set(new Cs(e)),t}function xC(e,t){var r=t?Wc(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var DC=/\w*$/;function $C(e){var t=new e.constructor(e.source,DC.exec(e));return t.lastIndex=e.lastIndex,t}var eh=yn?yn.prototype:void 0,th=eh?eh.valueOf:void 0;function NC(e){return th?Object(th.call(e)):{}}function RC(e,t){var r=t?Wc(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var PC="[object Boolean]",LC="[object Date]",BC="[object Map]",kC="[object Number]",UC="[object RegExp]",FC="[object Set]",MC="[object String]",jC="[object Symbol]",VC="[object ArrayBuffer]",YC="[object DataView]",KC="[object Float32Array]",HC="[object Float64Array]",GC="[object Int8Array]",qC="[object Int16Array]",zC="[object Int32Array]",WC="[object Uint8Array]",QC="[object Uint8ClampedArray]",XC="[object Uint16Array]",JC="[object Uint32Array]";function ZC(e,t,r){var n=e.constructor;switch(t){case VC:return Wc(e);case PC:case LC:return new n(+e);case YC:return xC(e,r);case KC:case HC:case GC:case qC:case zC:case WC:case QC:case XC:case JC:return RC(e,r);case BC:return new n;case kC:case MC:return new n(e);case UC:return $C(e);case FC:return new n;case jC:return NC(e)}}function eS(e){return typeof e.constructor=="function"&&!Kc(e)?IE(lv(e)):{}}var tS="[object Map]";function rS(e){return Gn(e)&&pr(e)==tS}var rh=Oa&&Oa.isMap,nS=rh?Hc(rh):rS,aS="[object Set]";function iS(e){return Gn(e)&&pr(e)==aS}var nh=Oa&&Oa.isSet,sS=nh?Hc(nh):iS,oS=1,uS=2,cS=4,mv="[object Arguments]",lS="[object Array]",fS="[object Boolean]",dS="[object Date]",hS="[object Error]",vv="[object Function]",pS="[object GeneratorFunction]",mS="[object Map]",vS="[object Number]",gv="[object Object]",gS="[object RegExp]",_S="[object Set]",yS="[object String]",ES="[object Symbol]",CS="[object WeakMap]",SS="[object ArrayBuffer]",bS="[object DataView]",TS="[object Float32Array]",AS="[object Float64Array]",wS="[object Int8Array]",IS="[object Int16Array]",OS="[object Int32Array]",xS="[object Uint8Array]",DS="[object Uint8ClampedArray]",$S="[object Uint16Array]",NS="[object Uint32Array]",Ze={};Ze[mv]=Ze[lS]=Ze[SS]=Ze[bS]=Ze[fS]=Ze[dS]=Ze[TS]=Ze[AS]=Ze[wS]=Ze[IS]=Ze[OS]=Ze[mS]=Ze[vS]=Ze[gv]=Ze[gS]=Ze[_S]=Ze[yS]=Ze[ES]=Ze[xS]=Ze[DS]=Ze[$S]=Ze[NS]=!0;Ze[hS]=Ze[vv]=Ze[CS]=!1;function ls(e,t,r,n,a,i){var s,o=t&oS,u=t&uS,c=t&cS;if(s!==void 0)return s;if(!Oi(e))return e;var l=_i(e);if(l){if(s=OC(e),!o)return xE(e,s)}else{var f=pr(e),d=f==vv||f==pS;if(Es(e))return dC(e,o);if(f==gv||f==mv||d&&!a){if(s=u||d?{}:eS(e),!o)return u?_C(e,lC(s,e)):vC(e,cC(s,e))}else{if(!Ze[f])return a?e:{};s=ZC(e,f,o)}}i||(i=new Hr);var p=i.get(e);if(p)return p;i.set(e,s),sS(e)?e.forEach(function(v){s.add(ls(v,t,r,v,e,i))}):nS(e)&&e.forEach(function(v,m){s.set(m,ls(v,t,r,m,e,i))});var h=c?u?yC:ac:u?qc:Gc,_=l?void 0:h(e);return DE(_||e,function(v,m){_&&(m=v,v=e[m]),ev(s,m,ls(v,t,r,m,e,i))}),s}var RS=1,PS=4;function LS(e){return ls(e,RS|PS)}var BS="__lodash_hash_undefined__";function kS(e){return this.__data__.set(e,BS),this}function US(e){return this.__data__.has(e)}function Ci(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Zn;++t<r;)this.add(e[t])}Ci.prototype.add=Ci.prototype.push=kS;Ci.prototype.has=US;function FS(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function _v(e,t){return e.has(t)}var MS=1,jS=2;function yv(e,t,r,n,a,i){var s=r&MS,o=e.length,u=t.length;if(o!=u&&!(s&&u>o))return!1;var c=i.get(e),l=i.get(t);if(c&&l)return c==t&&l==e;var f=-1,d=!0,p=r&jS?new Ci:void 0;for(i.set(e,t),i.set(t,e);++f<o;){var h=e[f],_=t[f];if(n)var v=s?n(_,h,f,t,e,i):n(h,_,f,e,t,i);if(v!==void 0){if(v)continue;d=!1;break}if(p){if(!FS(t,function(m,b){if(!_v(p,b)&&(h===m||a(h,m,r,n,i)))return p.push(b)})){d=!1;break}}else if(!(h===_||a(h,_,r,n,i))){d=!1;break}}return i.delete(e),i.delete(t),d}function VS(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}function Qc(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var YS=1,KS=2,HS="[object Boolean]",GS="[object Date]",qS="[object Error]",zS="[object Map]",WS="[object Number]",QS="[object RegExp]",XS="[object Set]",JS="[object String]",ZS="[object Symbol]",eb="[object ArrayBuffer]",tb="[object DataView]",ah=yn?yn.prototype:void 0,Mo=ah?ah.valueOf:void 0;function rb(e,t,r,n,a,i,s){switch(r){case tb:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case eb:return!(e.byteLength!=t.byteLength||!i(new Cs(e),new Cs(t)));case HS:case GS:case WS:return Yc(+e,+t);case qS:return e.name==t.name&&e.message==t.message;case QS:case JS:return e==t+"";case zS:var o=VS;case XS:var u=n&YS;if(o||(o=Qc),e.size!=t.size&&!u)return!1;var c=s.get(e);if(c)return c==t;n|=KS,s.set(e,t);var l=yv(o(e),o(t),n,a,i,s);return s.delete(e),l;case ZS:if(Mo)return Mo.call(e)==Mo.call(t)}return!1}var nb=1,ab=Object.prototype,ib=ab.hasOwnProperty;function sb(e,t,r,n,a,i){var s=r&nb,o=ac(e),u=o.length,c=ac(t),l=c.length;if(u!=l&&!s)return!1;for(var f=u;f--;){var d=o[f];if(!(s?d in t:ib.call(t,d)))return!1}var p=i.get(e),h=i.get(t);if(p&&h)return p==t&&h==e;var _=!0;i.set(e,t),i.set(t,e);for(var v=s;++f<u;){d=o[f];var m=e[d],b=t[d];if(n)var A=s?n(b,m,d,t,e,i):n(m,b,d,e,t,i);if(!(A===void 0?m===b||a(m,b,r,n,i):A)){_=!1;break}v||(v=d=="constructor")}if(_&&!v){var D=e.constructor,x=t.constructor;D!=x&&"constructor"in e&&"constructor"in t&&!(typeof D=="function"&&D instanceof D&&typeof x=="function"&&x instanceof x)&&(_=!1)}return i.delete(e),i.delete(t),_}var ob=1,ih="[object Arguments]",sh="[object Array]",Fi="[object Object]",ub=Object.prototype,oh=ub.hasOwnProperty;function cb(e,t,r,n,a,i){var s=_i(e),o=_i(t),u=s?sh:pr(e),c=o?sh:pr(t);u=u==ih?Fi:u,c=c==ih?Fi:c;var l=u==Fi,f=c==Fi,d=u==c;if(d&&Es(e)){if(!Es(t))return!1;s=!0,l=!1}if(d&&!l)return i||(i=new Hr),s||sv(e)?yv(e,t,r,n,a,i):rb(e,t,u,r,n,a,i);if(!(r&ob)){var p=l&&oh.call(e,"__wrapped__"),h=f&&oh.call(t,"__wrapped__");if(p||h){var _=p?e.value():e,v=h?t.value():t;return i||(i=new Hr),a(_,v,r,n,i)}}return d?(i||(i=new Hr),sb(e,t,r,n,a,i)):!1}function Ev(e,t,r,n,a){return e===t?!0:e==null||t==null||!Gn(e)&&!Gn(t)?e!==e&&t!==t:cb(e,t,r,n,Ev,a)}function lb(e,t){return Ev(e,t)}var fb=1/0,db=Aa&&1/Qc(new Aa([,-0]))[1]==fb?function(e){return new Aa(e)}:OE,hb=200;function pb(e,t,r){var n=-1,a=LE,i=e.length,s=!0,o=[],u=o;if(i>=hb){var c=db(e);if(c)return Qc(c);s=!1,a=_v,u=new Ci}else u=o;e:for(;++n<i;){var l=e[n],f=l;if(l=l!==0?l:0,s&&f===f){for(var d=u.length;d--;)if(u[d]===f)continue e;o.push(l)}else a(u,f,r)||(u!==o&&u.push(f),o.push(l))}return o}function mb(e){return e&&e.length?pb(e):[]}const vb=["true"].includes(process.env.IS_PACKAGED),Yn=e=>{const t=vb?process.resourcesPath:"electron/resources";return Be.resolve(t,"extra",e)},Xc=e=>Be.resolve(`electron/resources/build/${e}`);function gb(e,t){if(process.contextIsolated)try{We.contextBridge.exposeInMainWorld(e,t)}catch(r){console.error(r)}else window[e]=t}function Ss(e,t){return t.reduce((r,n)=>(r[n]=(...a)=>e[n](...LS(a)),r),{})}const _b=()=>{switch(process.platform){case"win32":return Yn("win/android-platform-tools/adb.exe");case"darwin":return Yn("mac/android-platform-tools/adb");case"linux":return Yn("linux/android-platform-tools/adb")}},ea=_b();var k=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ba(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Cv={},xa={};Object.defineProperty(xa,"__esModule",{value:!0});xa.sync=xa.isexe=void 0;const yb=Nr,Eb=qm,Cb=async(e,t={})=>{const{ignoreErrors:r=!1}=t;try{return Sv(await(0,Eb.stat)(e),t)}catch(n){const a=n;if(r||a.code==="EACCES")return!1;throw a}};xa.isexe=Cb;const Sb=(e,t={})=>{const{ignoreErrors:r=!1}=t;try{return Sv((0,yb.statSync)(e),t)}catch(n){const a=n;if(r||a.code==="EACCES")return!1;throw a}};xa.sync=Sb;const Sv=(e,t)=>e.isFile()&&bb(e,t),bb=(e,t)=>{var p,h,_;const r=t.uid??((p=process.getuid)==null?void 0:p.call(process)),n=t.groups??((h=process.getgroups)==null?void 0:h.call(process))??[],a=t.gid??((_=process.getgid)==null?void 0:_.call(process))??n[0];if(r===void 0||a===void 0)throw new Error("cannot get uid or gid");const i=new Set([a,...n]),s=e.mode,o=e.uid,u=e.gid,c=parseInt("100",8),l=parseInt("010",8),f=parseInt("001",8),d=c|l;return!!(s&f||s&l&&i.has(u)||s&c&&o===r||s&d&&r===0)};var Da={};Object.defineProperty(Da,"__esModule",{value:!0});Da.sync=Da.isexe=void 0;const Tb=Nr,Ab=qm,wb=async(e,t={})=>{const{ignoreErrors:r=!1}=t;try{return bv(await(0,Ab.stat)(e),e,t)}catch(n){const a=n;if(r||a.code==="EACCES")return!1;throw a}};Da.isexe=wb;const Ib=(e,t={})=>{const{ignoreErrors:r=!1}=t;try{return bv((0,Tb.statSync)(e),e,t)}catch(n){const a=n;if(r||a.code==="EACCES")return!1;throw a}};Da.sync=Ib;const Ob=(e,t)=>{const{pathExt:r=process.env.PATHEXT||""}=t,n=r.split(";");if(n.indexOf("")!==-1)return!0;for(let a=0;a<n.length;a++){const i=n[a].toLowerCase(),s=e.substring(e.length-i.length).toLowerCase();if(i&&s===i)return!0}return!1},bv=(e,t,r)=>e.isFile()&&Ob(t,r);var Tv={};Object.defineProperty(Tv,"__esModule",{value:!0});(function(e){var t=k&&k.__createBinding||(Object.create?function(c,l,f,d){d===void 0&&(d=f);var p=Object.getOwnPropertyDescriptor(l,f);(!p||("get"in p?!l.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return l[f]}}),Object.defineProperty(c,d,p)}:function(c,l,f,d){d===void 0&&(d=f),c[d]=l[f]}),r=k&&k.__setModuleDefault||(Object.create?function(c,l){Object.defineProperty(c,"default",{enumerable:!0,value:l})}:function(c,l){c.default=l}),n=k&&k.__importStar||function(c){if(c&&c.__esModule)return c;var l={};if(c!=null)for(var f in c)f!=="default"&&Object.prototype.hasOwnProperty.call(c,f)&&t(l,c,f);return r(l,c),l},a=k&&k.__exportStar||function(c,l){for(var f in c)f!=="default"&&!Object.prototype.hasOwnProperty.call(l,f)&&t(l,c,f)};Object.defineProperty(e,"__esModule",{value:!0}),e.sync=e.isexe=e.posix=e.win32=void 0;const i=n(xa);e.posix=i;const s=n(Da);e.win32=s,a(Tv,e);const u=(process.env._ISEXE_TEST_PLATFORM_||process.platform)==="win32"?s:i;e.isexe=u.isexe,e.sync=u.sync})(Cv);const{isexe:xb,sync:Db}=Cv,{join:$b,delimiter:Nb,sep:uh,posix:ch}=Tn,lh=process.platform==="win32",Av=new RegExp(`[${ch.sep}${uh===ch.sep?"":uh}]`.replace(/(\\)/g,"\\$1")),Rb=new RegExp(`^\\.${Av.source}`),wv=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),Iv=(e,{path:t=process.env.PATH,pathExt:r=process.env.PATHEXT,delimiter:n=Nb})=>{const a=e.match(Av)?[""]:[...lh?[process.cwd()]:[],...(t||"").split(n)];if(lh){const i=r||[".EXE",".CMD",".BAT",".COM"].join(n),s=i.split(n).flatMap(o=>[o,o.toLowerCase()]);return e.includes(".")&&s[0]!==""&&s.unshift(""),{pathEnv:a,pathExt:s,pathExtExe:i}}return{pathEnv:a,pathExt:[""]}},Ov=(e,t)=>{const r=/^".*"$/.test(e)?e.slice(1,-1):e;return(!r&&Rb.test(t)?t.slice(0,2):"")+$b(r,t)},xv=async(e,t={})=>{const{pathEnv:r,pathExt:n,pathExtExe:a}=Iv(e,t),i=[];for(const s of r){const o=Ov(s,e);for(const u of n){const c=o+u;if(await xb(c,{pathExt:a,ignoreErrors:!0})){if(!t.all)return c;i.push(c)}}}if(t.all&&i.length)return i;if(t.nothrow)return null;throw wv(e)},Pb=(e,t={})=>{const{pathEnv:r,pathExt:n,pathExtExe:a}=Iv(e,t),i=[];for(const s of r){const o=Ov(s,e);for(const u of n){const c=o+u;if(Db(c,{pathExt:a,ignoreErrors:!0})){if(!t.all)return c;i.push(c)}}}if(t.all&&i.length)return i;if(t.nothrow)return null;throw wv(e)};var Lb=xv;xv.sync=Pb;const Bb=Ba(Lb),kb=()=>{switch(process.platform){case"win32":return Yn("win/scrcpy/scrcpy.exe");case"darwin":return Yn("mac/scrcpy/scrcpy");default:return Bb.sync("scrcpy",{nothrow:!0})}},Jc=kb(),Ub=process.env.DESKTOP_PATH,Fb=Be.resolve("dev-publish.yml"),Dv=Xc("logo.png"),Mb=Xc("logo.ico"),jb=Xc("logo.icns"),Vb=process.platform==="darwin"?Yn("mac/tray/iconTemplate.png"):Yn("common/tray/icon.png"),Yb=process.env.LOG_PATH;function Kb(){return Dv}const Hb=Object.freeze(Object.defineProperty({__proto__:null,adbPath:ea,desktopPath:Ub,devPublishPath:Fb,getLogoPath:Kb,icnsLogoPath:jb,icoLogoPath:Mb,logPath:Yb,logoPath:Dv,scrcpyPath:Jc,trayPath:Vb},Symbol.toStringTag,{value:"Module"})),$v=Nr,ai=Tn;var Gb={findAndReadPackageJson:qb,tryReadJsonAt:ga};function qb(){return ga(Qb())||ga(Wb())||ga(process.resourcesPath,"app.asar")||ga(process.resourcesPath,"app")||ga(process.cwd())||{name:void 0,version:void 0}}function ga(...e){if(e[0])try{const t=ai.join(...e),r=zb("package.json",t);if(!r)return;const n=JSON.parse($v.readFileSync(r,"utf8")),a=(n==null?void 0:n.productName)||(n==null?void 0:n.name);return!a||a.toLowerCase()==="electron"?void 0:a?{name:a,version:n==null?void 0:n.version}:void 0}catch{return}}function zb(e,t){let r=t;for(;;){const n=ai.parse(r),a=n.root,i=n.dir;if($v.existsSync(ai.join(r,e)))return ai.resolve(ai.join(r,e));if(r===a)return null;r=i}}function Wb(){const e=process.argv.filter(r=>r.indexOf("--user-data-dir=")===0);return e.length===0||typeof e[0]!="string"?null:e[0].replace("--user-data-dir=","")}function Qb(){var e;try{return(e=require.main)==null?void 0:e.filename}catch{return}}const Xb=jc,Dn=wi,ca=Tn,Jb=Gb;let Zb=class{constructor(){we(this,"appName");we(this,"appPackageJson");we(this,"platform",process.platform)}getAppLogPath(t=this.getAppName()){return this.platform==="darwin"?ca.join(this.getSystemPathHome(),"Library/Logs",t):ca.join(this.getAppUserDataPath(t),"logs")}getAppName(){var r;const t=this.appName||((r=this.getAppPackageJson())==null?void 0:r.name);if(!t)throw new Error("electron-log can't determine the app name. It tried these methods:\n1. Use `electron.app.name`\n2. Use productName or name from the nearest package.json`\nYou can also set it through log.transports.file.setAppName()");return t}getAppPackageJson(){return typeof this.appPackageJson!="object"&&(this.appPackageJson=Jb.findAndReadPackageJson()),this.appPackageJson}getAppUserDataPath(t=this.getAppName()){return t?ca.join(this.getSystemPathAppData(),t):void 0}getAppVersion(){var t;return(t=this.getAppPackageJson())==null?void 0:t.version}getElectronLogPath(){return this.getAppLogPath()}getMacOsVersion(){const t=Number(Dn.release().split(".")[0]);return t<=19?`10.${t-4}`:t-9}getOsVersion(){let t=Dn.type().replace("_"," "),r=Dn.release();return t==="Darwin"&&(t="macOS",r=this.getMacOsVersion()),`${t} ${r}`}getPathVariables(){const t=this.getAppName(),r=this.getAppVersion(),n=this;return{appData:this.getSystemPathAppData(),appName:t,appVersion:r,get electronDefaultDir(){return n.getElectronLogPath()},home:this.getSystemPathHome(),libraryDefaultDir:this.getAppLogPath(t),libraryTemplate:this.getAppLogPath("{appName}"),temp:this.getSystemPathTemp(),userData:this.getAppUserDataPath(t)}}getSystemPathAppData(){const t=this.getSystemPathHome();switch(this.platform){case"darwin":return ca.join(t,"Library/Application Support");case"win32":return process.env.APPDATA||ca.join(t,"AppData/Roaming");default:return process.env.XDG_CONFIG_HOME||ca.join(t,".config")}}getSystemPathHome(){var t;return((t=Dn.homedir)==null?void 0:t.call(Dn))||process.env.HOME}getSystemPathTemp(){return Dn.tmpdir()}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:void 0,os:this.getOsVersion()}}isDev(){return process.env.ELECTRON_IS_DEV==="1"}isElectron(){return!!process.versions.electron}onAppEvent(t,r){}onAppReady(t){t()}onEveryWebContentsEvent(t,r){}onIpc(t,r){}onIpcInvoke(t,r){}openUrl(t,r=console.error){const a={darwin:"open",win32:"start",linux:"xdg-open"}[process.platform]||"xdg-open";Xb.exec(`${a} ${t}`,{},i=>{i&&r(i)})}setAppName(t){this.appName=t}setPlatform(t){this.platform=t}setPreloadFileForSessions({filePath:t,includeFutureSession:r=!0,getSessions:n=()=>[]}){}sendIpc(t,r){}showErrorBox(t,r){}};var eT=Zb;const tT=Tn,rT=eT;let nT=class extends rT{constructor({electron:r}={}){super();we(this,"electron");this.electron=r}getAppName(){var n,a;let r;try{r=this.appName||((n=this.electron.app)==null?void 0:n.name)||((a=this.electron.app)==null?void 0:a.getName())}catch{}return r||super.getAppName()}getAppUserDataPath(r){return this.getPath("userData")||super.getAppUserDataPath(r)}getAppVersion(){var n;let r;try{r=(n=this.electron.app)==null?void 0:n.getVersion()}catch{}return r||super.getAppVersion()}getElectronLogPath(){return this.getPath("logs")||super.getElectronLogPath()}getPath(r){var n;try{return(n=this.electron.app)==null?void 0:n.getPath(r)}catch{return}}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:`Electron ${process.versions.electron}`,os:this.getOsVersion()}}getSystemPathAppData(){return this.getPath("appData")||super.getSystemPathAppData()}isDev(){var r;return((r=this.electron.app)==null?void 0:r.isPackaged)!==void 0?!this.electron.app.isPackaged:typeof process.execPath=="string"?tT.basename(process.execPath).toLowerCase().startsWith("electron"):super.isDev()}onAppEvent(r,n){var a;return(a=this.electron.app)==null||a.on(r,n),()=>{var i;(i=this.electron.app)==null||i.off(r,n)}}onAppReady(r){var n,a,i;(n=this.electron.app)!=null&&n.isReady()?r():(a=this.electron.app)!=null&&a.once?(i=this.electron.app)==null||i.once("ready",r):r()}onEveryWebContentsEvent(r,n){var i,s,o;return(s=(i=this.electron.webContents)==null?void 0:i.getAllWebContents())==null||s.forEach(u=>{u.on(r,n)}),(o=this.electron.app)==null||o.on("web-contents-created",a),()=>{var u,c;(u=this.electron.webContents)==null||u.getAllWebContents().forEach(l=>{l.off(r,n)}),(c=this.electron.app)==null||c.off("web-contents-created",a)};function a(u,c){c.on(r,n)}}onIpc(r,n){var a;(a=this.electron.ipcMain)==null||a.on(r,n)}onIpcInvoke(r,n){var a,i;(i=(a=this.electron.ipcMain)==null?void 0:a.handle)==null||i.call(a,r,n)}openUrl(r,n=console.error){var a;(a=this.electron.shell)==null||a.openExternal(r).catch(n)}setPreloadFileForSessions({filePath:r,includeFutureSession:n=!0,getSessions:a=()=>{var i;return[(i=this.electron.session)==null?void 0:i.defaultSession]}}){for(const s of a().filter(Boolean))i(s);n&&this.onAppEvent("session-created",s=>{i(s)});function i(s){s.setPreloads([...s.getPreloads(),r])}}sendIpc(r,n){var a,i;(i=(a=this.electron.BrowserWindow)==null?void 0:a.getAllWindows())==null||i.forEach(s=>{var o;((o=s.webContents)==null?void 0:o.isDestroyed())===!1&&s.webContents.send(r,n)})}showErrorBox(r,n){var a;(a=this.electron.dialog)==null||a.showErrorBox(r,n)}};var aT=nT,Nv={exports:{}};(function(e){let t={};try{t=require("electron")}catch{}t.ipcRenderer&&r(t),e.exports=r;function r({contextBridge:n,ipcRenderer:a}){if(!a)return;a.on("__ELECTRON_LOG_IPC__",(s,o)=>{window.postMessage({cmd:"message",...o})}),a.invoke("__ELECTRON_LOG__",{cmd:"getOptions"}).catch(s=>console.error(new Error(`electron-log isn't initialized in the main process. Please call log.initialize() before. ${s.message}`)));const i={sendToMain(s){try{a.send("__ELECTRON_LOG__",s)}catch(o){console.error("electronLog.sendToMain ",o,"data:",s),a.send("__ELECTRON_LOG__",{cmd:"errorHandler",error:{message:o==null?void 0:o.message,stack:o==null?void 0:o.stack},errorName:"sendToMain"})}},log(...s){i.sendToMain({data:s,level:"info"})}};for(const s of["error","warn","info","verbose","debug","silly"])i[s]=(...o)=>i.sendToMain({data:o,level:s});if(n&&process.contextIsolated)try{n.exposeInMainWorld("__electronLog",i)}catch{}typeof window=="object"?window.__electronLog=i:__electronLog=i}})(Nv);var iT=Nv.exports;const fh=Nr,sT=wi,dh=Tn,oT=iT;var uT={initialize({externalApi:e,getSessions:t,includeFutureSession:r,logger:n,preload:a=!0,spyRendererConsole:i=!1}){e.onAppReady(()=>{try{a&&cT({externalApi:e,getSessions:t,includeFutureSession:r,preloadOption:a}),i&&lT({externalApi:e,logger:n})}catch(s){n.warn(s)}})}};function cT({externalApi:e,getSessions:t,includeFutureSession:r,preloadOption:n}){let a=typeof n=="string"?n:void 0;try{a=dh.resolve(__dirname,"../renderer/electron-log-preload.js")}catch{}if(!a||!fh.existsSync(a)){a=dh.join(e.getAppUserDataPath()||sT.tmpdir(),"electron-log-preload.js");const i=`
      try {
        (${oT.toString()})(require('electron'));
      } catch(e) {
        console.error(e);
      }
    `;fh.writeFileSync(a,i,"utf8")}e.setPreloadFileForSessions({filePath:a,includeFutureSession:r,getSessions:t})}function lT({externalApi:e,logger:t}){const r=["verbose","info","warning","error"];e.onEveryWebContentsEvent("console-message",(n,a,i)=>{t.processMessage({data:[i],level:r[a],variables:{processType:"renderer"}})})}var fT=dT;function dT(e){return Object.defineProperties(t,{defaultLabel:{value:"",writable:!0},labelPadding:{value:!0,writable:!0},maxLabelLength:{value:0,writable:!0},labelLength:{get(){switch(typeof t.labelPadding){case"boolean":return t.labelPadding?t.maxLabelLength:0;case"number":return t.labelPadding;default:return 0}}}});function t(r){t.maxLabelLength=Math.max(t.maxLabelLength,r.length);const n={};for(const a of[...e.levels,"log"])n[a]=(...i)=>e.logData(i,{level:a,scope:r});return n}}const hT=fT;var Hn;let pT=(Hn=class{constructor({allowUnknownLevel:t=!1,dependencies:r={},errorHandler:n,eventLogger:a,initializeFn:i,isDev:s=!1,levels:o=["error","warn","info","verbose","debug","silly"],logId:u,transportFactories:c={},variables:l}={}){we(this,"dependencies",{});we(this,"errorHandler",null);we(this,"eventLogger",null);we(this,"functions",{});we(this,"hooks",[]);we(this,"isDev",!1);we(this,"levels",null);we(this,"logId",null);we(this,"scope",null);we(this,"transports",{});we(this,"variables",{});this.addLevel=this.addLevel.bind(this),this.create=this.create.bind(this),this.initialize=this.initialize.bind(this),this.logData=this.logData.bind(this),this.processMessage=this.processMessage.bind(this),this.allowUnknownLevel=t,this.dependencies=r,this.initializeFn=i,this.isDev=s,this.levels=o,this.logId=u,this.transportFactories=c,this.variables=l||{},this.scope=hT(this);for(const f of this.levels)this.addLevel(f,!1);this.log=this.info,this.functions.log=this.log,this.errorHandler=n,n==null||n.setOptions({...r,logFn:this.error}),this.eventLogger=a,a==null||a.setOptions({...r,logger:this});for(const[f,d]of Object.entries(c))this.transports[f]=d(this,r);Hn.instances[u]=this}static getInstance({logId:t}){return this.instances[t]||this.instances.default}addLevel(t,r=this.levels.length){r!==!1&&this.levels.splice(r,0,t),this[t]=(...n)=>this.logData(n,{level:t}),this.functions[t]=this[t]}catchErrors(t){return this.processMessage({data:["log.catchErrors is deprecated. Use log.errorHandler instead"],level:"warn"},{transports:["console"]}),this.errorHandler.startCatching(t)}create(t){return typeof t=="string"&&(t={logId:t}),new Hn({dependencies:this.dependencies,errorHandler:this.errorHandler,initializeFn:this.initializeFn,isDev:this.isDev,transportFactories:this.transportFactories,variables:{...this.variables},...t})}compareLevels(t,r,n=this.levels){const a=n.indexOf(t),i=n.indexOf(r);return i===-1||a===-1?!0:i<=a}initialize(t={}){this.initializeFn({logger:this,...this.dependencies,...t})}logData(t,r={}){this.processMessage({data:t,...r})}processMessage(t,{transports:r=this.transports}={}){if(t.cmd==="errorHandler"){this.errorHandler.handle(t.error,{errorName:t.errorName,processType:"renderer",showDialog:!!t.showDialog});return}let n=t.level;this.allowUnknownLevel||(n=this.levels.includes(t.level)?t.level:"info");const a={date:new Date,...t,level:n,variables:{...this.variables,...t.variables}};for(const[i,s]of this.transportEntries(r))if(!(typeof s!="function"||s.level===!1)&&this.compareLevels(s.level,t.level))try{const o=this.hooks.reduce((u,c)=>u&&c(u,s,i),a);o&&s({...o,data:[...o.data]})}catch(o){this.processInternalErrorFn(o)}}processInternalErrorFn(t){}transportEntries(t=this.transports){return(Array.isArray(t)?t:Object.entries(t)).map(n=>{switch(typeof n){case"string":return this.transports[n]?[n,this.transports[n]]:null;case"function":return[n.name,n];default:return Array.isArray(n)?n:null}}).filter(Boolean)}},we(Hn,"instances",{}),Hn);var mT=pT;let vT=class{constructor({externalApi:t,logFn:r=void 0,onError:n=void 0,showDialog:a=void 0}={}){we(this,"externalApi");we(this,"isActive",!1);we(this,"logFn");we(this,"onError");we(this,"showDialog",!0);this.createIssue=this.createIssue.bind(this),this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.setOptions({externalApi:t,logFn:r,onError:n,showDialog:a}),this.startCatching=this.startCatching.bind(this),this.stopCatching=this.stopCatching.bind(this)}handle(t,{logFn:r=this.logFn,onError:n=this.onError,processType:a="browser",showDialog:i=this.showDialog,errorName:s=""}={}){var o;t=gT(t);try{if(typeof n=="function"){const u=((o=this.externalApi)==null?void 0:o.getVersions())||{},c=this.createIssue;if(n({createIssue:c,error:t,errorName:s,processType:a,versions:u})===!1)return}s?r(s,t):r(t),i&&!s.includes("rejection")&&this.externalApi&&this.externalApi.showErrorBox(`A JavaScript error occurred in the ${a} process`,t.stack)}catch{console.error(t)}}setOptions({externalApi:t,logFn:r,onError:n,showDialog:a}){typeof t=="object"&&(this.externalApi=t),typeof r=="function"&&(this.logFn=r),typeof n=="function"&&(this.onError=n),typeof a=="boolean"&&(this.showDialog=a)}startCatching({onError:t,showDialog:r}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:t,showDialog:r}),process.on("uncaughtException",this.handleError),process.on("unhandledRejection",this.handleRejection))}stopCatching(){this.isActive=!1,process.removeListener("uncaughtException",this.handleError),process.removeListener("unhandledRejection",this.handleRejection)}createIssue(t,r){var n;(n=this.externalApi)==null||n.openUrl(`${t}?${new URLSearchParams(r).toString()}`)}handleError(t){this.handle(t,{errorName:"Unhandled"})}handleRejection(t){const r=t instanceof Error?t:new Error(JSON.stringify(t));this.handle(r,{errorName:"Unhandled rejection"})}};function gT(e){if(e instanceof Error)return e;if(e&&typeof e=="object"){if(e.message)return Object.assign(new Error(e.message),e);try{return new Error(JSON.stringify(e))}catch(t){return new Error(`Couldn't normalize error ${String(e)}: ${t}`)}}return new Error(`Can't normalize error ${String(e)}`)}var _T=vT;let yT=class{constructor(t={}){we(this,"disposers",[]);we(this,"format","{eventSource}#{eventName}:");we(this,"formatters",{app:{"certificate-error":({args:t})=>this.arrayToObject(t.slice(1,4),["url","error","certificate"]),"child-process-gone":({args:t})=>t.length===1?t[0]:t,"render-process-gone":({args:[t,r]})=>r&&typeof r=="object"?{...r,...this.getWebContentsDetails(t)}:[]},webContents:{"console-message":({args:[t,r,n,a]})=>{if(!(t<3))return{message:r,source:`${a}:${n}`}},"did-fail-load":({args:t})=>this.arrayToObject(t,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"did-fail-provisional-load":({args:t})=>this.arrayToObject(t,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"plugin-crashed":({args:t})=>this.arrayToObject(t,["name","version"]),"preload-error":({args:t})=>this.arrayToObject(t,["preloadPath","error"])}});we(this,"events",{app:{"certificate-error":!0,"child-process-gone":!0,"render-process-gone":!0},webContents:{"did-fail-load":!0,"did-fail-provisional-load":!0,"plugin-crashed":!0,"preload-error":!0,unresponsive:!0}});we(this,"externalApi");we(this,"level","error");we(this,"scope","");this.setOptions(t)}setOptions({events:t,externalApi:r,level:n,logger:a,format:i,formatters:s,scope:o}){typeof t=="object"&&(this.events=t),typeof r=="object"&&(this.externalApi=r),typeof n=="string"&&(this.level=n),typeof a=="object"&&(this.logger=a),(typeof i=="string"||typeof i=="function")&&(this.format=i),typeof s=="object"&&(this.formatters=s),typeof o=="string"&&(this.scope=o)}startLogging(t={}){this.setOptions(t),this.disposeListeners();for(const r of this.getEventNames(this.events.app))this.disposers.push(this.externalApi.onAppEvent(r,(...n)=>{this.handleEvent({eventSource:"app",eventName:r,handlerArgs:n})}));for(const r of this.getEventNames(this.events.webContents))this.disposers.push(this.externalApi.onEveryWebContentsEvent(r,(...n)=>{this.handleEvent({eventSource:"webContents",eventName:r,handlerArgs:n})}))}stopLogging(){this.disposeListeners()}arrayToObject(t,r){const n={};return r.forEach((a,i)=>{n[a]=t[i]}),t.length>r.length&&(n.unknownArgs=t.slice(r.length)),n}disposeListeners(){this.disposers.forEach(t=>t()),this.disposers=[]}formatEventLog({eventName:t,eventSource:r,handlerArgs:n}){var l;const[a,...i]=n;if(typeof this.format=="function")return this.format({args:i,event:a,eventName:t,eventSource:r});const s=(l=this.formatters[r])==null?void 0:l[t];let o=i;if(typeof s=="function"&&(o=s({args:i,event:a,eventName:t,eventSource:r})),!o)return;const u={};return Array.isArray(o)?u.args=o:typeof o=="object"&&Object.assign(u,o),r==="webContents"&&Object.assign(u,this.getWebContentsDetails(a==null?void 0:a.sender)),[this.format.replace("{eventSource}",r==="app"?"App":"WebContents").replace("{eventName}",t),u]}getEventNames(t){return!t||typeof t!="object"?[]:Object.entries(t).filter(([r,n])=>n).map(([r])=>r)}getWebContentsDetails(t){if(!(t!=null&&t.loadURL))return{};try{return{webContents:{id:t.id,url:t.getURL()}}}catch{return{}}}handleEvent({eventName:t,eventSource:r,handlerArgs:n}){var i;const a=this.formatEventLog({eventName:t,eventSource:r,handlerArgs:n});if(a){const s=this.scope?this.logger.scope(this.scope):this.logger;(i=s==null?void 0:s[this.level])==null||i.call(s,...a)}}};var ET=yT,xi={transform:CT};function CT({logger:e,message:t,transport:r,initialData:n=(t==null?void 0:t.data)||[],transforms:a=r==null?void 0:r.transforms}){return a.reduce((i,s)=>typeof s=="function"?s({data:i,logger:e,message:t,transport:r}):i,n)}const{transform:ST}=xi;var Rv={concatFirstStringElements:bT,formatScope:hh,formatText:mh,formatVariables:ph,timeZoneFromOffset:Pv,format({message:e,logger:t,transport:r,data:n=e==null?void 0:e.data}){switch(typeof r.format){case"string":return ST({message:e,logger:t,transforms:[ph,hh,mh],transport:r,initialData:[r.format,...n]});case"function":return r.format({data:n,level:(e==null?void 0:e.level)||"info",logger:t,message:e,transport:r});default:return n}}};function bT({data:e}){return typeof e[0]!="string"||typeof e[1]!="string"||e[0].match(/%[1cdfiOos]/)?e:[`${e[0]} ${e[1]}`,...e.slice(2)]}function Pv(e){const t=Math.abs(e),r=e>=0?"-":"+",n=Math.floor(t/60).toString().padStart(2,"0"),a=(t%60).toString().padStart(2,"0");return`${r}${n}:${a}`}function hh({data:e,logger:t,message:r}){const{defaultLabel:n,labelLength:a}=(t==null?void 0:t.scope)||{},i=e[0];let s=r.scope;s||(s=n);let o;return s===""?o=a>0?"".padEnd(a+3):"":typeof s=="string"?o=` (${s})`.padEnd(a+3):o="",e[0]=i.replace("{scope}",o),e}function ph({data:e,message:t}){let r=e[0];if(typeof r!="string")return e;r=r.replace("{level}]",`${t.level}]`.padEnd(6," "));const n=t.date||new Date;return e[0]=r.replace(/\{(\w+)}/g,(a,i)=>{var s;switch(i){case"level":return t.level||"info";case"logId":return t.logId;case"y":return n.getFullYear().toString(10);case"m":return(n.getMonth()+1).toString(10).padStart(2,"0");case"d":return n.getDate().toString(10).padStart(2,"0");case"h":return n.getHours().toString(10).padStart(2,"0");case"i":return n.getMinutes().toString(10).padStart(2,"0");case"s":return n.getSeconds().toString(10).padStart(2,"0");case"ms":return n.getMilliseconds().toString(10).padStart(3,"0");case"z":return Pv(n.getTimezoneOffset());case"iso":return n.toISOString();default:return((s=t.variables)==null?void 0:s[i])||a}}).trim(),e}function mh({data:e}){const t=e[0];if(typeof t!="string")return e;if(t.lastIndexOf("{text}")===t.length-6)return e[0]=t.replace(/\s?{text}/,""),e[0]===""&&e.shift(),e;const n=t.split("{text}");let a=[];return n[0]!==""&&a.push(n[0]),a=a.concat(e.slice(1)),n[1]!==""&&a.push(n[1]),a}var Lv={exports:{}};(function(e){const t=zm;e.exports={serialize:n,maxDepth({data:a,transport:i,depth:s=(i==null?void 0:i.depth)??6}){if(!a)return a;if(s<1)return Array.isArray(a)?"[array]":typeof a=="object"&&a?"[object]":a;if(Array.isArray(a))return a.map(u=>e.exports.maxDepth({data:u,depth:s-1}));if(typeof a!="object"||a&&typeof a.toISOString=="function")return a;if(a===null)return null;if(a instanceof Error)return a;const o={};for(const u in a)Object.prototype.hasOwnProperty.call(a,u)&&(o[u]=e.exports.maxDepth({data:a[u],depth:s-1}));return o},toJSON({data:a}){return JSON.parse(JSON.stringify(a,r()))},toString({data:a,transport:i}){const s=(i==null?void 0:i.inspectOptions)||{},o=a.map(u=>{if(u!==void 0)try{const c=JSON.stringify(u,r(),"  ");return c===void 0?void 0:JSON.parse(c)}catch{return u}});return t.formatWithOptions(s,...o)}};function r(a={}){const i=new WeakSet;return function(s,o){if(typeof o=="object"&&o!==null){if(i.has(o))return;i.add(o)}return n(s,o,a)}}function n(a,i,s={}){const o=(s==null?void 0:s.serializeMapAndSet)!==!1;return i instanceof Error?i.stack:i&&(typeof i=="function"?`[function] ${i.toString()}`:i instanceof Date?i.toISOString():o&&i instanceof Map&&Object.fromEntries?Object.fromEntries(i):o&&i instanceof Set&&Array.from?Array.from(i):i)}})(Lv);var Js=Lv.exports,Zc={transformStyles:jo,applyAnsiStyles({data:e}){return jo(e,TT,AT)},removeStyles({data:e}){return jo(e,()=>"")}};const Bv={unset:"\x1B[0m",black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"};function TT(e){const t=e.replace(/color:\s*(\w+).*/,"$1").toLowerCase();return Bv[t]||""}function AT(e){return e+Bv.unset}function jo(e,t,r){const n={};return e.reduce((a,i,s,o)=>{if(n[s])return a;if(typeof i=="string"){let u=s,c=!1;i=i.replace(/%[1cdfiOos]/g,l=>{if(u+=1,l!=="%c")return l;const f=o[u];return typeof f=="string"?(n[u]=!0,c=!0,t(f,i)):l}),c&&r&&(i=r(i))}return a.push(i),a},[])}const{concatFirstStringElements:wT,format:IT}=Rv,{maxDepth:OT,toJSON:xT}=Js,{applyAnsiStyles:DT,removeStyles:$T}=Zc,{transform:NT}=xi,vh={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};var RT=kv;const PT=process.platform==="win32"?">":"›",el=`%c{h}:{i}:{s}.{ms}{scope}%c ${PT} {text}`;Object.assign(kv,{DEFAULT_FORMAT:el});function kv(e){return Object.assign(t,{format:el,level:"silly",transforms:[LT,IT,kT,wT,OT,xT],useStyles:process.env.FORCE_STYLES,writeFn({message:r}){(vh[r.level]||vh.info)(...r.data)}});function t(r){const n=NT({logger:e,message:r,transport:t});t.writeFn({message:{...r,data:n}})}}function LT({data:e,message:t,transport:r}){return r.format!==el?e:[`color:${UT(t.level)}`,"color:unset",...e]}function BT(e,t){if(typeof e=="boolean")return e;const n=t==="error"||t==="warn"?process.stderr:process.stdout;return n&&n.isTTY}function kT(e){const{message:t,transport:r}=e;return(BT(r.useStyles,t.level)?DT:$T)(e)}function UT(e){const t={error:"red",warn:"yellow",info:"cyan",default:"unset"};return t[e]||t.default}const FT=Pt,ln=Nr,gh=wi;let MT=class extends FT{constructor({path:r,writeOptions:n={encoding:"utf8",flag:"a",mode:438},writeAsync:a=!1}){super();we(this,"asyncWriteQueue",[]);we(this,"bytesWritten",0);we(this,"hasActiveAsyncWriting",!1);we(this,"path",null);we(this,"initialSize");we(this,"writeOptions",null);we(this,"writeAsync",!1);this.path=r,this.writeOptions=n,this.writeAsync=a}get size(){return this.getSize()}clear(){try{return ln.writeFileSync(this.path,"",{mode:this.writeOptions.mode,flag:"w"}),this.reset(),!0}catch(r){return r.code==="ENOENT"?!0:(this.emit("error",r,this),!1)}}crop(r){try{const n=jT(this.path,r||4096);this.clear(),this.writeLine(`[log cropped]${gh.EOL}${n}`)}catch(n){this.emit("error",new Error(`Couldn't crop file ${this.path}. ${n.message}`),this)}}getSize(){if(this.initialSize===void 0)try{const r=ln.statSync(this.path);this.initialSize=r.size}catch{this.initialSize=0}return this.initialSize+this.bytesWritten}increaseBytesWrittenCounter(r){this.bytesWritten+=Buffer.byteLength(r,this.writeOptions.encoding)}isNull(){return!1}nextAsyncWrite(){const r=this;if(this.hasActiveAsyncWriting||this.asyncWriteQueue.length===0)return;const n=this.asyncWriteQueue.join("");this.asyncWriteQueue=[],this.hasActiveAsyncWriting=!0,ln.writeFile(this.path,n,this.writeOptions,a=>{r.hasActiveAsyncWriting=!1,a?r.emit("error",new Error(`Couldn't write to ${r.path}. ${a.message}`),this):r.increaseBytesWrittenCounter(n),r.nextAsyncWrite()})}reset(){this.initialSize=void 0,this.bytesWritten=0}toString(){return this.path}writeLine(r){if(r+=gh.EOL,this.writeAsync){this.asyncWriteQueue.push(r),this.nextAsyncWrite();return}try{ln.writeFileSync(this.path,r,this.writeOptions),this.increaseBytesWrittenCounter(r)}catch(n){this.emit("error",new Error(`Couldn't write to ${this.path}. ${n.message}`),this)}}};var Uv=MT;function jT(e,t){const r=Buffer.alloc(t),n=ln.statSync(e),a=Math.min(n.size,t),i=Math.max(0,n.size-t),s=ln.openSync(e,"r"),o=ln.readSync(s,r,0,a,i);return ln.closeSync(s),r.toString("utf8",0,o)}const VT=Uv;let YT=class extends VT{clear(){}crop(){}getSize(){return 0}isNull(){return!0}writeLine(){}};var KT=YT;const HT=Pt,_h=Nr,yh=Tn,GT=Uv,qT=KT;let zT=class extends HT{constructor(){super();we(this,"store",{});this.emitError=this.emitError.bind(this)}provide({filePath:r,writeOptions:n={},writeAsync:a=!1}){let i;try{if(r=yh.resolve(r),this.store[r])return this.store[r];i=this.createFile({filePath:r,writeOptions:n,writeAsync:a})}catch(s){i=new qT({path:r}),this.emitError(s,i)}return i.on("error",this.emitError),this.store[r]=i,i}createFile({filePath:r,writeOptions:n,writeAsync:a}){return this.testFileWriting({filePath:r,writeOptions:n}),new GT({path:r,writeOptions:n,writeAsync:a})}emitError(r,n){this.emit("error",r,n)}testFileWriting({filePath:r,writeOptions:n}){_h.mkdirSync(yh.dirname(r),{recursive:!0}),_h.writeFileSync(r,"",{flag:"a",mode:n.mode})}};var WT=zT;const Mi=Nr,QT=wi,Ja=Tn,XT=WT,{transform:JT}=xi,{removeStyles:ZT}=Zc,{format:eA,concatFirstStringElements:tA}=Rv,{toString:rA}=Js;var nA=iA;const aA=new XT;function iA(e,{registry:t=aA,externalApi:r}={}){let n;return t.listenerCount("error")<1&&t.on("error",(c,l)=>{s(`Can't write to ${l}`,c)}),Object.assign(a,{fileName:sA(e.variables.processType),format:"[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}]{scope} {text}",getFile:o,inspectOptions:{depth:5},level:"silly",maxSize:1024**2,readAllLogs:u,sync:!0,transforms:[ZT,eA,tA,rA],writeOptions:{flag:"a",mode:438,encoding:"utf8"},archiveLogFn(c){const l=c.toString(),f=Ja.parse(l);try{Mi.renameSync(l,Ja.join(f.dir,`${f.name}.old${f.ext}`))}catch(d){s("Could not rotate log",d);const p=Math.round(a.maxSize/4);c.crop(Math.min(p,256*1024))}},resolvePathFn(c){return Ja.join(c.libraryDefaultDir,c.fileName)},setAppName(c){e.dependencies.externalApi.setAppName(c)}});function a(c){const l=o(c);a.maxSize>0&&l.size>a.maxSize&&(a.archiveLogFn(l),l.reset());const d=JT({logger:e,message:c,transport:a});l.writeLine(d)}function i(){n||(n=Object.create(Object.prototype,{...Object.getOwnPropertyDescriptors(r.getPathVariables()),fileName:{get(){return a.fileName},enumerable:!0}}),typeof a.archiveLog=="function"&&(a.archiveLogFn=a.archiveLog,s("archiveLog is deprecated. Use archiveLogFn instead")),typeof a.resolvePath=="function"&&(a.resolvePathFn=a.resolvePath,s("resolvePath is deprecated. Use resolvePathFn instead")))}function s(c,l=null,f="error"){const d=[`electron-log.transports.file: ${c}`];l&&d.push(l),e.transports.console({data:d,date:new Date,level:f})}function o(c){i();const l=a.resolvePathFn(n,c);return t.provide({filePath:l,writeAsync:!a.sync,writeOptions:a.writeOptions})}function u({fileFilter:c=l=>l.endsWith(".log")}={}){i();const l=Ja.dirname(a.resolvePathFn(n));return Mi.existsSync(l)?Mi.readdirSync(l).map(f=>Ja.join(l,f)).filter(c).map(f=>{try{return{path:f,lines:Mi.readFileSync(f,"utf8").split(QT.EOL)}}catch{return null}}).filter(Boolean):[]}}function sA(e=process.type){switch(e){case"renderer":return"renderer.log";case"worker":return"worker.log";default:return"main.log"}}const{maxDepth:oA,toJSON:uA}=Js,{transform:cA}=xi;var lA=fA;function fA(e,{externalApi:t}){return Object.assign(r,{depth:3,eventId:"__ELECTRON_LOG_IPC__",level:e.isDev?"silly":!1,transforms:[uA,oA]}),t!=null&&t.isElectron()?r:void 0;function r(n){var a;((a=n==null?void 0:n.variables)==null?void 0:a.processType)!=="renderer"&&(t==null||t.sendIpc(r.eventId,{...n,data:cA({logger:e,message:n,transport:r})}))}}const dA=Xy,hA=Jy,{transform:pA}=xi,{removeStyles:mA}=Zc,{toJSON:vA,maxDepth:gA}=Js;var _A=yA;function yA(e){return Object.assign(t,{client:{name:"electron-application"},depth:6,level:!1,requestOptions:{},transforms:[mA,vA,gA],makeBodyFn({message:r}){return JSON.stringify({client:t.client,data:r.data,date:r.date.getTime(),level:r.level,scope:r.scope,variables:r.variables})},processErrorFn({error:r}){e.processMessage({data:[`electron-log: can't POST ${t.url}`,r],level:"warn"},{transports:["console","file"]})},sendRequestFn({serverUrl:r,requestOptions:n,body:a}){const s=(r.startsWith("https:")?hA:dA).request(r,{method:"POST",...n,headers:{"Content-Type":"application/json","Content-Length":a.length,...n.headers}});return s.write(a),s.end(),s}});function t(r){if(!t.url)return;const n=t.makeBodyFn({logger:e,message:{...r,data:pA({logger:e,message:r,transport:t})},transport:t}),a=t.sendRequestFn({serverUrl:t.url,requestOptions:t.requestOptions,body:Buffer.from(n,"utf8")});a.on("error",i=>t.processErrorFn({error:i,logger:e,message:r,request:a,transport:t}))}}const Eh=mT,EA=_T,CA=ET,SA=RT,bA=nA,TA=lA,AA=_A;var wA=IA;function IA({dependencies:e,initializeFn:t}){var n;const r=new Eh({dependencies:e,errorHandler:new EA,eventLogger:new CA,initializeFn:t,isDev:(n=e.externalApi)==null?void 0:n.isDev(),logId:"default",transportFactories:{console:SA,file:bA,ipc:TA,remote:AA},variables:{processType:"main"}});return r.default=r,r.Logger=Eh,r.processInternalErrorFn=a=>{r.transports.console.writeFn({message:{data:["Unhandled electron-log error",a],level:"error"}})},r}const OA=We,xA=aT,{initialize:DA}=uT,$A=wA,tl=new xA({electron:OA}),Zs=$A({dependencies:{externalApi:tl},initializeFn:DA});var NA=Zs;tl.onIpc("__ELECTRON_LOG__",(e,t)=>{t.scope&&Zs.Logger.getInstance(t).scope(t.scope);const r=new Date(t.date);Fv({...t,date:r.getTime()?r:new Date})});tl.onIpcInvoke("__ELECTRON_LOG__",(e,{cmd:t="",logId:r})=>{switch(t){case"getOptions":return{levels:Zs.Logger.getInstance({logId:r}).levels,logId:r};default:return Fv({data:[`Unknown cmd '${t}'`],level:"error"}),{}}});function Fv(e){var t;(t=Zs.Logger.getInstance(e))==null||t.processMessage(e)}const RA=NA;var PA=RA;const Si=Ba(PA);Si.transports.console.level=!1;const Vo=Object.keys(Si.functions),Ch=()=>{var e;return(e=Si.transports.file.getFile())==null?void 0:e.path},oc={...Ss(Si,["initialize",...Vo]),levels:Vo,functions:Ss(Si,Vo),getFilePath:Ch,openInEditor:()=>We.shell.openPath(Ch())},zn=e=>{const t=typeof e;return e!==null&&(t==="object"||t==="function")},Yo=new Set(["__proto__","prototype","constructor"]),LA=new Set("0123456789");function eo(e){const t=[];let r="",n="start",a=!1;for(const i of e)switch(i){case"\\":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");a&&(r+=i),n="property",a=!a;break}case".":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="property";break}if(a){a=!1,r+=i;break}if(Yo.has(r))return[];t.push(r),r="",n="property";break}case"[":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="index";break}if(a){a=!1,r+=i;break}if(n==="property"){if(Yo.has(r))return[];t.push(r),r=""}n="index";break}case"]":{if(n==="index"){t.push(Number.parseInt(r,10)),r="",n="indexEnd";break}if(n==="indexEnd")throw new Error("Invalid character after an index")}default:{if(n==="index"&&!LA.has(i))throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");n==="start"&&(n="property"),a&&(a=!1,r+="\\"),r+=i}}switch(a&&(r+="\\"),n){case"property":{if(Yo.has(r))return[];t.push(r);break}case"index":throw new Error("Index was not closed");case"start":{t.push("");break}}return t}function rl(e,t){if(typeof t!="number"&&Array.isArray(e)){const r=Number.parseInt(t,10);return Number.isInteger(r)&&e[r]===e[t]}return!1}function Mv(e,t){if(rl(e,t))throw new Error("Cannot use string index")}function BA(e,t,r){if(!zn(e)||typeof t!="string")return r===void 0?e:r;const n=eo(t);if(n.length===0)return r;for(let a=0;a<n.length;a++){const i=n[a];if(rl(e,i)?e=a===n.length-1?void 0:null:e=e[i],e==null){if(a!==n.length-1)return r;break}}return e===void 0?r:e}function Sh(e,t,r){if(!zn(e)||typeof t!="string")return e;const n=e,a=eo(t);for(let i=0;i<a.length;i++){const s=a[i];Mv(e,s),i===a.length-1?e[s]=r:zn(e[s])||(e[s]=typeof a[i+1]=="number"?[]:{}),e=e[s]}return n}function kA(e,t){if(!zn(e)||typeof t!="string")return!1;const r=eo(t);for(let n=0;n<r.length;n++){const a=r[n];if(Mv(e,a),n===r.length-1)return delete e[a],!0;if(e=e[a],!zn(e))return!1}}function UA(e,t){if(!zn(e)||typeof t!="string")return!1;const r=eo(t);if(r.length===0)return!1;for(const n of r){if(!zn(e)||!(n in e)||rl(e,n))return!1;e=e[n]}return!0}const un=Hs.homedir(),nl=Hs.tmpdir(),{env:Ea}=Ct,FA=e=>{const t=Be.join(un,"Library");return{data:Be.join(t,"Application Support",e),config:Be.join(t,"Preferences",e),cache:Be.join(t,"Caches",e),log:Be.join(t,"Logs",e),temp:Be.join(nl,e)}},MA=e=>{const t=Ea.APPDATA||Be.join(un,"AppData","Roaming"),r=Ea.LOCALAPPDATA||Be.join(un,"AppData","Local");return{data:Be.join(r,e,"Data"),config:Be.join(t,e,"Config"),cache:Be.join(r,e,"Cache"),log:Be.join(r,e,"Log"),temp:Be.join(nl,e)}},jA=e=>{const t=Be.basename(un);return{data:Be.join(Ea.XDG_DATA_HOME||Be.join(un,".local","share"),e),config:Be.join(Ea.XDG_CONFIG_HOME||Be.join(un,".config"),e),cache:Be.join(Ea.XDG_CACHE_HOME||Be.join(un,".cache"),e),log:Be.join(Ea.XDG_STATE_HOME||Be.join(un,".local","state"),e),temp:Be.join(nl,t,e)}};function VA(e,{suffix:t="nodejs"}={}){if(typeof e!="string")throw new TypeError(`Expected a string, got ${typeof e}`);return t&&(e+=`-${t}`),Ct.platform==="darwin"?FA(e):Ct.platform==="win32"?MA(e):jA(e)}const Zr=(e,t)=>function(...n){return e.apply(void 0,n).catch(t)},Ur=(e,t)=>function(...n){try{return e.apply(void 0,n)}catch(a){return t(a)}},YA=Ct.getuid?!Ct.getuid():!1,KA=1e4,Xt=()=>{},ct={isChangeErrorOk:e=>{if(!ct.isNodeError(e))return!1;const{code:t}=e;return t==="ENOSYS"||!YA&&(t==="EINVAL"||t==="EPERM")},isNodeError:e=>e instanceof Error,isRetriableError:e=>{if(!ct.isNodeError(e))return!1;const{code:t}=e;return t==="EMFILE"||t==="ENFILE"||t==="EAGAIN"||t==="EBUSY"||t==="EACCESS"||t==="EACCES"||t==="EACCS"||t==="EPERM"},onChangeError:e=>{if(!ct.isNodeError(e))throw e;if(!ct.isChangeErrorOk(e))throw e}};class HA{constructor(){this.interval=25,this.intervalId=void 0,this.limit=KA,this.queueActive=new Set,this.queueWaiting=new Set,this.init=()=>{this.intervalId||(this.intervalId=setInterval(this.tick,this.interval))},this.reset=()=>{this.intervalId&&(clearInterval(this.intervalId),delete this.intervalId)},this.add=t=>{this.queueWaiting.add(t),this.queueActive.size<this.limit/2?this.tick():this.init()},this.remove=t=>{this.queueWaiting.delete(t),this.queueActive.delete(t)},this.schedule=()=>new Promise(t=>{const r=()=>this.remove(n),n=()=>t(r);this.add(n)}),this.tick=()=>{if(!(this.queueActive.size>=this.limit)){if(!this.queueWaiting.size)return this.reset();for(const t of this.queueWaiting){if(this.queueActive.size>=this.limit)break;this.queueWaiting.delete(t),this.queueActive.add(t),t()}}}}}const GA=new HA,en=(e,t)=>function(n){return function a(...i){return GA.schedule().then(s=>{const o=c=>(s(),c),u=c=>{if(s(),Date.now()>=n)throw c;if(t(c)){const l=Math.round(100*Math.random());return new Promise(d=>setTimeout(d,l)).then(()=>a.apply(void 0,i))}throw c};return e.apply(void 0,i).then(o,u)})}},tn=(e,t)=>function(n){return function a(...i){try{return e.apply(void 0,i)}catch(s){if(Date.now()>n)throw s;if(t(s))return a.apply(void 0,i);throw s}}},Bt={attempt:{chmod:Zr(yt.promisify(Ae.chmod),ct.onChangeError),chown:Zr(yt.promisify(Ae.chown),ct.onChangeError),close:Zr(yt.promisify(Ae.close),Xt),fsync:Zr(yt.promisify(Ae.fsync),Xt),mkdir:Zr(yt.promisify(Ae.mkdir),Xt),realpath:Zr(yt.promisify(Ae.realpath),Xt),stat:Zr(yt.promisify(Ae.stat),Xt),unlink:Zr(yt.promisify(Ae.unlink),Xt),chmodSync:Ur(Ae.chmodSync,ct.onChangeError),chownSync:Ur(Ae.chownSync,ct.onChangeError),closeSync:Ur(Ae.closeSync,Xt),existsSync:Ur(Ae.existsSync,Xt),fsyncSync:Ur(Ae.fsync,Xt),mkdirSync:Ur(Ae.mkdirSync,Xt),realpathSync:Ur(Ae.realpathSync,Xt),statSync:Ur(Ae.statSync,Xt),unlinkSync:Ur(Ae.unlinkSync,Xt)},retry:{close:en(yt.promisify(Ae.close),ct.isRetriableError),fsync:en(yt.promisify(Ae.fsync),ct.isRetriableError),open:en(yt.promisify(Ae.open),ct.isRetriableError),readFile:en(yt.promisify(Ae.readFile),ct.isRetriableError),rename:en(yt.promisify(Ae.rename),ct.isRetriableError),stat:en(yt.promisify(Ae.stat),ct.isRetriableError),write:en(yt.promisify(Ae.write),ct.isRetriableError),writeFile:en(yt.promisify(Ae.writeFile),ct.isRetriableError),closeSync:tn(Ae.closeSync,ct.isRetriableError),fsyncSync:tn(Ae.fsyncSync,ct.isRetriableError),openSync:tn(Ae.openSync,ct.isRetriableError),readFileSync:tn(Ae.readFileSync,ct.isRetriableError),renameSync:tn(Ae.renameSync,ct.isRetriableError),statSync:tn(Ae.statSync,ct.isRetriableError),writeSync:tn(Ae.writeSync,ct.isRetriableError),writeFileSync:tn(Ae.writeFileSync,ct.isRetriableError)}},qA="utf8",bh=438,zA=511,WA={},QA=Hs.userInfo().uid,XA=Hs.userInfo().gid,JA=1e3,ZA=!!Ct.getuid;Ct.getuid&&Ct.getuid();const Th=128,ew=e=>e instanceof Error&&"code"in e,Ah=e=>typeof e=="string",Ko=e=>e===void 0,tw=Ct.platform==="linux",jv=Ct.platform==="win32",al=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];jv||al.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");tw&&al.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED");class rw{constructor(){this.callbacks=new Set,this.exited=!1,this.exit=t=>{if(!this.exited){this.exited=!0;for(const r of this.callbacks)r();t&&(jv&&t!=="SIGINT"&&t!=="SIGTERM"&&t!=="SIGKILL"?Ct.kill(Ct.pid,"SIGTERM"):Ct.kill(Ct.pid,t))}},this.hook=()=>{Ct.once("exit",()=>this.exit());for(const t of al)try{Ct.once(t,()=>this.exit(t))}catch{}},this.register=t=>(this.callbacks.add(t),()=>{this.callbacks.delete(t)}),this.hook()}}const nw=new rw,aw=nw.register,kt={store:{},create:e=>{const t=`000000${Math.floor(Math.random()*16777215).toString(16)}`.slice(-6),a=`.tmp-${Date.now().toString().slice(-10)}${t}`;return`${e}${a}`},get:(e,t,r=!0)=>{const n=kt.truncate(t(e));return n in kt.store?kt.get(e,t,r):(kt.store[n]=r,[n,()=>delete kt.store[n]])},purge:e=>{kt.store[e]&&(delete kt.store[e],Bt.attempt.unlink(e))},purgeSync:e=>{kt.store[e]&&(delete kt.store[e],Bt.attempt.unlinkSync(e))},purgeSyncAll:()=>{for(const e in kt.store)kt.purgeSync(e)},truncate:e=>{const t=Be.basename(e);if(t.length<=Th)return e;const r=/^(\.?)(.*?)((?:\.[^.]+)?(?:\.tmp-\d{10}[a-f0-9]{6})?)$/.exec(t);if(!r)return e;const n=t.length-Th;return`${e.slice(0,-t.length)}${r[1]}${r[2].slice(0,-n)}${r[3]}`}};aw(kt.purgeSyncAll);function Vv(e,t,r=WA){if(Ah(r))return Vv(e,t,{encoding:r});const n=Date.now()+((r.timeout??JA)||-1);let a=null,i=null,s=null;try{const o=Bt.attempt.realpathSync(e),u=!!o;e=o||e,[i,a]=kt.get(e,r.tmpCreate||kt.create,r.tmpPurge!==!1);const c=ZA&&Ko(r.chown),l=Ko(r.mode);if(u&&(c||l)){const f=Bt.attempt.statSync(e);f&&(r={...r},c&&(r.chown={uid:f.uid,gid:f.gid}),l&&(r.mode=f.mode))}if(!u){const f=Be.dirname(e);Bt.attempt.mkdirSync(f,{mode:zA,recursive:!0})}s=Bt.retry.openSync(n)(i,"w",r.mode||bh),r.tmpCreated&&r.tmpCreated(i),Ah(t)?Bt.retry.writeSync(n)(s,t,0,r.encoding||qA):Ko(t)||Bt.retry.writeSync(n)(s,t,0,t.length,0),r.fsync!==!1&&(r.fsyncWait!==!1?Bt.retry.fsyncSync(n)(s):Bt.attempt.fsync(s)),Bt.retry.closeSync(n)(s),s=null,r.chown&&(r.chown.uid!==QA||r.chown.gid!==XA)&&Bt.attempt.chownSync(i,r.chown.uid,r.chown.gid),r.mode&&r.mode!==bh&&Bt.attempt.chmodSync(i,r.mode);try{Bt.retry.renameSync(n)(i,e)}catch(f){if(!ew(f)||f.code!=="ENAMETOOLONG")throw f;Bt.retry.renameSync(n)(i,kt.truncate(e))}a(),i=null}finally{s&&Bt.attempt.closeSync(s),i&&kt.purge(i)}}var uc={exports:{}},Yv={},gr={},$a={},Di={},xe={},bi={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(b){if(super(),!e.IDENTIFIER.test(b))throw new Error("CodeGen: name must be a valid identifier");this.str=b}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(b){super(),this._items=typeof b=="string"?[b]:b}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const b=this._items[0];return b===""||b==='""'}get str(){var b;return(b=this._str)!==null&&b!==void 0?b:this._str=this._items.reduce((A,D)=>`${A}${D}`,"")}get names(){var b;return(b=this._names)!==null&&b!==void 0?b:this._names=this._items.reduce((A,D)=>(D instanceof r&&(A[D.str]=(A[D.str]||0)+1),A),{})}}e._Code=n,e.nil=new n("");function a(m,...b){const A=[m[0]];let D=0;for(;D<b.length;)o(A,b[D]),A.push(m[++D]);return new n(A)}e._=a;const i=new n("+");function s(m,...b){const A=[p(m[0])];let D=0;for(;D<b.length;)A.push(i),o(A,b[D]),A.push(i,p(m[++D]));return u(A),new n(A)}e.str=s;function o(m,b){b instanceof n?m.push(...b._items):b instanceof r?m.push(b):m.push(f(b))}e.addCodeArg=o;function u(m){let b=1;for(;b<m.length-1;){if(m[b]===i){const A=c(m[b-1],m[b+1]);if(A!==void 0){m.splice(b-1,3,A);continue}m[b++]="+"}b++}}function c(m,b){if(b==='""')return m;if(m==='""')return b;if(typeof m=="string")return b instanceof r||m[m.length-1]!=='"'?void 0:typeof b!="string"?`${m.slice(0,-1)}${b}"`:b[0]==='"'?m.slice(0,-1)+b.slice(1):void 0;if(typeof b=="string"&&b[0]==='"'&&!(m instanceof r))return`"${m}${b.slice(1)}`}function l(m,b){return b.emptyStr()?m:m.emptyStr()?b:s`${m}${b}`}e.strConcat=l;function f(m){return typeof m=="number"||typeof m=="boolean"||m===null?m:p(Array.isArray(m)?m.join(","):m)}function d(m){return new n(p(m))}e.stringify=d;function p(m){return JSON.stringify(m).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=p;function h(m){return typeof m=="string"&&e.IDENTIFIER.test(m)?new n(`.${m}`):a`[${m}]`}e.getProperty=h;function _(m){if(typeof m=="string"&&e.IDENTIFIER.test(m))return new n(`${m}`);throw new Error(`CodeGen: invalid export name: ${m}, use explicit $id name mapping`)}e.getEsmExportName=_;function v(m){return new n(m.toString())}e.regexpCode=v})(bi);var cc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=bi;class r extends Error{constructor(c){super(`CodeGen: "code" for ${c} not defined`),this.value=c.value}}var n;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class a{constructor({prefixes:c,parent:l}={}){this._names={},this._prefixes=c,this._parent=l}toName(c){return c instanceof t.Name?c:this.name(c)}name(c){return new t.Name(this._newName(c))}_newName(c){const l=this._names[c]||this._nameGroup(c);return`${c}${l.index++}`}_nameGroup(c){var l,f;if(!((f=(l=this._parent)===null||l===void 0?void 0:l._prefixes)===null||f===void 0)&&f.has(c)||this._prefixes&&!this._prefixes.has(c))throw new Error(`CodeGen: prefix "${c}" is not allowed in this scope`);return this._names[c]={prefix:c,index:0}}}e.Scope=a;class i extends t.Name{constructor(c,l){super(l),this.prefix=c}setValue(c,{property:l,itemIndex:f}){this.value=c,this.scopePath=(0,t._)`.${new t.Name(l)}[${f}]`}}e.ValueScopeName=i;const s=(0,t._)`\n`;class o extends a{constructor(c){super(c),this._values={},this._scope=c.scope,this.opts={...c,_n:c.lines?s:t.nil}}get(){return this._scope}name(c){return new i(c,this._newName(c))}value(c,l){var f;if(l.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(c),{prefix:p}=d,h=(f=l.key)!==null&&f!==void 0?f:l.ref;let _=this._values[p];if(_){const b=_.get(h);if(b)return b}else _=this._values[p]=new Map;_.set(h,d);const v=this._scope[p]||(this._scope[p]=[]),m=v.length;return v[m]=l.ref,d.setValue(l,{property:p,itemIndex:m}),d}getValue(c,l){const f=this._values[c];if(f)return f.get(l)}scopeRefs(c,l=this._values){return this._reduceValues(l,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${c}${f.scopePath}`})}scopeCode(c=this._values,l,f){return this._reduceValues(c,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},l,f)}_reduceValues(c,l,f={},d){let p=t.nil;for(const h in c){const _=c[h];if(!_)continue;const v=f[h]=f[h]||new Map;_.forEach(m=>{if(v.has(m))return;v.set(m,n.Started);let b=l(m);if(b){const A=this.opts.es5?e.varKinds.var:e.varKinds.const;p=(0,t._)`${p}${A} ${m} = ${b};${this.opts._n}`}else if(b=d==null?void 0:d(m))p=(0,t._)`${p}${b}${this.opts._n}`;else throw new r(m);v.set(m,n.Completed)})}return p}}e.ValueScope=o})(cc);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=bi,r=cc;var n=bi;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var a=cc;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return a.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return a.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return a.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return a.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class i{optimizeNodes(){return this}optimizeNames(y,C){return this}}class s extends i{constructor(y,C,I){super(),this.varKind=y,this.name=C,this.rhs=I}render({es5:y,_n:C}){const I=y?r.varKinds.var:this.varKind,j=this.rhs===void 0?"":` = ${this.rhs}`;return`${I} ${this.name}${j};`+C}optimizeNames(y,C){if(y[this.name.str])return this.rhs&&(this.rhs=M(this.rhs,y,C)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class o extends i{constructor(y,C,I){super(),this.lhs=y,this.rhs=C,this.sideEffects=I}render({_n:y}){return`${this.lhs} = ${this.rhs};`+y}optimizeNames(y,C){if(!(this.lhs instanceof t.Name&&!y[this.lhs.str]&&!this.sideEffects))return this.rhs=M(this.rhs,y,C),this}get names(){const y=this.lhs instanceof t.Name?{}:{...this.lhs.names};return z(y,this.rhs)}}class u extends o{constructor(y,C,I,j){super(y,I,j),this.op=C}render({_n:y}){return`${this.lhs} ${this.op}= ${this.rhs};`+y}}class c extends i{constructor(y){super(),this.label=y,this.names={}}render({_n:y}){return`${this.label}:`+y}}class l extends i{constructor(y){super(),this.label=y,this.names={}}render({_n:y}){return`break${this.label?` ${this.label}`:""};`+y}}class f extends i{constructor(y){super(),this.error=y}render({_n:y}){return`throw ${this.error};`+y}get names(){return this.error.names}}class d extends i{constructor(y){super(),this.code=y}render({_n:y}){return`${this.code};`+y}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(y,C){return this.code=M(this.code,y,C),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class p extends i{constructor(y=[]){super(),this.nodes=y}render(y){return this.nodes.reduce((C,I)=>C+I.render(y),"")}optimizeNodes(){const{nodes:y}=this;let C=y.length;for(;C--;){const I=y[C].optimizeNodes();Array.isArray(I)?y.splice(C,1,...I):I?y[C]=I:y.splice(C,1)}return y.length>0?this:void 0}optimizeNames(y,C){const{nodes:I}=this;let j=I.length;for(;j--;){const q=I[j];q.optimizeNames(y,C)||(N(y,q.names),I.splice(j,1))}return I.length>0?this:void 0}get names(){return this.nodes.reduce((y,C)=>oe(y,C.names),{})}}class h extends p{render(y){return"{"+y._n+super.render(y)+"}"+y._n}}class _ extends p{}class v extends h{}v.kind="else";class m extends h{constructor(y,C){super(C),this.condition=y}render(y){let C=`if(${this.condition})`+super.render(y);return this.else&&(C+="else "+this.else.render(y)),C}optimizeNodes(){super.optimizeNodes();const y=this.condition;if(y===!0)return this.nodes;let C=this.else;if(C){const I=C.optimizeNodes();C=this.else=Array.isArray(I)?new v(I):I}if(C)return y===!1?C instanceof m?C:C.nodes:this.nodes.length?this:new m(U(y),C instanceof m?[C]:C.nodes);if(!(y===!1||!this.nodes.length))return this}optimizeNames(y,C){var I;if(this.else=(I=this.else)===null||I===void 0?void 0:I.optimizeNames(y,C),!!(super.optimizeNames(y,C)||this.else))return this.condition=M(this.condition,y,C),this}get names(){const y=super.names;return z(y,this.condition),this.else&&oe(y,this.else.names),y}}m.kind="if";class b extends h{}b.kind="for";class A extends b{constructor(y){super(),this.iteration=y}render(y){return`for(${this.iteration})`+super.render(y)}optimizeNames(y,C){if(super.optimizeNames(y,C))return this.iteration=M(this.iteration,y,C),this}get names(){return oe(super.names,this.iteration.names)}}class D extends b{constructor(y,C,I,j){super(),this.varKind=y,this.name=C,this.from=I,this.to=j}render(y){const C=y.es5?r.varKinds.var:this.varKind,{name:I,from:j,to:q}=this;return`for(${C} ${I}=${j}; ${I}<${q}; ${I}++)`+super.render(y)}get names(){const y=z(super.names,this.from);return z(y,this.to)}}class x extends b{constructor(y,C,I,j){super(),this.loop=y,this.varKind=C,this.name=I,this.iterable=j}render(y){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(y)}optimizeNames(y,C){if(super.optimizeNames(y,C))return this.iterable=M(this.iterable,y,C),this}get names(){return oe(super.names,this.iterable.names)}}class Y extends h{constructor(y,C,I){super(),this.name=y,this.args=C,this.async=I}render(y){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(y)}}Y.kind="func";class X extends p{render(y){return"return "+super.render(y)}}X.kind="return";class Z extends h{render(y){let C="try"+super.render(y);return this.catch&&(C+=this.catch.render(y)),this.finally&&(C+=this.finally.render(y)),C}optimizeNodes(){var y,C;return super.optimizeNodes(),(y=this.catch)===null||y===void 0||y.optimizeNodes(),(C=this.finally)===null||C===void 0||C.optimizeNodes(),this}optimizeNames(y,C){var I,j;return super.optimizeNames(y,C),(I=this.catch)===null||I===void 0||I.optimizeNames(y,C),(j=this.finally)===null||j===void 0||j.optimizeNames(y,C),this}get names(){const y=super.names;return this.catch&&oe(y,this.catch.names),this.finally&&oe(y,this.finally.names),y}}class W extends h{constructor(y){super(),this.error=y}render(y){return`catch(${this.error})`+super.render(y)}}W.kind="catch";class J extends h{render(y){return"finally"+super.render(y)}}J.kind="finally";class ee{constructor(y,C={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...C,_n:C.lines?`
`:""},this._extScope=y,this._scope=new r.Scope({parent:y}),this._nodes=[new _]}toString(){return this._root.render(this.opts)}name(y){return this._scope.name(y)}scopeName(y){return this._extScope.name(y)}scopeValue(y,C){const I=this._extScope.value(y,C);return(this._values[I.prefix]||(this._values[I.prefix]=new Set)).add(I),I}getScopeValue(y,C){return this._extScope.getValue(y,C)}scopeRefs(y){return this._extScope.scopeRefs(y,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(y,C,I,j){const q=this._scope.toName(C);return I!==void 0&&j&&(this._constants[q.str]=I),this._leafNode(new s(y,q,I)),q}const(y,C,I){return this._def(r.varKinds.const,y,C,I)}let(y,C,I){return this._def(r.varKinds.let,y,C,I)}var(y,C,I){return this._def(r.varKinds.var,y,C,I)}assign(y,C,I){return this._leafNode(new o(y,C,I))}add(y,C){return this._leafNode(new u(y,e.operators.ADD,C))}code(y){return typeof y=="function"?y():y!==t.nil&&this._leafNode(new d(y)),this}object(...y){const C=["{"];for(const[I,j]of y)C.length>1&&C.push(","),C.push(I),(I!==j||this.opts.es5)&&(C.push(":"),(0,t.addCodeArg)(C,j));return C.push("}"),new t._Code(C)}if(y,C,I){if(this._blockNode(new m(y)),C&&I)this.code(C).else().code(I).endIf();else if(C)this.code(C).endIf();else if(I)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(y){return this._elseNode(new m(y))}else(){return this._elseNode(new v)}endIf(){return this._endBlockNode(m,v)}_for(y,C){return this._blockNode(y),C&&this.code(C).endFor(),this}for(y,C){return this._for(new A(y),C)}forRange(y,C,I,j,q=this.opts.es5?r.varKinds.var:r.varKinds.let){const se=this._scope.toName(y);return this._for(new D(q,se,C,I),()=>j(se))}forOf(y,C,I,j=r.varKinds.const){const q=this._scope.toName(y);if(this.opts.es5){const se=C instanceof t.Name?C:this.var("_arr",C);return this.forRange("_i",0,(0,t._)`${se}.length`,ue=>{this.var(q,(0,t._)`${se}[${ue}]`),I(q)})}return this._for(new x("of",j,q,C),()=>I(q))}forIn(y,C,I,j=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(y,(0,t._)`Object.keys(${C})`,I);const q=this._scope.toName(y);return this._for(new x("in",j,q,C),()=>I(q))}endFor(){return this._endBlockNode(b)}label(y){return this._leafNode(new c(y))}break(y){return this._leafNode(new l(y))}return(y){const C=new X;if(this._blockNode(C),this.code(y),C.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(X)}try(y,C,I){if(!C&&!I)throw new Error('CodeGen: "try" without "catch" and "finally"');const j=new Z;if(this._blockNode(j),this.code(y),C){const q=this.name("e");this._currNode=j.catch=new W(q),C(q)}return I&&(this._currNode=j.finally=new J,this.code(I)),this._endBlockNode(W,J)}throw(y){return this._leafNode(new f(y))}block(y,C){return this._blockStarts.push(this._nodes.length),y&&this.code(y).endBlock(C),this}endBlock(y){const C=this._blockStarts.pop();if(C===void 0)throw new Error("CodeGen: not in self-balancing block");const I=this._nodes.length-C;if(I<0||y!==void 0&&I!==y)throw new Error(`CodeGen: wrong number of nodes: ${I} vs ${y} expected`);return this._nodes.length=C,this}func(y,C=t.nil,I,j){return this._blockNode(new Y(y,C,I)),j&&this.code(j).endFunc(),this}endFunc(){return this._endBlockNode(Y)}optimize(y=1){for(;y-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(y){return this._currNode.nodes.push(y),this}_blockNode(y){this._currNode.nodes.push(y),this._nodes.push(y)}_endBlockNode(y,C){const I=this._currNode;if(I instanceof y||C&&I instanceof C)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${C?`${y.kind}/${C.kind}`:y.kind}"`)}_elseNode(y){const C=this._currNode;if(!(C instanceof m))throw new Error('CodeGen: "else" without "if"');return this._currNode=C.else=y,this}get _root(){return this._nodes[0]}get _currNode(){const y=this._nodes;return y[y.length-1]}set _currNode(y){const C=this._nodes;C[C.length-1]=y}}e.CodeGen=ee;function oe(g,y){for(const C in y)g[C]=(g[C]||0)+(y[C]||0);return g}function z(g,y){return y instanceof t._CodeOrName?oe(g,y.names):g}function M(g,y,C){if(g instanceof t.Name)return I(g);if(!j(g))return g;return new t._Code(g._items.reduce((q,se)=>(se instanceof t.Name&&(se=I(se)),se instanceof t._Code?q.push(...se._items):q.push(se),q),[]));function I(q){const se=C[q.str];return se===void 0||y[q.str]!==1?q:(delete y[q.str],se)}function j(q){return q instanceof t._Code&&q._items.some(se=>se instanceof t.Name&&y[se.str]===1&&C[se.str]!==void 0)}}function N(g,y){for(const C in y)g[C]=(g[C]||0)-(y[C]||0)}function U(g){return typeof g=="boolean"||typeof g=="number"||g===null?!g:(0,t._)`!${P(g)}`}e.not=U;const L=O(e.operators.AND);function H(...g){return g.reduce(L)}e.and=H;const w=O(e.operators.OR);function R(...g){return g.reduce(w)}e.or=R;function O(g){return(y,C)=>y===t.nil?C:C===t.nil?y:(0,t._)`${P(y)} ${g} ${P(C)}`}function P(g){return g instanceof t.Name?g:(0,t._)`(${g})`}})(xe);var pe={};Object.defineProperty(pe,"__esModule",{value:!0});pe.checkStrictMode=pe.getErrorPath=pe.Type=pe.useFunc=pe.setEvaluated=pe.evaluatedPropsToName=pe.mergeEvaluated=pe.eachItem=pe.unescapeJsonPointer=pe.escapeJsonPointer=pe.escapeFragment=pe.unescapeFragment=pe.schemaRefOrVal=pe.schemaHasRulesButRef=pe.schemaHasRules=pe.checkUnknownRules=pe.alwaysValidSchema=pe.toHash=void 0;const Xe=xe,iw=bi;function sw(e){const t={};for(const r of e)t[r]=!0;return t}pe.toHash=sw;function ow(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Kv(e,t),!Hv(t,e.self.RULES.all))}pe.alwaysValidSchema=ow;function Kv(e,t=e.schema){const{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;const a=n.RULES.keywords;for(const i in t)a[i]||zv(e,`unknown keyword: "${i}"`)}pe.checkUnknownRules=Kv;function Hv(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(t[r])return!0;return!1}pe.schemaHasRules=Hv;function uw(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}pe.schemaHasRulesButRef=uw;function cw({topSchemaRef:e,schemaPath:t},r,n,a){if(!a){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Xe._)`${r}`}return(0,Xe._)`${e}${t}${(0,Xe.getProperty)(n)}`}pe.schemaRefOrVal=cw;function lw(e){return Gv(decodeURIComponent(e))}pe.unescapeFragment=lw;function fw(e){return encodeURIComponent(il(e))}pe.escapeFragment=fw;function il(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}pe.escapeJsonPointer=il;function Gv(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}pe.unescapeJsonPointer=Gv;function dw(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)}pe.eachItem=dw;function wh({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(a,i,s,o)=>{const u=s===void 0?i:s instanceof Xe.Name?(i instanceof Xe.Name?e(a,i,s):t(a,i,s),s):i instanceof Xe.Name?(t(a,s,i),i):r(i,s);return o===Xe.Name&&!(u instanceof Xe.Name)?n(a,u):u}}pe.mergeEvaluated={props:wh({mergeNames:(e,t,r)=>e.if((0,Xe._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,Xe._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,Xe._)`${r} || {}`).code((0,Xe._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,Xe._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,Xe._)`${r} || {}`),sl(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:qv}),items:wh({mergeNames:(e,t,r)=>e.if((0,Xe._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,Xe._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,Xe._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,Xe._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function qv(e,t){if(t===!0)return e.var("props",!0);const r=e.var("props",(0,Xe._)`{}`);return t!==void 0&&sl(e,r,t),r}pe.evaluatedPropsToName=qv;function sl(e,t,r){Object.keys(r).forEach(n=>e.assign((0,Xe._)`${t}${(0,Xe.getProperty)(n)}`,!0))}pe.setEvaluated=sl;const Ih={};function hw(e,t){return e.scopeValue("func",{ref:t,code:Ih[t.code]||(Ih[t.code]=new iw._Code(t.code))})}pe.useFunc=hw;var lc;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(lc||(pe.Type=lc={}));function pw(e,t,r){if(e instanceof Xe.Name){const n=t===lc.Num;return r?n?(0,Xe._)`"[" + ${e} + "]"`:(0,Xe._)`"['" + ${e} + "']"`:n?(0,Xe._)`"/" + ${e}`:(0,Xe._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Xe.getProperty)(e).toString():"/"+il(e)}pe.getErrorPath=pw;function zv(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}pe.checkStrictMode=zv;var Pr={};Object.defineProperty(Pr,"__esModule",{value:!0});const Lt=xe,mw={data:new Lt.Name("data"),valCxt:new Lt.Name("valCxt"),instancePath:new Lt.Name("instancePath"),parentData:new Lt.Name("parentData"),parentDataProperty:new Lt.Name("parentDataProperty"),rootData:new Lt.Name("rootData"),dynamicAnchors:new Lt.Name("dynamicAnchors"),vErrors:new Lt.Name("vErrors"),errors:new Lt.Name("errors"),this:new Lt.Name("this"),self:new Lt.Name("self"),scope:new Lt.Name("scope"),json:new Lt.Name("json"),jsonPos:new Lt.Name("jsonPos"),jsonLen:new Lt.Name("jsonLen"),jsonPart:new Lt.Name("jsonPart")};Pr.default=mw;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=xe,r=pe,n=Pr;e.keywordError={message:({keyword:v})=>(0,t.str)`must pass "${v}" keyword validation`},e.keyword$DataError={message:({keyword:v,schemaType:m})=>m?(0,t.str)`"${v}" keyword must be ${m} ($data)`:(0,t.str)`"${v}" keyword is invalid ($data)`};function a(v,m=e.keywordError,b,A){const{it:D}=v,{gen:x,compositeRule:Y,allErrors:X}=D,Z=f(v,m,b);A??(Y||X)?u(x,Z):c(D,(0,t._)`[${Z}]`)}e.reportError=a;function i(v,m=e.keywordError,b){const{it:A}=v,{gen:D,compositeRule:x,allErrors:Y}=A,X=f(v,m,b);u(D,X),x||Y||c(A,n.default.vErrors)}e.reportExtraError=i;function s(v,m){v.assign(n.default.errors,m),v.if((0,t._)`${n.default.vErrors} !== null`,()=>v.if(m,()=>v.assign((0,t._)`${n.default.vErrors}.length`,m),()=>v.assign(n.default.vErrors,null)))}e.resetErrorsCount=s;function o({gen:v,keyword:m,schemaValue:b,data:A,errsCount:D,it:x}){if(D===void 0)throw new Error("ajv implementation error");const Y=v.name("err");v.forRange("i",D,n.default.errors,X=>{v.const(Y,(0,t._)`${n.default.vErrors}[${X}]`),v.if((0,t._)`${Y}.instancePath === undefined`,()=>v.assign((0,t._)`${Y}.instancePath`,(0,t.strConcat)(n.default.instancePath,x.errorPath))),v.assign((0,t._)`${Y}.schemaPath`,(0,t.str)`${x.errSchemaPath}/${m}`),x.opts.verbose&&(v.assign((0,t._)`${Y}.schema`,b),v.assign((0,t._)`${Y}.data`,A))})}e.extendErrors=o;function u(v,m){const b=v.const("err",m);v.if((0,t._)`${n.default.vErrors} === null`,()=>v.assign(n.default.vErrors,(0,t._)`[${b}]`),(0,t._)`${n.default.vErrors}.push(${b})`),v.code((0,t._)`${n.default.errors}++`)}function c(v,m){const{gen:b,validateName:A,schemaEnv:D}=v;D.$async?b.throw((0,t._)`new ${v.ValidationError}(${m})`):(b.assign((0,t._)`${A}.errors`,m),b.return(!1))}const l={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(v,m,b){const{createErrors:A}=v.it;return A===!1?(0,t._)`{}`:d(v,m,b)}function d(v,m,b={}){const{gen:A,it:D}=v,x=[p(D,b),h(v,b)];return _(v,m,x),A.object(...x)}function p({errorPath:v},{instancePath:m}){const b=m?(0,t.str)`${v}${(0,r.getErrorPath)(m,r.Type.Str)}`:v;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,b)]}function h({keyword:v,it:{errSchemaPath:m}},{schemaPath:b,parentSchema:A}){let D=A?m:(0,t.str)`${m}/${v}`;return b&&(D=(0,t.str)`${D}${(0,r.getErrorPath)(b,r.Type.Str)}`),[l.schemaPath,D]}function _(v,{params:m,message:b},A){const{keyword:D,data:x,schemaValue:Y,it:X}=v,{opts:Z,propertyName:W,topSchemaRef:J,schemaPath:ee}=X;A.push([l.keyword,D],[l.params,typeof m=="function"?m(v):m||(0,t._)`{}`]),Z.messages&&A.push([l.message,typeof b=="function"?b(v):b]),Z.verbose&&A.push([l.schema,Y],[l.parentSchema,(0,t._)`${J}${ee}`],[n.default.data,x]),W&&A.push([l.propertyName,W])}})(Di);Object.defineProperty($a,"__esModule",{value:!0});$a.boolOrEmptySchema=$a.topBoolOrEmptySchema=void 0;const vw=Di,gw=xe,_w=Pr,yw={message:"boolean schema is false"};function Ew(e){const{gen:t,schema:r,validateName:n}=e;r===!1?Wv(e,!1):typeof r=="object"&&r.$async===!0?t.return(_w.default.data):(t.assign((0,gw._)`${n}.errors`,null),t.return(!0))}$a.topBoolOrEmptySchema=Ew;function Cw(e,t){const{gen:r,schema:n}=e;n===!1?(r.var(t,!1),Wv(e)):r.var(t,!0)}$a.boolOrEmptySchema=Cw;function Wv(e,t){const{gen:r,data:n}=e,a={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,vw.reportError)(a,yw,void 0,t)}var Et={},Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.getRules=Wn.isJSONType=void 0;const Sw=["string","number","integer","boolean","null","object","array"],bw=new Set(Sw);function Tw(e){return typeof e=="string"&&bw.has(e)}Wn.isJSONType=Tw;function Aw(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Wn.getRules=Aw;var Gr={};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.shouldUseRule=Gr.shouldUseGroup=Gr.schemaHasRulesForType=void 0;function ww({schema:e,self:t},r){const n=t.RULES.types[r];return n&&n!==!0&&Qv(e,n)}Gr.schemaHasRulesForType=ww;function Qv(e,t){return t.rules.some(r=>Xv(e,r))}Gr.shouldUseGroup=Qv;function Xv(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}Gr.shouldUseRule=Xv;Object.defineProperty(Et,"__esModule",{value:!0});Et.reportTypeError=Et.checkDataTypes=Et.checkDataType=Et.coerceAndCheckDataType=Et.getJSONTypes=Et.getSchemaTypes=Et.DataType=void 0;const Iw=Wn,Ow=Gr,xw=Di,Ie=xe,Jv=pe;var wa;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(wa||(Et.DataType=wa={}));function Dw(e){const t=Zv(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Et.getSchemaTypes=Dw;function Zv(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(Iw.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Et.getJSONTypes=Zv;function $w(e,t){const{gen:r,data:n,opts:a}=e,i=Nw(t,a.coerceTypes),s=t.length>0&&!(i.length===0&&t.length===1&&(0,Ow.schemaHasRulesForType)(e,t[0]));if(s){const o=ol(t,n,a.strictNumbers,wa.Wrong);r.if(o,()=>{i.length?Rw(e,t,i):ul(e)})}return s}Et.coerceAndCheckDataType=$w;const eg=new Set(["string","number","integer","boolean","null"]);function Nw(e,t){return t?e.filter(r=>eg.has(r)||t==="array"&&r==="array"):[]}function Rw(e,t,r){const{gen:n,data:a,opts:i}=e,s=n.let("dataType",(0,Ie._)`typeof ${a}`),o=n.let("coerced",(0,Ie._)`undefined`);i.coerceTypes==="array"&&n.if((0,Ie._)`${s} == 'object' && Array.isArray(${a}) && ${a}.length == 1`,()=>n.assign(a,(0,Ie._)`${a}[0]`).assign(s,(0,Ie._)`typeof ${a}`).if(ol(t,a,i.strictNumbers),()=>n.assign(o,a))),n.if((0,Ie._)`${o} !== undefined`);for(const c of r)(eg.has(c)||c==="array"&&i.coerceTypes==="array")&&u(c);n.else(),ul(e),n.endIf(),n.if((0,Ie._)`${o} !== undefined`,()=>{n.assign(a,o),Pw(e,o)});function u(c){switch(c){case"string":n.elseIf((0,Ie._)`${s} == "number" || ${s} == "boolean"`).assign(o,(0,Ie._)`"" + ${a}`).elseIf((0,Ie._)`${a} === null`).assign(o,(0,Ie._)`""`);return;case"number":n.elseIf((0,Ie._)`${s} == "boolean" || ${a} === null
              || (${s} == "string" && ${a} && ${a} == +${a})`).assign(o,(0,Ie._)`+${a}`);return;case"integer":n.elseIf((0,Ie._)`${s} === "boolean" || ${a} === null
              || (${s} === "string" && ${a} && ${a} == +${a} && !(${a} % 1))`).assign(o,(0,Ie._)`+${a}`);return;case"boolean":n.elseIf((0,Ie._)`${a} === "false" || ${a} === 0 || ${a} === null`).assign(o,!1).elseIf((0,Ie._)`${a} === "true" || ${a} === 1`).assign(o,!0);return;case"null":n.elseIf((0,Ie._)`${a} === "" || ${a} === 0 || ${a} === false`),n.assign(o,null);return;case"array":n.elseIf((0,Ie._)`${s} === "string" || ${s} === "number"
              || ${s} === "boolean" || ${a} === null`).assign(o,(0,Ie._)`[${a}]`)}}}function Pw({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,Ie._)`${t} !== undefined`,()=>e.assign((0,Ie._)`${t}[${r}]`,n))}function fc(e,t,r,n=wa.Correct){const a=n===wa.Correct?Ie.operators.EQ:Ie.operators.NEQ;let i;switch(e){case"null":return(0,Ie._)`${t} ${a} null`;case"array":i=(0,Ie._)`Array.isArray(${t})`;break;case"object":i=(0,Ie._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":i=s((0,Ie._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":i=s();break;default:return(0,Ie._)`typeof ${t} ${a} ${e}`}return n===wa.Correct?i:(0,Ie.not)(i);function s(o=Ie.nil){return(0,Ie.and)((0,Ie._)`typeof ${t} == "number"`,o,r?(0,Ie._)`isFinite(${t})`:Ie.nil)}}Et.checkDataType=fc;function ol(e,t,r,n){if(e.length===1)return fc(e[0],t,r,n);let a;const i=(0,Jv.toHash)(e);if(i.array&&i.object){const s=(0,Ie._)`typeof ${t} != "object"`;a=i.null?s:(0,Ie._)`!${t} || ${s}`,delete i.null,delete i.array,delete i.object}else a=Ie.nil;i.number&&delete i.integer;for(const s in i)a=(0,Ie.and)(a,fc(s,t,r,n));return a}Et.checkDataTypes=ol;const Lw={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,Ie._)`{type: ${e}}`:(0,Ie._)`{type: ${t}}`};function ul(e){const t=Bw(e);(0,xw.reportError)(t,Lw)}Et.reportTypeError=ul;function Bw(e){const{gen:t,data:r,schema:n}=e,a=(0,Jv.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:a,schemaValue:a,parentSchema:n,params:{},it:e}}var to={};Object.defineProperty(to,"__esModule",{value:!0});to.assignDefaults=void 0;const la=xe,kw=pe;function Uw(e,t){const{properties:r,items:n}=e.schema;if(t==="object"&&r)for(const a in r)Oh(e,a,r[a].default);else t==="array"&&Array.isArray(n)&&n.forEach((a,i)=>Oh(e,i,a.default))}to.assignDefaults=Uw;function Oh(e,t,r){const{gen:n,compositeRule:a,data:i,opts:s}=e;if(r===void 0)return;const o=(0,la._)`${i}${(0,la.getProperty)(t)}`;if(a){(0,kw.checkStrictMode)(e,`default is ignored for: ${o}`);return}let u=(0,la._)`${o} === undefined`;s.useDefaults==="empty"&&(u=(0,la._)`${u} || ${o} === null || ${o} === ""`),n.if(u,(0,la._)`${o} = ${(0,la.stringify)(r)}`)}var xr={},Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.validateUnion=Pe.validateArray=Pe.usePattern=Pe.callValidateCode=Pe.schemaProperties=Pe.allSchemaProperties=Pe.noPropertyInData=Pe.propertyInData=Pe.isOwnProperty=Pe.hasPropFunc=Pe.reportMissingProp=Pe.checkMissingProp=Pe.checkReportMissingProp=void 0;const at=xe,cl=pe,rn=Pr,Fw=pe;function Mw(e,t){const{gen:r,data:n,it:a}=e;r.if(fl(r,n,t,a.opts.ownProperties),()=>{e.setParams({missingProperty:(0,at._)`${t}`},!0),e.error()})}Pe.checkReportMissingProp=Mw;function jw({gen:e,data:t,it:{opts:r}},n,a){return(0,at.or)(...n.map(i=>(0,at.and)(fl(e,t,i,r.ownProperties),(0,at._)`${a} = ${i}`)))}Pe.checkMissingProp=jw;function Vw(e,t){e.setParams({missingProperty:t},!0),e.error()}Pe.reportMissingProp=Vw;function tg(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,at._)`Object.prototype.hasOwnProperty`})}Pe.hasPropFunc=tg;function ll(e,t,r){return(0,at._)`${tg(e)}.call(${t}, ${r})`}Pe.isOwnProperty=ll;function Yw(e,t,r,n){const a=(0,at._)`${t}${(0,at.getProperty)(r)} !== undefined`;return n?(0,at._)`${a} && ${ll(e,t,r)}`:a}Pe.propertyInData=Yw;function fl(e,t,r,n){const a=(0,at._)`${t}${(0,at.getProperty)(r)} === undefined`;return n?(0,at.or)(a,(0,at.not)(ll(e,t,r))):a}Pe.noPropertyInData=fl;function rg(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Pe.allSchemaProperties=rg;function Kw(e,t){return rg(t).filter(r=>!(0,cl.alwaysValidSchema)(e,t[r]))}Pe.schemaProperties=Kw;function Hw({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:a,errorPath:i},it:s},o,u,c){const l=c?(0,at._)`${e}, ${t}, ${n}${a}`:t,f=[[rn.default.instancePath,(0,at.strConcat)(rn.default.instancePath,i)],[rn.default.parentData,s.parentData],[rn.default.parentDataProperty,s.parentDataProperty],[rn.default.rootData,rn.default.rootData]];s.opts.dynamicRef&&f.push([rn.default.dynamicAnchors,rn.default.dynamicAnchors]);const d=(0,at._)`${l}, ${r.object(...f)}`;return u!==at.nil?(0,at._)`${o}.call(${u}, ${d})`:(0,at._)`${o}(${d})`}Pe.callValidateCode=Hw;const Gw=(0,at._)`new RegExp`;function qw({gen:e,it:{opts:t}},r){const n=t.unicodeRegExp?"u":"",{regExp:a}=t.code,i=a(r,n);return e.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,at._)`${a.code==="new RegExp"?Gw:(0,Fw.useFunc)(e,a)}(${r}, ${n})`})}Pe.usePattern=qw;function zw(e){const{gen:t,data:r,keyword:n,it:a}=e,i=t.name("valid");if(a.allErrors){const o=t.let("valid",!0);return s(()=>t.assign(o,!1)),o}return t.var(i,!0),s(()=>t.break()),i;function s(o){const u=t.const("len",(0,at._)`${r}.length`);t.forRange("i",0,u,c=>{e.subschema({keyword:n,dataProp:c,dataPropType:cl.Type.Num},i),t.if((0,at.not)(i),o)})}}Pe.validateArray=zw;function Ww(e){const{gen:t,schema:r,keyword:n,it:a}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,cl.alwaysValidSchema)(a,u))&&!a.opts.unevaluated)return;const s=t.let("valid",!1),o=t.name("_valid");t.block(()=>r.forEach((u,c)=>{const l=e.subschema({keyword:n,schemaProp:c,compositeRule:!0},o);t.assign(s,(0,at._)`${s} || ${o}`),e.mergeValidEvaluated(l,o)||t.if((0,at.not)(s))})),e.result(s,()=>e.reset(),()=>e.error(!0))}Pe.validateUnion=Ww;Object.defineProperty(xr,"__esModule",{value:!0});xr.validateKeywordUsage=xr.validSchemaType=xr.funcKeywordCode=xr.macroKeywordCode=void 0;const jt=xe,Bn=Pr,Qw=Pe,Xw=Di;function Jw(e,t){const{gen:r,keyword:n,schema:a,parentSchema:i,it:s}=e,o=t.macro.call(s.self,a,i,s),u=ng(r,n,o);s.opts.validateSchema!==!1&&s.self.validateSchema(o,!0);const c=r.name("valid");e.subschema({schema:o,schemaPath:jt.nil,errSchemaPath:`${s.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},c),e.pass(c,()=>e.error(!0))}xr.macroKeywordCode=Jw;function Zw(e,t){var r;const{gen:n,keyword:a,schema:i,parentSchema:s,$data:o,it:u}=e;t2(u,t);const c=!o&&t.compile?t.compile.call(u.self,i,s,u):t.validate,l=ng(n,a,c),f=n.let("valid");e.block$data(f,d),e.ok((r=t.valid)!==null&&r!==void 0?r:f);function d(){if(t.errors===!1)_(),t.modifying&&xh(e),v(()=>e.error());else{const m=t.async?p():h();t.modifying&&xh(e),v(()=>e2(e,m))}}function p(){const m=n.let("ruleErrs",null);return n.try(()=>_((0,jt._)`await `),b=>n.assign(f,!1).if((0,jt._)`${b} instanceof ${u.ValidationError}`,()=>n.assign(m,(0,jt._)`${b}.errors`),()=>n.throw(b))),m}function h(){const m=(0,jt._)`${l}.errors`;return n.assign(m,null),_(jt.nil),m}function _(m=t.async?(0,jt._)`await `:jt.nil){const b=u.opts.passContext?Bn.default.this:Bn.default.self,A=!("compile"in t&&!o||t.schema===!1);n.assign(f,(0,jt._)`${m}${(0,Qw.callValidateCode)(e,l,b,A)}`,t.modifying)}function v(m){var b;n.if((0,jt.not)((b=t.valid)!==null&&b!==void 0?b:f),m)}}xr.funcKeywordCode=Zw;function xh(e){const{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,jt._)`${n.parentData}[${n.parentDataProperty}]`))}function e2(e,t){const{gen:r}=e;r.if((0,jt._)`Array.isArray(${t})`,()=>{r.assign(Bn.default.vErrors,(0,jt._)`${Bn.default.vErrors} === null ? ${t} : ${Bn.default.vErrors}.concat(${t})`).assign(Bn.default.errors,(0,jt._)`${Bn.default.vErrors}.length`),(0,Xw.extendErrors)(e)},()=>e.error())}function t2({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function ng(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,jt.stringify)(r)})}function r2(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}xr.validSchemaType=r2;function n2({schema:e,opts:t,self:r,errSchemaPath:n},a,i){if(Array.isArray(a.keyword)?!a.keyword.includes(i):a.keyword!==i)throw new Error("ajv implementation error");const s=a.dependencies;if(s!=null&&s.some(o=>!Object.prototype.hasOwnProperty.call(e,o)))throw new Error(`parent schema must have dependencies of ${i}: ${s.join(",")}`);if(a.validateSchema&&!a.validateSchema(e[i])){const u=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(a.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}xr.validateKeywordUsage=n2;var gn={};Object.defineProperty(gn,"__esModule",{value:!0});gn.extendSubschemaMode=gn.extendSubschemaData=gn.getSubschema=void 0;const Ar=xe,ag=pe;function a2(e,{keyword:t,schemaProp:r,schema:n,schemaPath:a,errSchemaPath:i,topSchemaRef:s}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const o=e.schema[t];return r===void 0?{schema:o,schemaPath:(0,Ar._)`${e.schemaPath}${(0,Ar.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:o[r],schemaPath:(0,Ar._)`${e.schemaPath}${(0,Ar.getProperty)(t)}${(0,Ar.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,ag.escapeFragment)(r)}`}}if(n!==void 0){if(a===void 0||i===void 0||s===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:a,topSchemaRef:s,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}gn.getSubschema=a2;function i2(e,t,{dataProp:r,dataPropType:n,data:a,dataTypes:i,propertyName:s}){if(a!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:o}=t;if(r!==void 0){const{errorPath:c,dataPathArr:l,opts:f}=t,d=o.let("data",(0,Ar._)`${t.data}${(0,Ar.getProperty)(r)}`,!0);u(d),e.errorPath=(0,Ar.str)`${c}${(0,ag.getErrorPath)(r,n,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Ar._)`${r}`,e.dataPathArr=[...l,e.parentDataProperty]}if(a!==void 0){const c=a instanceof Ar.Name?a:o.let("data",a,!0);u(c),s!==void 0&&(e.propertyName=s)}i&&(e.dataTypes=i);function u(c){e.data=c,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,c]}}gn.extendSubschemaData=i2;function s2(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:a,allErrors:i}){n!==void 0&&(e.compositeRule=n),a!==void 0&&(e.createErrors=a),i!==void 0&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=r}gn.extendSubschemaMode=s2;var Nt={},ig=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,i;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(a=n;a--!==0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(r).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[a]))return!1;for(a=n;a--!==0;){var s=i[a];if(!e(t[s],r[s]))return!1}return!0}return t!==t&&r!==r},sg={exports:{}},fn=sg.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},a=r.post||function(){};fs(t,n,a,e,"",e)};fn.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};fn.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};fn.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};fn.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function fs(e,t,r,n,a,i,s,o,u,c){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,a,i,s,o,u,c);for(var l in n){var f=n[l];if(Array.isArray(f)){if(l in fn.arrayKeywords)for(var d=0;d<f.length;d++)fs(e,t,r,f[d],a+"/"+l+"/"+d,i,a,l,n,d)}else if(l in fn.propsKeywords){if(f&&typeof f=="object")for(var p in f)fs(e,t,r,f[p],a+"/"+l+"/"+o2(p),i,a,l,n,p)}else(l in fn.keywords||e.allKeys&&!(l in fn.skipKeywords))&&fs(e,t,r,f,a+"/"+l,i,a,l,n)}r(n,a,i,s,o,u,c)}}function o2(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var u2=sg.exports;Object.defineProperty(Nt,"__esModule",{value:!0});Nt.getSchemaRefs=Nt.resolveUrl=Nt.normalizeId=Nt._getFullPath=Nt.getFullPath=Nt.inlineRef=void 0;const c2=pe,l2=ig,f2=u2,d2=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function h2(e,t=!0){return typeof e=="boolean"?!0:t===!0?!dc(e):t?og(e)<=t:!1}Nt.inlineRef=h2;const p2=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function dc(e){for(const t in e){if(p2.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(dc)||typeof r=="object"&&dc(r))return!0}return!1}function og(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!d2.has(r)&&(typeof e[r]=="object"&&(0,c2.eachItem)(e[r],n=>t+=og(n)),t===1/0))return 1/0}return t}function ug(e,t="",r){r!==!1&&(t=Ia(t));const n=e.parse(t);return cg(e,n)}Nt.getFullPath=ug;function cg(e,t){return e.serialize(t).split("#")[0]+"#"}Nt._getFullPath=cg;const m2=/#\/?$/;function Ia(e){return e?e.replace(m2,""):""}Nt.normalizeId=Ia;function v2(e,t,r){return r=Ia(r),e.resolve(t,r)}Nt.resolveUrl=v2;const g2=/^[a-z_][-a-z0-9._]*$/i;function _2(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,a=Ia(e[r]||t),i={"":a},s=ug(n,a,!1),o={},u=new Set;return f2(e,{allKeys:!0},(f,d,p,h)=>{if(h===void 0)return;const _=s+d;let v=i[h];typeof f[r]=="string"&&(v=m.call(this,f[r])),b.call(this,f.$anchor),b.call(this,f.$dynamicAnchor),i[d]=v;function m(A){const D=this.opts.uriResolver.resolve;if(A=Ia(v?D(v,A):A),u.has(A))throw l(A);u.add(A);let x=this.refs[A];return typeof x=="string"&&(x=this.refs[x]),typeof x=="object"?c(f,x.schema,A):A!==Ia(_)&&(A[0]==="#"?(c(f,o[A],A),o[A]=f):this.refs[A]=_),A}function b(A){if(typeof A=="string"){if(!g2.test(A))throw new Error(`invalid anchor "${A}"`);m.call(this,`#${A}`)}}}),o;function c(f,d,p){if(d!==void 0&&!l2(f,d))throw l(p)}function l(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Nt.getSchemaRefs=_2;Object.defineProperty(gr,"__esModule",{value:!0});gr.getData=gr.KeywordCxt=gr.validateFunctionCode=void 0;const lg=$a,Dh=Et,dl=Gr,bs=Et,y2=to,li=xr,Ho=gn,me=xe,Ce=Pr,E2=Nt,qr=pe,Za=Di;function C2(e){if(hg(e)&&(pg(e),dg(e))){T2(e);return}fg(e,()=>(0,lg.topBoolOrEmptySchema)(e))}gr.validateFunctionCode=C2;function fg({gen:e,validateName:t,schema:r,schemaEnv:n,opts:a},i){a.code.es5?e.func(t,(0,me._)`${Ce.default.data}, ${Ce.default.valCxt}`,n.$async,()=>{e.code((0,me._)`"use strict"; ${$h(r,a)}`),b2(e,a),e.code(i)}):e.func(t,(0,me._)`${Ce.default.data}, ${S2(a)}`,n.$async,()=>e.code($h(r,a)).code(i))}function S2(e){return(0,me._)`{${Ce.default.instancePath}="", ${Ce.default.parentData}, ${Ce.default.parentDataProperty}, ${Ce.default.rootData}=${Ce.default.data}${e.dynamicRef?(0,me._)`, ${Ce.default.dynamicAnchors}={}`:me.nil}}={}`}function b2(e,t){e.if(Ce.default.valCxt,()=>{e.var(Ce.default.instancePath,(0,me._)`${Ce.default.valCxt}.${Ce.default.instancePath}`),e.var(Ce.default.parentData,(0,me._)`${Ce.default.valCxt}.${Ce.default.parentData}`),e.var(Ce.default.parentDataProperty,(0,me._)`${Ce.default.valCxt}.${Ce.default.parentDataProperty}`),e.var(Ce.default.rootData,(0,me._)`${Ce.default.valCxt}.${Ce.default.rootData}`),t.dynamicRef&&e.var(Ce.default.dynamicAnchors,(0,me._)`${Ce.default.valCxt}.${Ce.default.dynamicAnchors}`)},()=>{e.var(Ce.default.instancePath,(0,me._)`""`),e.var(Ce.default.parentData,(0,me._)`undefined`),e.var(Ce.default.parentDataProperty,(0,me._)`undefined`),e.var(Ce.default.rootData,Ce.default.data),t.dynamicRef&&e.var(Ce.default.dynamicAnchors,(0,me._)`{}`)})}function T2(e){const{schema:t,opts:r,gen:n}=e;fg(e,()=>{r.$comment&&t.$comment&&vg(e),x2(e),n.let(Ce.default.vErrors,null),n.let(Ce.default.errors,0),r.unevaluated&&A2(e),mg(e),N2(e)})}function A2(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,me._)`${r}.evaluated`),t.if((0,me._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,me._)`${e.evaluated}.props`,(0,me._)`undefined`)),t.if((0,me._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,me._)`${e.evaluated}.items`,(0,me._)`undefined`))}function $h(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,me._)`/*# sourceURL=${r} */`:me.nil}function w2(e,t){if(hg(e)&&(pg(e),dg(e))){I2(e,t);return}(0,lg.boolOrEmptySchema)(e,t)}function dg({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function hg(e){return typeof e.schema!="boolean"}function I2(e,t){const{schema:r,gen:n,opts:a}=e;a.$comment&&r.$comment&&vg(e),D2(e),$2(e);const i=n.const("_errs",Ce.default.errors);mg(e,i),n.var(t,(0,me._)`${i} === ${Ce.default.errors}`)}function pg(e){(0,qr.checkUnknownRules)(e),O2(e)}function mg(e,t){if(e.opts.jtd)return Nh(e,[],!1,t);const r=(0,Dh.getSchemaTypes)(e.schema),n=(0,Dh.coerceAndCheckDataType)(e,r);Nh(e,r,!n,t)}function O2(e){const{schema:t,errSchemaPath:r,opts:n,self:a}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,qr.schemaHasRulesButRef)(t,a.RULES)&&a.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function x2(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,qr.checkStrictMode)(e,"default is ignored in the schema root")}function D2(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,E2.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function $2(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function vg({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:a}){const i=r.$comment;if(a.$comment===!0)e.code((0,me._)`${Ce.default.self}.logger.log(${i})`);else if(typeof a.$comment=="function"){const s=(0,me.str)`${n}/$comment`,o=e.scopeValue("root",{ref:t.root});e.code((0,me._)`${Ce.default.self}.opts.$comment(${i}, ${s}, ${o}.schema)`)}}function N2(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:a,opts:i}=e;r.$async?t.if((0,me._)`${Ce.default.errors} === 0`,()=>t.return(Ce.default.data),()=>t.throw((0,me._)`new ${a}(${Ce.default.vErrors})`)):(t.assign((0,me._)`${n}.errors`,Ce.default.vErrors),i.unevaluated&&R2(e),t.return((0,me._)`${Ce.default.errors} === 0`))}function R2({gen:e,evaluated:t,props:r,items:n}){r instanceof me.Name&&e.assign((0,me._)`${t}.props`,r),n instanceof me.Name&&e.assign((0,me._)`${t}.items`,n)}function Nh(e,t,r,n){const{gen:a,schema:i,data:s,allErrors:o,opts:u,self:c}=e,{RULES:l}=c;if(i.$ref&&(u.ignoreKeywordsWithRef||!(0,qr.schemaHasRulesButRef)(i,l))){a.block(()=>yg(e,"$ref",l.all.$ref.definition));return}u.jtd||P2(e,t),a.block(()=>{for(const d of l.rules)f(d);f(l.post)});function f(d){(0,dl.shouldUseGroup)(i,d)&&(d.type?(a.if((0,bs.checkDataType)(d.type,s,u.strictNumbers)),Rh(e,d),t.length===1&&t[0]===d.type&&r&&(a.else(),(0,bs.reportTypeError)(e)),a.endIf()):Rh(e,d),o||a.if((0,me._)`${Ce.default.errors} === ${n||0}`))}}function Rh(e,t){const{gen:r,schema:n,opts:{useDefaults:a}}=e;a&&(0,y2.assignDefaults)(e,t.type),r.block(()=>{for(const i of t.rules)(0,dl.shouldUseRule)(n,i)&&yg(e,i.keyword,i.definition,t.type)})}function P2(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(L2(e,t),e.opts.allowUnionTypes||B2(e,t),k2(e,e.dataTypes))}function L2(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{gg(e.dataTypes,r)||hl(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),F2(e,t)}}function B2(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&hl(e,"use allowUnionTypes to allow union type keyword")}function k2(e,t){const r=e.self.RULES.all;for(const n in r){const a=r[n];if(typeof a=="object"&&(0,dl.shouldUseRule)(e.schema,a)){const{type:i}=a.definition;i.length&&!i.some(s=>U2(t,s))&&hl(e,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function U2(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function gg(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function F2(e,t){const r=[];for(const n of e.dataTypes)gg(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function hl(e,t){const r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,qr.checkStrictMode)(e,t,e.opts.strictTypes)}class _g{constructor(t,r,n){if((0,li.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,qr.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",Eg(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,li.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",Ce.default.errors))}result(t,r,n){this.failResult((0,me.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,me.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,me._)`${r} !== undefined && (${(0,me.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?Za.reportExtraError:Za.reportError)(this,this.def.error,r)}$dataError(){(0,Za.reportError)(this,this.def.$dataError||Za.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Za.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=me.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=me.nil,r=me.nil){if(!this.$data)return;const{gen:n,schemaCode:a,schemaType:i,def:s}=this;n.if((0,me.or)((0,me._)`${a} === undefined`,r)),t!==me.nil&&n.assign(t,!0),(i.length||s.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==me.nil&&n.assign(t,!1)),n.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:n,def:a,it:i}=this;return(0,me.or)(s(),o());function s(){if(n.length){if(!(r instanceof me.Name))throw new Error("ajv implementation error");const u=Array.isArray(n)?n:[n];return(0,me._)`${(0,bs.checkDataTypes)(u,r,i.opts.strictNumbers,bs.DataType.Wrong)}`}return me.nil}function o(){if(a.validateSchema){const u=t.scopeValue("validate$data",{ref:a.validateSchema});return(0,me._)`!${u}(${r})`}return me.nil}}subschema(t,r){const n=(0,Ho.getSubschema)(this.it,t);(0,Ho.extendSubschemaData)(n,this.it,t),(0,Ho.extendSubschemaMode)(n,t);const a={...this.it,...n,items:void 0,props:void 0};return w2(a,r),a}mergeEvaluated(t,r){const{it:n,gen:a}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=qr.mergeEvaluated.props(a,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=qr.mergeEvaluated.items(a,t.items,n.items,r)))}mergeValidEvaluated(t,r){const{it:n,gen:a}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return a.if(r,()=>this.mergeEvaluated(t,me.Name)),!0}}gr.KeywordCxt=_g;function yg(e,t,r,n){const a=new _g(e,r,t);"code"in r?r.code(a,n):a.$data&&r.validate?(0,li.funcKeywordCode)(a,r):"macro"in r?(0,li.macroKeywordCode)(a,r):(r.compile||r.validate)&&(0,li.funcKeywordCode)(a,r)}const M2=/^\/(?:[^~]|~0|~1)*$/,j2=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Eg(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let a,i;if(e==="")return Ce.default.rootData;if(e[0]==="/"){if(!M2.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);a=e,i=Ce.default.rootData}else{const c=j2.exec(e);if(!c)throw new Error(`Invalid JSON-pointer: ${e}`);const l=+c[1];if(a=c[2],a==="#"){if(l>=t)throw new Error(u("property/index",l));return n[t-l]}if(l>t)throw new Error(u("data",l));if(i=r[t-l],!a)return i}let s=i;const o=a.split("/");for(const c of o)c&&(i=(0,me._)`${i}${(0,me.getProperty)((0,qr.unescapeJsonPointer)(c))}`,s=(0,me._)`${s} && ${i}`);return s;function u(c,l){return`Cannot access ${c} ${l} levels up, current level is ${t}`}}gr.getData=Eg;var $i={};Object.defineProperty($i,"__esModule",{value:!0});class V2 extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}$i.default=V2;var ka={};Object.defineProperty(ka,"__esModule",{value:!0});const Go=Nt;class Y2 extends Error{constructor(t,r,n,a){super(a||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Go.resolveUrl)(t,r,n),this.missingSchema=(0,Go.normalizeId)((0,Go.getFullPath)(t,this.missingRef))}}ka.default=Y2;var qt={};Object.defineProperty(qt,"__esModule",{value:!0});qt.resolveSchema=qt.getCompilingSchema=qt.resolveRef=qt.compileSchema=qt.SchemaEnv=void 0;const fr=xe,K2=$i,$n=Pr,mr=Nt,Ph=pe,H2=gr;class ro{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,mr.normalizeId)(n==null?void 0:n[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n==null?void 0:n.$async,this.refs={}}}qt.SchemaEnv=ro;function pl(e){const t=Cg.call(this,e);if(t)return t;const r=(0,mr.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:a}=this.opts.code,{ownProperties:i}=this.opts,s=new fr.CodeGen(this.scope,{es5:n,lines:a,ownProperties:i});let o;e.$async&&(o=s.scopeValue("Error",{ref:K2.default,code:(0,fr._)`require("ajv/dist/runtime/validation_error").default`}));const u=s.scopeName("validate");e.validateName=u;const c={gen:s,allErrors:this.opts.allErrors,data:$n.default.data,parentData:$n.default.parentData,parentDataProperty:$n.default.parentDataProperty,dataNames:[$n.default.data],dataPathArr:[fr.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:s.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,fr.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:o,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:fr.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,fr._)`""`,opts:this.opts,self:this};let l;try{this._compilations.add(e),(0,H2.validateFunctionCode)(c),s.optimize(this.opts.code.optimize);const f=s.toString();l=`${s.scopeRefs($n.default.scope)}return ${f}`,this.opts.code.process&&(l=this.opts.code.process(l,e));const p=new Function(`${$n.default.self}`,`${$n.default.scope}`,l)(this,this.scope.get());if(this.scope.value(u,{ref:p}),p.errors=null,p.schema=e.schema,p.schemaEnv=e,e.$async&&(p.$async=!0),this.opts.code.source===!0&&(p.source={validateName:u,validateCode:f,scopeValues:s._values}),this.opts.unevaluated){const{props:h,items:_}=c;p.evaluated={props:h instanceof fr.Name?void 0:h,items:_ instanceof fr.Name?void 0:_,dynamicProps:h instanceof fr.Name,dynamicItems:_ instanceof fr.Name},p.source&&(p.source.evaluated=(0,fr.stringify)(p.evaluated))}return e.validate=p,e}catch(f){throw delete e.validate,delete e.validateName,l&&this.logger.error("Error compiling schema, function code:",l),f}finally{this._compilations.delete(e)}}qt.compileSchema=pl;function G2(e,t,r){var n;r=(0,mr.resolveUrl)(this.opts.uriResolver,t,r);const a=e.refs[r];if(a)return a;let i=W2.call(this,e,r);if(i===void 0){const s=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:o}=this.opts;s&&(i=new ro({schema:s,schemaId:o,root:e,baseId:t}))}if(i!==void 0)return e.refs[r]=q2.call(this,i)}qt.resolveRef=G2;function q2(e){return(0,mr.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:pl.call(this,e)}function Cg(e){for(const t of this._compilations)if(z2(t,e))return t}qt.getCompilingSchema=Cg;function z2(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function W2(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||no.call(this,e,t)}function no(e,t){const r=this.opts.uriResolver.parse(t),n=(0,mr._getFullPath)(this.opts.uriResolver,r);let a=(0,mr.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===a)return qo.call(this,r,e);const i=(0,mr.normalizeId)(n),s=this.refs[i]||this.schemas[i];if(typeof s=="string"){const o=no.call(this,e,s);return typeof(o==null?void 0:o.schema)!="object"?void 0:qo.call(this,r,o)}if(typeof(s==null?void 0:s.schema)=="object"){if(s.validate||pl.call(this,s),i===(0,mr.normalizeId)(t)){const{schema:o}=s,{schemaId:u}=this.opts,c=o[u];return c&&(a=(0,mr.resolveUrl)(this.opts.uriResolver,a,c)),new ro({schema:o,schemaId:u,root:e,baseId:a})}return qo.call(this,r,s)}}qt.resolveSchema=no;const Q2=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function qo(e,{baseId:t,schema:r,root:n}){var a;if(((a=e.fragment)===null||a===void 0?void 0:a[0])!=="/")return;for(const o of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const u=r[(0,Ph.unescapeFragment)(o)];if(u===void 0)return;r=u;const c=typeof r=="object"&&r[this.opts.schemaId];!Q2.has(o)&&c&&(t=(0,mr.resolveUrl)(this.opts.uriResolver,t,c))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,Ph.schemaHasRulesButRef)(r,this.RULES)){const o=(0,mr.resolveUrl)(this.opts.uriResolver,t,r.$ref);i=no.call(this,n,o)}const{schemaId:s}=this.opts;if(i=i||new ro({schema:r,schemaId:s,root:n,baseId:t}),i.schema!==i.root.schema)return i}const X2="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",J2="Meta-schema for $data reference (JSON AnySchema extension proposal)",Z2="object",eI=["$data"],tI={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},rI=!1,nI={$id:X2,description:J2,type:Z2,required:eI,properties:tI,additionalProperties:rI};var ml={},ao={exports:{}};const aI={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};var iI={HEX:aI};const{HEX:sI}=iI,oI=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function Sg(e){if(Tg(e,".")<3)return{host:e,isIPV4:!1};const t=e.match(oI)||[],[r]=t;return r?{host:cI(r,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function hc(e,t=!1){let r="",n=!0;for(const a of e){if(sI[a]===void 0)return;a!=="0"&&n===!0&&(n=!1),n||(r+=a)}return t&&r.length===0&&(r="0"),r}function uI(e){let t=0;const r={error:!1,address:"",zone:""},n=[],a=[];let i=!1,s=!1,o=!1;function u(){if(a.length){if(i===!1){const c=hc(a);if(c!==void 0)n.push(c);else return r.error=!0,!1}a.length=0}return!0}for(let c=0;c<e.length;c++){const l=e[c];if(!(l==="["||l==="]"))if(l===":"){if(s===!0&&(o=!0),!u())break;if(t++,n.push(":"),t>7){r.error=!0;break}c-1>=0&&e[c-1]===":"&&(s=!0);continue}else if(l==="%"){if(!u())break;i=!0}else{a.push(l);continue}}return a.length&&(i?r.zone=a.join(""):o?n.push(a.join("")):n.push(hc(a))),r.address=n.join(""),r}function bg(e){if(Tg(e,":")<2)return{host:e,isIPV6:!1};const t=uI(e);if(t.error)return{host:e,isIPV6:!1};{let r=t.address,n=t.address;return t.zone&&(r+="%"+t.zone,n+="%25"+t.zone),{host:r,escapedHost:n,isIPV6:!0}}}function cI(e,t){let r="",n=!0;const a=e.length;for(let i=0;i<a;i++){const s=e[i];s==="0"&&n?(i+1<=a&&e[i+1]===t||i+1===a)&&(r+=s,n=!1):(s===t?n=!0:n=!1,r+=s)}return r}function Tg(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}const Lh=/^\.\.?\//u,Bh=/^\/\.(?:\/|$)/u,kh=/^\/\.\.(?:\/|$)/u,lI=/^\/?(?:.|\n)*?(?=\/|$)/u;function fI(e){const t=[];for(;e.length;)if(e.match(Lh))e=e.replace(Lh,"");else if(e.match(Bh))e=e.replace(Bh,"/");else if(e.match(kh))e=e.replace(kh,"/"),t.pop();else if(e==="."||e==="..")e="";else{const r=e.match(lI);if(r){const n=r[0];e=e.slice(n.length),t.push(n)}else throw new Error("Unexpected dot segment condition")}return t.join("")}function dI(e,t){const r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function hI(e){const t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let r=unescape(e.host);const n=Sg(r);if(n.isIPV4)r=n.host;else{const a=bg(n.host);a.isIPV6===!0?r=`[${a.escapedHost}]`:r=e.host}t.push(r)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}var pI={recomposeAuthority:hI,normalizeComponentEncoding:dI,removeDotSegments:fI,normalizeIPv4:Sg,normalizeIPv6:bg,stringArrayToHexStripped:hc};const mI=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,vI=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function Ag(e){return typeof e.secure=="boolean"?e.secure:String(e.scheme).toLowerCase()==="wss"}function wg(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function Ig(e){const t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function gI(e){return e.secure=Ag(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function _I(e){if((e.port===(Ag(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function yI(e,t){if(!e.path)return e.error="URN can not be parsed",e;const r=e.path.match(vI);if(r){const n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];const a=`${n}:${t.nid||e.nid}`,i=vl[a];e.path=void 0,i&&(e=i.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function EI(e,t){const r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),a=`${r}:${t.nid||n}`,i=vl[a];i&&(e=i.serialize(e,t));const s=e,o=e.nss;return s.path=`${n||t.nid}:${o}`,t.skipEscape=!0,s}function CI(e,t){const r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!mI.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function SI(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t}const Og={scheme:"http",domainHost:!0,parse:wg,serialize:Ig},bI={scheme:"https",domainHost:Og.domainHost,parse:wg,serialize:Ig},ds={scheme:"ws",domainHost:!0,parse:gI,serialize:_I},TI={scheme:"wss",domainHost:ds.domainHost,parse:ds.parse,serialize:ds.serialize},AI={scheme:"urn",parse:yI,serialize:EI,skipNormalize:!0},wI={scheme:"urn:uuid",parse:CI,serialize:SI,skipNormalize:!0},vl={http:Og,https:bI,ws:ds,wss:TI,urn:AI,"urn:uuid":wI};var II=vl;const{normalizeIPv6:OI,normalizeIPv4:xI,removeDotSegments:ii,recomposeAuthority:DI,normalizeComponentEncoding:ji}=pI,gl=II;function $I(e,t){return typeof e=="string"?e=Dr(Qr(e,t),t):typeof e=="object"&&(e=Qr(Dr(e,t),t)),e}function NI(e,t,r){const n=Object.assign({scheme:"null"},r),a=xg(Qr(e,n),Qr(t,n),n,!0);return Dr(a,{...n,skipEscape:!0})}function xg(e,t,r,n){const a={};return n||(e=Qr(Dr(e,r),r),t=Qr(Dr(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(a.scheme=t.scheme,a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=ii(t.path||""),a.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=ii(t.path||""),a.query=t.query):(t.path?(t.path.charAt(0)==="/"?a.path=ii(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?a.path="/"+t.path:e.path?a.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:a.path=t.path,a.path=ii(a.path)),a.query=t.query):(a.path=e.path,t.query!==void 0?a.query=t.query:a.query=e.query),a.userinfo=e.userinfo,a.host=e.host,a.port=e.port),a.scheme=e.scheme),a.fragment=t.fragment,a}function RI(e,t,r){return typeof e=="string"?(e=unescape(e),e=Dr(ji(Qr(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=Dr(ji(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=Dr(ji(Qr(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=Dr(ji(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function Dr(e,t){const r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),a=[],i=gl[(n.scheme||r.scheme||"").toLowerCase()];i&&i.serialize&&i.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&a.push(r.scheme,":");const s=DI(r);if(s!==void 0&&(n.reference!=="suffix"&&a.push("//"),a.push(s),r.path&&r.path.charAt(0)!=="/"&&a.push("/")),r.path!==void 0){let o=r.path;!n.absolutePath&&(!i||!i.absolutePath)&&(o=ii(o)),s===void 0&&(o=o.replace(/^\/\//u,"/%2F")),a.push(o)}return r.query!==void 0&&a.push("?",r.query),r.fragment!==void 0&&a.push("#",r.fragment),a.join("")}const PI=Array.from({length:127},(e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)));function LI(e){let t=0;for(let r=0,n=e.length;r<n;++r)if(t=e.charCodeAt(r),t>126||PI[t])return!0;return!1}const BI=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Qr(e,t){const r=Object.assign({},t),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},a=e.indexOf("%")!==-1;let i=!1;r.reference==="suffix"&&(e=(r.scheme?r.scheme+":":"")+"//"+e);const s=e.match(BI);if(s){if(n.scheme=s[1],n.userinfo=s[3],n.host=s[4],n.port=parseInt(s[5],10),n.path=s[6]||"",n.query=s[7],n.fragment=s[8],isNaN(n.port)&&(n.port=s[5]),n.host){const u=xI(n.host);if(u.isIPV4===!1){const c=OI(u.host);n.host=c.host.toLowerCase(),i=c.isIPV6}else n.host=u.host,i=!0}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&n.query===void 0&&!n.path?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");const o=gl[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!o||!o.unicodeSupport)&&n.host&&(r.domainHost||o&&o.domainHost)&&i===!1&&LI(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(u){n.error=n.error||"Host's domain name can not be converted to ASCII: "+u}(!o||o&&!o.skipNormalize)&&(a&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),a&&n.host!==void 0&&(n.host=unescape(n.host)),n.path&&(n.path=escape(unescape(n.path))),n.fragment&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),o&&o.parse&&o.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}const _l={SCHEMES:gl,normalize:$I,resolve:NI,resolveComponents:xg,equal:RI,serialize:Dr,parse:Qr};ao.exports=_l;ao.exports.default=_l;ao.exports.fastUri=_l;var kI=ao.exports;Object.defineProperty(ml,"__esModule",{value:!0});const Dg=kI;Dg.code='require("ajv/dist/runtime/uri").default';ml.default=Dg;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=gr;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=xe;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=$i,a=ka,i=Wn,s=qt,o=xe,u=Nt,c=Et,l=pe,f=nI,d=ml,p=(R,O)=>new RegExp(R,O);p.code="new RegExp";const h=["removeAdditional","useDefaults","coerceTypes"],_=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),v={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},m={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},b=200;function A(R){var O,P,g,y,C,I,j,q,se,ue,ve,$e,Re,He,Ge,sa,oa,ua,Ha,In,On,Ga,xn,qa,lr;const Jr=R.strict,qe=(O=R.code)===null||O===void 0?void 0:O.optimize,V=qe===!0||qe===void 0?1:qe||0,G=(g=(P=R.code)===null||P===void 0?void 0:P.regExp)!==null&&g!==void 0?g:p,ne=(y=R.uriResolver)!==null&&y!==void 0?y:d.default;return{strictSchema:(I=(C=R.strictSchema)!==null&&C!==void 0?C:Jr)!==null&&I!==void 0?I:!0,strictNumbers:(q=(j=R.strictNumbers)!==null&&j!==void 0?j:Jr)!==null&&q!==void 0?q:!0,strictTypes:(ue=(se=R.strictTypes)!==null&&se!==void 0?se:Jr)!==null&&ue!==void 0?ue:"log",strictTuples:($e=(ve=R.strictTuples)!==null&&ve!==void 0?ve:Jr)!==null&&$e!==void 0?$e:"log",strictRequired:(He=(Re=R.strictRequired)!==null&&Re!==void 0?Re:Jr)!==null&&He!==void 0?He:!1,code:R.code?{...R.code,optimize:V,regExp:G}:{optimize:V,regExp:G},loopRequired:(Ge=R.loopRequired)!==null&&Ge!==void 0?Ge:b,loopEnum:(sa=R.loopEnum)!==null&&sa!==void 0?sa:b,meta:(oa=R.meta)!==null&&oa!==void 0?oa:!0,messages:(ua=R.messages)!==null&&ua!==void 0?ua:!0,inlineRefs:(Ha=R.inlineRefs)!==null&&Ha!==void 0?Ha:!0,schemaId:(In=R.schemaId)!==null&&In!==void 0?In:"$id",addUsedSchema:(On=R.addUsedSchema)!==null&&On!==void 0?On:!0,validateSchema:(Ga=R.validateSchema)!==null&&Ga!==void 0?Ga:!0,validateFormats:(xn=R.validateFormats)!==null&&xn!==void 0?xn:!0,unicodeRegExp:(qa=R.unicodeRegExp)!==null&&qa!==void 0?qa:!0,int32range:(lr=R.int32range)!==null&&lr!==void 0?lr:!0,uriResolver:ne}}class D{constructor(O={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,O=this.opts={...O,...A(O)};const{es5:P,lines:g}=this.opts.code;this.scope=new o.ValueScope({scope:{},prefixes:_,es5:P,lines:g}),this.logger=oe(O.logger);const y=O.validateFormats;O.validateFormats=!1,this.RULES=(0,i.getRules)(),x.call(this,v,O,"NOT SUPPORTED"),x.call(this,m,O,"DEPRECATED","warn"),this._metaOpts=J.call(this),O.formats&&Z.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),O.keywords&&W.call(this,O.keywords),typeof O.meta=="object"&&this.addMetaSchema(O.meta),X.call(this),O.validateFormats=y}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:O,meta:P,schemaId:g}=this.opts;let y=f;g==="id"&&(y={...f},y.id=y.$id,delete y.$id),P&&O&&this.addMetaSchema(y,y[g],!1)}defaultMeta(){const{meta:O,schemaId:P}=this.opts;return this.opts.defaultMeta=typeof O=="object"?O[P]||O:void 0}validate(O,P){let g;if(typeof O=="string"){if(g=this.getSchema(O),!g)throw new Error(`no schema with key or ref "${O}"`)}else g=this.compile(O);const y=g(P);return"$async"in g||(this.errors=g.errors),y}compile(O,P){const g=this._addSchema(O,P);return g.validate||this._compileSchemaEnv(g)}compileAsync(O,P){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:g}=this.opts;return y.call(this,O,P);async function y(ue,ve){await C.call(this,ue.$schema);const $e=this._addSchema(ue,ve);return $e.validate||I.call(this,$e)}async function C(ue){ue&&!this.getSchema(ue)&&await y.call(this,{$ref:ue},!0)}async function I(ue){try{return this._compileSchemaEnv(ue)}catch(ve){if(!(ve instanceof a.default))throw ve;return j.call(this,ve),await q.call(this,ve.missingSchema),I.call(this,ue)}}function j({missingSchema:ue,missingRef:ve}){if(this.refs[ue])throw new Error(`AnySchema ${ue} is loaded but ${ve} cannot be resolved`)}async function q(ue){const ve=await se.call(this,ue);this.refs[ue]||await C.call(this,ve.$schema),this.refs[ue]||this.addSchema(ve,ue,P)}async function se(ue){const ve=this._loading[ue];if(ve)return ve;try{return await(this._loading[ue]=g(ue))}finally{delete this._loading[ue]}}}addSchema(O,P,g,y=this.opts.validateSchema){if(Array.isArray(O)){for(const I of O)this.addSchema(I,void 0,g,y);return this}let C;if(typeof O=="object"){const{schemaId:I}=this.opts;if(C=O[I],C!==void 0&&typeof C!="string")throw new Error(`schema ${I} must be string`)}return P=(0,u.normalizeId)(P||C),this._checkUnique(P),this.schemas[P]=this._addSchema(O,g,P,y,!0),this}addMetaSchema(O,P,g=this.opts.validateSchema){return this.addSchema(O,P,!0,g),this}validateSchema(O,P){if(typeof O=="boolean")return!0;let g;if(g=O.$schema,g!==void 0&&typeof g!="string")throw new Error("$schema must be a string");if(g=g||this.opts.defaultMeta||this.defaultMeta(),!g)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const y=this.validate(g,O);if(!y&&P){const C="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(C);else throw new Error(C)}return y}getSchema(O){let P;for(;typeof(P=Y.call(this,O))=="string";)O=P;if(P===void 0){const{schemaId:g}=this.opts,y=new s.SchemaEnv({schema:{},schemaId:g});if(P=s.resolveSchema.call(this,y,O),!P)return;this.refs[O]=P}return P.validate||this._compileSchemaEnv(P)}removeSchema(O){if(O instanceof RegExp)return this._removeAllSchemas(this.schemas,O),this._removeAllSchemas(this.refs,O),this;switch(typeof O){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const P=Y.call(this,O);return typeof P=="object"&&this._cache.delete(P.schema),delete this.schemas[O],delete this.refs[O],this}case"object":{const P=O;this._cache.delete(P);let g=O[this.opts.schemaId];return g&&(g=(0,u.normalizeId)(g),delete this.schemas[g],delete this.refs[g]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(O){for(const P of O)this.addKeyword(P);return this}addKeyword(O,P){let g;if(typeof O=="string")g=O,typeof P=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),P.keyword=g);else if(typeof O=="object"&&P===void 0){if(P=O,g=P.keyword,Array.isArray(g)&&!g.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(M.call(this,g,P),!P)return(0,l.eachItem)(g,C=>N.call(this,C)),this;L.call(this,P);const y={...P,type:(0,c.getJSONTypes)(P.type),schemaType:(0,c.getJSONTypes)(P.schemaType)};return(0,l.eachItem)(g,y.type.length===0?C=>N.call(this,C,y):C=>y.type.forEach(I=>N.call(this,C,y,I))),this}getKeyword(O){const P=this.RULES.all[O];return typeof P=="object"?P.definition:!!P}removeKeyword(O){const{RULES:P}=this;delete P.keywords[O],delete P.all[O];for(const g of P.rules){const y=g.rules.findIndex(C=>C.keyword===O);y>=0&&g.rules.splice(y,1)}return this}addFormat(O,P){return typeof P=="string"&&(P=new RegExp(P)),this.formats[O]=P,this}errorsText(O=this.errors,{separator:P=", ",dataVar:g="data"}={}){return!O||O.length===0?"No errors":O.map(y=>`${g}${y.instancePath} ${y.message}`).reduce((y,C)=>y+P+C)}$dataMetaSchema(O,P){const g=this.RULES.all;O=JSON.parse(JSON.stringify(O));for(const y of P){const C=y.split("/").slice(1);let I=O;for(const j of C)I=I[j];for(const j in g){const q=g[j];if(typeof q!="object")continue;const{$data:se}=q.definition,ue=I[j];se&&ue&&(I[j]=w(ue))}}return O}_removeAllSchemas(O,P){for(const g in O){const y=O[g];(!P||P.test(g))&&(typeof y=="string"?delete O[g]:y&&!y.meta&&(this._cache.delete(y.schema),delete O[g]))}}_addSchema(O,P,g,y=this.opts.validateSchema,C=this.opts.addUsedSchema){let I;const{schemaId:j}=this.opts;if(typeof O=="object")I=O[j];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof O!="boolean")throw new Error("schema must be object or boolean")}let q=this._cache.get(O);if(q!==void 0)return q;g=(0,u.normalizeId)(I||g);const se=u.getSchemaRefs.call(this,O,g);return q=new s.SchemaEnv({schema:O,schemaId:j,meta:P,baseId:g,localRefs:se}),this._cache.set(q.schema,q),C&&!g.startsWith("#")&&(g&&this._checkUnique(g),this.refs[g]=q),y&&this.validateSchema(O,!0),q}_checkUnique(O){if(this.schemas[O]||this.refs[O])throw new Error(`schema with key or id "${O}" already exists`)}_compileSchemaEnv(O){if(O.meta?this._compileMetaSchema(O):s.compileSchema.call(this,O),!O.validate)throw new Error("ajv implementation error");return O.validate}_compileMetaSchema(O){const P=this.opts;this.opts=this._metaOpts;try{s.compileSchema.call(this,O)}finally{this.opts=P}}}D.ValidationError=n.default,D.MissingRefError=a.default,e.default=D;function x(R,O,P,g="error"){for(const y in R){const C=y;C in O&&this.logger[g](`${P}: option ${y}. ${R[C]}`)}}function Y(R){return R=(0,u.normalizeId)(R),this.schemas[R]||this.refs[R]}function X(){const R=this.opts.schemas;if(R)if(Array.isArray(R))this.addSchema(R);else for(const O in R)this.addSchema(R[O],O)}function Z(){for(const R in this.opts.formats){const O=this.opts.formats[R];O&&this.addFormat(R,O)}}function W(R){if(Array.isArray(R)){this.addVocabulary(R);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const O in R){const P=R[O];P.keyword||(P.keyword=O),this.addKeyword(P)}}function J(){const R={...this.opts};for(const O of h)delete R[O];return R}const ee={log(){},warn(){},error(){}};function oe(R){if(R===!1)return ee;if(R===void 0)return console;if(R.log&&R.warn&&R.error)return R;throw new Error("logger must implement log, warn and error methods")}const z=/^[a-z_$][a-z0-9_$:-]*$/i;function M(R,O){const{RULES:P}=this;if((0,l.eachItem)(R,g=>{if(P.keywords[g])throw new Error(`Keyword ${g} is already defined`);if(!z.test(g))throw new Error(`Keyword ${g} has invalid name`)}),!!O&&O.$data&&!("code"in O||"validate"in O))throw new Error('$data keyword must have "code" or "validate" function')}function N(R,O,P){var g;const y=O==null?void 0:O.post;if(P&&y)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:C}=this;let I=y?C.post:C.rules.find(({type:q})=>q===P);if(I||(I={type:P,rules:[]},C.rules.push(I)),C.keywords[R]=!0,!O)return;const j={keyword:R,definition:{...O,type:(0,c.getJSONTypes)(O.type),schemaType:(0,c.getJSONTypes)(O.schemaType)}};O.before?U.call(this,I,j,O.before):I.rules.push(j),C.all[R]=j,(g=O.implements)===null||g===void 0||g.forEach(q=>this.addKeyword(q))}function U(R,O,P){const g=R.rules.findIndex(y=>y.keyword===P);g>=0?R.rules.splice(g,0,O):(R.rules.push(O),this.logger.warn(`rule ${P} is not defined`))}function L(R){let{metaSchema:O}=R;O!==void 0&&(R.$data&&this.opts.$data&&(O=w(O)),R.validateSchema=this.compile(O,!0))}const H={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function w(R){return{anyOf:[R,H]}}})(Yv);var yl={},El={},Cl={};Object.defineProperty(Cl,"__esModule",{value:!0});const UI={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Cl.default=UI;var Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.callRef=Qn.getValidate=void 0;const FI=ka,Uh=Pe,Ht=xe,fa=Pr,Fh=qt,Vi=pe,MI={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:n}=e,{baseId:a,schemaEnv:i,validateName:s,opts:o,self:u}=n,{root:c}=i;if((r==="#"||r==="#/")&&a===c.baseId)return f();const l=Fh.resolveRef.call(u,c,a,r);if(l===void 0)throw new FI.default(n.opts.uriResolver,a,r);if(l instanceof Fh.SchemaEnv)return d(l);return p(l);function f(){if(i===c)return hs(e,s,i,i.$async);const h=t.scopeValue("root",{ref:c});return hs(e,(0,Ht._)`${h}.validate`,c,c.$async)}function d(h){const _=$g(e,h);hs(e,_,h,h.$async)}function p(h){const _=t.scopeValue("schema",o.code.source===!0?{ref:h,code:(0,Ht.stringify)(h)}:{ref:h}),v=t.name("valid"),m=e.subschema({schema:h,dataTypes:[],schemaPath:Ht.nil,topSchemaRef:_,errSchemaPath:r},v);e.mergeEvaluated(m),e.ok(v)}}};function $g(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,Ht._)`${r.scopeValue("wrapper",{ref:t})}.validate`}Qn.getValidate=$g;function hs(e,t,r,n){const{gen:a,it:i}=e,{allErrors:s,schemaEnv:o,opts:u}=i,c=u.passContext?fa.default.this:Ht.nil;n?l():f();function l(){if(!o.$async)throw new Error("async schema referenced by sync schema");const h=a.let("valid");a.try(()=>{a.code((0,Ht._)`await ${(0,Uh.callValidateCode)(e,t,c)}`),p(t),s||a.assign(h,!0)},_=>{a.if((0,Ht._)`!(${_} instanceof ${i.ValidationError})`,()=>a.throw(_)),d(_),s||a.assign(h,!1)}),e.ok(h)}function f(){e.result((0,Uh.callValidateCode)(e,t,c),()=>p(t),()=>d(t))}function d(h){const _=(0,Ht._)`${h}.errors`;a.assign(fa.default.vErrors,(0,Ht._)`${fa.default.vErrors} === null ? ${_} : ${fa.default.vErrors}.concat(${_})`),a.assign(fa.default.errors,(0,Ht._)`${fa.default.vErrors}.length`)}function p(h){var _;if(!i.opts.unevaluated)return;const v=(_=r==null?void 0:r.validate)===null||_===void 0?void 0:_.evaluated;if(i.props!==!0)if(v&&!v.dynamicProps)v.props!==void 0&&(i.props=Vi.mergeEvaluated.props(a,v.props,i.props));else{const m=a.var("props",(0,Ht._)`${h}.evaluated.props`);i.props=Vi.mergeEvaluated.props(a,m,i.props,Ht.Name)}if(i.items!==!0)if(v&&!v.dynamicItems)v.items!==void 0&&(i.items=Vi.mergeEvaluated.items(a,v.items,i.items));else{const m=a.var("items",(0,Ht._)`${h}.evaluated.items`);i.items=Vi.mergeEvaluated.items(a,m,i.items,Ht.Name)}}}Qn.callRef=hs;Qn.default=MI;Object.defineProperty(El,"__esModule",{value:!0});const jI=Cl,VI=Qn,YI=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",jI.default,VI.default];El.default=YI;var Sl={},bl={};Object.defineProperty(bl,"__esModule",{value:!0});const Ts=xe,nn=Ts.operators,As={maximum:{okStr:"<=",ok:nn.LTE,fail:nn.GT},minimum:{okStr:">=",ok:nn.GTE,fail:nn.LT},exclusiveMaximum:{okStr:"<",ok:nn.LT,fail:nn.GTE},exclusiveMinimum:{okStr:">",ok:nn.GT,fail:nn.LTE}},KI={message:({keyword:e,schemaCode:t})=>(0,Ts.str)`must be ${As[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Ts._)`{comparison: ${As[e].okStr}, limit: ${t}}`},HI={keyword:Object.keys(As),type:"number",schemaType:"number",$data:!0,error:KI,code(e){const{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,Ts._)`${r} ${As[t].fail} ${n} || isNaN(${r})`)}};bl.default=HI;var Tl={};Object.defineProperty(Tl,"__esModule",{value:!0});const fi=xe,GI={message:({schemaCode:e})=>(0,fi.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,fi._)`{multipleOf: ${e}}`},qI={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:GI,code(e){const{gen:t,data:r,schemaCode:n,it:a}=e,i=a.opts.multipleOfPrecision,s=t.let("res"),o=i?(0,fi._)`Math.abs(Math.round(${s}) - ${s}) > 1e-${i}`:(0,fi._)`${s} !== parseInt(${s})`;e.fail$data((0,fi._)`(${n} === 0 || (${s} = ${r}/${n}, ${o}))`)}};Tl.default=qI;var Al={},wl={};Object.defineProperty(wl,"__esModule",{value:!0});function Ng(e){const t=e.length;let r=0,n=0,a;for(;n<t;)r++,a=e.charCodeAt(n++),a>=55296&&a<=56319&&n<t&&(a=e.charCodeAt(n),(a&64512)===56320&&n++);return r}wl.default=Ng;Ng.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(Al,"__esModule",{value:!0});const kn=xe,zI=pe,WI=wl,QI={message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,kn.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,kn._)`{limit: ${e}}`},XI={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:QI,code(e){const{keyword:t,data:r,schemaCode:n,it:a}=e,i=t==="maxLength"?kn.operators.GT:kn.operators.LT,s=a.opts.unicode===!1?(0,kn._)`${r}.length`:(0,kn._)`${(0,zI.useFunc)(e.gen,WI.default)}(${r})`;e.fail$data((0,kn._)`${s} ${i} ${n}`)}};Al.default=XI;var Il={};Object.defineProperty(Il,"__esModule",{value:!0});const JI=Pe,ws=xe,ZI={message:({schemaCode:e})=>(0,ws.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,ws._)`{pattern: ${e}}`},eO={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:ZI,code(e){const{data:t,$data:r,schema:n,schemaCode:a,it:i}=e,s=i.opts.unicodeRegExp?"u":"",o=r?(0,ws._)`(new RegExp(${a}, ${s}))`:(0,JI.usePattern)(e,n);e.fail$data((0,ws._)`!${o}.test(${t})`)}};Il.default=eO;var Ol={};Object.defineProperty(Ol,"__esModule",{value:!0});const di=xe,tO={message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,di.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,di._)`{limit: ${e}}`},rO={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:tO,code(e){const{keyword:t,data:r,schemaCode:n}=e,a=t==="maxProperties"?di.operators.GT:di.operators.LT;e.fail$data((0,di._)`Object.keys(${r}).length ${a} ${n}`)}};Ol.default=rO;var xl={};Object.defineProperty(xl,"__esModule",{value:!0});const ei=Pe,hi=xe,nO=pe,aO={message:({params:{missingProperty:e}})=>(0,hi.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,hi._)`{missingProperty: ${e}}`},iO={keyword:"required",type:"object",schemaType:"array",$data:!0,error:aO,code(e){const{gen:t,schema:r,schemaCode:n,data:a,$data:i,it:s}=e,{opts:o}=s;if(!i&&r.length===0)return;const u=r.length>=o.loopRequired;if(s.allErrors?c():l(),o.strictRequired){const p=e.parentSchema.properties,{definedProperties:h}=e.it;for(const _ of r)if((p==null?void 0:p[_])===void 0&&!h.has(_)){const v=s.schemaEnv.baseId+s.errSchemaPath,m=`required property "${_}" is not defined at "${v}" (strictRequired)`;(0,nO.checkStrictMode)(s,m,s.opts.strictRequired)}}function c(){if(u||i)e.block$data(hi.nil,f);else for(const p of r)(0,ei.checkReportMissingProp)(e,p)}function l(){const p=t.let("missing");if(u||i){const h=t.let("valid",!0);e.block$data(h,()=>d(p,h)),e.ok(h)}else t.if((0,ei.checkMissingProp)(e,r,p)),(0,ei.reportMissingProp)(e,p),t.else()}function f(){t.forOf("prop",n,p=>{e.setParams({missingProperty:p}),t.if((0,ei.noPropertyInData)(t,a,p,o.ownProperties),()=>e.error())})}function d(p,h){e.setParams({missingProperty:p}),t.forOf(p,n,()=>{t.assign(h,(0,ei.propertyInData)(t,a,p,o.ownProperties)),t.if((0,hi.not)(h),()=>{e.error(),t.break()})},hi.nil)}}};xl.default=iO;var Dl={};Object.defineProperty(Dl,"__esModule",{value:!0});const pi=xe,sO={message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,pi.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,pi._)`{limit: ${e}}`},oO={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:sO,code(e){const{keyword:t,data:r,schemaCode:n}=e,a=t==="maxItems"?pi.operators.GT:pi.operators.LT;e.fail$data((0,pi._)`${r}.length ${a} ${n}`)}};Dl.default=oO;var $l={},Ni={};Object.defineProperty(Ni,"__esModule",{value:!0});const Rg=ig;Rg.code='require("ajv/dist/runtime/equal").default';Ni.default=Rg;Object.defineProperty($l,"__esModule",{value:!0});const zo=Et,xt=xe,uO=pe,cO=Ni,lO={message:({params:{i:e,j:t}})=>(0,xt.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,xt._)`{i: ${e}, j: ${t}}`},fO={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:lO,code(e){const{gen:t,data:r,$data:n,schema:a,parentSchema:i,schemaCode:s,it:o}=e;if(!n&&!a)return;const u=t.let("valid"),c=i.items?(0,zo.getSchemaTypes)(i.items):[];e.block$data(u,l,(0,xt._)`${s} === false`),e.ok(u);function l(){const h=t.let("i",(0,xt._)`${r}.length`),_=t.let("j");e.setParams({i:h,j:_}),t.assign(u,!0),t.if((0,xt._)`${h} > 1`,()=>(f()?d:p)(h,_))}function f(){return c.length>0&&!c.some(h=>h==="object"||h==="array")}function d(h,_){const v=t.name("item"),m=(0,zo.checkDataTypes)(c,v,o.opts.strictNumbers,zo.DataType.Wrong),b=t.const("indices",(0,xt._)`{}`);t.for((0,xt._)`;${h}--;`,()=>{t.let(v,(0,xt._)`${r}[${h}]`),t.if(m,(0,xt._)`continue`),c.length>1&&t.if((0,xt._)`typeof ${v} == "string"`,(0,xt._)`${v} += "_"`),t.if((0,xt._)`typeof ${b}[${v}] == "number"`,()=>{t.assign(_,(0,xt._)`${b}[${v}]`),e.error(),t.assign(u,!1).break()}).code((0,xt._)`${b}[${v}] = ${h}`)})}function p(h,_){const v=(0,uO.useFunc)(t,cO.default),m=t.name("outer");t.label(m).for((0,xt._)`;${h}--;`,()=>t.for((0,xt._)`${_} = ${h}; ${_}--;`,()=>t.if((0,xt._)`${v}(${r}[${h}], ${r}[${_}])`,()=>{e.error(),t.assign(u,!1).break(m)})))}}};$l.default=fO;var Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});const pc=xe,dO=pe,hO=Ni,pO={message:"must be equal to constant",params:({schemaCode:e})=>(0,pc._)`{allowedValue: ${e}}`},mO={keyword:"const",$data:!0,error:pO,code(e){const{gen:t,data:r,$data:n,schemaCode:a,schema:i}=e;n||i&&typeof i=="object"?e.fail$data((0,pc._)`!${(0,dO.useFunc)(t,hO.default)}(${r}, ${a})`):e.fail((0,pc._)`${i} !== ${r}`)}};Nl.default=mO;var Rl={};Object.defineProperty(Rl,"__esModule",{value:!0});const si=xe,vO=pe,gO=Ni,_O={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,si._)`{allowedValues: ${e}}`},yO={keyword:"enum",schemaType:"array",$data:!0,error:_O,code(e){const{gen:t,data:r,$data:n,schema:a,schemaCode:i,it:s}=e;if(!n&&a.length===0)throw new Error("enum must have non-empty array");const o=a.length>=s.opts.loopEnum;let u;const c=()=>u??(u=(0,vO.useFunc)(t,gO.default));let l;if(o||n)l=t.let("valid"),e.block$data(l,f);else{if(!Array.isArray(a))throw new Error("ajv implementation error");const p=t.const("vSchema",i);l=(0,si.or)(...a.map((h,_)=>d(p,_)))}e.pass(l);function f(){t.assign(l,!1),t.forOf("v",i,p=>t.if((0,si._)`${c()}(${r}, ${p})`,()=>t.assign(l,!0).break()))}function d(p,h){const _=a[h];return typeof _=="object"&&_!==null?(0,si._)`${c()}(${r}, ${p}[${h}])`:(0,si._)`${r} === ${_}`}}};Rl.default=yO;Object.defineProperty(Sl,"__esModule",{value:!0});const EO=bl,CO=Tl,SO=Al,bO=Il,TO=Ol,AO=xl,wO=Dl,IO=$l,OO=Nl,xO=Rl,DO=[EO.default,CO.default,SO.default,bO.default,TO.default,AO.default,wO.default,IO.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},OO.default,xO.default];Sl.default=DO;var Pl={},Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.validateAdditionalItems=void 0;const Un=xe,mc=pe,$O={message:({params:{len:e}})=>(0,Un.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Un._)`{limit: ${e}}`},NO={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:$O,code(e){const{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,mc.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Pg(e,n)}};function Pg(e,t){const{gen:r,schema:n,data:a,keyword:i,it:s}=e;s.items=!0;const o=r.const("len",(0,Un._)`${a}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,Un._)`${o} <= ${t.length}`);else if(typeof n=="object"&&!(0,mc.alwaysValidSchema)(s,n)){const c=r.var("valid",(0,Un._)`${o} <= ${t.length}`);r.if((0,Un.not)(c),()=>u(c)),e.ok(c)}function u(c){r.forRange("i",t.length,o,l=>{e.subschema({keyword:i,dataProp:l,dataPropType:mc.Type.Num},c),s.allErrors||r.if((0,Un.not)(c),()=>r.break())})}}Ua.validateAdditionalItems=Pg;Ua.default=NO;var Ll={},Fa={};Object.defineProperty(Fa,"__esModule",{value:!0});Fa.validateTuple=void 0;const Mh=xe,ps=pe,RO=Pe,PO={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return Lg(e,"additionalItems",t);r.items=!0,!(0,ps.alwaysValidSchema)(r,t)&&e.ok((0,RO.validateArray)(e))}};function Lg(e,t,r=e.schema){const{gen:n,parentSchema:a,data:i,keyword:s,it:o}=e;l(a),o.opts.unevaluated&&r.length&&o.items!==!0&&(o.items=ps.mergeEvaluated.items(n,r.length,o.items));const u=n.name("valid"),c=n.const("len",(0,Mh._)`${i}.length`);r.forEach((f,d)=>{(0,ps.alwaysValidSchema)(o,f)||(n.if((0,Mh._)`${c} > ${d}`,()=>e.subschema({keyword:s,schemaProp:d,dataProp:d},u)),e.ok(u))});function l(f){const{opts:d,errSchemaPath:p}=o,h=r.length,_=h===f.minItems&&(h===f.maxItems||f[t]===!1);if(d.strictTuples&&!_){const v=`"${s}" is ${h}-tuple, but minItems or maxItems/${t} are not specified or different at path "${p}"`;(0,ps.checkStrictMode)(o,v,d.strictTuples)}}}Fa.validateTuple=Lg;Fa.default=PO;Object.defineProperty(Ll,"__esModule",{value:!0});const LO=Fa,BO={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,LO.validateTuple)(e,"items")};Ll.default=BO;var Bl={};Object.defineProperty(Bl,"__esModule",{value:!0});const jh=xe,kO=pe,UO=Pe,FO=Ua,MO={message:({params:{len:e}})=>(0,jh.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,jh._)`{limit: ${e}}`},jO={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:MO,code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:a}=r;n.items=!0,!(0,kO.alwaysValidSchema)(n,t)&&(a?(0,FO.validateAdditionalItems)(e,a):e.ok((0,UO.validateArray)(e)))}};Bl.default=jO;var kl={};Object.defineProperty(kl,"__esModule",{value:!0});const nr=xe,Yi=pe,VO={message:({params:{min:e,max:t}})=>t===void 0?(0,nr.str)`must contain at least ${e} valid item(s)`:(0,nr.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,nr._)`{minContains: ${e}}`:(0,nr._)`{minContains: ${e}, maxContains: ${t}}`},YO={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:VO,code(e){const{gen:t,schema:r,parentSchema:n,data:a,it:i}=e;let s,o;const{minContains:u,maxContains:c}=n;i.opts.next?(s=u===void 0?1:u,o=c):s=1;const l=t.const("len",(0,nr._)`${a}.length`);if(e.setParams({min:s,max:o}),o===void 0&&s===0){(0,Yi.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(o!==void 0&&s>o){(0,Yi.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Yi.alwaysValidSchema)(i,r)){let _=(0,nr._)`${l} >= ${s}`;o!==void 0&&(_=(0,nr._)`${_} && ${l} <= ${o}`),e.pass(_);return}i.items=!0;const f=t.name("valid");o===void 0&&s===1?p(f,()=>t.if(f,()=>t.break())):s===0?(t.let(f,!0),o!==void 0&&t.if((0,nr._)`${a}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const _=t.name("_valid"),v=t.let("count",0);p(_,()=>t.if(_,()=>h(v)))}function p(_,v){t.forRange("i",0,l,m=>{e.subschema({keyword:"contains",dataProp:m,dataPropType:Yi.Type.Num,compositeRule:!0},_),v()})}function h(_){t.code((0,nr._)`${_}++`),o===void 0?t.if((0,nr._)`${_} >= ${s}`,()=>t.assign(f,!0).break()):(t.if((0,nr._)`${_} > ${o}`,()=>t.assign(f,!1).break()),s===1?t.assign(f,!0):t.if((0,nr._)`${_} >= ${s}`,()=>t.assign(f,!0)))}}};kl.default=YO;var Bg={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=xe,r=pe,n=Pe;e.error={message:({params:{property:u,depsCount:c,deps:l}})=>{const f=c===1?"property":"properties";return(0,t.str)`must have ${f} ${l} when property ${u} is present`},params:({params:{property:u,depsCount:c,deps:l,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${c},
    deps: ${l}}`};const a={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[c,l]=i(u);s(u,c),o(u,l)}};function i({schema:u}){const c={},l={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?c:l;d[f]=u[f]}return[c,l]}function s(u,c=u.schema){const{gen:l,data:f,it:d}=u;if(Object.keys(c).length===0)return;const p=l.let("missing");for(const h in c){const _=c[h];if(_.length===0)continue;const v=(0,n.propertyInData)(l,f,h,d.opts.ownProperties);u.setParams({property:h,depsCount:_.length,deps:_.join(", ")}),d.allErrors?l.if(v,()=>{for(const m of _)(0,n.checkReportMissingProp)(u,m)}):(l.if((0,t._)`${v} && (${(0,n.checkMissingProp)(u,_,p)})`),(0,n.reportMissingProp)(u,p),l.else())}}e.validatePropertyDeps=s;function o(u,c=u.schema){const{gen:l,data:f,keyword:d,it:p}=u,h=l.name("valid");for(const _ in c)(0,r.alwaysValidSchema)(p,c[_])||(l.if((0,n.propertyInData)(l,f,_,p.opts.ownProperties),()=>{const v=u.subschema({keyword:d,schemaProp:_},h);u.mergeValidEvaluated(v,h)},()=>l.var(h,!0)),u.ok(h))}e.validateSchemaDeps=o,e.default=a})(Bg);var Ul={};Object.defineProperty(Ul,"__esModule",{value:!0});const kg=xe,KO=pe,HO={message:"property name must be valid",params:({params:e})=>(0,kg._)`{propertyName: ${e.propertyName}}`},GO={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:HO,code(e){const{gen:t,schema:r,data:n,it:a}=e;if((0,KO.alwaysValidSchema)(a,r))return;const i=t.name("valid");t.forIn("key",n,s=>{e.setParams({propertyName:s}),e.subschema({keyword:"propertyNames",data:s,dataTypes:["string"],propertyName:s,compositeRule:!0},i),t.if((0,kg.not)(i),()=>{e.error(!0),a.allErrors||t.break()})}),e.ok(i)}};Ul.default=GO;var io={};Object.defineProperty(io,"__esModule",{value:!0});const Ki=Pe,dr=xe,qO=Pr,Hi=pe,zO={message:"must NOT have additional properties",params:({params:e})=>(0,dr._)`{additionalProperty: ${e.additionalProperty}}`},WO={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:zO,code(e){const{gen:t,schema:r,parentSchema:n,data:a,errsCount:i,it:s}=e;if(!i)throw new Error("ajv implementation error");const{allErrors:o,opts:u}=s;if(s.props=!0,u.removeAdditional!=="all"&&(0,Hi.alwaysValidSchema)(s,r))return;const c=(0,Ki.allSchemaProperties)(n.properties),l=(0,Ki.allSchemaProperties)(n.patternProperties);f(),e.ok((0,dr._)`${i} === ${qO.default.errors}`);function f(){t.forIn("key",a,v=>{!c.length&&!l.length?h(v):t.if(d(v),()=>h(v))})}function d(v){let m;if(c.length>8){const b=(0,Hi.schemaRefOrVal)(s,n.properties,"properties");m=(0,Ki.isOwnProperty)(t,b,v)}else c.length?m=(0,dr.or)(...c.map(b=>(0,dr._)`${v} === ${b}`)):m=dr.nil;return l.length&&(m=(0,dr.or)(m,...l.map(b=>(0,dr._)`${(0,Ki.usePattern)(e,b)}.test(${v})`))),(0,dr.not)(m)}function p(v){t.code((0,dr._)`delete ${a}[${v}]`)}function h(v){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){p(v);return}if(r===!1){e.setParams({additionalProperty:v}),e.error(),o||t.break();return}if(typeof r=="object"&&!(0,Hi.alwaysValidSchema)(s,r)){const m=t.name("valid");u.removeAdditional==="failing"?(_(v,m,!1),t.if((0,dr.not)(m),()=>{e.reset(),p(v)})):(_(v,m),o||t.if((0,dr.not)(m),()=>t.break()))}}function _(v,m,b){const A={keyword:"additionalProperties",dataProp:v,dataPropType:Hi.Type.Str};b===!1&&Object.assign(A,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(A,m)}}};io.default=WO;var Fl={};Object.defineProperty(Fl,"__esModule",{value:!0});const QO=gr,Vh=Pe,Wo=pe,Yh=io,XO={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:n,data:a,it:i}=e;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&Yh.default.code(new QO.KeywordCxt(i,Yh.default,"additionalProperties"));const s=(0,Vh.allSchemaProperties)(r);for(const f of s)i.definedProperties.add(f);i.opts.unevaluated&&s.length&&i.props!==!0&&(i.props=Wo.mergeEvaluated.props(t,(0,Wo.toHash)(s),i.props));const o=s.filter(f=>!(0,Wo.alwaysValidSchema)(i,r[f]));if(o.length===0)return;const u=t.name("valid");for(const f of o)c(f)?l(f):(t.if((0,Vh.propertyInData)(t,a,f,i.opts.ownProperties)),l(f),i.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function c(f){return i.opts.useDefaults&&!i.compositeRule&&r[f].default!==void 0}function l(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};Fl.default=XO;var Ml={};Object.defineProperty(Ml,"__esModule",{value:!0});const Kh=Pe,Gi=xe,Hh=pe,Gh=pe,JO={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:n,parentSchema:a,it:i}=e,{opts:s}=i,o=(0,Kh.allSchemaProperties)(r),u=o.filter(_=>(0,Hh.alwaysValidSchema)(i,r[_]));if(o.length===0||u.length===o.length&&(!i.opts.unevaluated||i.props===!0))return;const c=s.strictSchema&&!s.allowMatchingProperties&&a.properties,l=t.name("valid");i.props!==!0&&!(i.props instanceof Gi.Name)&&(i.props=(0,Gh.evaluatedPropsToName)(t,i.props));const{props:f}=i;d();function d(){for(const _ of o)c&&p(_),i.allErrors?h(_):(t.var(l,!0),h(_),t.if(l))}function p(_){for(const v in c)new RegExp(_).test(v)&&(0,Hh.checkStrictMode)(i,`property ${v} matches pattern ${_} (use allowMatchingProperties)`)}function h(_){t.forIn("key",n,v=>{t.if((0,Gi._)`${(0,Kh.usePattern)(e,_)}.test(${v})`,()=>{const m=u.includes(_);m||e.subschema({keyword:"patternProperties",schemaProp:_,dataProp:v,dataPropType:Gh.Type.Str},l),i.opts.unevaluated&&f!==!0?t.assign((0,Gi._)`${f}[${v}]`,!0):!m&&!i.allErrors&&t.if((0,Gi.not)(l),()=>t.break())})})}}};Ml.default=JO;var jl={};Object.defineProperty(jl,"__esModule",{value:!0});const ZO=pe,ex={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:n}=e;if((0,ZO.alwaysValidSchema)(n,r)){e.fail();return}const a=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},a),e.failResult(a,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};jl.default=ex;var Vl={};Object.defineProperty(Vl,"__esModule",{value:!0});const tx=Pe,rx={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:tx.validateUnion,error:{message:"must match a schema in anyOf"}};Vl.default=rx;var Yl={};Object.defineProperty(Yl,"__esModule",{value:!0});const ms=xe,nx=pe,ax={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,ms._)`{passingSchemas: ${e.passing}}`},ix={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:ax,code(e){const{gen:t,schema:r,parentSchema:n,it:a}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(a.opts.discriminator&&n.discriminator)return;const i=r,s=t.let("valid",!1),o=t.let("passing",null),u=t.name("_valid");e.setParams({passing:o}),t.block(c),e.result(s,()=>e.reset(),()=>e.error(!0));function c(){i.forEach((l,f)=>{let d;(0,nx.alwaysValidSchema)(a,l)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,ms._)`${u} && ${s}`).assign(s,!1).assign(o,(0,ms._)`[${o}, ${f}]`).else(),t.if(u,()=>{t.assign(s,!0),t.assign(o,f),d&&e.mergeEvaluated(d,ms.Name)})})}}};Yl.default=ix;var Kl={};Object.defineProperty(Kl,"__esModule",{value:!0});const sx=pe,ox={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const a=t.name("valid");r.forEach((i,s)=>{if((0,sx.alwaysValidSchema)(n,i))return;const o=e.subschema({keyword:"allOf",schemaProp:s},a);e.ok(a),e.mergeEvaluated(o)})}};Kl.default=ox;var Hl={};Object.defineProperty(Hl,"__esModule",{value:!0});const Is=xe,Ug=pe,ux={message:({params:e})=>(0,Is.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,Is._)`{failingKeyword: ${e.ifClause}}`},cx={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:ux,code(e){const{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,Ug.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const a=qh(n,"then"),i=qh(n,"else");if(!a&&!i)return;const s=t.let("valid",!0),o=t.name("_valid");if(u(),e.reset(),a&&i){const l=t.let("ifClause");e.setParams({ifClause:l}),t.if(o,c("then",l),c("else",l))}else a?t.if(o,c("then")):t.if((0,Is.not)(o),c("else"));e.pass(s,()=>e.error(!0));function u(){const l=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},o);e.mergeEvaluated(l)}function c(l,f){return()=>{const d=e.subschema({keyword:l},o);t.assign(s,o),e.mergeValidEvaluated(d,s),f?t.assign(f,(0,Is._)`${l}`):e.setParams({ifClause:l})}}}};function qh(e,t){const r=e.schema[t];return r!==void 0&&!(0,Ug.alwaysValidSchema)(e,r)}Hl.default=cx;var Gl={};Object.defineProperty(Gl,"__esModule",{value:!0});const lx=pe,fx={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,lx.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};Gl.default=fx;Object.defineProperty(Pl,"__esModule",{value:!0});const dx=Ua,hx=Ll,px=Fa,mx=Bl,vx=kl,gx=Bg,_x=Ul,yx=io,Ex=Fl,Cx=Ml,Sx=jl,bx=Vl,Tx=Yl,Ax=Kl,wx=Hl,Ix=Gl;function Ox(e=!1){const t=[Sx.default,bx.default,Tx.default,Ax.default,wx.default,Ix.default,_x.default,yx.default,gx.default,Ex.default,Cx.default];return e?t.push(hx.default,mx.default):t.push(dx.default,px.default),t.push(vx.default),t}Pl.default=Ox;var ql={},zl={};Object.defineProperty(zl,"__esModule",{value:!0});const ht=xe,xx={message:({schemaCode:e})=>(0,ht.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,ht._)`{format: ${e}}`},Dx={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:xx,code(e,t){const{gen:r,data:n,$data:a,schema:i,schemaCode:s,it:o}=e,{opts:u,errSchemaPath:c,schemaEnv:l,self:f}=o;if(!u.validateFormats)return;a?d():p();function d(){const h=r.scopeValue("formats",{ref:f.formats,code:u.code.formats}),_=r.const("fDef",(0,ht._)`${h}[${s}]`),v=r.let("fType"),m=r.let("format");r.if((0,ht._)`typeof ${_} == "object" && !(${_} instanceof RegExp)`,()=>r.assign(v,(0,ht._)`${_}.type || "string"`).assign(m,(0,ht._)`${_}.validate`),()=>r.assign(v,(0,ht._)`"string"`).assign(m,_)),e.fail$data((0,ht.or)(b(),A()));function b(){return u.strictSchema===!1?ht.nil:(0,ht._)`${s} && !${m}`}function A(){const D=l.$async?(0,ht._)`(${_}.async ? await ${m}(${n}) : ${m}(${n}))`:(0,ht._)`${m}(${n})`,x=(0,ht._)`(typeof ${m} == "function" ? ${D} : ${m}.test(${n}))`;return(0,ht._)`${m} && ${m} !== true && ${v} === ${t} && !${x}`}}function p(){const h=f.formats[i];if(!h){b();return}if(h===!0)return;const[_,v,m]=A(h);_===t&&e.pass(D());function b(){if(u.strictSchema===!1){f.logger.warn(x());return}throw new Error(x());function x(){return`unknown format "${i}" ignored in schema at path "${c}"`}}function A(x){const Y=x instanceof RegExp?(0,ht.regexpCode)(x):u.code.formats?(0,ht._)`${u.code.formats}${(0,ht.getProperty)(i)}`:void 0,X=r.scopeValue("formats",{key:i,ref:x,code:Y});return typeof x=="object"&&!(x instanceof RegExp)?[x.type||"string",x.validate,(0,ht._)`${X}.validate`]:["string",x,X]}function D(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!l.$async)throw new Error("async format in sync schema");return(0,ht._)`await ${m}(${n})`}return typeof v=="function"?(0,ht._)`${m}(${n})`:(0,ht._)`${m}.test(${n})`}}}};zl.default=Dx;Object.defineProperty(ql,"__esModule",{value:!0});const $x=zl,Nx=[$x.default];ql.default=Nx;var Na={};Object.defineProperty(Na,"__esModule",{value:!0});Na.contentVocabulary=Na.metadataVocabulary=void 0;Na.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Na.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(yl,"__esModule",{value:!0});const Rx=El,Px=Sl,Lx=Pl,Bx=ql,zh=Na,kx=[Rx.default,Px.default,(0,Lx.default)(),Bx.default,zh.metadataVocabulary,zh.contentVocabulary];yl.default=kx;var Wl={},so={};Object.defineProperty(so,"__esModule",{value:!0});so.DiscrError=void 0;var Wh;(function(e){e.Tag="tag",e.Mapping="mapping"})(Wh||(so.DiscrError=Wh={}));Object.defineProperty(Wl,"__esModule",{value:!0});const _a=xe,vc=so,Qh=qt,Ux=ka,Fx=pe,Mx={message:({params:{discrError:e,tagName:t}})=>e===vc.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,_a._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},jx={keyword:"discriminator",type:"object",schemaType:"object",error:Mx,code(e){const{gen:t,data:r,schema:n,parentSchema:a,it:i}=e,{oneOf:s}=a;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");const o=n.propertyName;if(typeof o!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!s)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),c=t.const("tag",(0,_a._)`${r}${(0,_a.getProperty)(o)}`);t.if((0,_a._)`typeof ${c} == "string"`,()=>l(),()=>e.error(!1,{discrError:vc.DiscrError.Tag,tag:c,tagName:o})),e.ok(u);function l(){const p=d();t.if(!1);for(const h in p)t.elseIf((0,_a._)`${c} === ${h}`),t.assign(u,f(p[h]));t.else(),e.error(!1,{discrError:vc.DiscrError.Mapping,tag:c,tagName:o}),t.endIf()}function f(p){const h=t.name("valid"),_=e.subschema({keyword:"oneOf",schemaProp:p},h);return e.mergeEvaluated(_,_a.Name),h}function d(){var p;const h={},_=m(a);let v=!0;for(let D=0;D<s.length;D++){let x=s[D];if(x!=null&&x.$ref&&!(0,Fx.schemaHasRulesButRef)(x,i.self.RULES)){const X=x.$ref;if(x=Qh.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,X),x instanceof Qh.SchemaEnv&&(x=x.schema),x===void 0)throw new Ux.default(i.opts.uriResolver,i.baseId,X)}const Y=(p=x==null?void 0:x.properties)===null||p===void 0?void 0:p[o];if(typeof Y!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${o}"`);v=v&&(_||m(x)),b(Y,D)}if(!v)throw new Error(`discriminator: "${o}" must be required`);return h;function m({required:D}){return Array.isArray(D)&&D.includes(o)}function b(D,x){if(D.const)A(D.const,x);else if(D.enum)for(const Y of D.enum)A(Y,x);else throw new Error(`discriminator: "properties/${o}" must have "const" or "enum"`)}function A(D,x){if(typeof D!="string"||D in h)throw new Error(`discriminator: "${o}" values must be unique strings`);h[D]=x}}}};Wl.default=jx;const Vx="http://json-schema.org/draft-07/schema#",Yx="http://json-schema.org/draft-07/schema#",Kx="Core schema meta-schema",Hx={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Gx=["object","boolean"],qx={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},zx={$schema:Vx,$id:Yx,title:Kx,definitions:Hx,type:Gx,properties:qx,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=Yv,n=yl,a=Wl,i=zx,s=["/properties"],o="http://json-schema.org/draft-07/schema";class u extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(h=>this.addVocabulary(h)),this.opts.discriminator&&this.addKeyword(a.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const h=this.opts.$data?this.$dataMetaSchema(i,s):i;this.addMetaSchema(h,o,!1),this.refs["http://json-schema.org/schema"]=o}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(o)?o:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var c=gr;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return c.KeywordCxt}});var l=xe;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return l._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return l.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return l.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return l.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return l.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return l.CodeGen}});var f=$i;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=ka;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(uc,uc.exports);var Fg=uc.exports;const Wx=Ba(Fg);var gc={exports:{}},Mg={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0;function t(W,J){return{validate:W,compare:J}}e.fullFormats={date:t(i,s),time:t(u,c),"date-time":t(f,d),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:_,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:Z,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:m,int32:{type:"number",validate:D},int64:{type:"number",validate:x},float:{type:"number",validate:Y},double:{type:"number",validate:Y},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,s),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,d),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);function r(W){return W%4===0&&(W%100!==0||W%400===0)}const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,a=[0,31,28,31,30,31,30,31,31,30,31,30,31];function i(W){const J=n.exec(W);if(!J)return!1;const ee=+J[1],oe=+J[2],z=+J[3];return oe>=1&&oe<=12&&z>=1&&z<=(oe===2&&r(ee)?29:a[oe])}function s(W,J){if(W&&J)return W>J?1:W<J?-1:0}const o=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function u(W,J){const ee=o.exec(W);if(!ee)return!1;const oe=+ee[1],z=+ee[2],M=+ee[3],N=ee[5];return(oe<=23&&z<=59&&M<=59||oe===23&&z===59&&M===60)&&(!J||N!=="")}function c(W,J){if(!(W&&J))return;const ee=o.exec(W),oe=o.exec(J);if(ee&&oe)return W=ee[1]+ee[2]+ee[3]+(ee[4]||""),J=oe[1]+oe[2]+oe[3]+(oe[4]||""),W>J?1:W<J?-1:0}const l=/t|\s/i;function f(W){const J=W.split(l);return J.length===2&&i(J[0])&&u(J[1],!0)}function d(W,J){if(!(W&&J))return;const[ee,oe]=W.split(l),[z,M]=J.split(l),N=s(ee,z);if(N!==void 0)return N||c(oe,M)}const p=/\/|:/,h=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function _(W){return p.test(W)&&h.test(W)}const v=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function m(W){return v.lastIndex=0,v.test(W)}const b=-2147483648,A=2**31-1;function D(W){return Number.isInteger(W)&&W<=A&&W>=b}function x(W){return Number.isInteger(W)}function Y(){return!0}const X=/[^\\]\\Z/;function Z(W){if(X.test(W))return!1;try{return new RegExp(W),!0}catch{return!1}}})(Mg);var jg={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=Fg,r=xe,n=r.operators,a={formatMaximum:{okStr:"<=",ok:n.LTE,fail:n.GT},formatMinimum:{okStr:">=",ok:n.GTE,fail:n.LT},formatExclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},formatExclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},i={message:({keyword:o,schemaCode:u})=>r.str`should be ${a[o].okStr} ${u}`,params:({keyword:o,schemaCode:u})=>r._`{comparison: ${a[o].okStr}, limit: ${u}}`};e.formatLimitDefinition={keyword:Object.keys(a),type:"string",schemaType:"string",$data:!0,error:i,code(o){const{gen:u,data:c,schemaCode:l,keyword:f,it:d}=o,{opts:p,self:h}=d;if(!p.validateFormats)return;const _=new t.KeywordCxt(d,h.RULES.all.format.definition,"format");_.$data?v():m();function v(){const A=u.scopeValue("formats",{ref:h.formats,code:p.code.formats}),D=u.const("fmt",r._`${A}[${_.schemaCode}]`);o.fail$data(r.or(r._`typeof ${D} != "object"`,r._`${D} instanceof RegExp`,r._`typeof ${D}.compare != "function"`,b(D)))}function m(){const A=_.schema,D=h.formats[A];if(!D||D===!0)return;if(typeof D!="object"||D instanceof RegExp||typeof D.compare!="function")throw new Error(`"${f}": format "${A}" does not define "compare" function`);const x=u.scopeValue("formats",{key:A,ref:D,code:p.code.formats?r._`${p.code.formats}${r.getProperty(A)}`:void 0});o.fail$data(b(x))}function b(A){return r._`${A}.compare(${c}, ${l}) ${a[f].fail} 0`}},dependencies:["format"]};const s=o=>(o.addKeyword(e.formatLimitDefinition),o);e.default=s})(jg);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=Mg,n=jg,a=xe,i=new a.Name("fullFormats"),s=new a.Name("fastFormats"),o=(c,l={keywords:!0})=>{if(Array.isArray(l))return u(c,l,r.fullFormats,i),c;const[f,d]=l.mode==="fast"?[r.fastFormats,s]:[r.fullFormats,i],p=l.formats||r.formatNames;return u(c,p,f,d),l.keywords&&n.default(c),c};o.get=(c,l="full")=>{const d=(l==="fast"?r.fastFormats:r.fullFormats)[c];if(!d)throw new Error(`Unknown format "${c}"`);return d};function u(c,l,f,d){var p,h;(p=(h=c.opts.code).formats)!==null&&p!==void 0||(h.formats=a._`require("ajv-formats/dist/formats").${d}`);for(const _ of l)c.addFormat(_,f[_])}e.exports=t=o,Object.defineProperty(t,"__esModule",{value:!0}),t.default=o})(gc,gc.exports);var Qx=gc.exports;const Xx=Ba(Qx),Jx=(e,t,r,n)=>{if(r==="length"||r==="prototype"||r==="arguments"||r==="caller")return;const a=Object.getOwnPropertyDescriptor(e,r),i=Object.getOwnPropertyDescriptor(t,r);!Zx(a,i)&&n||Object.defineProperty(e,r,i)},Zx=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},eD=(e,t)=>{const r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)},tD=(e,t)=>`/* Wrapped ${e}*/
${t}`,rD=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),nD=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),aD=(e,t,r)=>{const n=r===""?"":`with ${r.trim()}() `,a=tD.bind(null,n,t.toString());Object.defineProperty(a,"name",nD),Object.defineProperty(e,"toString",{...rD,value:a})};function iD(e,t,{ignoreNonConfigurable:r=!1}={}){const{name:n}=e;for(const a of Reflect.ownKeys(t))Jx(e,t,a,r);return eD(e,t),aD(e,t,n),e}const Xh=(e,t={})=>{if(typeof e!="function")throw new TypeError(`Expected the first argument to be a function, got \`${typeof e}\``);const{wait:r=0,maxWait:n=Number.POSITIVE_INFINITY,before:a=!1,after:i=!0}=t;if(!a&&!i)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let s,o,u;const c=function(...l){const f=this,d=()=>{s=void 0,o&&(clearTimeout(o),o=void 0),i&&(u=e.apply(f,l))},p=()=>{o=void 0,s&&(clearTimeout(s),s=void 0),i&&(u=e.apply(f,l))},h=a&&!s;return clearTimeout(s),s=setTimeout(d,r),n>0&&n!==Number.POSITIVE_INFINITY&&!o&&(o=setTimeout(p,n)),h&&(u=e.apply(f,l)),u};return iD(c,e),c.cancel=()=>{s&&(clearTimeout(s),s=void 0),o&&(clearTimeout(o),o=void 0)},c};var _c={exports:{}};const sD="2.0.0",Vg=256,oD=Number.MAX_SAFE_INTEGER||9007199254740991,uD=16,cD=Vg-6,lD=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var oo={MAX_LENGTH:Vg,MAX_SAFE_COMPONENT_LENGTH:uD,MAX_SAFE_BUILD_LENGTH:cD,MAX_SAFE_INTEGER:oD,RELEASE_TYPES:lD,SEMVER_SPEC_VERSION:sD,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const fD=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var uo=fD;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:a}=oo,i=uo;t=e.exports={};const s=t.re=[],o=t.safeRe=[],u=t.src=[],c=t.t={};let l=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",a],[f,n]],p=_=>{for(const[v,m]of d)_=_.split(`${v}*`).join(`${v}{0,${m}}`).split(`${v}+`).join(`${v}{1,${m}}`);return _},h=(_,v,m)=>{const b=p(v),A=l++;i(_,A,v),c[_]=A,u[A]=v,s[A]=new RegExp(v,m?"g":void 0),o[A]=new RegExp(b,m?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),h("MAINVERSION",`(${u[c.NUMERICIDENTIFIER]})\\.(${u[c.NUMERICIDENTIFIER]})\\.(${u[c.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${u[c.NUMERICIDENTIFIERLOOSE]})\\.(${u[c.NUMERICIDENTIFIERLOOSE]})\\.(${u[c.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${u[c.NUMERICIDENTIFIER]}|${u[c.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${u[c.NUMERICIDENTIFIERLOOSE]}|${u[c.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${u[c.PRERELEASEIDENTIFIER]}(?:\\.${u[c.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${u[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[c.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${f}+`),h("BUILD",`(?:\\+(${u[c.BUILDIDENTIFIER]}(?:\\.${u[c.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${u[c.MAINVERSION]}${u[c.PRERELEASE]}?${u[c.BUILD]}?`),h("FULL",`^${u[c.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${u[c.MAINVERSIONLOOSE]}${u[c.PRERELEASELOOSE]}?${u[c.BUILD]}?`),h("LOOSE",`^${u[c.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${u[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${u[c.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${u[c.XRANGEIDENTIFIER]})(?:\\.(${u[c.XRANGEIDENTIFIER]})(?:\\.(${u[c.XRANGEIDENTIFIER]})(?:${u[c.PRERELEASE]})?${u[c.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${u[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[c.XRANGEIDENTIFIERLOOSE]})(?:${u[c.PRERELEASELOOSE]})?${u[c.BUILD]}?)?)?`),h("XRANGE",`^${u[c.GTLT]}\\s*${u[c.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${u[c.GTLT]}\\s*${u[c.XRANGEPLAINLOOSE]}$`),h("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),h("COERCE",`${u[c.COERCEPLAIN]}(?:$|[^\\d])`),h("COERCEFULL",u[c.COERCEPLAIN]+`(?:${u[c.PRERELEASE]})?(?:${u[c.BUILD]})?(?:$|[^\\d])`),h("COERCERTL",u[c.COERCE],!0),h("COERCERTLFULL",u[c.COERCEFULL],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${u[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${u[c.LONETILDE]}${u[c.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${u[c.LONETILDE]}${u[c.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${u[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${u[c.LONECARET]}${u[c.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${u[c.LONECARET]}${u[c.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${u[c.GTLT]}\\s*(${u[c.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${u[c.GTLT]}\\s*(${u[c.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${u[c.GTLT]}\\s*(${u[c.LOOSEPLAIN]}|${u[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${u[c.XRANGEPLAIN]})\\s+-\\s+(${u[c.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${u[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[c.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(_c,_c.exports);var Ri=_c.exports;const dD=Object.freeze({loose:!0}),hD=Object.freeze({}),pD=e=>e?typeof e!="object"?dD:e:hD;var Ql=pD;const Jh=/^[0-9]+$/,Yg=(e,t)=>{const r=Jh.test(e),n=Jh.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},mD=(e,t)=>Yg(t,e);var Kg={compareIdentifiers:Yg,rcompareIdentifiers:mD};const qi=uo,{MAX_LENGTH:Zh,MAX_SAFE_INTEGER:zi}=oo,{safeRe:ep,t:tp}=Ri,vD=Ql,{compareIdentifiers:da}=Kg;let gD=class Cr{constructor(t,r){if(r=vD(r),t instanceof Cr){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Zh)throw new TypeError(`version is longer than ${Zh} characters`);qi("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?ep[tp.LOOSE]:ep[tp.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>zi||this.major<0)throw new TypeError("Invalid major version");if(this.minor>zi||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>zi||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){const i=+a;if(i>=0&&i<zi)return i}return a}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(qi("SemVer.compare",this.version,this.options,t),!(t instanceof Cr)){if(typeof t=="string"&&t===this.version)return 0;t=new Cr(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Cr||(t=new Cr(t,this.options)),da(this.major,t.major)||da(this.minor,t.minor)||da(this.patch,t.patch)}comparePre(t){if(t instanceof Cr||(t=new Cr(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],a=t.prerelease[r];if(qi("prerelease compare",r,n,a),n===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(n===void 0)return-1;if(n===a)continue;return da(n,a)}while(++r)}compareBuild(t){t instanceof Cr||(t=new Cr(t,this.options));let r=0;do{const n=this.build[r],a=t.build[r];if(qi("build compare",r,n,a),n===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(n===void 0)return-1;if(n===a)continue;return da(n,a)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const a=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[a];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(a)}}if(r){let i=[r,a];n===!1&&(i=[r]),da(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Kt=gD;const rp=Kt,_D=(e,t,r=!1)=>{if(e instanceof rp)return e;try{return new rp(e,t)}catch(n){if(!r)return null;throw n}};var Ma=_D;const yD=Ma,ED=(e,t)=>{const r=yD(e,t);return r?r.version:null};var CD=ED;const SD=Ma,bD=(e,t)=>{const r=SD(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var TD=bD;const np=Kt,AD=(e,t,r,n,a)=>{typeof r=="string"&&(a=n,n=r,r=void 0);try{return new np(e instanceof np?e.version:e,r).inc(t,n,a).version}catch{return null}};var wD=AD;const ap=Ma,ID=(e,t)=>{const r=ap(e,null,!0),n=ap(t,null,!0),a=r.compare(n);if(a===0)return null;const i=a>0,s=i?r:n,o=i?n:r,u=!!s.prerelease.length;if(!!o.prerelease.length&&!u)return!o.patch&&!o.minor?"major":s.patch?"patch":s.minor?"minor":"major";const l=u?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};var OD=ID;const xD=Kt,DD=(e,t)=>new xD(e,t).major;var $D=DD;const ND=Kt,RD=(e,t)=>new ND(e,t).minor;var PD=RD;const LD=Kt,BD=(e,t)=>new LD(e,t).patch;var kD=BD;const UD=Ma,FD=(e,t)=>{const r=UD(e,t);return r&&r.prerelease.length?r.prerelease:null};var MD=FD;const ip=Kt,jD=(e,t,r)=>new ip(e,r).compare(new ip(t,r));var _r=jD;const VD=_r,YD=(e,t,r)=>VD(t,e,r);var KD=YD;const HD=_r,GD=(e,t)=>HD(e,t,!0);var qD=GD;const sp=Kt,zD=(e,t,r)=>{const n=new sp(e,r),a=new sp(t,r);return n.compare(a)||n.compareBuild(a)};var Xl=zD;const WD=Xl,QD=(e,t)=>e.sort((r,n)=>WD(r,n,t));var XD=QD;const JD=Xl,ZD=(e,t)=>e.sort((r,n)=>JD(n,r,t));var e$=ZD;const t$=_r,r$=(e,t,r)=>t$(e,t,r)>0;var co=r$;const n$=_r,a$=(e,t,r)=>n$(e,t,r)<0;var Jl=a$;const i$=_r,s$=(e,t,r)=>i$(e,t,r)===0;var Hg=s$;const o$=_r,u$=(e,t,r)=>o$(e,t,r)!==0;var Gg=u$;const c$=_r,l$=(e,t,r)=>c$(e,t,r)>=0;var Zl=l$;const f$=_r,d$=(e,t,r)=>f$(e,t,r)<=0;var ef=d$;const h$=Hg,p$=Gg,m$=co,v$=Zl,g$=Jl,_$=ef,y$=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return h$(e,r,n);case"!=":return p$(e,r,n);case">":return m$(e,r,n);case">=":return v$(e,r,n);case"<":return g$(e,r,n);case"<=":return _$(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var qg=y$;const E$=Kt,C$=Ma,{safeRe:Wi,t:Qi}=Ri,S$=(e,t)=>{if(e instanceof E$)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?Wi[Qi.COERCEFULL]:Wi[Qi.COERCE]);else{const u=t.includePrerelease?Wi[Qi.COERCERTLFULL]:Wi[Qi.COERCERTL];let c;for(;(c=u.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||c.index+c[0].length!==r.index+r[0].length)&&(r=c),u.lastIndex=c.index+c[1].length+c[2].length;u.lastIndex=-1}if(r===null)return null;const n=r[2],a=r[3]||"0",i=r[4]||"0",s=t.includePrerelease&&r[5]?`-${r[5]}`:"",o=t.includePrerelease&&r[6]?`+${r[6]}`:"";return C$(`${n}.${a}.${i}${s}${o}`,t)};var b$=S$;class T${constructor(){this.max=1e3,this.map=new Map}get(t){const r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(t,r)}return this}}var A$=T$,Qo,op;function yr(){if(op)return Qo;op=1;const e=/\s+/g;class t{constructor(N,U){if(U=a(U),N instanceof t)return N.loose===!!U.loose&&N.includePrerelease===!!U.includePrerelease?N:new t(N.raw,U);if(N instanceof i)return this.raw=N.value,this.set=[[N]],this.formatted=void 0,this;if(this.options=U,this.loose=!!U.loose,this.includePrerelease=!!U.includePrerelease,this.raw=N.trim().replace(e," "),this.set=this.raw.split("||").map(L=>this.parseRange(L.trim())).filter(L=>L.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const L=this.set[0];if(this.set=this.set.filter(H=>!_(H[0])),this.set.length===0)this.set=[L];else if(this.set.length>1){for(const H of this.set)if(H.length===1&&v(H[0])){this.set=[H];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let N=0;N<this.set.length;N++){N>0&&(this.formatted+="||");const U=this.set[N];for(let L=0;L<U.length;L++)L>0&&(this.formatted+=" "),this.formatted+=U[L].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(N){const L=((this.options.includePrerelease&&p)|(this.options.loose&&h))+":"+N,H=n.get(L);if(H)return H;const w=this.options.loose,R=w?u[c.HYPHENRANGELOOSE]:u[c.HYPHENRANGE];N=N.replace(R,oe(this.options.includePrerelease)),s("hyphen replace",N),N=N.replace(u[c.COMPARATORTRIM],l),s("comparator trim",N),N=N.replace(u[c.TILDETRIM],f),s("tilde trim",N),N=N.replace(u[c.CARETTRIM],d),s("caret trim",N);let O=N.split(" ").map(C=>b(C,this.options)).join(" ").split(/\s+/).map(C=>ee(C,this.options));w&&(O=O.filter(C=>(s("loose invalid filter",C,this.options),!!C.match(u[c.COMPARATORLOOSE])))),s("range list",O);const P=new Map,g=O.map(C=>new i(C,this.options));for(const C of g){if(_(C))return[C];P.set(C.value,C)}P.size>1&&P.has("")&&P.delete("");const y=[...P.values()];return n.set(L,y),y}intersects(N,U){if(!(N instanceof t))throw new TypeError("a Range is required");return this.set.some(L=>m(L,U)&&N.set.some(H=>m(H,U)&&L.every(w=>H.every(R=>w.intersects(R,U)))))}test(N){if(!N)return!1;if(typeof N=="string")try{N=new o(N,this.options)}catch{return!1}for(let U=0;U<this.set.length;U++)if(z(this.set[U],N,this.options))return!0;return!1}}Qo=t;const r=A$,n=new r,a=Ql,i=lo(),s=uo,o=Kt,{safeRe:u,t:c,comparatorTrimReplace:l,tildeTrimReplace:f,caretTrimReplace:d}=Ri,{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:h}=oo,_=M=>M.value==="<0.0.0-0",v=M=>M.value==="",m=(M,N)=>{let U=!0;const L=M.slice();let H=L.pop();for(;U&&L.length;)U=L.every(w=>H.intersects(w,N)),H=L.pop();return U},b=(M,N)=>(s("comp",M,N),M=Y(M,N),s("caret",M),M=D(M,N),s("tildes",M),M=Z(M,N),s("xrange",M),M=J(M,N),s("stars",M),M),A=M=>!M||M.toLowerCase()==="x"||M==="*",D=(M,N)=>M.trim().split(/\s+/).map(U=>x(U,N)).join(" "),x=(M,N)=>{const U=N.loose?u[c.TILDELOOSE]:u[c.TILDE];return M.replace(U,(L,H,w,R,O)=>{s("tilde",M,L,H,w,R,O);let P;return A(H)?P="":A(w)?P=`>=${H}.0.0 <${+H+1}.0.0-0`:A(R)?P=`>=${H}.${w}.0 <${H}.${+w+1}.0-0`:O?(s("replaceTilde pr",O),P=`>=${H}.${w}.${R}-${O} <${H}.${+w+1}.0-0`):P=`>=${H}.${w}.${R} <${H}.${+w+1}.0-0`,s("tilde return",P),P})},Y=(M,N)=>M.trim().split(/\s+/).map(U=>X(U,N)).join(" "),X=(M,N)=>{s("caret",M,N);const U=N.loose?u[c.CARETLOOSE]:u[c.CARET],L=N.includePrerelease?"-0":"";return M.replace(U,(H,w,R,O,P)=>{s("caret",M,H,w,R,O,P);let g;return A(w)?g="":A(R)?g=`>=${w}.0.0${L} <${+w+1}.0.0-0`:A(O)?w==="0"?g=`>=${w}.${R}.0${L} <${w}.${+R+1}.0-0`:g=`>=${w}.${R}.0${L} <${+w+1}.0.0-0`:P?(s("replaceCaret pr",P),w==="0"?R==="0"?g=`>=${w}.${R}.${O}-${P} <${w}.${R}.${+O+1}-0`:g=`>=${w}.${R}.${O}-${P} <${w}.${+R+1}.0-0`:g=`>=${w}.${R}.${O}-${P} <${+w+1}.0.0-0`):(s("no pr"),w==="0"?R==="0"?g=`>=${w}.${R}.${O}${L} <${w}.${R}.${+O+1}-0`:g=`>=${w}.${R}.${O}${L} <${w}.${+R+1}.0-0`:g=`>=${w}.${R}.${O} <${+w+1}.0.0-0`),s("caret return",g),g})},Z=(M,N)=>(s("replaceXRanges",M,N),M.split(/\s+/).map(U=>W(U,N)).join(" ")),W=(M,N)=>{M=M.trim();const U=N.loose?u[c.XRANGELOOSE]:u[c.XRANGE];return M.replace(U,(L,H,w,R,O,P)=>{s("xRange",M,L,H,w,R,O,P);const g=A(w),y=g||A(R),C=y||A(O),I=C;return H==="="&&I&&(H=""),P=N.includePrerelease?"-0":"",g?H===">"||H==="<"?L="<0.0.0-0":L="*":H&&I?(y&&(R=0),O=0,H===">"?(H=">=",y?(w=+w+1,R=0,O=0):(R=+R+1,O=0)):H==="<="&&(H="<",y?w=+w+1:R=+R+1),H==="<"&&(P="-0"),L=`${H+w}.${R}.${O}${P}`):y?L=`>=${w}.0.0${P} <${+w+1}.0.0-0`:C&&(L=`>=${w}.${R}.0${P} <${w}.${+R+1}.0-0`),s("xRange return",L),L})},J=(M,N)=>(s("replaceStars",M,N),M.trim().replace(u[c.STAR],"")),ee=(M,N)=>(s("replaceGTE0",M,N),M.trim().replace(u[N.includePrerelease?c.GTE0PRE:c.GTE0],"")),oe=M=>(N,U,L,H,w,R,O,P,g,y,C,I)=>(A(L)?U="":A(H)?U=`>=${L}.0.0${M?"-0":""}`:A(w)?U=`>=${L}.${H}.0${M?"-0":""}`:R?U=`>=${U}`:U=`>=${U}${M?"-0":""}`,A(g)?P="":A(y)?P=`<${+g+1}.0.0-0`:A(C)?P=`<${g}.${+y+1}.0-0`:I?P=`<=${g}.${y}.${C}-${I}`:M?P=`<${g}.${y}.${+C+1}-0`:P=`<=${P}`,`${U} ${P}`.trim()),z=(M,N,U)=>{for(let L=0;L<M.length;L++)if(!M[L].test(N))return!1;if(N.prerelease.length&&!U.includePrerelease){for(let L=0;L<M.length;L++)if(s(M[L].semver),M[L].semver!==i.ANY&&M[L].semver.prerelease.length>0){const H=M[L].semver;if(H.major===N.major&&H.minor===N.minor&&H.patch===N.patch)return!0}return!1}return!0};return Qo}var Xo,up;function lo(){if(up)return Xo;up=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(l,f){if(f=r(f),l instanceof t){if(l.loose===!!f.loose)return l;l=l.value}l=l.trim().split(/\s+/).join(" "),s("comparator",l,f),this.options=f,this.loose=!!f.loose,this.parse(l),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(l){const f=this.options.loose?n[a.COMPARATORLOOSE]:n[a.COMPARATOR],d=l.match(f);if(!d)throw new TypeError(`Invalid comparator: ${l}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new o(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(l){if(s("Comparator.test",l,this.options.loose),this.semver===e||l===e)return!0;if(typeof l=="string")try{l=new o(l,this.options)}catch{return!1}return i(l,this.operator,this.semver,this.options)}intersects(l,f){if(!(l instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(l.value,f).test(this.value):l.operator===""?l.value===""?!0:new u(this.value,f).test(l.semver):(f=r(f),f.includePrerelease&&(this.value==="<0.0.0-0"||l.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||l.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&l.operator.startsWith(">")||this.operator.startsWith("<")&&l.operator.startsWith("<")||this.semver.version===l.semver.version&&this.operator.includes("=")&&l.operator.includes("=")||i(this.semver,"<",l.semver,f)&&this.operator.startsWith(">")&&l.operator.startsWith("<")||i(this.semver,">",l.semver,f)&&this.operator.startsWith("<")&&l.operator.startsWith(">")))}}Xo=t;const r=Ql,{safeRe:n,t:a}=Ri,i=qg,s=uo,o=Kt,u=yr();return Xo}const w$=yr(),I$=(e,t,r)=>{try{t=new w$(t,r)}catch{return!1}return t.test(e)};var fo=I$;const O$=yr(),x$=(e,t)=>new O$(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var D$=x$;const $$=Kt,N$=yr(),R$=(e,t,r)=>{let n=null,a=null,i=null;try{i=new N$(t,r)}catch{return null}return e.forEach(s=>{i.test(s)&&(!n||a.compare(s)===-1)&&(n=s,a=new $$(n,r))}),n};var P$=R$;const L$=Kt,B$=yr(),k$=(e,t,r)=>{let n=null,a=null,i=null;try{i=new B$(t,r)}catch{return null}return e.forEach(s=>{i.test(s)&&(!n||a.compare(s)===1)&&(n=s,a=new L$(n,r))}),n};var U$=k$;const Jo=Kt,F$=yr(),cp=co,M$=(e,t)=>{e=new F$(e,t);let r=new Jo("0.0.0");if(e.test(r)||(r=new Jo("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const a=e.set[n];let i=null;a.forEach(s=>{const o=new Jo(s.semver.version);switch(s.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!i||cp(o,i))&&(i=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),i&&(!r||cp(r,i))&&(r=i)}return r&&e.test(r)?r:null};var j$=M$;const V$=yr(),Y$=(e,t)=>{try{return new V$(e,t).range||"*"}catch{return null}};var K$=Y$;const H$=Kt,zg=lo(),{ANY:G$}=zg,q$=yr(),z$=fo,lp=co,fp=Jl,W$=ef,Q$=Zl,X$=(e,t,r,n)=>{e=new H$(e,n),t=new q$(t,n);let a,i,s,o,u;switch(r){case">":a=lp,i=W$,s=fp,o=">",u=">=";break;case"<":a=fp,i=Q$,s=lp,o="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(z$(e,t,n))return!1;for(let c=0;c<t.set.length;++c){const l=t.set[c];let f=null,d=null;if(l.forEach(p=>{p.semver===G$&&(p=new zg(">=0.0.0")),f=f||p,d=d||p,a(p.semver,f.semver,n)?f=p:s(p.semver,d.semver,n)&&(d=p)}),f.operator===o||f.operator===u||(!d.operator||d.operator===o)&&i(e,d.semver))return!1;if(d.operator===u&&s(e,d.semver))return!1}return!0};var tf=X$;const J$=tf,Z$=(e,t,r)=>J$(e,t,">",r);var eN=Z$;const tN=tf,rN=(e,t,r)=>tN(e,t,"<",r);var nN=rN;const dp=yr(),aN=(e,t,r)=>(e=new dp(e,r),t=new dp(t,r),e.intersects(t,r));var iN=aN;const sN=fo,oN=_r;var uN=(e,t,r)=>{const n=[];let a=null,i=null;const s=e.sort((l,f)=>oN(l,f,r));for(const l of s)sN(l,t,r)?(i=l,a||(a=l)):(i&&n.push([a,i]),i=null,a=null);a&&n.push([a,null]);const o=[];for(const[l,f]of n)l===f?o.push(l):!f&&l===s[0]?o.push("*"):f?l===s[0]?o.push(`<=${f}`):o.push(`${l} - ${f}`):o.push(`>=${l}`);const u=o.join(" || "),c=typeof t.raw=="string"?t.raw:String(t);return u.length<c.length?u:t};const hp=yr(),rf=lo(),{ANY:Zo}=rf,ti=fo,nf=_r,cN=(e,t,r={})=>{if(e===t)return!0;e=new hp(e,r),t=new hp(t,r);let n=!1;e:for(const a of e.set){for(const i of t.set){const s=fN(a,i,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},lN=[new rf(">=0.0.0-0")],pp=[new rf(">=0.0.0")],fN=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===Zo){if(t.length===1&&t[0].semver===Zo)return!0;r.includePrerelease?e=lN:e=pp}if(t.length===1&&t[0].semver===Zo){if(r.includePrerelease)return!0;t=pp}const n=new Set;let a,i;for(const p of e)p.operator===">"||p.operator===">="?a=mp(a,p,r):p.operator==="<"||p.operator==="<="?i=vp(i,p,r):n.add(p.semver);if(n.size>1)return null;let s;if(a&&i){if(s=nf(a.semver,i.semver,r),s>0)return null;if(s===0&&(a.operator!==">="||i.operator!=="<="))return null}for(const p of n){if(a&&!ti(p,String(a),r)||i&&!ti(p,String(i),r))return null;for(const h of t)if(!ti(p,String(h),r))return!1;return!0}let o,u,c,l,f=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,d=a&&!r.includePrerelease&&a.semver.prerelease.length?a.semver:!1;f&&f.prerelease.length===1&&i.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(const p of t){if(l=l||p.operator===">"||p.operator===">=",c=c||p.operator==="<"||p.operator==="<=",a){if(d&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===d.major&&p.semver.minor===d.minor&&p.semver.patch===d.patch&&(d=!1),p.operator===">"||p.operator===">="){if(o=mp(a,p,r),o===p&&o!==a)return!1}else if(a.operator===">="&&!ti(a.semver,String(p),r))return!1}if(i){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator==="<"||p.operator==="<="){if(u=vp(i,p,r),u===p&&u!==i)return!1}else if(i.operator==="<="&&!ti(i.semver,String(p),r))return!1}if(!p.operator&&(i||a)&&s!==0)return!1}return!(a&&c&&!i&&s!==0||i&&l&&!a&&s!==0||d||f)},mp=(e,t,r)=>{if(!e)return t;const n=nf(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},vp=(e,t,r)=>{if(!e)return t;const n=nf(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var dN=cN;const eu=Ri,gp=oo,hN=Kt,_p=Kg,pN=Ma,mN=CD,vN=TD,gN=wD,_N=OD,yN=$D,EN=PD,CN=kD,SN=MD,bN=_r,TN=KD,AN=qD,wN=Xl,IN=XD,ON=e$,xN=co,DN=Jl,$N=Hg,NN=Gg,RN=Zl,PN=ef,LN=qg,BN=b$,kN=lo(),UN=yr(),FN=fo,MN=D$,jN=P$,VN=U$,YN=j$,KN=K$,HN=tf,GN=eN,qN=nN,zN=iN,WN=uN,QN=dN;var XN={parse:pN,valid:mN,clean:vN,inc:gN,diff:_N,major:yN,minor:EN,patch:CN,prerelease:SN,compare:bN,rcompare:TN,compareLoose:AN,compareBuild:wN,sort:IN,rsort:ON,gt:xN,lt:DN,eq:$N,neq:NN,gte:RN,lte:PN,cmp:LN,coerce:BN,Comparator:kN,Range:UN,satisfies:FN,toComparators:MN,maxSatisfying:jN,minSatisfying:VN,minVersion:YN,validRange:KN,outside:HN,gtr:GN,ltr:qN,intersects:zN,simplifyRange:WN,subset:QN,SemVer:hN,re:eu.re,src:eu.src,tokens:eu.t,SEMVER_SPEC_VERSION:gp.SEMVER_SPEC_VERSION,RELEASE_TYPES:gp.RELEASE_TYPES,compareIdentifiers:_p.compareIdentifiers,rcompareIdentifiers:_p.rcompareIdentifiers};const ha=Ba(XN),JN=Object.prototype.toString;function ZN(e){return e&&JN.call(e)==="[object Uint8Array]"}function Wg(e){if(!ZN(e))throw new TypeError(`Expected \`Uint8Array\`, got \`${typeof e}\``)}function yp(e,t){if(e.length===0)return new Uint8Array(0);t??(t=e.reduce((a,i)=>a+i.length,0));const r=new Uint8Array(t);let n=0;for(const a of e)Wg(a),r.set(a,n),n+=a.length;return r}function Ep(e){return Wg(e),new globalThis.TextDecoder().decode(e)}function eR(e){if(typeof e!="string")throw new TypeError(`Expected \`string\`, got \`${typeof e}\``)}function tu(e){return eR(e),new globalThis.TextEncoder().encode(e)}Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));const tR=Wx.default,rR=Xx.default,Cp="aes-256-cbc",pa=()=>Object.create(null),nR=e=>e!=null,aR=(e,t)=>{const r=new Set(["undefined","symbol","function"]),n=typeof t;if(r.has(n))throw new TypeError(`Setting a value of type \`${n}\` for key \`${e}\` is not allowed as it's not supported by JSON`)},vs="__internal__",ru=`${vs}.migrations.version`;var cn,Vr,Jt,Yr;class iR{constructor(t={}){we(this,"path");we(this,"events");za(this,cn,void 0);za(this,Vr,void 0);za(this,Jt,void 0);za(this,Yr,{});we(this,"_deserialize",t=>JSON.parse(t));we(this,"_serialize",t=>JSON.stringify(t,void 0,"	"));const r={configName:"config",fileExtension:"json",projectSuffix:"nodejs",clearInvalidConfig:!1,accessPropertiesByDotNotation:!0,configFileMode:438,...t};if(!r.cwd){if(!r.projectName)throw new Error("Please specify the `projectName` option.");r.cwd=VA(r.projectName,{suffix:r.projectSuffix}).config}if(Wa(this,Jt,r),r.schema){if(typeof r.schema!="object")throw new TypeError("The `schema` option must be an object.");const s=new tR({allErrors:!0,useDefaults:!0});rR(s);const o={type:"object",properties:r.schema};Wa(this,cn,s.compile(o));for(const[u,c]of Object.entries(r.schema))c!=null&&c.default&&(ut(this,Yr)[u]=c.default)}r.defaults&&Wa(this,Yr,{...ut(this,Yr),...r.defaults}),r.serialize&&(this._serialize=r.serialize),r.deserialize&&(this._deserialize=r.deserialize),this.events=new EventTarget,Wa(this,Vr,r.encryptionKey);const n=r.fileExtension?`.${r.fileExtension}`:"";this.path=Be.resolve(r.cwd,`${r.configName??"config"}${n}`);const a=this.store,i=Object.assign(pa(),r.defaults,a);this._validate(i);try{Zy.deepEqual(a,i)}catch{this.store=i}if(r.watch&&this._watch(),r.migrations){if(!r.projectVersion)throw new Error("Please specify the `projectVersion` option.");this._migrate(r.migrations,r.projectVersion,r.beforeEachMigration)}}get(t,r){if(ut(this,Jt).accessPropertiesByDotNotation)return this._get(t,r);const{store:n}=this;return t in n?n[t]:r}set(t,r){if(typeof t!="string"&&typeof t!="object")throw new TypeError(`Expected \`key\` to be of type \`string\` or \`object\`, got ${typeof t}`);if(typeof t!="object"&&r===void 0)throw new TypeError("Use `delete()` to clear values");if(this._containsReservedKey(t))throw new TypeError(`Please don't use the ${vs} key, as it's used to manage this module internal operations.`);const{store:n}=this,a=(i,s)=>{aR(i,s),ut(this,Jt).accessPropertiesByDotNotation?Sh(n,i,s):n[i]=s};if(typeof t=="object"){const i=t;for(const[s,o]of Object.entries(i))a(s,o)}else a(t,r);this.store=n}has(t){return ut(this,Jt).accessPropertiesByDotNotation?UA(this.store,t):t in this.store}reset(...t){for(const r of t)nR(ut(this,Yr)[r])&&this.set(r,ut(this,Yr)[r])}delete(t){const{store:r}=this;ut(this,Jt).accessPropertiesByDotNotation?kA(r,t):delete r[t],this.store=r}clear(){this.store=pa();for(const t of Object.keys(ut(this,Yr)))this.reset(t)}onDidChange(t,r){if(typeof t!="string")throw new TypeError(`Expected \`key\` to be of type \`string\`, got ${typeof t}`);if(typeof r!="function")throw new TypeError(`Expected \`callback\` to be of type \`function\`, got ${typeof r}`);return this._handleChange(()=>this.get(t),r)}onDidAnyChange(t){if(typeof t!="function")throw new TypeError(`Expected \`callback\` to be of type \`function\`, got ${typeof t}`);return this._handleChange(()=>this.store,t)}get size(){return Object.keys(this.store).length}get store(){try{const t=Ae.readFileSync(this.path,ut(this,Vr)?null:"utf8"),r=this._encryptData(t),n=this._deserialize(r);return this._validate(n),Object.assign(pa(),n)}catch(t){if((t==null?void 0:t.code)==="ENOENT")return this._ensureDirectory(),pa();if(ut(this,Jt).clearInvalidConfig&&t.name==="SyntaxError")return pa();throw t}}set store(t){this._ensureDirectory(),this._validate(t),this._write(t),this.events.dispatchEvent(new Event("change"))}*[Symbol.iterator](){for(const[t,r]of Object.entries(this.store))yield[t,r]}_encryptData(t){if(!ut(this,Vr))return typeof t=="string"?t:Ep(t);try{const r=t.slice(0,16),n=Qa.pbkdf2Sync(ut(this,Vr),r.toString(),1e4,32,"sha512"),a=Qa.createDecipheriv(Cp,n,r),i=t.slice(17),s=typeof i=="string"?tu(i):i;return Ep(yp([a.update(s),a.final()]))}catch{}return t.toString()}_handleChange(t,r){let n=t();const a=()=>{const i=n,s=t();yt.isDeepStrictEqual(s,i)||(n=s,r.call(this,s,i))};return this.events.addEventListener("change",a),()=>{this.events.removeEventListener("change",a)}}_validate(t){if(!ut(this,cn)||ut(this,cn).call(this,t)||!ut(this,cn).errors)return;const n=ut(this,cn).errors.map(({instancePath:a,message:i=""})=>`\`${a.slice(1)}\` ${i}`);throw new Error("Config schema violation: "+n.join("; "))}_ensureDirectory(){Ae.mkdirSync(Be.dirname(this.path),{recursive:!0})}_write(t){let r=this._serialize(t);if(ut(this,Vr)){const n=Qa.randomBytes(16),a=Qa.pbkdf2Sync(ut(this,Vr),n.toString(),1e4,32,"sha512"),i=Qa.createCipheriv(Cp,a,n);r=yp([n,tu(":"),i.update(tu(r)),i.final()])}if(Ct.env.SNAP)Ae.writeFileSync(this.path,r,{mode:ut(this,Jt).configFileMode});else try{Vv(this.path,r,{mode:ut(this,Jt).configFileMode})}catch(n){if((n==null?void 0:n.code)==="EXDEV"){Ae.writeFileSync(this.path,r,{mode:ut(this,Jt).configFileMode});return}throw n}}_watch(){this._ensureDirectory(),Ae.existsSync(this.path)||this._write(pa()),Ct.platform==="win32"?Ae.watch(this.path,{persistent:!1},Xh(()=>{this.events.dispatchEvent(new Event("change"))},{wait:100})):Ae.watchFile(this.path,{persistent:!1},Xh(()=>{this.events.dispatchEvent(new Event("change"))},{wait:5e3}))}_migrate(t,r,n){let a=this._get(ru,"0.0.0");const i=Object.keys(t).filter(o=>this._shouldPerformMigration(o,a,r));let s={...this.store};for(const o of i)try{n&&n(this,{fromVersion:a,toVersion:o,finalVersion:r,versions:i});const u=t[o];u==null||u(this),this._set(ru,o),a=o,s={...this.store}}catch(u){throw this.store=s,new Error(`Something went wrong during the migration! Changes applied to the store until this failed migration will be restored. ${u}`)}(this._isVersionInRangeFormat(a)||!ha.eq(a,r))&&this._set(ru,r)}_containsReservedKey(t){return typeof t=="object"&&Object.keys(t)[0]===vs?!0:typeof t!="string"?!1:ut(this,Jt).accessPropertiesByDotNotation?!!t.startsWith(`${vs}.`):!1}_isVersionInRangeFormat(t){return ha.clean(t)===null}_shouldPerformMigration(t,r,n){return this._isVersionInRangeFormat(t)?r!=="0.0.0"&&ha.satisfies(r,t)?!1:ha.satisfies(n,t):!(ha.lte(t,r)||ha.gt(t,n))}_get(t,r){return BA(this.store,t,r)}_set(t,r){const{store:n}=this;Sh(n,t,r),this.store=n}}cn=new WeakMap,Vr=new WeakMap,Jt=new WeakMap,Yr=new WeakMap;let Sp=!1;const bp=()=>{if(!We.ipcMain||!We.app)throw new Error("Electron Store: You need to call `.initRenderer()` from the main process.");const e={defaultCwd:We.app.getPath("userData"),appVersion:We.app.getVersion()};return Sp||(We.ipcMain.on("electron-store-get-data",t=>{t.returnValue=e}),Sp=!0),e};class sR extends iR{constructor(t){let r,n;if(Ct.type==="renderer"){const a=We.ipcRenderer.sendSync("electron-store-get-data");if(!a)throw new Error("Electron Store: You need to call `.initRenderer()` from the main process.");({defaultCwd:r,appVersion:n}=a)}else We.ipcMain&&We.app&&({defaultCwd:r,appVersion:n}=bp());t={name:"config",...t},t.projectVersion||(t.projectVersion=n),t.cwd?t.cwd=Be.isAbsolute(t.cwd)?t.cwd:Be.join(r,t.cwd):t.cwd=r,t.configName=t.name,delete t.name,super(t)}static initRenderer(){bp()}async openInEditor(){const t=await We.shell.openPath(this.path);if(t)throw new Error(t)}}const Ca=new sR;lb(Ca.store,{})&&(Ca.store={});const cr={...Ca,...Ss(Ca,["set","get","delete","clear","reset","has","onDidChange","onDidAnyChange","openInEditor"]),getAll:()=>Ca.store,setAll:e=>Ca.store=e};function Tp(e=500){return new Promise(t=>{setTimeout(()=>t(!0),e)})}function oR(e){return e.replaceAll(".","_").replaceAll(":","-")}function uR(e){if(e===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],n=Math.floor(Math.log(e)/Math.log(t));return`${Number.parseFloat((e/t**n).toFixed(2))} ${r[n]}`}var ho={},Os={},po={},af={},tr={},Qg={exports:{}},Xi={exports:{}},Ap;function ta(){if(Ap)return Xi.exports;Ap=1;var e=function(){return this===void 0}();if(e)Xi.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:e,propertyIsWritable:function(l,f){var d=Object.getOwnPropertyDescriptor(l,f);return!!(!d||d.writable||d.set)}};else{var t={}.hasOwnProperty,r={}.toString,n={}.constructor.prototype,a=function(l){var f=[];for(var d in l)t.call(l,d)&&f.push(d);return f},i=function(l,f){return{value:l[f]}},s=function(l,f,d){return l[f]=d.value,l},o=function(l){return l},u=function(l){try{return Object(l).constructor.prototype}catch{return n}},c=function(l){try{return r.call(l)==="[object Array]"}catch{return!1}};Xi.exports={isArray:c,keys:a,names:a,defineProperty:s,getDescriptor:i,freeze:o,getPrototypeOf:u,isES5:e,propertyIsWritable:function(){return!0}}}return Xi.exports}var nu,wp;function st(){if(wp)return nu;wp=1;var e=ta(),t=typeof navigator>"u",r={e:{}},n,a=typeof self<"u"?self:typeof window<"u"?window:typeof k<"u"||k!==void 0?k:null;function i(){try{var g=n;return n=null,g.apply(this,arguments)}catch(y){return r.e=y,r}}function s(g){return n=g,i}var o=function(g,y){var C={}.hasOwnProperty;function I(){this.constructor=g,this.constructor$=y;for(var j in y.prototype)C.call(y.prototype,j)&&j.charAt(j.length-1)!=="$"&&(this[j+"$"]=y.prototype[j])}return I.prototype=y.prototype,g.prototype=new I,g.prototype};function u(g){return g==null||g===!0||g===!1||typeof g=="string"||typeof g=="number"}function c(g){return typeof g=="function"||typeof g=="object"&&g!==null}function l(g){return u(g)?new Error(Y(g)):g}function f(g,y){var C=g.length,I=new Array(C+1),j;for(j=0;j<C;++j)I[j]=g[j];return I[j]=y,I}function d(g,y,C){if(e.isES5){var I=Object.getOwnPropertyDescriptor(g,y);if(I!=null)return I.get==null&&I.set==null?I.value:C}else return{}.hasOwnProperty.call(g,y)?g[y]:void 0}function p(g,y,C){if(u(g))return g;var I={value:C,configurable:!0,enumerable:!1,writable:!0};return e.defineProperty(g,y,I),g}function h(g){throw g}var _=function(){var g=[Array.prototype,Object.prototype,Function.prototype],y=function(j){for(var q=0;q<g.length;++q)if(g[q]===j)return!0;return!1};if(e.isES5){var C=Object.getOwnPropertyNames;return function(j){for(var q=[],se=Object.create(null);j!=null&&!y(j);){var ue;try{ue=C(j)}catch{return q}for(var ve=0;ve<ue.length;++ve){var $e=ue[ve];if(!se[$e]){se[$e]=!0;var Re=Object.getOwnPropertyDescriptor(j,$e);Re!=null&&Re.get==null&&Re.set==null&&q.push($e)}}j=e.getPrototypeOf(j)}return q}}else{var I={}.hasOwnProperty;return function(j){if(y(j))return[];var q=[];e:for(var se in j)if(I.call(j,se))q.push(se);else{for(var ue=0;ue<g.length;++ue)if(I.call(g[ue],se))continue e;q.push(se)}return q}}}(),v=/this\s*\.\s*\S+\s*=/;function m(g){try{if(typeof g=="function"){var y=e.names(g.prototype),C=e.isES5&&y.length>1,I=y.length>0&&!(y.length===1&&y[0]==="constructor"),j=v.test(g+"")&&e.names(g).length>0;if(C||I||j)return!0}return!1}catch{return!1}}function b(g){function y(){}y.prototype=g;var C=new y;function I(){return typeof C.foo}return I(),I(),g}var A=/^[a-z$_][a-z$_0-9]*$/i;function D(g){return A.test(g)}function x(g,y,C){for(var I=new Array(g),j=0;j<g;++j)I[j]=y+j+C;return I}function Y(g){try{return g+""}catch{return"[no string representation]"}}function X(g){return g instanceof Error||g!==null&&typeof g=="object"&&typeof g.message=="string"&&typeof g.name=="string"}function Z(g){try{p(g,"isOperational",!0)}catch{}}function W(g){return g==null?!1:g instanceof Error.__BluebirdErrorTypes__.OperationalError||g.isOperational===!0}function J(g){return X(g)&&e.propertyIsWritable(g,"stack")}var ee=function(){return"stack"in new Error?function(g){return J(g)?g:new Error(Y(g))}:function(g){if(J(g))return g;try{throw new Error(Y(g))}catch(y){return y}}}();function oe(g){return{}.toString.call(g)}function z(g,y,C){for(var I=e.names(g),j=0;j<I.length;++j){var q=I[j];if(C(q))try{e.defineProperty(y,q,e.getDescriptor(g,q))}catch{}}}var M=function(g){return e.isArray(g)?g:null};if(typeof Symbol<"u"&&Symbol.iterator){var N=typeof Array.from=="function"?function(g){return Array.from(g)}:function(g){for(var y=[],C=g[Symbol.iterator](),I;!(I=C.next()).done;)y.push(I.value);return y};M=function(g){return e.isArray(g)?g:g!=null&&typeof g[Symbol.iterator]=="function"?N(g):null}}var U=typeof process<"u"&&oe(process).toLowerCase()==="[object process]",L=typeof process<"u"&&typeof process.env<"u";function H(g){return L?process.env[g]:void 0}function w(){if(typeof Promise=="function")try{var g=new Promise(function(){});if(oe(g)==="[object Promise]")return Promise}catch{}}var R;function O(g,y){if(g===null||typeof y!="function"||y===R)return y;g.domain!==null&&(y=g.domain.bind(y));var C=g.async;if(C!==null){var I=y;y=function(){for(var j=arguments.length+2,q=new Array(j),se=2;se<j;++se)q[se]=arguments[se-2];return q[0]=I,q[1]=this,C.runInAsyncScope.apply(C,q)}}return y}var P={setReflectHandler:function(g){R=g},isClass:m,isIdentifier:D,inheritedDataKeys:_,getDataPropertyOrDefault:d,thrower:h,isArray:e.isArray,asArray:M,notEnumerableProp:p,isPrimitive:u,isObject:c,isError:X,canEvaluate:t,errorObj:r,tryCatch:s,inherits:o,withAppended:f,maybeWrapAsError:l,toFastProperties:b,filledRange:x,toString:Y,canAttachTrace:J,ensureErrorObject:ee,originatesFromRejection:W,markAsOriginatingFromRejection:Z,classString:oe,copyDescriptors:z,isNode:U,hasEnvVariables:L,env:H,global:a,getNativePromise:w,contextBind:O};P.isRecentNode=P.isNode&&function(){var g;return process.versions&&process.versions.node?g=process.versions.node.split(".").map(Number):process.version&&(g=process.version.split(".").map(Number)),g[0]===0&&g[1]>10||g[0]>0}(),P.nodeSupportsAsyncResource=P.isNode&&function(){var g=!1;try{var y=require("async_hooks").AsyncResource;g=typeof y.prototype.runInAsyncScope=="function"}catch{g=!1}return g}(),P.isNode&&P.toFastProperties(process);try{throw new Error}catch(g){P.lastLineError=g}return nu=P,nu}var Ji={exports:{}},au,Ip;function cR(){if(Ip)return au;Ip=1;var e=st(),t,r=function(){throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)},n=e.getNativePromise();if(e.isNode&&typeof MutationObserver>"u"){var a=k.setImmediate,i=process.nextTick;t=e.isRecentNode?function(o){a.call(k,o)}:function(o){i.call(process,o)}}else if(typeof n=="function"&&typeof n.resolve=="function"){var s=n.resolve();t=function(o){s.then(o)}}else typeof MutationObserver<"u"&&!(typeof window<"u"&&window.navigator&&(window.navigator.standalone||window.cordova))&&"classList"in document.documentElement?t=function(){var o=document.createElement("div"),u={attributes:!0},c=!1,l=document.createElement("div"),f=new MutationObserver(function(){o.classList.toggle("foo"),c=!1});f.observe(l,u);var d=function(){c||(c=!0,l.classList.toggle("foo"))};return function(h){var _=new MutationObserver(function(){_.disconnect(),h()});_.observe(o,u),d()}}():typeof setImmediate<"u"?t=function(o){setImmediate(o)}:typeof setTimeout<"u"?t=function(o){setTimeout(o,0)}:t=r;return au=t,au}var iu,Op;function lR(){if(Op)return iu;Op=1;function e(r,n,a,i,s){for(var o=0;o<s;++o)a[o+i]=r[o+n],r[o+n]=void 0}function t(r){this._capacity=r,this._length=0,this._front=0}return t.prototype._willBeOverCapacity=function(r){return this._capacity<r},t.prototype._pushOne=function(r){var n=this.length();this._checkCapacity(n+1);var a=this._front+n&this._capacity-1;this[a]=r,this._length=n+1},t.prototype.push=function(r,n,a){var i=this.length()+3;if(this._willBeOverCapacity(i)){this._pushOne(r),this._pushOne(n),this._pushOne(a);return}var s=this._front+i-3;this._checkCapacity(i);var o=this._capacity-1;this[s+0&o]=r,this[s+1&o]=n,this[s+2&o]=a,this._length=i},t.prototype.shift=function(){var r=this._front,n=this[r];return this[r]=void 0,this._front=r+1&this._capacity-1,this._length--,n},t.prototype.length=function(){return this._length},t.prototype._checkCapacity=function(r){this._capacity<r&&this._resizeTo(this._capacity<<1)},t.prototype._resizeTo=function(r){var n=this._capacity;this._capacity=r;var a=this._front,i=this._length,s=a+i&n-1;e(this,0,this,n,s)},iu=t,iu}var xp;function fR(){if(xp)return Ji.exports;xp=1;var e;try{throw new Error}catch(c){e=c}var t=cR(),r=lR();function n(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new r(16),this._normalQueue=new r(16),this._haveDrainedQueues=!1;var c=this;this.drainQueues=function(){c._drainQueues()},this._schedule=t}n.prototype.setScheduler=function(c){var l=this._schedule;return this._schedule=c,this._customScheduler=!0,l},n.prototype.hasCustomScheduler=function(){return this._customScheduler},n.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},n.prototype.fatalError=function(c,l){l?(process.stderr.write("Fatal "+(c instanceof Error?c.stack:c)+`
`),process.exit(2)):this.throwLater(c)},n.prototype.throwLater=function(c,l){if(arguments.length===1&&(l=c,c=function(){throw l}),typeof setTimeout<"u")setTimeout(function(){c(l)},0);else try{this._schedule(function(){c(l)})}catch{throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)}};function a(c,l,f){this._lateQueue.push(c,l,f),this._queueTick()}function i(c,l,f){this._normalQueue.push(c,l,f),this._queueTick()}function s(c){this._normalQueue._pushOne(c),this._queueTick()}n.prototype.invokeLater=a,n.prototype.invoke=i,n.prototype.settlePromises=s;function o(c){for(;c.length()>0;)u(c)}function u(c){var l=c.shift();if(typeof l!="function")l._settlePromises();else{var f=c.shift(),d=c.shift();l.call(f,d)}}return n.prototype._drainQueues=function(){o(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,o(this._lateQueue)},n.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},n.prototype._reset=function(){this._isTickUsed=!1},Ji.exports=n,Ji.exports.firstLineError=e,Ji.exports}var su,Dp;function En(){if(Dp)return su;Dp=1;var e=ta(),t=e.freeze,r=st(),n=r.inherits,a=r.notEnumerableProp;function i(m,b){function A(D){if(!(this instanceof A))return new A(D);a(this,"message",typeof D=="string"?D:b),a(this,"name",m),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return n(A,Error),A}var s,o,u=i("Warning","warning"),c=i("CancellationError","cancellation error"),l=i("TimeoutError","timeout error"),f=i("AggregateError","aggregate error");try{s=TypeError,o=RangeError}catch{s=i("TypeError","type error"),o=i("RangeError","range error")}for(var d="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),p=0;p<d.length;++p)typeof Array.prototype[d[p]]=="function"&&(f.prototype[d[p]]=Array.prototype[d[p]]);e.defineProperty(f.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),f.prototype.isOperational=!0;var h=0;f.prototype.toString=function(){var m=Array(h*4+1).join(" "),b=`
`+m+`AggregateError of:
`;h++,m=Array(h*4+1).join(" ");for(var A=0;A<this.length;++A){for(var D=this[A]===this?"[Circular AggregateError]":this[A]+"",x=D.split(`
`),Y=0;Y<x.length;++Y)x[Y]=m+x[Y];D=x.join(`
`),b+=D+`
`}return h--,b};function _(m){if(!(this instanceof _))return new _(m);a(this,"name","OperationalError"),a(this,"message",m),this.cause=m,this.isOperational=!0,m instanceof Error?(a(this,"message",m.message),a(this,"stack",m.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}n(_,Error);var v=Error.__BluebirdErrorTypes__;return v||(v=t({CancellationError:c,TimeoutError:l,OperationalError:_,RejectionError:_,AggregateError:f}),e.defineProperty(Error,"__BluebirdErrorTypes__",{value:v,writable:!1,enumerable:!1,configurable:!1})),su={Error,TypeError:s,RangeError:o,CancellationError:v.CancellationError,OperationalError:v.OperationalError,TimeoutError:v.TimeoutError,AggregateError:v.AggregateError,Warning:u},su}var ou,$p;function dR(){return $p||($p=1,ou=function(e,t){var r=st(),n=r.errorObj,a=r.isObject;function i(f,d){if(a(f)){if(f instanceof e)return f;var p=o(f);if(p===n){d&&d._pushContext();var h=e.reject(p.e);return d&&d._popContext(),h}else if(typeof p=="function"){if(c(f)){var h=new e(t);return f._then(h._fulfill,h._reject,void 0,h,null),h}return l(f,p,d)}}return f}function s(f){return f.then}function o(f){try{return s(f)}catch(d){return n.e=d,n}}var u={}.hasOwnProperty;function c(f){try{return u.call(f,"_promise0")}catch{return!1}}function l(f,d,p){var h=new e(t),_=h;p&&p._pushContext(),h._captureStackTrace(),p&&p._popContext();var v=!0,m=r.tryCatch(d).call(f,b,A);v=!1,h&&m===n&&(h._rejectCallback(m.e,!0,!0),h=null);function b(D){h&&(h._resolveCallback(D),h=null)}function A(D){h&&(h._rejectCallback(D,v,!0),h=null)}return _}return i}),ou}var uu,Np;function hR(){return Np||(Np=1,uu=function(e,t,r,n,a){var i=st();i.isArray;function s(u){switch(u){case-2:return[];case-3:return{};case-6:return new Map}}function o(u){var c=this._promise=new e(t);u instanceof e&&(c._propagateFrom(u,3),u.suppressUnhandledRejections()),c._setOnCancel(this),this._values=u,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return i.inherits(o,a),o.prototype.length=function(){return this._length},o.prototype.promise=function(){return this._promise},o.prototype._init=function u(c,l){var f=r(this._values,this._promise);if(f instanceof e){f=f._target();var d=f._bitField;if(this._values=f,d&50397184)if(d&33554432)f=f._value();else return d&16777216?this._reject(f._reason()):this._cancel();else return this._promise._setAsyncGuaranteed(),f._then(u,this._reject,void 0,this,l)}if(f=i.asArray(f),f===null){var p=n("expecting an array or an iterable object but got "+i.classString(f)).reason();this._promise._rejectCallback(p,!1);return}if(f.length===0){l===-5?this._resolveEmptyArray():this._resolve(s(l));return}this._iterate(f)},o.prototype._iterate=function(u){var c=this.getActualLength(u.length);this._length=c,this._values=this.shouldCopyValues()?new Array(c):this._values;for(var l=this._promise,f=!1,d=null,p=0;p<c;++p){var h=r(u[p],l);h instanceof e?(h=h._target(),d=h._bitField):d=null,f?d!==null&&h.suppressUnhandledRejections():d!==null?d&50397184?d&33554432?f=this._promiseFulfilled(h._value(),p):d&16777216?f=this._promiseRejected(h._reason(),p):f=this._promiseCancelled(p):(h._proxy(this,p),this._values[p]=h):f=this._promiseFulfilled(h,p)}f||l._setAsyncGuaranteed()},o.prototype._isResolved=function(){return this._values===null},o.prototype._resolve=function(u){this._values=null,this._promise._fulfill(u)},o.prototype._cancel=function(){this._isResolved()||!this._promise._isCancellable()||(this._values=null,this._promise._cancel())},o.prototype._reject=function(u){this._values=null,this._promise._rejectCallback(u,!1)},o.prototype._promiseFulfilled=function(u,c){this._values[c]=u;var l=++this._totalResolved;return l>=this._length?(this._resolve(this._values),!0):!1},o.prototype._promiseCancelled=function(){return this._cancel(),!0},o.prototype._promiseRejected=function(u){return this._totalResolved++,this._reject(u),!0},o.prototype._resultCancelled=function(){if(!this._isResolved()){var u=this._values;if(this._cancel(),u instanceof e)u.cancel();else for(var c=0;c<u.length;++c)u[c]instanceof e&&u[c].cancel()}},o.prototype.shouldCopyValues=function(){return!0},o.prototype.getActualLength=function(u){return u},o}),uu}var cu,Rp;function pR(){return Rp||(Rp=1,cu=function(e){var t=!1,r=[];e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){};function n(){this._trace=new n.CapturedTrace(i())}n.prototype._pushContext=function(){this._trace!==void 0&&(this._trace._promiseCreated=null,r.push(this._trace))},n.prototype._popContext=function(){if(this._trace!==void 0){var s=r.pop(),o=s._promiseCreated;return s._promiseCreated=null,o}return null};function a(){if(t)return new n}function i(){var s=r.length-1;if(s>=0)return r[s]}return n.CapturedTrace=null,n.create=a,n.deactivateLongStackTraces=function(){},n.activateLongStackTraces=function(){var s=e.prototype._pushContext,o=e.prototype._popContext,u=e._peekContext,c=e.prototype._peekContext,l=e.prototype._promiseCreated;n.deactivateLongStackTraces=function(){e.prototype._pushContext=s,e.prototype._popContext=o,e._peekContext=u,e.prototype._peekContext=c,e.prototype._promiseCreated=l,t=!1},t=!0,e.prototype._pushContext=n.prototype._pushContext,e.prototype._popContext=n.prototype._popContext,e._peekContext=e.prototype._peekContext=i,e.prototype._promiseCreated=function(){var f=this._peekContext();f&&f._promiseCreated==null&&(f._promiseCreated=this)}},n}),cu}var lu,Pp;function mR(){return Pp||(Pp=1,lu=function(e,t,r,n){var a=e._async,i=En().Warning,s=st(),o=ta(),u=s.canAttachTrace,c,l,f=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,d=/\((?:timers\.js):\d+:\d+\)/,p=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,h=null,_=null,v=!1,m,b=!!(s.env("BLUEBIRD_DEBUG")!=0&&(s.env("BLUEBIRD_DEBUG")||s.env("NODE_ENV")==="development")),A=!!(s.env("BLUEBIRD_WARNINGS")!=0&&(b||s.env("BLUEBIRD_WARNINGS"))),D=!!(s.env("BLUEBIRD_LONG_STACK_TRACES")!=0&&(b||s.env("BLUEBIRD_LONG_STACK_TRACES"))),x=s.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(A||!!s.env("BLUEBIRD_W_FORGOTTEN_RETURN")),Y;(function(){var V=[];function G(){for(var ae=0;ae<V.length;++ae)V[ae]._notifyUnhandledRejection();ne()}function ne(){V.length=0}Y=function(ae){V.push(ae),setTimeout(G,1)},o.defineProperty(e,"_unhandledRejectionCheck",{value:G}),o.defineProperty(e,"_unhandledRejectionClear",{value:ne})})(),e.prototype.suppressUnhandledRejections=function(){var V=this._target();V._bitField=V._bitField&-1048577|524288},e.prototype._ensurePossibleRejectionHandled=function(){this._bitField&524288||(this._setRejectionIsUnhandled(),Y(this))},e.prototype._notifyUnhandledRejectionIsHandled=function(){oa("rejectionHandled",c,void 0,this)},e.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456},e.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var V=this._settledValue();this._setUnhandledRejectionIsNotified(),oa("unhandledRejection",l,V,this)}},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},e.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0},e.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0},e.prototype._warn=function(V,G,ne){return se(V,G,ne||this)},e.onPossiblyUnhandledRejection=function(V){var G=e._getContext();l=s.contextBind(G,V)},e.onUnhandledRejectionHandled=function(V){var G=e._getContext();c=s.contextBind(G,V)};var X=function(){};e.longStackTraces=function(){if(a.haveItemsQueued()&&!qe.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);if(!qe.longStackTraces&&In()){var V=e.prototype._captureStackTrace,G=e.prototype._attachExtraTrace,ne=e.prototype._dereferenceTrace;qe.longStackTraces=!0,X=function(){if(a.haveItemsQueued()&&!qe.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);e.prototype._captureStackTrace=V,e.prototype._attachExtraTrace=G,e.prototype._dereferenceTrace=ne,t.deactivateLongStackTraces(),qe.longStackTraces=!1},e.prototype._captureStackTrace=y,e.prototype._attachExtraTrace=C,e.prototype._dereferenceTrace=I,t.activateLongStackTraces()}},e.hasLongStackTraces=function(){return qe.longStackTraces&&In()};var Z={unhandledrejection:{before:function(){var V=s.global.onunhandledrejection;return s.global.onunhandledrejection=null,V},after:function(V){s.global.onunhandledrejection=V}},rejectionhandled:{before:function(){var V=s.global.onrejectionhandled;return s.global.onrejectionhandled=null,V},after:function(V){s.global.onrejectionhandled=V}}},W=function(){var V=function(ne,ae){if(ne){var ge;try{return ge=ne.before(),!s.global.dispatchEvent(ae)}finally{ne.after(ge)}}else return!s.global.dispatchEvent(ae)};try{if(typeof CustomEvent=="function"){var G=new CustomEvent("CustomEvent");return s.global.dispatchEvent(G),function(ne,ae){ne=ne.toLowerCase();var ge={detail:ae,cancelable:!0},Me=new CustomEvent(ne,ge);return o.defineProperty(Me,"promise",{value:ae.promise}),o.defineProperty(Me,"reason",{value:ae.reason}),V(Z[ne],Me)}}else if(typeof Event=="function"){var G=new Event("CustomEvent");return s.global.dispatchEvent(G),function(ae,ge){ae=ae.toLowerCase();var Me=new Event(ae,{cancelable:!0});return Me.detail=ge,o.defineProperty(Me,"promise",{value:ge.promise}),o.defineProperty(Me,"reason",{value:ge.reason}),V(Z[ae],Me)}}else{var G=document.createEvent("CustomEvent");return G.initCustomEvent("testingtheevent",!1,!0,{}),s.global.dispatchEvent(G),function(ae,ge){ae=ae.toLowerCase();var Me=document.createEvent("CustomEvent");return Me.initCustomEvent(ae,!1,!0,ge),V(Z[ae],Me)}}}catch{}return function(){return!1}}(),J=function(){return s.isNode?function(){return process.emit.apply(process,arguments)}:s.global?function(V){var G="on"+V.toLowerCase(),ne=s.global[G];return ne?(ne.apply(s.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}();function ee(V,G){return{promise:G}}var oe={promiseCreated:ee,promiseFulfilled:ee,promiseRejected:ee,promiseResolved:ee,promiseCancelled:ee,promiseChained:function(V,G,ne){return{promise:G,child:ne}},warning:function(V,G){return{warning:G}},unhandledRejection:function(V,G,ne){return{reason:G,promise:ne}},rejectionHandled:ee},z=function(V){var G=!1;try{G=J.apply(null,arguments)}catch(ae){a.throwLater(ae),G=!0}var ne=!1;try{ne=W(V,oe[V].apply(null,arguments))}catch(ae){a.throwLater(ae),ne=!0}return ne||G};e.config=function(V){if(V=Object(V),"longStackTraces"in V&&(V.longStackTraces?e.longStackTraces():!V.longStackTraces&&e.hasLongStackTraces()&&X()),"warnings"in V){var G=V.warnings;qe.warnings=!!G,x=qe.warnings,s.isObject(G)&&"wForgottenReturn"in G&&(x=!!G.wForgottenReturn)}if("cancellation"in V&&V.cancellation&&!qe.cancellation){if(a.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");e.prototype._clearCancellationData=w,e.prototype._propagateFrom=R,e.prototype._onCancel=L,e.prototype._setOnCancel=H,e.prototype._attachCancellationCallback=U,e.prototype._execute=N,P=R,qe.cancellation=!0}if("monitoring"in V&&(V.monitoring&&!qe.monitoring?(qe.monitoring=!0,e.prototype._fireEvent=z):!V.monitoring&&qe.monitoring&&(qe.monitoring=!1,e.prototype._fireEvent=M)),"asyncHooks"in V&&s.nodeSupportsAsyncResource){var ne=qe.asyncHooks,ae=!!V.asyncHooks;ne!==ae&&(qe.asyncHooks=ae,ae?r():n())}return e};function M(){return!1}e.prototype._fireEvent=M,e.prototype._execute=function(V,G,ne){try{V(G,ne)}catch(ae){return ae}},e.prototype._onCancel=function(){},e.prototype._setOnCancel=function(V){},e.prototype._attachCancellationCallback=function(V){},e.prototype._captureStackTrace=function(){},e.prototype._attachExtraTrace=function(){},e.prototype._dereferenceTrace=function(){},e.prototype._clearCancellationData=function(){},e.prototype._propagateFrom=function(V,G){};function N(V,G,ne){var ae=this;try{V(G,ne,function(ge){if(typeof ge!="function")throw new TypeError("onCancel must be a function, got: "+s.toString(ge));ae._attachCancellationCallback(ge)})}catch(ge){return ge}}function U(V){if(!this._isCancellable())return this;var G=this._onCancel();G!==void 0?s.isArray(G)?G.push(V):this._setOnCancel([G,V]):this._setOnCancel(V)}function L(){return this._onCancelField}function H(V){this._onCancelField=V}function w(){this._cancellationParent=void 0,this._onCancelField=void 0}function R(V,G){if(G&1){this._cancellationParent=V;var ne=V._branchesRemainingToCancel;ne===void 0&&(ne=0),V._branchesRemainingToCancel=ne+1}G&2&&V._isBound()&&this._setBoundTo(V._boundTo)}function O(V,G){G&2&&V._isBound()&&this._setBoundTo(V._boundTo)}var P=O;function g(){var V=this._boundTo;return V!==void 0&&V instanceof e?V.isFulfilled()?V.value():void 0:V}function y(){this._trace=new lr(this._peekContext())}function C(V,G){if(u(V)){var ne=this._trace;if(ne!==void 0&&G&&(ne=ne._parent),ne!==void 0)ne.attachExtraTrace(V);else if(!V.__stackCleaned__){var ae=Ge(V);s.notEnumerableProp(V,"stack",ae.message+`
`+ae.stack.join(`
`)),s.notEnumerableProp(V,"__stackCleaned__",!0)}}}function I(){this._trace=void 0}function j(V,G,ne,ae,ge){if(V===void 0&&G!==null&&x){if(ge!==void 0&&ge._returnedNonUndefined()||!(ae._bitField&65535))return;ne&&(ne=ne+" ");var Me="",Je="";if(G._trace){for(var be=G._trace.stack.split(`
`),ot=Re(be),mt=ot.length-1;mt>=0;--mt){var Br=ot[mt];if(!d.test(Br)){var kr=Br.match(p);kr&&(Me="at "+kr[1]+":"+kr[2]+":"+kr[3]+" ");break}}if(ot.length>0){for(var qy=ot[0],mt=0;mt<be.length;++mt)if(be[mt]===qy){mt>0&&(Je=`
`+be[mt-1]);break}}}var zy="a promise was created in a "+ne+"handler "+Me+"but was not returned from it, see http://goo.gl/rRqMUw"+Je;ae._warn(zy,!0,G)}}function q(V,G){var ne=V+" is deprecated and will be removed in a future version.";return G&&(ne+=" Use "+G+" instead."),se(ne)}function se(V,G,ne){if(qe.warnings){var ae=new i(V),ge;if(G)ne._attachExtraTrace(ae);else if(qe.longStackTraces&&(ge=e._peekContext()))ge.attachExtraTrace(ae);else{var Me=Ge(ae);ae.stack=Me.message+`
`+Me.stack.join(`
`)}z("warning",ae)||sa(ae,"",!0)}}function ue(V,G){for(var ne=0;ne<G.length-1;++ne)G[ne].push("From previous event:"),G[ne]=G[ne].join(`
`);return ne<G.length&&(G[ne]=G[ne].join(`
`)),V+`
`+G.join(`
`)}function ve(V){for(var G=0;G<V.length;++G)(V[G].length===0||G+1<V.length&&V[G][0]===V[G+1][0])&&(V.splice(G,1),G--)}function $e(V){for(var G=V[0],ne=1;ne<V.length;++ne){for(var ae=V[ne],ge=G.length-1,Me=G[ge],Je=-1,be=ae.length-1;be>=0;--be)if(ae[be]===Me){Je=be;break}for(var be=Je;be>=0;--be){var ot=ae[be];if(G[ge]===ot)G.pop(),ge--;else break}G=ae}}function Re(V){for(var G=[],ne=0;ne<V.length;++ne){var ae=V[ne],ge=ae==="    (No stack trace)"||h.test(ae),Me=ge&&On(ae);ge&&!Me&&(v&&ae.charAt(0)!==" "&&(ae="    "+ae),G.push(ae))}return G}function He(V){for(var G=V.stack.replace(/\s+$/g,"").split(`
`),ne=0;ne<G.length;++ne){var ae=G[ne];if(ae==="    (No stack trace)"||h.test(ae))break}return ne>0&&V.name!="SyntaxError"&&(G=G.slice(ne)),G}function Ge(V){var G=V.stack,ne=V.toString();return G=typeof G=="string"&&G.length>0?He(V):["    (No stack trace)"],{message:ne,stack:V.name=="SyntaxError"?G:Re(G)}}function sa(V,G,ne){if(typeof console<"u"){var ae;if(s.isObject(V)){var ge=V.stack;ae=G+_(ge,V)}else ae=G+String(V);typeof m=="function"?m(ae,ne):(typeof console.log=="function"||typeof console.log=="object")&&console.log(ae)}}function oa(V,G,ne,ae){var ge=!1;try{typeof G=="function"&&(ge=!0,V==="rejectionHandled"?G(ae):G(ne,ae))}catch(Me){a.throwLater(Me)}V==="unhandledRejection"?!z(V,ne,ae)&&!ge&&sa(ne,"Unhandled rejection "):z(V,ae)}function ua(V){var G;if(typeof V=="function")G="[function "+(V.name||"anonymous")+"]";else{G=V&&typeof V.toString=="function"?V.toString():s.toString(V);var ne=/\[object [a-zA-Z0-9$_]+\]/;if(ne.test(G))try{var ae=JSON.stringify(V);G=ae}catch{}G.length===0&&(G="(empty array)")}return"(<"+Ha(G)+">, no stack trace)"}function Ha(V){var G=41;return V.length<G?V:V.substr(0,G-3)+"..."}function In(){return typeof Jr=="function"}var On=function(){return!1},Ga=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function xn(V){var G=V.match(Ga);if(G)return{fileName:G[1],line:parseInt(G[2],10)}}function qa(V,G){if(In()){for(var ne=(V.stack||"").split(`
`),ae=(G.stack||"").split(`
`),ge=-1,Me=-1,Je,be,ot=0;ot<ne.length;++ot){var mt=xn(ne[ot]);if(mt){Je=mt.fileName,ge=mt.line;break}}for(var ot=0;ot<ae.length;++ot){var mt=xn(ae[ot]);if(mt){be=mt.fileName,Me=mt.line;break}}ge<0||Me<0||!Je||!be||Je!==be||ge>=Me||(On=function(Br){if(f.test(Br))return!0;var kr=xn(Br);return!!(kr&&kr.fileName===Je&&ge<=kr.line&&kr.line<=Me)})}}function lr(V){this._parent=V,this._promisesCreated=0;var G=this._length=1+(V===void 0?0:V._length);Jr(this,lr),G>32&&this.uncycle()}s.inherits(lr,Error),t.CapturedTrace=lr,lr.prototype.uncycle=function(){var V=this._length;if(!(V<2)){for(var G=[],ne={},ae=0,ge=this;ge!==void 0;++ae)G.push(ge),ge=ge._parent;V=this._length=ae;for(var ae=V-1;ae>=0;--ae){var Me=G[ae].stack;ne[Me]===void 0&&(ne[Me]=ae)}for(var ae=0;ae<V;++ae){var Je=G[ae].stack,be=ne[Je];if(be!==void 0&&be!==ae){be>0&&(G[be-1]._parent=void 0,G[be-1]._length=1),G[ae]._parent=void 0,G[ae]._length=1;var ot=ae>0?G[ae-1]:this;be<V-1?(ot._parent=G[be+1],ot._parent.uncycle(),ot._length=ot._parent._length+1):(ot._parent=void 0,ot._length=1);for(var mt=ot._length+1,Br=ae-2;Br>=0;--Br)G[Br]._length=mt,mt++;return}}}},lr.prototype.attachExtraTrace=function(V){if(!V.__stackCleaned__){this.uncycle();for(var G=Ge(V),ne=G.message,ae=[G.stack],ge=this;ge!==void 0;)ae.push(Re(ge.stack.split(`
`))),ge=ge._parent;$e(ae),ve(ae),s.notEnumerableProp(V,"stack",ue(ne,ae)),s.notEnumerableProp(V,"__stackCleaned__",!0)}};var Jr=function(){var G=/^\s*at\s*/,ne=function(Je,be){return typeof Je=="string"?Je:be.name!==void 0&&be.message!==void 0?be.toString():ua(be)};if(typeof Error.stackTraceLimit=="number"&&typeof Error.captureStackTrace=="function"){Error.stackTraceLimit+=6,h=G,_=ne;var ae=Error.captureStackTrace;return On=function(Je){return f.test(Je)},function(Je,be){Error.stackTraceLimit+=6,ae(Je,be),Error.stackTraceLimit-=6}}var ge=new Error;if(typeof ge.stack=="string"&&ge.stack.split(`
`)[0].indexOf("stackDetection@")>=0)return h=/@/,_=ne,v=!0,function(be){be.stack=new Error().stack};var Me;try{throw new Error}catch(Je){Me="stack"in Je}return!("stack"in ge)&&Me&&typeof Error.stackTraceLimit=="number"?(h=G,_=ne,function(be){Error.stackTraceLimit+=6;try{throw new Error}catch(ot){be.stack=ot.stack}Error.stackTraceLimit-=6}):(_=function(Je,be){return typeof Je=="string"?Je:(typeof be=="object"||typeof be=="function")&&be.name!==void 0&&be.message!==void 0?be.toString():ua(be)},null)}();typeof console<"u"&&typeof console.warn<"u"&&(m=function(V){console.warn(V)},s.isNode&&process.stderr.isTTY?m=function(V,G){var ne=G?"\x1B[33m":"\x1B[31m";console.warn(ne+V+`\x1B[0m
`)}:!s.isNode&&typeof new Error().stack=="string"&&(m=function(V,G){console.warn("%c"+V,G?"color: darkorange":"color: red")}));var qe={warnings:A,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return D&&e.longStackTraces(),{asyncHooks:function(){return qe.asyncHooks},longStackTraces:function(){return qe.longStackTraces},warnings:function(){return qe.warnings},cancellation:function(){return qe.cancellation},monitoring:function(){return qe.monitoring},propagateFromFunction:function(){return P},boundValueFunction:function(){return g},checkForgottenReturns:j,setBounds:qa,warn:se,deprecated:q,CapturedTrace:lr,fireDomEvent:W,fireGlobalEvent:J}}),lu}var fu,Lp;function Xg(){return Lp||(Lp=1,fu=function(e){var t=st(),r=ta().keys,n=t.tryCatch,a=t.errorObj;function i(s,o,u){return function(c){var l=u._boundValue();e:for(var f=0;f<s.length;++f){var d=s[f];if(d===Error||d!=null&&d.prototype instanceof Error){if(c instanceof d)return n(o).call(l,c)}else if(typeof d=="function"){var p=n(d).call(l,c);if(p===a)return p;if(p)return n(o).call(l,c)}else if(t.isObject(c)){for(var h=r(d),_=0;_<h.length;++_){var v=h[_];if(d[v]!=c[v])continue e}return n(o).call(l,c)}}return e}}return i}),fu}var du,Bp;function vR(){return Bp||(Bp=1,du=function(e,t,r){var n=st(),a=e.CancellationError,i=n.errorObj,s=Xg()(r);function o(p,h,_){this.promise=p,this.type=h,this.handler=_,this.called=!1,this.cancelPromise=null}o.prototype.isFinallyHandler=function(){return this.type===0};function u(p){this.finallyHandler=p}u.prototype._resultCancelled=function(){c(this.finallyHandler)};function c(p,h){return p.cancelPromise!=null?(arguments.length>1?p.cancelPromise._reject(h):p.cancelPromise._cancel(),p.cancelPromise=null,!0):!1}function l(){return d.call(this,this.promise._target()._settledValue())}function f(p){if(!c(this,p))return i.e=p,i}function d(p){var h=this.promise,_=this.handler;if(!this.called){this.called=!0;var v=this.isFinallyHandler()?_.call(h._boundValue()):_.call(h._boundValue(),p);if(v===r)return v;if(v!==void 0){h._setReturnedNonUndefined();var m=t(v,h);if(m instanceof e){if(this.cancelPromise!=null)if(m._isCancelled()){var b=new a("late cancellation observer");return h._attachExtraTrace(b),i.e=b,i}else m.isPending()&&m._attachCancellationCallback(new u(this));return m._then(l,f,void 0,this,void 0)}}}return h.isRejected()?(c(this),i.e=p,i):(c(this),p)}return e.prototype._passThrough=function(p,h,_,v){return typeof p!="function"?this.then():this._then(_,v,void 0,new o(this,h,p),void 0)},e.prototype.lastly=e.prototype.finally=function(p){return this._passThrough(p,0,d,d)},e.prototype.tap=function(p){return this._passThrough(p,1,d)},e.prototype.tapCatch=function(p){var h=arguments.length;if(h===1)return this._passThrough(p,1,void 0,d);var _=new Array(h-1),v=0,m;for(m=0;m<h-1;++m){var b=arguments[m];if(n.isObject(b))_[v++]=b;else return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+n.classString(b)))}_.length=v;var A=arguments[m];return this._passThrough(s(_,A,this),1,void 0,d)},o}),du}var hu,kp;function Jg(){if(kp)return hu;kp=1;var e=st(),t=e.maybeWrapAsError,r=En(),n=r.OperationalError,a=ta();function i(c){return c instanceof Error&&a.getPrototypeOf(c)===Error.prototype}var s=/^(?:name|message|stack|cause)$/;function o(c){var l;if(i(c)){l=new n(c),l.name=c.name,l.message=c.message,l.stack=c.stack;for(var f=a.keys(c),d=0;d<f.length;++d){var p=f[d];s.test(p)||(l[p]=c[p])}return l}return e.markAsOriginatingFromRejection(c),c}function u(c,l){return function(f,d){if(c!==null){if(f){var p=o(t(f));c._attachExtraTrace(p),c._reject(p)}else if(!l)c._fulfill(d);else{for(var h=arguments.length,_=new Array(Math.max(h-1,0)),v=1;v<h;++v)_[v-1]=arguments[v];c._fulfill(_)}c=null}}}return hu=u,hu}var pu,Up;function gR(){return Up||(Up=1,pu=function(e,t,r,n,a){var i=st(),s=i.tryCatch;e.method=function(o){if(typeof o!="function")throw new e.TypeError("expecting a function but got "+i.classString(o));return function(){var u=new e(t);u._captureStackTrace(),u._pushContext();var c=s(o).apply(this,arguments),l=u._popContext();return a.checkForgottenReturns(c,l,"Promise.method",u),u._resolveFromSyncValue(c),u}},e.attempt=e.try=function(o){if(typeof o!="function")return n("expecting a function but got "+i.classString(o));var u=new e(t);u._captureStackTrace(),u._pushContext();var c;if(arguments.length>1){a.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],f=arguments[2];c=i.isArray(l)?s(o).apply(f,l):s(o).call(f,l)}else c=s(o)();var d=u._popContext();return a.checkForgottenReturns(c,d,"Promise.try",u),u._resolveFromSyncValue(c),u},e.prototype._resolveFromSyncValue=function(o){o===i.errorObj?this._rejectCallback(o.e,!1):this._resolveCallback(o,!0)}}),pu}var mu,Fp;function _R(){return Fp||(Fp=1,mu=function(e,t,r,n){var a=!1,i=function(c,l){this._reject(l)},s=function(c,l){l.promiseRejectionQueued=!0,l.bindingPromise._then(i,i,null,this,c)},o=function(c,l){this._bitField&50397184||this._resolveCallback(l.target)},u=function(c,l){l.promiseRejectionQueued||this._reject(c)};e.prototype.bind=function(c){a||(a=!0,e.prototype._propagateFrom=n.propagateFromFunction(),e.prototype._boundValue=n.boundValueFunction());var l=r(c),f=new e(t);f._propagateFrom(this,1);var d=this._target();if(f._setBoundTo(l),l instanceof e){var p={promiseRejectionQueued:!1,promise:f,target:d,bindingPromise:l};d._then(t,s,void 0,f,p),l._then(o,u,void 0,f,p),f._setOnCancel(l)}else f._resolveCallback(d);return f},e.prototype._setBoundTo=function(c){c!==void 0?(this._bitField=this._bitField|2097152,this._boundTo=c):this._bitField=this._bitField&-2097153},e.prototype._isBound=function(){return(this._bitField&2097152)===2097152},e.bind=function(c,l){return e.resolve(l).bind(c)}}),mu}var vu,Mp;function yR(){return Mp||(Mp=1,vu=function(e,t,r,n){var a=st(),i=a.tryCatch,s=a.errorObj,o=e._async;e.prototype.break=e.prototype.cancel=function(){if(!n.cancellation())return this._warn("cancellation is disabled");for(var u=this,c=u;u._isCancellable();){if(!u._cancelBy(c)){c._isFollowing()?c._followee().cancel():c._cancelBranched();break}var l=u._cancellationParent;if(l==null||!l._isCancellable()){u._isFollowing()?u._followee().cancel():u._cancelBranched();break}else u._isFollowing()&&u._followee().cancel(),u._setWillBeCancelled(),c=u,u=l}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===void 0||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(u){return u===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),o.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(u,c){if(a.isArray(u))for(var l=0;l<u.length;++l)this._doInvokeOnCancel(u[l],c);else if(u!==void 0)if(typeof u=="function"){if(!c){var f=i(u).call(this._boundValue());f===s&&(this._attachExtraTrace(f.e),o.throwLater(f.e))}}else u._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var u=this._onCancel();this._unsetOnCancel(),o.invoke(this._doInvokeOnCancel,this,u)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}),vu}var gu,jp;function ER(){return jp||(jp=1,gu=function(e){function t(){return this.value}function r(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype.throw=e.prototype.thenThrow=function(n){return this._then(r,void 0,void 0,{reason:n},void 0)},e.prototype.catchThrow=function(n){if(arguments.length<=1)return this._then(void 0,r,void 0,{reason:n},void 0);var a=arguments[1],i=function(){throw a};return this.caught(n,i)},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var a=arguments[1];a instanceof e&&a.suppressUnhandledRejections();var i=function(){return a};return this.caught(n,i)}}),gu}var _u,Vp;function CR(){return Vp||(Vp=1,_u=function(e){function t(u){u!==void 0?(u=u._target(),this._bitField=u._bitField,this._settledValueField=u._isFateSealed()?u._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var r=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError(`cannot get fulfillment value of a non-fulfilled promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},n=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError(`cannot get rejection reason of a non-rejected promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},a=t.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0},i=t.prototype.isRejected=function(){return(this._bitField&16777216)!==0},s=t.prototype.isPending=function(){return(this._bitField&50397184)===0},o=t.prototype.isResolved=function(){return(this._bitField&50331648)!==0};t.prototype.isCancelled=function(){return(this._bitField&8454144)!==0},e.prototype.__isCancelled=function(){return(this._bitField&65536)===65536},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return(this._target()._bitField&8454144)!==0},e.prototype.isPending=function(){return s.call(this._target())},e.prototype.isRejected=function(){return i.call(this._target())},e.prototype.isFulfilled=function(){return a.call(this._target())},e.prototype.isResolved=function(){return o.call(this._target())},e.prototype.value=function(){return r.call(this._target())},e.prototype.reason=function(){var u=this._target();return u._unsetRejectionIsUnhandled(),n.call(u)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}),_u}var yu,Yp;function SR(){return Yp||(Yp=1,yu=function(e,t,r,n,a){var i=st(),s=i.canEvaluate,o=i.tryCatch,u=i.errorObj,c;if(s){for(var l=function(m){return new Function("value","holder",`                             
	            'use strict';                                                    
	            holder.pIndex = value;                                           
	            holder.checkFulfillment(this);                                   
	            `.replace(/Index/g,m))},f=function(m){return new Function("promise","holder",`                           
	            'use strict';                                                    
	            holder.pIndex = promise;                                         
	            `.replace(/Index/g,m))},d=function(m){for(var b=new Array(m),A=0;A<b.length;++A)b[A]="this.p"+(A+1);var D=b.join(" = ")+" = null;",x=`var promise;
`+b.map(function(W){return`                                                         
	                promise = `+W+`;                                      
	                if (promise instanceof Promise) {                            
	                    promise.cancel();                                        
	                }                                                            
	            `}).join(`
`),Y=b.join(", "),X="Holder$"+m,Z=`return function(tryCatch, errorObj, Promise, async) {    
	            'use strict';                                                    
	            function [TheName](fn) {                                         
	                [TheProperties]                                              
	                this.fn = fn;                                                
	                this.asyncNeeded = true;                                     
	                this.now = 0;                                                
	            }                                                                
	                                                                             
	            [TheName].prototype._callFunction = function(promise) {          
	                promise._pushContext();                                      
	                var ret = tryCatch(this.fn)([ThePassedArguments]);           
	                promise._popContext();                                       
	                if (ret === errorObj) {                                      
	                    promise._rejectCallback(ret.e, false);                   
	                } else {                                                     
	                    promise._resolveCallback(ret);                           
	                }                                                            
	            };                                                               
	                                                                             
	            [TheName].prototype.checkFulfillment = function(promise) {       
	                var now = ++this.now;                                        
	                if (now === [TheTotal]) {                                    
	                    if (this.asyncNeeded) {                                  
	                        async.invoke(this._callFunction, this, promise);     
	                    } else {                                                 
	                        this._callFunction(promise);                         
	                    }                                                        
	                                                                             
	                }                                                            
	            };                                                               
	                                                                             
	            [TheName].prototype._resultCancelled = function() {              
	                [CancellationCode]                                           
	            };                                                               
	                                                                             
	            return [TheName];                                                
	        }(tryCatch, errorObj, Promise, async);                               
	        `;return Z=Z.replace(/\[TheName\]/g,X).replace(/\[TheTotal\]/g,m).replace(/\[ThePassedArguments\]/g,Y).replace(/\[TheProperties\]/g,D).replace(/\[CancellationCode\]/g,x),new Function("tryCatch","errorObj","Promise","async",Z)(o,u,e,a)},p=[],h=[],_=[],v=0;v<8;++v)p.push(d(v+1)),h.push(l(v+1)),_.push(f(v+1));c=function(m){this._reject(m)}}e.join=function(){var m=arguments.length-1,b;if(m>0&&typeof arguments[m]=="function"&&(b=arguments[m],m<=8&&s)){var z=new e(n);z._captureStackTrace();for(var A=p[m-1],D=new A(b),x=h,Y=0;Y<m;++Y){var X=r(arguments[Y],z);if(X instanceof e){X=X._target();var Z=X._bitField;Z&50397184?Z&33554432?x[Y].call(z,X._value(),D):Z&16777216?z._reject(X._reason()):z._cancel():(X._then(x[Y],c,void 0,z,D),_[Y](X,D),D.asyncNeeded=!1)}else x[Y].call(z,X,D)}if(!z._isFateSealed()){if(D.asyncNeeded){var W=e._getContext();D.fn=i.contextBind(W,D.fn)}z._setAsyncGuaranteed(),z._setOnCancel(D)}return z}for(var J=arguments.length,ee=new Array(J),oe=0;oe<J;++oe)ee[oe]=arguments[oe];b&&ee.pop();var z=new t(ee).promise();return b!==void 0?z.spread(b):z}}),yu}var Eu,Kp;function bR(){if(Kp)return Eu;Kp=1;var e=Object.create;if(e){var t=e(null),r=e(null);t[" size"]=r[" size"]=0}return Eu=function(n){var a=st(),i=a.canEvaluate,s=a.isIdentifier,o,u;{var c=function(v){return new Function("ensureMethod",`                                    
	        return function(obj) {                                               
	            'use strict'                                                     
	            var len = this.length;                                           
	            ensureMethod(obj, 'methodName');                                 
	            switch(len) {                                                    
	                case 1: return obj.methodName(this[0]);                      
	                case 2: return obj.methodName(this[0], this[1]);             
	                case 3: return obj.methodName(this[0], this[1], this[2]);    
	                case 0: return obj.methodName();                             
	                default:                                                     
	                    return obj.methodName.apply(obj, this);                  
	            }                                                                
	        };                                                                   
	        `.replace(/methodName/g,v))(d)},l=function(v){return new Function("obj",`                                             
	        'use strict';                                                        
	        return obj.propertyName;                                             
	        `.replace("propertyName",v))},f=function(v,m,b){var A=b[v];if(typeof A!="function"){if(!s(v))return null;if(A=m(v),b[v]=A,b[" size"]++,b[" size"]>512){for(var D=Object.keys(b),x=0;x<256;++x)delete b[D[x]];b[" size"]=D.length-256}}return A};o=function(v){return f(v,c,t)},u=function(v){return f(v,l,r)}}function d(v,m){var b;if(v!=null&&(b=v[m]),typeof b!="function"){var A="Object "+a.classString(v)+" has no method '"+a.toString(m)+"'";throw new n.TypeError(A)}return b}function p(v){var m=this.pop(),b=d(v,m);return b.apply(v,this)}n.prototype.call=function(v){for(var m=arguments.length,b=new Array(Math.max(m-1,0)),A=1;A<m;++A)b[A-1]=arguments[A];if(i){var D=o(v);if(D!==null)return this._then(D,void 0,void 0,b,void 0)}return b.push(v),this._then(p,void 0,void 0,b,void 0)};function h(v){return v[this]}function _(v){var m=+this;return m<0&&(m=Math.max(0,m+v.length)),v[m]}n.prototype.get=function(v){var m=typeof v=="number",b;if(m)b=_;else if(i){var A=u(v);b=A!==null?A:h}else b=h;return this._then(b,void 0,void 0,v,void 0)}},Eu}var Cu,Hp;function TR(){return Hp||(Hp=1,Cu=function(e,t,r,n,a,i){var s=En(),o=s.TypeError,u=st(),c=u.errorObj,l=u.tryCatch,f=[];function d(h,_,v){for(var m=0;m<_.length;++m){v._pushContext();var b=l(_[m])(h);if(v._popContext(),b===c){v._pushContext();var A=e.reject(c.e);return v._popContext(),A}var D=n(b,v);if(D instanceof e)return D}return null}function p(h,_,v,m){if(i.cancellation()){var b=new e(r),A=this._finallyPromise=new e(r);this._promise=b.lastly(function(){return A}),b._captureStackTrace(),b._setOnCancel(this)}else{var D=this._promise=new e(r);D._captureStackTrace()}this._stack=m,this._generatorFunction=h,this._receiver=_,this._generator=void 0,this._yieldHandlers=typeof v=="function"?[v].concat(f):f,this._yieldedPromise=null,this._cancellationPhase=!1}u.inherits(p,a),p.prototype._isResolved=function(){return this._promise===null},p.prototype._cleanup=function(){this._promise=this._generator=null,i.cancellation()&&this._finallyPromise!==null&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},p.prototype._promiseCancelled=function(){if(!this._isResolved()){var h=typeof this._generator.return<"u",_;if(h)this._promise._pushContext(),_=l(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var v=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=v,this._promise._attachExtraTrace(v),this._promise._pushContext(),_=l(this._generator.throw).call(this._generator,v),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(_)}},p.prototype._promiseFulfilled=function(h){this._yieldedPromise=null,this._promise._pushContext();var _=l(this._generator.next).call(this._generator,h);this._promise._popContext(),this._continue(_)},p.prototype._promiseRejected=function(h){this._yieldedPromise=null,this._promise._attachExtraTrace(h),this._promise._pushContext();var _=l(this._generator.throw).call(this._generator,h);this._promise._popContext(),this._continue(_)},p.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var h=this._yieldedPromise;this._yieldedPromise=null,h.cancel()}},p.prototype.promise=function(){return this._promise},p.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},p.prototype._continue=function(h){var _=this._promise;if(h===c)return this._cleanup(),this._cancellationPhase?_.cancel():_._rejectCallback(h.e,!1);var v=h.value;if(h.done===!0)return this._cleanup(),this._cancellationPhase?_.cancel():_._resolveCallback(v);var m=n(v,this._promise);if(!(m instanceof e)&&(m=d(m,this._yieldHandlers,this._promise),m===null)){this._promiseRejected(new o(`A value %s was yielded that could not be treated as a promise

    See http://goo.gl/MqrFmX

`.replace("%s",String(v))+`From coroutine:
`+this._stack.split(`
`).slice(1,-7).join(`
`)));return}m=m._target();var b=m._bitField;b&50397184?b&33554432?e._async.invoke(this._promiseFulfilled,this,m._value()):b&16777216?e._async.invoke(this._promiseRejected,this,m._reason()):this._promiseCancelled():(this._yieldedPromise=m,m._proxy(this,null))},e.coroutine=function(h,_){if(typeof h!="function")throw new o(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var v=Object(_).yieldHandler,m=p,b=new Error().stack;return function(){var A=h.apply(this,arguments),D=new m(void 0,void 0,v,b),x=D.promise();return D._generator=A,D._promiseFulfilled(void 0),x}},e.coroutine.addYieldHandler=function(h){if(typeof h!="function")throw new o("expecting a function but got "+u.classString(h));f.push(h)},e.spawn=function(h){if(i.deprecated("Promise.spawn()","Promise.coroutine()"),typeof h!="function")return t(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var _=new p(h,this),v=_.promise();return _._run(e.spawn),v}}),Cu}var Su,Gp;function AR(){return Gp||(Gp=1,Su=function(e,t,r,n,a,i){var s=st(),o=s.tryCatch,u=s.errorObj,c=e._async;function l(d,p,h,_){this.constructor$(d),this._promise._captureStackTrace();var v=e._getContext();if(this._callback=s.contextBind(v,p),this._preservedValues=_===a?new Array(this.length()):null,this._limit=h,this._inFlight=0,this._queue=[],c.invoke(this._asyncInit,this,void 0),s.isArray(d))for(var m=0;m<d.length;++m){var b=d[m];b instanceof e&&b.suppressUnhandledRejections()}}s.inherits(l,t),l.prototype._asyncInit=function(){this._init$(void 0,-2)},l.prototype._init=function(){},l.prototype._promiseFulfilled=function(d,p){var h=this._values,_=this.length(),v=this._preservedValues,m=this._limit;if(p<0){if(p=p*-1-1,h[p]=d,m>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(m>=1&&this._inFlight>=m)return h[p]=d,this._queue.push(p),!1;v!==null&&(v[p]=d);var b=this._promise,A=this._callback,D=b._boundValue();b._pushContext();var x=o(A).call(D,d,p,_),Y=b._popContext();if(i.checkForgottenReturns(x,Y,v!==null?"Promise.filter":"Promise.map",b),x===u)return this._reject(x.e),!0;var X=n(x,this._promise);if(X instanceof e){X=X._target();var Z=X._bitField;if(Z&50397184)if(Z&33554432)x=X._value();else return Z&16777216?(this._reject(X._reason()),!0):(this._cancel(),!0);else return m>=1&&this._inFlight++,h[p]=X,X._proxy(this,(p+1)*-1),!1}h[p]=x}var W=++this._totalResolved;return W>=_?(v!==null?this._filter(h,v):this._resolve(h),!0):!1},l.prototype._drainQueue=function(){for(var d=this._queue,p=this._limit,h=this._values;d.length>0&&this._inFlight<p;){if(this._isResolved())return;var _=d.pop();this._promiseFulfilled(h[_],_)}},l.prototype._filter=function(d,p){for(var h=p.length,_=new Array(h),v=0,m=0;m<h;++m)d[m]&&(_[v++]=p[m]);_.length=v,this._resolve(_)},l.prototype.preservedValues=function(){return this._preservedValues};function f(d,p,h,_){if(typeof p!="function")return r("expecting a function but got "+s.classString(p));var v=0;if(h!==void 0)if(typeof h=="object"&&h!==null){if(typeof h.concurrency!="number")return e.reject(new TypeError("'concurrency' must be a number but it is "+s.classString(h.concurrency)));v=h.concurrency}else return e.reject(new TypeError("options argument must be an object but it is "+s.classString(h)));return v=typeof v=="number"&&isFinite(v)&&v>=1?v:0,new l(d,p,v,_).promise()}e.prototype.map=function(d,p){return f(this,d,p,null)},e.map=function(d,p,h,_){return f(d,p,h,_)}}),Su}var bu,qp;function wR(){return qp||(qp=1,bu=function(e){var t=st(),r=e._async,n=t.tryCatch,a=t.errorObj;function i(u,c){var l=this;if(!t.isArray(u))return s.call(l,u,c);var f=n(c).apply(l._boundValue(),[null].concat(u));f===a&&r.throwLater(f.e)}function s(u,c){var l=this,f=l._boundValue(),d=u===void 0?n(c).call(f,null):n(c).call(f,null,u);d===a&&r.throwLater(d.e)}function o(u,c){var l=this;if(!u){var f=new Error(u+"");f.cause=u,u=f}var d=n(c).call(l._boundValue(),u);d===a&&r.throwLater(d.e)}e.prototype.asCallback=e.prototype.nodeify=function(u,c){if(typeof u=="function"){var l=s;c!==void 0&&Object(c).spread&&(l=i),this._then(l,o,void 0,this,u)}return this}}),bu}var Tu,zp;function IR(){return zp||(zp=1,Tu=function(e,t){var r={},n=st(),a=Jg(),i=n.withAppended,s=n.maybeWrapAsError,o=n.canEvaluate,u=En().TypeError,c="Async",l={__isPromisified__:!0},f=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],d=new RegExp("^(?:"+f.join("|")+")$"),p=function(z){return n.isIdentifier(z)&&z.charAt(0)!=="_"&&z!=="constructor"};function h(z){return!d.test(z)}function _(z){try{return z.__isPromisified__===!0}catch{return!1}}function v(z,M,N){var U=n.getDataPropertyOrDefault(z,M+N,l);return U?_(U):!1}function m(z,M,N){for(var U=0;U<z.length;U+=2){var L=z[U];if(N.test(L)){for(var H=L.replace(N,""),w=0;w<z.length;w+=2)if(z[w]===H)throw new u(`Cannot promisify an API that has normal methods with '%s'-suffix

    See http://goo.gl/MqrFmX
`.replace("%s",M))}}}function b(z,M,N,U){for(var L=n.inheritedDataKeys(z),H=[],w=0;w<L.length;++w){var R=L[w],O=z[R],P=U===p?!0:p(R);typeof O=="function"&&!_(O)&&!v(z,R,M)&&U(R,O,z,P)&&H.push(R,O)}return m(H,M,N),H}var A=function(z){return z.replace(/([$])/,"\\$")},D;{var x=function(z){for(var M=[z],N=Math.max(0,z-1-3),U=z-1;U>=N;--U)M.push(U);for(var U=z+1;U<=3;++U)M.push(U);return M},Y=function(z){return n.filledRange(z,"_arg","")},X=function(z){return n.filledRange(Math.max(z,3),"_arg","")},Z=function(z){return typeof z.length=="number"?Math.max(Math.min(z.length,1024),0):0};D=function(z,M,N,U,L,H){var w=Math.max(0,Z(U)-1),R=x(w),O=typeof z=="string"||M===r;function P(I){var j=Y(I).join(", "),q=I>0?", ":"",se;return O?se=`ret = callback.call(this, {{args}}, nodeback); break;
`:se=M===void 0?`ret = callback({{args}}, nodeback); break;
`:`ret = callback.call(receiver, {{args}}, nodeback); break;
`,se.replace("{{args}}",j).replace(", ",q)}function g(){for(var I="",j=0;j<R.length;++j)I+="case "+R[j]+":"+P(R[j]);return I+=`                                                             
	        default:                                                             
	            var args = new Array(len + 1);                                   
	            var i = 0;                                                       
	            for (var i = 0; i < len; ++i) {                                  
	               args[i] = arguments[i];                                       
	            }                                                                
	            args[i] = nodeback;                                              
	            [CodeForCall]                                                    
	            break;                                                           
	        `.replace("[CodeForCall]",O?`ret = callback.apply(this, args);
`:`ret = callback.apply(receiver, args);
`),I}var y=typeof z=="string"?"this != null ? this['"+z+"'] : fn":"fn",C=`'use strict';                                                
	        var ret = function (Parameters) {                                    
	            'use strict';                                                    
	            var len = arguments.length;                                      
	            var promise = new Promise(INTERNAL);                             
	            promise._captureStackTrace();                                    
	            var nodeback = nodebackForPromise(promise, `+H+`);   
	            var ret;                                                         
	            var callback = tryCatch([GetFunctionCode]);                      
	            switch(len) {                                                    
	                [CodeForSwitchCase]                                          
	            }                                                                
	            if (ret === errorObj) {                                          
	                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);
	            }                                                                
	            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     
	            return promise;                                                  
	        };                                                                   
	        notEnumerableProp(ret, '__isPromisified__', true);                   
	        return ret;                                                          
	    `.replace("[CodeForSwitchCase]",g()).replace("[GetFunctionCode]",y);return C=C.replace("Parameters",X(w)),new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",C)(e,U,M,i,s,a,n.tryCatch,n.errorObj,n.notEnumerableProp,t)}}function W(z,M,N,U,L,H){var w=function(){return this}(),R=z;typeof R=="string"&&(z=U);function O(){var P=M;M===r&&(P=this);var g=new e(t);g._captureStackTrace();var y=typeof R=="string"&&this!==w?this[R]:z,C=a(g,H);try{y.apply(P,i(arguments,C))}catch(I){g._rejectCallback(s(I),!0,!0)}return g._isFateSealed()||g._setAsyncGuaranteed(),g}return n.notEnumerableProp(O,"__isPromisified__",!0),O}var J=o?D:W;function ee(z,M,N,U,L){for(var H=new RegExp(A(M)+"$"),w=b(z,M,H,N),R=0,O=w.length;R<O;R+=2){var P=w[R],g=w[R+1],y=P+M;if(U===J)z[y]=J(P,r,P,g,M,L);else{var C=U(g,function(){return J(P,r,P,g,M,L)});n.notEnumerableProp(C,"__isPromisified__",!0),z[y]=C}}return n.toFastProperties(z),z}function oe(z,M,N){return J(z,M,void 0,z,null,N)}e.promisify=function(z,M){if(typeof z!="function")throw new u("expecting a function but got "+n.classString(z));if(_(z))return z;M=Object(M);var N=M.context===void 0?r:M.context,U=!!M.multiArgs,L=oe(z,N,U);return n.copyDescriptors(z,L,h),L},e.promisifyAll=function(z,M){if(typeof z!="function"&&typeof z!="object")throw new u(`the target of promisifyAll must be an object or a function

    See http://goo.gl/MqrFmX
`);M=Object(M);var N=!!M.multiArgs,U=M.suffix;typeof U!="string"&&(U=c);var L=M.filter;typeof L!="function"&&(L=p);var H=M.promisifier;if(typeof H!="function"&&(H=J),!n.isIdentifier(U))throw new RangeError(`suffix must be a valid identifier

    See http://goo.gl/MqrFmX
`);for(var w=n.inheritedDataKeys(z),R=0;R<w.length;++R){var O=z[w[R]];w[R]!=="constructor"&&n.isClass(O)&&(ee(O.prototype,U,L,H,N),ee(O,U,L,H,N))}return ee(z,U,L,H,N)}}),Tu}var Au,Wp;function OR(){return Wp||(Wp=1,Au=function(e,t,r,n){var a=st(),i=a.isObject,s=ta(),o;typeof Map=="function"&&(o=Map);var u=function(){var d=0,p=0;function h(_,v){this[d]=_,this[d+p]=v,d++}return function(v){p=v.size,d=0;var m=new Array(v.size*2);return v.forEach(h,m),m}}(),c=function(d){for(var p=new o,h=d.length/2|0,_=0;_<h;++_){var v=d[h+_],m=d[_];p.set(v,m)}return p};function l(d){var p=!1,h;if(o!==void 0&&d instanceof o)h=u(d),p=!0;else{var _=s.keys(d),v=_.length;h=new Array(v*2);for(var m=0;m<v;++m){var b=_[m];h[m]=d[b],h[m+v]=b}}this.constructor$(h),this._isMap=p,this._init$(void 0,p?-6:-3)}a.inherits(l,t),l.prototype._init=function(){},l.prototype._promiseFulfilled=function(d,p){this._values[p]=d;var h=++this._totalResolved;if(h>=this._length){var _;if(this._isMap)_=c(this._values);else{_={};for(var v=this.length(),m=0,b=this.length();m<b;++m)_[this._values[m+v]]=this._values[m]}return this._resolve(_),!0}return!1},l.prototype.shouldCopyValues=function(){return!1},l.prototype.getActualLength=function(d){return d>>1};function f(d){var p,h=r(d);if(i(h))h instanceof e?p=h._then(e.props,void 0,void 0,void 0,void 0):p=new l(h).promise();else return n(`cannot await properties of a non-object

    See http://goo.gl/MqrFmX
`);return h instanceof e&&p._propagateFrom(h,2),p}e.prototype.props=function(){return f(this)},e.props=function(d){return f(d)}}),Au}var wu,Qp;function xR(){return Qp||(Qp=1,wu=function(e,t,r,n){var a=st(),i=function(o){return o.then(function(u){return s(u,o)})};function s(o,u){var c=r(o);if(c instanceof e)return i(c);if(o=a.asArray(o),o===null)return n("expecting an array or an iterable object but got "+a.classString(o));var l=new e(t);u!==void 0&&l._propagateFrom(u,3);for(var f=l._fulfill,d=l._reject,p=0,h=o.length;p<h;++p){var _=o[p];_===void 0&&!(p in o)||e.cast(_)._then(f,d,void 0,l,null)}return l}e.race=function(o){return s(o,void 0)},e.prototype.race=function(){return s(this,void 0)}}),wu}var Iu,Xp;function DR(){return Xp||(Xp=1,Iu=function(e,t,r,n,a,i){var s=st(),o=s.tryCatch;function u(p,h,_,v){this.constructor$(p);var m=e._getContext();this._fn=s.contextBind(m,h),_!==void 0&&(_=e.resolve(_),_._attachCancellationCallback(this)),this._initialValue=_,this._currentCancellable=null,v===a?this._eachValues=Array(this._length):v===0?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}s.inherits(u,t),u.prototype._gotAccum=function(p){this._eachValues!==void 0&&this._eachValues!==null&&p!==a&&this._eachValues.push(p)},u.prototype._eachComplete=function(p){return this._eachValues!==null&&this._eachValues.push(p),this._eachValues},u.prototype._init=function(){},u.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==void 0?this._eachValues:this._initialValue)},u.prototype.shouldCopyValues=function(){return!1},u.prototype._resolve=function(p){this._promise._resolveCallback(p),this._values=null},u.prototype._resultCancelled=function(p){if(p===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel())},u.prototype._iterate=function(p){this._values=p;var h,_,v=p.length;this._initialValue!==void 0?(h=this._initialValue,_=0):(h=e.resolve(p[0]),_=1),this._currentCancellable=h;for(var m=_;m<v;++m){var b=p[m];b instanceof e&&b.suppressUnhandledRejections()}if(!h.isRejected())for(;_<v;++_){var A={accum:null,value:p[_],index:_,length:v,array:this};h=h._then(f,void 0,void 0,A,void 0),_&127||h._setNoAsyncGuarantee()}this._eachValues!==void 0&&(h=h._then(this._eachComplete,void 0,void 0,this,void 0)),h._then(c,c,void 0,h,this)},e.prototype.reduce=function(p,h){return l(this,p,h,null)},e.reduce=function(p,h,_,v){return l(p,h,_,v)};function c(p,h){this.isFulfilled()?h._resolve(p):h._reject(p)}function l(p,h,_,v){if(typeof h!="function")return r("expecting a function but got "+s.classString(h));var m=new u(p,h,_,v);return m.promise()}function f(p){this.accum=p,this.array._gotAccum(p);var h=n(this.value,this.array._promise);return h instanceof e?(this.array._currentCancellable=h,h._then(d,void 0,void 0,this,void 0)):d.call(this,h)}function d(p){var h=this.array,_=h._promise,v=o(h._fn);_._pushContext();var m;h._eachValues!==void 0?m=v.call(_._boundValue(),p,this.index,this.length):m=v.call(_._boundValue(),this.accum,p,this.index,this.length),m instanceof e&&(h._currentCancellable=m);var b=_._popContext();return i.checkForgottenReturns(m,b,h._eachValues!==void 0?"Promise.each":"Promise.reduce",_),m}}),Iu}var Ou,Jp;function $R(){return Jp||(Jp=1,Ou=function(e,t,r){var n=e.PromiseInspection,a=st();function i(s){this.constructor$(s)}a.inherits(i,t),i.prototype._promiseResolved=function(s,o){this._values[s]=o;var u=++this._totalResolved;return u>=this._length?(this._resolve(this._values),!0):!1},i.prototype._promiseFulfilled=function(s,o){var u=new n;return u._bitField=33554432,u._settledValueField=s,this._promiseResolved(o,u)},i.prototype._promiseRejected=function(s,o){var u=new n;return u._bitField=16777216,u._settledValueField=s,this._promiseResolved(o,u)},e.settle=function(s){return r.deprecated(".settle()",".reflect()"),new i(s).promise()},e.allSettled=function(s){return new i(s).promise()},e.prototype.settle=function(){return e.settle(this)}}),Ou}var xu,Zp;function NR(){return Zp||(Zp=1,xu=function(e,t,r){var n=st(),a=En().RangeError,i=En().AggregateError,s=n.isArray,o={};function u(l){this.constructor$(l),this._howMany=0,this._unwrap=!1,this._initialized=!1}n.inherits(u,t),u.prototype._init=function(){if(this._initialized){if(this._howMany===0){this._resolve([]);return}this._init$(void 0,-5);var l=s(this._values);!this._isResolved()&&l&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},u.prototype.init=function(){this._initialized=!0,this._init()},u.prototype.setUnwrap=function(){this._unwrap=!0},u.prototype.howMany=function(){return this._howMany},u.prototype.setHowMany=function(l){this._howMany=l},u.prototype._promiseFulfilled=function(l){return this._addFulfilled(l),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),this.howMany()===1&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},u.prototype._promiseRejected=function(l){return this._addRejected(l),this._checkOutcome()},u.prototype._promiseCancelled=function(){return this._values instanceof e||this._values==null?this._cancel():(this._addRejected(o),this._checkOutcome())},u.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var l=new i,f=this.length();f<this._values.length;++f)this._values[f]!==o&&l.push(this._values[f]);return l.length>0?this._reject(l):this._cancel(),!0}return!1},u.prototype._fulfilled=function(){return this._totalResolved},u.prototype._rejected=function(){return this._values.length-this.length()},u.prototype._addRejected=function(l){this._values.push(l)},u.prototype._addFulfilled=function(l){this._values[this._totalResolved++]=l},u.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},u.prototype._getRangeError=function(l){var f="Input array must contain at least "+this._howMany+" items but contains only "+l+" items";return new a(f)},u.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function c(l,f){if((f|0)!==f||f<0)return r(`expecting a positive integer

    See http://goo.gl/MqrFmX
`);var d=new u(l),p=d.promise();return d.setHowMany(f),d.init(),p}e.some=function(l,f){return c(l,f)},e.prototype.some=function(l){return c(this,l)},e._SomePromiseArray=u}),xu}var Du,e0;function RR(){return e0||(e0=1,Du=function(e,t,r){var n=st(),a=e.TimeoutError;function i(f){this.handle=f}i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var s=function(f){return o(+this).thenReturn(f)},o=e.delay=function(f,d){var p,h;return d!==void 0?(p=e.resolve(d)._then(s,null,null,f,void 0),r.cancellation()&&d instanceof e&&p._setOnCancel(d)):(p=new e(t),h=setTimeout(function(){p._fulfill()},+f),r.cancellation()&&p._setOnCancel(new i(h)),p._captureStackTrace()),p._setAsyncGuaranteed(),p};e.prototype.delay=function(f){return o(f,this)};var u=function(f,d,p){var h;typeof d!="string"?d instanceof Error?h=d:h=new a("operation timed out"):h=new a(d),n.markAsOriginatingFromRejection(h),f._attachExtraTrace(h),f._reject(h),p!=null&&p.cancel()};function c(f){return clearTimeout(this.handle),f}function l(f){throw clearTimeout(this.handle),f}e.prototype.timeout=function(f,d){f=+f;var p,h,_=new i(setTimeout(function(){p.isPending()&&u(p,d,h)},f));return r.cancellation()?(h=this.then(),p=h._then(c,l,void 0,_,void 0),p._setOnCancel(_)):p=this._then(c,l,void 0,_,void 0),p}}),Du}var $u,t0;function PR(){return t0||(t0=1,$u=function(e,t,r,n,a,i){var s=st(),o=En().TypeError,u=st().inherits,c=s.errorObj,l=s.tryCatch,f={};function d(A){setTimeout(function(){throw A},0)}function p(A){var D=r(A);return D!==A&&typeof A._isDisposable=="function"&&typeof A._getDisposer=="function"&&A._isDisposable()&&D._setDisposable(A._getDisposer()),D}function h(A,D){var x=0,Y=A.length,X=new e(a);function Z(){if(x>=Y)return X._fulfill();var W=p(A[x++]);if(W instanceof e&&W._isDisposable()){try{W=r(W._getDisposer().tryDispose(D),A.promise)}catch(J){return d(J)}if(W instanceof e)return W._then(Z,d,null,null,null)}Z()}return Z(),X}function _(A,D,x){this._data=A,this._promise=D,this._context=x}_.prototype.data=function(){return this._data},_.prototype.promise=function(){return this._promise},_.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():f},_.prototype.tryDispose=function(A){var D=this.resource(),x=this._context;x!==void 0&&x._pushContext();var Y=D!==f?this.doDispose(D,A):null;return x!==void 0&&x._popContext(),this._promise._unsetDisposable(),this._data=null,Y},_.isDisposer=function(A){return A!=null&&typeof A.resource=="function"&&typeof A.tryDispose=="function"};function v(A,D,x){this.constructor$(A,D,x)}u(v,_),v.prototype.doDispose=function(A,D){var x=this.data();return x.call(A,A,D)};function m(A){return _.isDisposer(A)?(this.resources[this.index]._setDisposable(A),A.promise()):A}function b(A){this.length=A,this.promise=null,this[A-1]=null}b.prototype._resultCancelled=function(){for(var A=this.length,D=0;D<A;++D){var x=this[D];x instanceof e&&x.cancel()}},e.using=function(){var A=arguments.length;if(A<2)return t("you must pass at least 2 arguments to Promise.using");var D=arguments[A-1];if(typeof D!="function")return t("expecting a function but got "+s.classString(D));var x,Y=!0;A===2&&Array.isArray(arguments[0])?(x=arguments[0],A=x.length,Y=!1):(x=arguments,A--);for(var X=new b(A),Z=0;Z<A;++Z){var W=x[Z];if(_.isDisposer(W)){var J=W;W=W.promise(),W._setDisposable(J)}else{var ee=r(W);ee instanceof e&&(W=ee._then(m,null,null,{resources:X,index:Z},void 0))}X[Z]=W}for(var oe=new Array(X.length),Z=0;Z<oe.length;++Z)oe[Z]=e.resolve(X[Z]).reflect();var z=e.all(oe).then(function(N){for(var U=0;U<N.length;++U){var L=N[U];if(L.isRejected())return c.e=L.error(),c;if(!L.isFulfilled()){z.cancel();return}N[U]=L.value()}M._pushContext(),D=l(D);var H=Y?D.apply(void 0,N):D(N),w=M._popContext();return i.checkForgottenReturns(H,w,"Promise.using",M),H}),M=z.lastly(function(){var N=new e.PromiseInspection(z);return h(X,N)});return X.promise=M,M._setOnCancel(X),M},e.prototype._setDisposable=function(A){this._bitField=this._bitField|131072,this._disposer=A},e.prototype._isDisposable=function(){return(this._bitField&131072)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},e.prototype.disposer=function(A){if(typeof A=="function")return new v(A,this,n());throw new o}}),$u}var Nu,r0;function LR(){return r0||(r0=1,Nu=function(e){var t=e._SomePromiseArray;function r(n){var a=new t(n),i=a.promise();return a.setHowMany(1),a.setUnwrap(),a.init(),i}e.any=function(n){return r(n)},e.prototype.any=function(){return r(this)}}),Nu}var Ru,n0;function BR(){return n0||(n0=1,Ru=function(e,t){var r=e.reduce,n=e.all;function a(){return n(this)}function i(s,o){return r(s,o,t,t)}e.prototype.each=function(s){return r(this,s,t,0)._then(a,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(s){return r(this,s,t,t)},e.each=function(s,o){return r(s,o,t,0)._then(a,void 0,void 0,s,void 0)},e.mapSeries=i}),Ru}var Pu,a0;function kR(){return a0||(a0=1,Pu=function(e,t){var r=e.map;e.prototype.filter=function(n,a){return r(this,n,a,t)},e.filter=function(n,a,i){return r(n,a,i,t)}}),Pu}(function(e){e.exports=function(){var t=function(){return new A(`circular promise resolution chain

    See http://goo.gl/MqrFmX
`)},r=function(){return new w.PromiseInspection(this._target())},n=function(g){return w.reject(new A(g))};function a(){}var i={},s=st();s.setReflectHandler(r);var o=function(){var g=process.domain;return g===void 0?null:g},u=function(){return null},c=function(){return{domain:o(),async:null}},l=s.isNode&&s.nodeSupportsAsyncResource?eE.AsyncResource:null,f=function(){return{domain:o(),async:new l("Bluebird::Promise")}},d=s.isNode?c:u;s.notEnumerableProp(w,"_getContext",d);var p=function(){d=f,s.notEnumerableProp(w,"_getContext",f)},h=function(){d=c,s.notEnumerableProp(w,"_getContext",c)},_=ta(),v=fR(),m=new v;_.defineProperty(w,"_async",{value:m});var b=En(),A=w.TypeError=b.TypeError;w.RangeError=b.RangeError;var D=w.CancellationError=b.CancellationError;w.TimeoutError=b.TimeoutError,w.OperationalError=b.OperationalError,w.RejectionError=b.OperationalError,w.AggregateError=b.AggregateError;var x=function(){},Y={},X={},Z=dR()(w,x),W=hR()(w,x,Z,n,a),J=pR()(w),ee=J.create,oe=mR()(w,J,p,h);oe.CapturedTrace;var z=vR()(w,Z,X),M=Xg()(X),N=Jg(),U=s.errorObj,L=s.tryCatch;function H(g,y){if(g==null||g.constructor!==w)throw new A(`the promise constructor cannot be invoked directly

    See http://goo.gl/MqrFmX
`);if(typeof y!="function")throw new A("expecting a function but got "+s.classString(y))}function w(g){g!==x&&H(this,g),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(g),this._promiseCreated(),this._fireEvent("promiseCreated",this)}w.prototype.toString=function(){return"[object Promise]"},w.prototype.caught=w.prototype.catch=function(g){var y=arguments.length;if(y>1){var C=new Array(y-1),I=0,j;for(j=0;j<y-1;++j){var q=arguments[j];if(s.isObject(q))C[I++]=q;else return n("Catch statement predicate: expecting an object but got "+s.classString(q))}if(C.length=I,g=arguments[j],typeof g!="function")throw new A("The last argument to .catch() must be a function, got "+s.toString(g));return this.then(void 0,M(C,g,this))}return this.then(void 0,g)},w.prototype.reflect=function(){return this._then(r,r,void 0,this,void 0)},w.prototype.then=function(g,y){if(oe.warnings()&&arguments.length>0&&typeof g!="function"&&typeof y!="function"){var C=".then() only accepts functions but was passed: "+s.classString(g);arguments.length>1&&(C+=", "+s.classString(y)),this._warn(C)}return this._then(g,y,void 0,void 0,void 0)},w.prototype.done=function(g,y){var C=this._then(g,y,void 0,void 0,void 0);C._setIsFinal()},w.prototype.spread=function(g){return typeof g!="function"?n("expecting a function but got "+s.classString(g)):this.all()._then(g,void 0,void 0,Y,void 0)},w.prototype.toJSON=function(){var g={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(g.fulfillmentValue=this.value(),g.isFulfilled=!0):this.isRejected()&&(g.rejectionReason=this.reason(),g.isRejected=!0),g},w.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new W(this).promise()},w.prototype.error=function(g){return this.caught(s.originatesFromRejection,g)},w.getNewLibraryCopy=e.exports,w.is=function(g){return g instanceof w},w.fromNode=w.fromCallback=function(g){var y=new w(x);y._captureStackTrace();var C=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,I=L(g)(N(y,C));return I===U&&y._rejectCallback(I.e,!0),y._isFateSealed()||y._setAsyncGuaranteed(),y},w.all=function(g){return new W(g).promise()},w.cast=function(g){var y=Z(g);return y instanceof w||(y=new w(x),y._captureStackTrace(),y._setFulfilled(),y._rejectionHandler0=g),y},w.resolve=w.fulfilled=w.cast,w.reject=w.rejected=function(g){var y=new w(x);return y._captureStackTrace(),y._rejectCallback(g,!0),y},w.setScheduler=function(g){if(typeof g!="function")throw new A("expecting a function but got "+s.classString(g));return m.setScheduler(g)},w.prototype._then=function(g,y,C,I,j){var q=j!==void 0,se=q?j:new w(x),ue=this._target(),ve=ue._bitField;q||(se._propagateFrom(this,3),se._captureStackTrace(),I===void 0&&this._bitField&2097152&&(ve&50397184?I=this._boundValue():I=ue===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,se));var $e=d();if(ve&50397184){var Re,He,Ge=ue._settlePromiseCtx;ve&33554432?(He=ue._rejectionHandler0,Re=g):ve&16777216?(He=ue._fulfillmentHandler0,Re=y,ue._unsetRejectionIsUnhandled()):(Ge=ue._settlePromiseLateCancellationObserver,He=new D("late cancellation observer"),ue._attachExtraTrace(He),Re=y),m.invoke(Ge,ue,{handler:s.contextBind($e,Re),promise:se,receiver:I,value:He})}else ue._addCallbacks(g,y,se,I,$e);return se},w.prototype._length=function(){return this._bitField&65535},w.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0},w.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864},w.prototype._setLength=function(g){this._bitField=this._bitField&-65536|g&65535},w.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432,this._fireEvent("promiseFulfilled",this)},w.prototype._setRejected=function(){this._bitField=this._bitField|16777216,this._fireEvent("promiseRejected",this)},w.prototype._setFollowing=function(){this._bitField=this._bitField|67108864,this._fireEvent("promiseResolved",this)},w.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304},w.prototype._isFinal=function(){return(this._bitField&4194304)>0},w.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},w.prototype._setCancelled=function(){this._bitField=this._bitField|65536,this._fireEvent("promiseCancelled",this)},w.prototype._setWillBeCancelled=function(){this._bitField=this._bitField|8388608},w.prototype._setAsyncGuaranteed=function(){if(!m.hasCustomScheduler()){var g=this._bitField;this._bitField=g|(g&536870912)>>2^134217728}},w.prototype._setNoAsyncGuarantee=function(){this._bitField=(this._bitField|536870912)&-134217729},w.prototype._receiverAt=function(g){var y=g===0?this._receiver0:this[g*4-4+3];if(y!==i)return y===void 0&&this._isBound()?this._boundValue():y},w.prototype._promiseAt=function(g){return this[g*4-4+2]},w.prototype._fulfillmentHandlerAt=function(g){return this[g*4-4+0]},w.prototype._rejectionHandlerAt=function(g){return this[g*4-4+1]},w.prototype._boundValue=function(){},w.prototype._migrateCallback0=function(g){g._bitField;var y=g._fulfillmentHandler0,C=g._rejectionHandler0,I=g._promise0,j=g._receiverAt(0);j===void 0&&(j=i),this._addCallbacks(y,C,I,j,null)},w.prototype._migrateCallbackAt=function(g,y){var C=g._fulfillmentHandlerAt(y),I=g._rejectionHandlerAt(y),j=g._promiseAt(y),q=g._receiverAt(y);q===void 0&&(q=i),this._addCallbacks(C,I,j,q,null)},w.prototype._addCallbacks=function(g,y,C,I,j){var q=this._length();if(q>=65531&&(q=0,this._setLength(0)),q===0)this._promise0=C,this._receiver0=I,typeof g=="function"&&(this._fulfillmentHandler0=s.contextBind(j,g)),typeof y=="function"&&(this._rejectionHandler0=s.contextBind(j,y));else{var se=q*4-4;this[se+2]=C,this[se+3]=I,typeof g=="function"&&(this[se+0]=s.contextBind(j,g)),typeof y=="function"&&(this[se+1]=s.contextBind(j,y))}return this._setLength(q+1),q},w.prototype._proxy=function(g,y){this._addCallbacks(void 0,void 0,y,g,null)},w.prototype._resolveCallback=function(g,y){if(!(this._bitField&117506048)){if(g===this)return this._rejectCallback(t(),!1);var C=Z(g,this);if(!(C instanceof w))return this._fulfill(g);y&&this._propagateFrom(C,2);var I=C._target();if(I===this){this._reject(t());return}var j=I._bitField;if(j&50397184)if(j&33554432)this._fulfill(I._value());else if(j&16777216)this._reject(I._reason());else{var ue=new D("late cancellation observer");I._attachExtraTrace(ue),this._reject(ue)}else{var q=this._length();q>0&&I._migrateCallback0(this);for(var se=1;se<q;++se)I._migrateCallbackAt(this,se);this._setFollowing(),this._setLength(0),this._setFollowee(C)}}},w.prototype._rejectCallback=function(g,y,C){var I=s.ensureErrorObject(g),j=I===g;if(!j&&!C&&oe.warnings()){var q="a promise was rejected with a non-error: "+s.classString(g);this._warn(q,!0)}this._attachExtraTrace(I,y?j:!1),this._reject(g)},w.prototype._resolveFromExecutor=function(g){if(g!==x){var y=this;this._captureStackTrace(),this._pushContext();var C=!0,I=this._execute(g,function(j){y._resolveCallback(j)},function(j){y._rejectCallback(j,C)});C=!1,this._popContext(),I!==void 0&&y._rejectCallback(I,!0)}},w.prototype._settlePromiseFromHandler=function(g,y,C,I){var j=I._bitField;if(!(j&65536)){I._pushContext();var q;y===Y?!C||typeof C.length!="number"?(q=U,q.e=new A("cannot .spread() a non-array: "+s.classString(C))):q=L(g).apply(this._boundValue(),C):q=L(g).call(y,C);var se=I._popContext();j=I._bitField,!(j&65536)&&(q===X?I._reject(C):q===U?I._rejectCallback(q.e,!1):(oe.checkForgottenReturns(q,se,"",I,this),I._resolveCallback(q)))}},w.prototype._target=function(){for(var g=this;g._isFollowing();)g=g._followee();return g},w.prototype._followee=function(){return this._rejectionHandler0},w.prototype._setFollowee=function(g){this._rejectionHandler0=g},w.prototype._settlePromise=function(g,y,C,I){var j=g instanceof w,q=this._bitField,se=(q&134217728)!==0;q&65536?(j&&g._invokeInternalOnCancel(),C instanceof z&&C.isFinallyHandler()?(C.cancelPromise=g,L(y).call(C,I)===U&&g._reject(U.e)):y===r?g._fulfill(r.call(C)):C instanceof a?C._promiseCancelled(g):j||g instanceof W?g._cancel():C.cancel()):typeof y=="function"?j?(se&&g._setAsyncGuaranteed(),this._settlePromiseFromHandler(y,C,I,g)):y.call(C,I,g):C instanceof a?C._isResolved()||(q&33554432?C._promiseFulfilled(I,g):C._promiseRejected(I,g)):j&&(se&&g._setAsyncGuaranteed(),q&33554432?g._fulfill(I):g._reject(I))},w.prototype._settlePromiseLateCancellationObserver=function(g){var y=g.handler,C=g.promise,I=g.receiver,j=g.value;typeof y=="function"?C instanceof w?this._settlePromiseFromHandler(y,I,j,C):y.call(I,j,C):C instanceof w&&C._reject(j)},w.prototype._settlePromiseCtx=function(g){this._settlePromise(g.promise,g.handler,g.receiver,g.value)},w.prototype._settlePromise0=function(g,y,C){var I=this._promise0,j=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(I,g,j,y)},w.prototype._clearCallbackDataAtIndex=function(g){var y=g*4-4;this[y+2]=this[y+3]=this[y+0]=this[y+1]=void 0},w.prototype._fulfill=function(g){var y=this._bitField;if(!((y&117506048)>>>16)){if(g===this){var C=t();return this._attachExtraTrace(C),this._reject(C)}this._setFulfilled(),this._rejectionHandler0=g,(y&65535)>0&&(y&134217728?this._settlePromises():m.settlePromises(this),this._dereferenceTrace())}},w.prototype._reject=function(g){var y=this._bitField;if(!((y&117506048)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=g,this._isFinal())return m.fatalError(g,s.isNode);(y&65535)>0?m.settlePromises(this):this._ensurePossibleRejectionHandled()}},w.prototype._fulfillPromises=function(g,y){for(var C=1;C<g;C++){var I=this._fulfillmentHandlerAt(C),j=this._promiseAt(C),q=this._receiverAt(C);this._clearCallbackDataAtIndex(C),this._settlePromise(j,I,q,y)}},w.prototype._rejectPromises=function(g,y){for(var C=1;C<g;C++){var I=this._rejectionHandlerAt(C),j=this._promiseAt(C),q=this._receiverAt(C);this._clearCallbackDataAtIndex(C),this._settlePromise(j,I,q,y)}},w.prototype._settlePromises=function(){var g=this._bitField,y=g&65535;if(y>0){if(g&16842752){var C=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,C,g),this._rejectPromises(y,C)}else{var I=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,I,g),this._fulfillPromises(y,I)}this._setLength(0)}this._clearCancellationData()},w.prototype._settledValue=function(){var g=this._bitField;if(g&33554432)return this._rejectionHandler0;if(g&16777216)return this._fulfillmentHandler0},typeof Symbol<"u"&&Symbol.toStringTag&&_.defineProperty(w.prototype,Symbol.toStringTag,{get:function(){return"Object"}});function R(g){this.promise._resolveCallback(g)}function O(g){this.promise._rejectCallback(g,!1)}w.defer=w.pending=function(){oe.deprecated("Promise.defer","new Promise");var g=new w(x);return{promise:g,resolve:R,reject:O}},s.notEnumerableProp(w,"_makeSelfResolutionError",t),gR()(w,x,Z,n,oe),_R()(w,x,Z,oe),yR()(w,W,n,oe),ER()(w),CR()(w),SR()(w,W,Z,x,m),w.Promise=w,w.version="3.7.2",bR()(w),TR()(w,n,x,Z,a,oe),AR()(w,W,n,Z,x,oe),wR()(w),IR()(w,x),OR()(w,W,Z,n),xR()(w,x,Z,n),DR()(w,W,n,Z,x,oe),$R()(w,W,oe),NR()(w,W,n),RR()(w,x,oe),PR()(w,n,Z,ee,x,oe),LR()(w),BR()(w,x),kR()(w,x),s.toFastProperties(w),s.toFastProperties(w.prototype);function P(g){var y=new w(x);y._fulfillmentHandler0=g,y._rejectionHandler0=g,y._promise0=g,y._receiver0=g}return P({a:1}),P({b:2}),P({c:3}),P(1),P(function(){}),P(void 0),P(!1),P(new w(x)),oe.setBounds(v.firstLineError,s.lastLineError),w}})(Qg);var UR=Qg.exports,Zg;typeof Promise<"u"&&(Zg=Promise);function FR(){try{Promise===xs&&(Promise=Zg)}catch{}return xs}var xs=UR();xs.noConflict=FR;var Er=xs,Se={};Object.defineProperty(Se,"__esModule",{value:!0});class Qt{static decodeLength(t){return parseInt(t,16)}static encodeLength(t){return t.toString(16).padStart(4,"0").toUpperCase()}static encodeData(t){Buffer.isBuffer(t)||(t=Buffer.from(t));const r=Qt.encodeLength(t.length);return Buffer.concat([Buffer.from(r),t])}}Qt.OKAY="OKAY";Qt.FAIL="FAIL";Qt.STAT="STAT";Qt.STA2="STA2";Qt.LIST="LIST";Qt.DENT="DENT";Qt.RECV="RECV";Qt.DATA="DATA";Qt.DONE="DONE";Qt.SEND="SEND";Qt.QUIT="QUIT";Se.default=Qt;var e_=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tr,"__esModule",{value:!0});const Ln=e_(Er),MR=e_(Se);class Ds extends Error{constructor(t){super(`Failure: '${t}'`),Object.setPrototypeOf(this,Ds.prototype),this.name="FailError",Error.captureStackTrace(this,Ds)}}class $s extends Error{constructor(t){super(`Premature end of stream, needed ${t} more bytes`),Object.setPrototypeOf(this,$s.prototype),this.name="PrematureEOFError",this.missingBytes=t,Error.captureStackTrace(this,$s)}}class Ns extends Error{constructor(t,r){super(`Unexpected '${t}', was expecting ${r}`),this.unexpected=t,this.expected=r,Object.setPrototypeOf(this,Ns.prototype),this.name="UnexpectedDataError",Error.captureStackTrace(this,Ns)}}class Rs extends Error{constructor(){super("Socket timeout reached."),Object.setPrototypeOf(this,Rs.prototype),this.name="TimeoutError",Error.captureStackTrace(this,Rs)}}Ln.default.config({cancellation:!0});class Ut{constructor(t){this.stream=t,this.ended=!1}end(){if(this.ended)return Ln.default.resolve(!0);let t,r,n,a;return new Ln.default((i,s,o)=>{t=()=>{for(;this.stream.read(););},r=function(u){return s(u)},n=()=>(this.ended=!0,i(!0)),a=()=>(this.stream.end(),s(new Ut.TimeoutError)),this.stream.on("readable",t),this.stream.on("error",r),this.stream.on("end",n),this.stream.on("timeout",a),this.stream.read(0),this.stream.end(),o(()=>{})}).finally(()=>{this.stream.removeListener("readable",t),this.stream.removeListener("error",r),this.stream.removeListener("end",n),this.stream.removeListener("timeout",a)})}raw(){return this.stream}readAll(){let t=Buffer.alloc(0),r,n,a,i;return new Ln.default((s,o,u)=>{r=()=>{let c;for(;c=this.stream.read();)t=Buffer.concat([t,c]);if(this.ended)return s(t)},n=function(c){return o(c)},a=()=>(this.ended=!0,s(t)),i=()=>(this.stream.end(),o(new Ut.TimeoutError)),this.stream.on("readable",r),this.stream.on("error",n),this.stream.on("end",a),this.stream.on("timeout",i),r(),u(()=>{})}).finally(()=>{this.stream.removeListener("readable",r),this.stream.removeListener("error",n),this.stream.removeListener("end",a),this.stream.removeListener("timeout",i)})}readAscii(t){return this.readBytes(t).then(r=>r.toString("ascii"))}readBytes(t){let r,n,a,i;return new Ln.default((s,o)=>{r=()=>{if(t){const u=this.stream.read(t);if(u&&(t-=u.length,t===0))return s(u);if(this.ended)return o(new Ut.PrematureEOFError(t))}else return s(Buffer.alloc(0))},a=()=>(this.ended=!0,o(new Ut.PrematureEOFError(t))),i=()=>(this.stream.end(),o(new Ut.TimeoutError)),n=u=>o(u),this.stream.on("readable",r),this.stream.on("error",n),this.stream.on("end",a),this.stream.on("timeout",i),r()}).finally(()=>{this.stream.removeListener("readable",r),this.stream.removeListener("error",n),this.stream.removeListener("end",a),this.stream.removeListener("timeout",i)})}readByteFlow(t,r){let n,a,i,s;return new Ln.default((o,u)=>{n=()=>{if(t){let c;for(;c=this.stream.read(t)||this.stream.read();)if(t-=c.length,r.write(c),t===0)return o();if(this.ended)return u(new Ut.PrematureEOFError(t))}else return o()},i=()=>(this.ended=!0,u(new Ut.PrematureEOFError(t))),a=function(c){return u(c)},s=()=>(this.stream.end(),u(new Ut.TimeoutError)),this.stream.on("readable",n),this.stream.on("error",a),this.stream.on("end",i),this.stream.on("timeout",s),n()}).finally(()=>{this.stream.removeListener("readable",n),this.stream.removeListener("error",a),this.stream.removeListener("end",i),this.stream.removeListener("timeout",s)})}readError(){return this.readValue().then(function(t){throw new Ut.FailError(t.toString())})}readValue(){return this.readAscii(4).then(t=>{const r=MR.default.decodeLength(t);return this.readBytes(r)})}readUntil(t){let r=Buffer.alloc(0);const n=()=>this.readBytes(1).then(function(a){return a[0]===t?r:(r=Buffer.concat([r,a]),n())});return n()}searchLine(t){return this.readLine().then(r=>{const n=t.exec(r.toString());return n||this.searchLine(t)})}readLine(){return this.readUntil(10).then(function(t){return t[t.length-1]===13?t.slice(0,-1):t})}unexpected(t,r){return Ln.default.reject(new Ut.UnexpectedDataError(t,r))}}Ut.FailError=Ds;Ut.PrematureEOFError=$s;Ut.UnexpectedDataError=Ns;Ut.TimeoutError=Rs;tr.default=Ut;var jR=k&&k.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),VR=k&&k.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),YR=k&&k.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&jR(t,e,r);return VR(t,e),t};const KR=YR(Nr);let yc;if(process.env.ADBKIT_DUMP){const e=KR.createWriteStream("adbkit.dump");yc=function(t){return e.write(t),t}}else yc=e=>e;var HR=yc,Ec={exports:{}},Zi={exports:{}},Lu,i0;function GR(){if(i0)return Lu;i0=1;var e=1e3,t=e*60,r=t*60,n=r*24,a=n*7,i=n*365.25;Lu=function(l,f){f=f||{};var d=typeof l;if(d==="string"&&l.length>0)return s(l);if(d==="number"&&isFinite(l))return f.long?u(l):o(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function s(l){if(l=String(l),!(l.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(f){var d=parseFloat(f[1]),p=(f[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return d*i;case"weeks":case"week":case"w":return d*a;case"days":case"day":case"d":return d*n;case"hours":case"hour":case"hrs":case"hr":case"h":return d*r;case"minutes":case"minute":case"mins":case"min":case"m":return d*t;case"seconds":case"second":case"secs":case"sec":case"s":return d*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function o(l){var f=Math.abs(l);return f>=n?Math.round(l/n)+"d":f>=r?Math.round(l/r)+"h":f>=t?Math.round(l/t)+"m":f>=e?Math.round(l/e)+"s":l+"ms"}function u(l){var f=Math.abs(l);return f>=n?c(l,f,n,"day"):f>=r?c(l,f,r,"hour"):f>=t?c(l,f,t,"minute"):f>=e?c(l,f,e,"second"):l+" ms"}function c(l,f,d,p){var h=f>=d*1.5;return Math.round(l/d)+" "+p+(h?"s":"")}return Lu}var Bu,s0;function t_(){if(s0)return Bu;s0=1;function e(t){n.debug=n,n.default=n,n.coerce=c,n.disable=s,n.enable=i,n.enabled=o,n.humanize=GR(),n.destroy=l,Object.keys(t).forEach(f=>{n[f]=t[f]}),n.names=[],n.skips=[],n.formatters={};function r(f){let d=0;for(let p=0;p<f.length;p++)d=(d<<5)-d+f.charCodeAt(p),d|=0;return n.colors[Math.abs(d)%n.colors.length]}n.selectColor=r;function n(f){let d,p=null,h,_;function v(...m){if(!v.enabled)return;const b=v,A=Number(new Date),D=A-(d||A);b.diff=D,b.prev=d,b.curr=A,d=A,m[0]=n.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let x=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(X,Z)=>{if(X==="%%")return"%";x++;const W=n.formatters[Z];if(typeof W=="function"){const J=m[x];X=W.call(b,J),m.splice(x,1),x--}return X}),n.formatArgs.call(b,m),(b.log||n.log).apply(b,m)}return v.namespace=f,v.useColors=n.useColors(),v.color=n.selectColor(f),v.extend=a,v.destroy=n.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(h!==n.namespaces&&(h=n.namespaces,_=n.enabled(f)),_),set:m=>{p=m}}),typeof n.init=="function"&&n.init(v),v}function a(f,d){const p=n(this.namespace+(typeof d>"u"?":":d)+f);return p.log=this.log,p}function i(f){n.save(f),n.namespaces=f,n.names=[],n.skips=[];let d;const p=(typeof f=="string"?f:"").split(/[\s,]+/),h=p.length;for(d=0;d<h;d++)p[d]&&(f=p[d].replace(/\*/g,".*?"),f[0]==="-"?n.skips.push(new RegExp("^"+f.slice(1)+"$")):n.names.push(new RegExp("^"+f+"$")))}function s(){const f=[...n.names.map(u),...n.skips.map(u).map(d=>"-"+d)].join(",");return n.enable(""),f}function o(f){if(f[f.length-1]==="*")return!0;let d,p;for(d=0,p=n.skips.length;d<p;d++)if(n.skips[d].test(f))return!1;for(d=0,p=n.names.length;d<p;d++)if(n.names[d].test(f))return!0;return!1}function u(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function c(f){return f instanceof Error?f.stack||f.message:f}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return Bu=e,Bu}var o0;function qR(){return o0||(o0=1,function(e,t){t.formatArgs=n,t.save=a,t.load=i,t.useColors=r,t.storage=s(),t.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;u.splice(1,0,c,"color: inherit");let l=0,f=0;u[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(l++,d==="%c"&&(f=l))}),u.splice(f,0,c)}t.log=console.debug||console.log||(()=>{});function a(u){try{u?t.storage.setItem("debug",u):t.storage.removeItem("debug")}catch{}}function i(){let u;try{u=t.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=process.env.DEBUG),u}function s(){try{return localStorage}catch{}}e.exports=t_()(t);const{formatters:o}=e.exports;o.j=function(u){try{return JSON.stringify(u)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}}(Zi,Zi.exports)),Zi.exports}var es={exports:{}},ku,u0;function zR(){return u0||(u0=1,ku=(e,t=process.argv)=>{const r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),a=t.indexOf("--");return n!==-1&&(a===-1||n<a)}),ku}var Uu,c0;function WR(){if(c0)return Uu;c0=1;const e=wi,t=Wm,r=zR(),{env:n}=process;let a;r("no-color")||r("no-colors")||r("color=false")||r("color=never")?a=0:(r("color")||r("colors")||r("color=true")||r("color=always"))&&(a=1),"FORCE_COLOR"in n&&(n.FORCE_COLOR==="true"?a=1:n.FORCE_COLOR==="false"?a=0:a=n.FORCE_COLOR.length===0?1:Math.min(parseInt(n.FORCE_COLOR,10),3));function i(u){return u===0?!1:{level:u,hasBasic:!0,has256:u>=2,has16m:u>=3}}function s(u,c){if(a===0)return 0;if(r("color=16m")||r("color=full")||r("color=truecolor"))return 3;if(r("color=256"))return 2;if(u&&!c&&a===void 0)return 0;const l=a||0;if(n.TERM==="dumb")return l;if(process.platform==="win32"){const f=e.release().split(".");return Number(f[0])>=10&&Number(f[2])>=10586?Number(f[2])>=14931?3:2:1}if("CI"in n)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(f=>f in n)||n.CI_NAME==="codeship"?1:l;if("TEAMCITY_VERSION"in n)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(n.TEAMCITY_VERSION)?1:0;if(n.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in n){const f=parseInt((n.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(n.TERM_PROGRAM){case"iTerm.app":return f>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(n.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(n.TERM)||"COLORTERM"in n?1:l}function o(u){const c=s(u,u&&u.isTTY);return i(c)}return Uu={supportsColor:o,stdout:i(s(!0,t.isatty(1))),stderr:i(s(!0,t.isatty(2)))},Uu}var l0;function QR(){return l0||(l0=1,function(e,t){const r=Wm,n=zm;t.init=l,t.log=o,t.formatArgs=i,t.save=u,t.load=c,t.useColors=a,t.destroy=n.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const d=WR();d&&(d.stderr||d).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}t.inspectOpts=Object.keys(process.env).filter(d=>/^debug_/i.test(d)).reduce((d,p)=>{const h=p.substring(6).toLowerCase().replace(/_([a-z])/g,(v,m)=>m.toUpperCase());let _=process.env[p];return/^(yes|on|true|enabled)$/i.test(_)?_=!0:/^(no|off|false|disabled)$/i.test(_)?_=!1:_==="null"?_=null:_=Number(_),d[h]=_,d},{});function a(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:r.isatty(process.stderr.fd)}function i(d){const{namespace:p,useColors:h}=this;if(h){const _=this.color,v="\x1B[3"+(_<8?_:"8;5;"+_),m=`  ${v};1m${p} \x1B[0m`;d[0]=m+d[0].split(`
`).join(`
`+m),d.push(v+"m+"+e.exports.humanize(this.diff)+"\x1B[0m")}else d[0]=s()+p+" "+d[0]}function s(){return t.inspectOpts.hideDate?"":new Date().toISOString()+" "}function o(...d){return process.stderr.write(n.formatWithOptions(t.inspectOpts,...d)+`
`)}function u(d){d?process.env.DEBUG=d:delete process.env.DEBUG}function c(){return process.env.DEBUG}function l(d){d.inspectOpts={};const p=Object.keys(t.inspectOpts);for(let h=0;h<p.length;h++)d.inspectOpts[p[h]]=t.inspectOpts[p[h]]}e.exports=t_()(t);const{formatters:f}=e.exports;f.o=function(d){return this.inspectOpts.colors=this.useColors,n.inspect(d,this.inspectOpts).split(`
`).map(p=>p.trim()).join(" ")},f.O=function(d){return this.inspectOpts.colors=this.useColors,n.inspect(d,this.inspectOpts)}}(es,es.exports)),es.exports}typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Ec.exports=qR():Ec.exports=QR();var ra=Ec.exports,XR=k&&k.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),JR=k&&k.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ZR=k&&k.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&XR(t,e,r);return JR(t,e),t},mo=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(af,"__esModule",{value:!0});const eP=ZR(Vc),tP=Pt,rP=jc,nP=mo(tr),aP=mo(HR),iP=mo(ra),f0=mo(Er),Fu=(0,iP.default)("adb:connection");class sP extends tP.EventEmitter{constructor(t){super(),this.options=t||{port:0},this.triedStarting=!1}connect(){return this.socket=eP.connect(this.options),this.socket.setNoDelay(!0),this.parser=new nP.default(this.socket),this.socket.on("connect",()=>this.emit("connect")),this.socket.on("end",()=>this.emit("end")),this.socket.on("drain",()=>this.emit("drain")),this.socket.on("timeout",()=>this.emit("timeout")),this.socket.on("close",t=>this.emit("close",t)),new f0.default((t,r)=>{this.socket.once("connect",t),this.socket.once("error",r)}).catch(t=>{if(t.code==="ECONNREFUSED"&&!this.triedStarting)return Fu("Connection was refused, let's try starting the server once"),this.triedStarting=!0,this.startServer().then(()=>this.connect());throw this.end(),t}).then(()=>(this.socket&&this.socket.on("error",t=>{this.socket&&this.socket.listenerCount("error")===1&&this.emit("error",t)}),this))}getSocket(){return this.socket}end(){return this.socket&&this.socket.end(),this}write(t,r){return this.socket.write((0,aP.default)(t),r),this}startServer(){let t=0;"port"in this.options&&(t=this.options.port);const r=t?["-P",String(t),"start-server"]:["start-server"];return Fu(`Starting ADB server via '${this.options.bin} ${r.join(" ")}'`),this._exec(r,{})}_exec(t,r){return Fu(`CLI: ${this.options.bin} ${t.join(" ")}`),f0.default.promisify(rP.execFile)(this.options.bin,t,r)}}af.default=sP;var sf={},of={},De={},r_=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(De,"__esModule",{value:!0});const d0=r_(Se),oP=r_(ra),h0=(0,oP.default)("adb:command"),uP=/'/g,cP=/([$`\\!"])/g;class lP{constructor(t){this.connection=t,this.parser=this.connection.parser,this.protocol=d0.default}_send(t){const r=d0.default.encodeData(t);return h0.enabled&&h0(`Send '${r}'`),this.connection.write(r),this}_escape(t){switch(typeof t){case"number":return t;default:return"'"+t.toString().replace(uP,`'"'"'`)+"'"}}_escapeCompat(t){switch(typeof t){case"number":return t;default:return'"'+t.toString().replace(cP,"\\$1")+'"'}}}De.default=lP;var n_=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(of,"__esModule",{value:!0});const fP=n_(De),p0=n_(Se),dP=/connected to|already connected/;class hP extends fP.default{execute(t,r){return this._send(`host:connect:${t}:${r}`),this.parser.readAscii(4).then(n=>{switch(n){case p0.default.OKAY:return this.parser.readValue().then(function(a){if(dP.test(a.toString()))return`${t}:${r}`;throw new Error(a.toString())});case p0.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(n,"OKAY or FAIL")}})}}of.default=hP;var vo={},a_=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vo,"__esModule",{value:!0});const pP=a_(De),m0=a_(Se);class mP extends pP.default{execute(){return this._send("host:devices"),this.parser.readAscii(4).then(t=>{switch(t){case m0.default.OKAY:return this._readDevices();case m0.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(t,"OKAY or FAIL")}})}_readDevices(){return this.parser.readValue().then(this._parseDevices)}_parseDevices(t){return t.toString("ascii").split(`
`).filter(r=>r).map(r=>{const[n,a]=r.split("	");return{id:n,type:a}})}}vo.default=mP;var uf={},i_=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(uf,"__esModule",{value:!0});const vP=i_(De),v0=i_(Se);class gP extends vP.default{execute(){return this._send("host:devices-l"),this.parser.readAscii(4).then(t=>{switch(t){case v0.default.OKAY:return this._readDevices();case v0.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(t,"OKAY or FAIL")}})}_readDevices(){return this.parser.readValue().then(this._parseDevices)}_parseDevices(t){return t.toString("ascii").split(`
`).filter(r=>r).map(r=>{const[n,a,i,s,o,u,c]=r.split(/\s+/);return{id:n,type:a,path:i,product:s,model:o,device:u,transportId:c}})}}uf.default=gP;var cf={},s_=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cf,"__esModule",{value:!0});const _P=s_(De),g0=s_(Se),yP=/^$/,EP=/^disconnected.*$/;class CP extends _P.default{execute(t,r){return this._send(`host:disconnect:${t}:${r}`),this.parser.readAscii(4).then(n=>{switch(n){case g0.default.OKAY:return this.parser.readValue().then(function(a){if(yP.test(a.toString())||EP.test(a.toString()))return`${t}:${r}`;throw new Error(a.toString())});case g0.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(n,"OKAY or FAIL")}})}}cf.default=CP;var lf={},o_=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lf,"__esModule",{value:!0});const SP=o_(De),_0=o_(Se);class bP extends SP.default{execute(){return this._send("host:kill"),this.parser.readAscii(4).then(t=>{switch(t){case _0.default.OKAY:return!0;case _0.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(t,"OKAY or FAIL")}})}}lf.default=bP;var ff={},df={},u_=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(df,"__esModule",{value:!0});const TP=u_(Er),AP=u_(tr),wP=Pt;class IP extends wP.EventEmitter{constructor(t){super(),this.command=t,this.deviceList=[],this.deviceMap={},this.reader=this.read().catch(TP.default.CancellationError,()=>!0).catch(AP.default.PrematureEOFError,()=>{throw new Error("Connection closed")}).catch(r=>this.emit("error",r)).finally(()=>{this.command.parser.end().then(()=>this.emit("end"))})}read(){return this.command._readDevices().then(t=>(this.update(t),this.read()))}update(t){const r={removed:[],changed:[],added:[]},n={};for(let i=0,s=t.length;i<s;i++){const o=t[i],u=this.deviceMap[o.id];u?u.type!==o.type&&(r.changed.push(o),this.emit("change",o,u)):(r.added.push(o),this.emit("add",o)),n[o.id]=o}const a=this.deviceList;for(let i=0,s=a.length;i<s;i++){const o=a[i];n[o.id]||(r.removed.push(o),this.emit("remove",o))}return this.emit("changeSet",r),this.deviceList=t,this.deviceMap=n,this}end(){return this.reader.cancel(),this}}df.default=IP;var hf=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ff,"__esModule",{value:!0});const y0=hf(Se),OP=hf(df),xP=hf(vo);class DP extends xP.default{execute(){return this._send("host:track-devices"),this.parser.readAscii(4).then(t=>{switch(t){case y0.default.OKAY:return new OP.default(this);case y0.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(t,"OKAY or FAIL")}})}}ff.default=DP;var pf={},c_=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pf,"__esModule",{value:!0});const $P=c_(De),E0=c_(Se);class NP extends $P.default{execute(t){return this._send(`host:transport:${t}`),this.parser.readAscii(4).then(r=>{switch(r){case E0.default.OKAY:return!0;case E0.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(r,"OKAY or FAIL")}})}}pf.default=NP;var mf={},l_=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mf,"__esModule",{value:!0});const RP=l_(De),C0=l_(Se);class PP extends RP.default{execute(){return this._send("host:version"),this.parser.readAscii(4).then(t=>{switch(t){case C0.default.OKAY:return this.parser.readValue().then(r=>this._parseVersion(r.toString()));case C0.default.FAIL:return this.parser.readError();default:return this._parseVersion(t)}})}_parseVersion(t){return parseInt(t,16)}}mf.default=PP;(function(e){var t=k&&k.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.HostVersionCommand=e.HostTransportCommand=e.HostTrackDevicesCommand=e.HostKillCommand=e.HostDisconnectCommand=e.HostDevicesWithPathsCommand=e.HostDevicesCommand=e.HostConnectCommand=void 0;var r=of;Object.defineProperty(e,"HostConnectCommand",{enumerable:!0,get:function(){return t(r).default}});var n=vo;Object.defineProperty(e,"HostDevicesCommand",{enumerable:!0,get:function(){return t(n).default}});var a=uf;Object.defineProperty(e,"HostDevicesWithPathsCommand",{enumerable:!0,get:function(){return t(a).default}});var i=cf;Object.defineProperty(e,"HostDisconnectCommand",{enumerable:!0,get:function(){return t(i).default}});var s=lf;Object.defineProperty(e,"HostKillCommand",{enumerable:!0,get:function(){return t(s).default}});var o=ff;Object.defineProperty(e,"HostTrackDevicesCommand",{enumerable:!0,get:function(){return t(o).default}});var u=pf;Object.defineProperty(e,"HostTransportCommand",{enumerable:!0,get:function(){return t(u).default}});var c=mf;Object.defineProperty(e,"HostVersionCommand",{enumerable:!0,get:function(){return t(c).default}})})(sf);var vf={},gf={},_f={},Pi={};Object.defineProperty(Pi,"__esModule",{value:!0});class pt{static checksum(t){let r=0;if(t)for(let n=0,a=t.length;n<a;n++){const i=t[n];r+=i}return r}static magic(t){return(t^4294967295)>>>0}static assemble(t,r,n,a){if(a){const i=Buffer.alloc(24+a.length);return i.writeUInt32LE(t,0),i.writeUInt32LE(r,4),i.writeUInt32LE(n,8),i.writeUInt32LE(a.length,12),i.writeUInt32LE(pt.checksum(a),16),i.writeUInt32LE(pt.magic(t),20),a.copy(i,24),i}else{const i=Buffer.alloc(24);return i.writeUInt32LE(t,0),i.writeUInt32LE(r,4),i.writeUInt32LE(n,8),i.writeUInt32LE(0,12),i.writeUInt32LE(0,16),i.writeUInt32LE(pt.magic(t),20),i}}static swap32(t){const r=Buffer.alloc(4);return r.writeUInt32LE(t,0),r.readUInt32BE(0)}constructor(t,r,n,a,i,s,o){this.command=t,this.arg0=r,this.arg1=n,this.length=a,this.check=i,this.magic=s,this.data=o}verifyChecksum(){return this.check===0?!0:this.check===pt.checksum(this.data)}verifyMagic(){return this.magic===pt.magic(this.command)}getType(){switch(this.command){case pt.A_SYNC:return"SYNC";case pt.A_CNXN:return"CNXN";case pt.A_OPEN:return"OPEN";case pt.A_OKAY:return"OKAY";case pt.A_CLSE:return"CLSE";case pt.A_WRTE:return"WRTE";case pt.A_AUTH:return"AUTH";default:throw new Error("Unknown command {@command}")}}toString(){return`${this.getType()} arg0=${this.arg0} arg1=${this.arg1} length=${this.length}`}}pt.A_SYNC=1129208147;pt.A_CNXN=1314410051;pt.A_OPEN=1313165391;pt.A_OKAY=1497451343;pt.A_CLSE=1163086915;pt.A_WRTE=1163154007;pt.A_AUTH=1213486401;Pi.default=pt;var LP=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_f,"__esModule",{value:!0});const BP=Pt,kP=LP(Pi);class yf extends Error{constructor(t){super(),this.packet=t,Object.setPrototypeOf(this,yf.prototype),this.name="ChecksumError",this.message="Checksum mismatch",Error.captureStackTrace(this,Cn.ChecksumError)}}class Ef extends Error{constructor(t){super(),this.packet=t,Object.setPrototypeOf(this,Ef.prototype),this.name="MagicError",this.message="Magic value mismatch",Error.captureStackTrace(this,Cn.MagicError)}}class Cn extends BP.EventEmitter{constructor(t){super(),this.stream=t,this.inBody=!1,this.stream.on("readable",this._tryRead.bind(this)),this.stream.on("error",r=>this.emit("error",r)),this.stream.on("end",()=>this.emit("end")),setImmediate(this._tryRead.bind(this))}_tryRead(){for(;this._appendChunk();)for(;this.buffer;)if(this.inBody){if(!(this.buffer.length>=this.packet.length))break;if(this.packet.data=this._consume(this.packet.length),!this.packet.verifyChecksum()){this.emit("error",new Cn.ChecksumError(this.packet));return}this.emit("packet",this.packet),this.inBody=!1}else{if(!(this.buffer.length>=24))break;const t=this._consume(24);if(this.packet=new kP.default(t.readUInt32LE(0),t.readUInt32LE(4),t.readUInt32LE(8),t.readUInt32LE(12),t.readUInt32LE(16),t.readUInt32LE(20),Buffer.alloc(0)),!this.packet.verifyMagic()){this.emit("error",new Cn.MagicError(this.packet));return}this.packet.length===0?this.emit("packet",this.packet):this.inBody=!0}}_appendChunk(){const t=this.stream.read();return t?this.buffer?this.buffer=Buffer.concat([this.buffer,t],this.buffer.length+t.length):this.buffer=t:null}_consume(t){const r=this.buffer.slice(0,t);return this.buffer=t===this.buffer.length?null:this.buffer.slice(t),r}}Cn.ChecksumError=yf;Cn.MagicError=Ef;_f.default=Cn;var Cf={};Object.defineProperty(Cf,"__esModule",{value:!0});class UP{constructor(t,r=1){this.max=t,this.min=r,this.now=this.min}next(){return this.now<this.max||(this.now=this.min),++this.now}}Cf.default=UP;var go={},Ne={options:{usePureJavaScript:!1}},Sf={},FP=Sf,S0={};Sf.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(e instanceof Uint8Array))n=MP(e,t);else{var a=0,i=t.length,s=t.charAt(0),o=[0];for(a=0;a<e.length;++a){for(var u=0,c=e[a];u<o.length;++u)c+=o[u]<<8,o[u]=c%i,c=c/i|0;for(;c>0;)o.push(c%i),c=c/i|0}for(a=0;e[a]===0&&a<e.length-1;++a)n+=s;for(a=o.length-1;a>=0;--a)n+=t[o[a]]}if(r){var l=new RegExp(".{1,"+r+"}","g");n=n.match(l).join(`\r
`)}return n};Sf.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=S0[t];if(!r){r=S0[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");for(var a=t.length,i=t.charAt(0),s=[0],n=0;n<e.length;n++){var o=r[e.charCodeAt(n)];if(o===void 0)return;for(var u=0,c=o;u<s.length;++u)c+=s[u]*a,s[u]=c&255,c>>=8;for(;c>0;)s.push(c&255),c>>=8}for(var l=0;e[l]===i&&l<e.length-1;++l)s.push(0);return typeof Buffer<"u"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function MP(e,t){var r=0,n=t.length,a=t.charAt(0),i=[0];for(r=0;r<e.length();++r){for(var s=0,o=e.at(r);s<i.length;++s)o+=i[s]<<8,i[s]=o%n,o=o/n|0;for(;o>0;)i.push(o%n),o=o/n|0}var u="";for(r=0;e.at(r)===0&&r<e.length()-1;++r)u+=a;for(r=i.length-1;r>=0;--r)u+=t[i[r]];return u}var b0=Ne,T0=FP,F=b0.util=b0.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){F.nextTick=process.nextTick,typeof setImmediate=="function"?F.setImmediate=setImmediate:F.setImmediate=F.nextTick;return}if(typeof setImmediate=="function"){F.setImmediate=function(){return setImmediate.apply(void 0,arguments)},F.nextTick=function(s){return setImmediate(s)};return}if(F.setImmediate=function(s){setTimeout(s,0)},typeof window<"u"&&typeof window.postMessage=="function"){let s=function(o){if(o.source===window&&o.data===e){o.stopPropagation();var u=t.slice();t.length=0,u.forEach(function(c){c()})}};var e="forge.setImmediate",t=[];F.setImmediate=function(o){t.push(o),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",s,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,a=document.createElement("div"),t=[];new MutationObserver(function(){var o=t.slice();t.length=0,o.forEach(function(u){u()})}).observe(a,{attributes:!0});var i=F.setImmediate;F.setImmediate=function(o){Date.now()-r>15?(r=Date.now(),i(o)):(t.push(o),t.length===1&&a.setAttribute("a",n=!n))}}F.nextTick=F.setImmediate})();F.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;F.globalScope=function(){return F.isNodejs?k:typeof self>"u"?window:self}();F.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};F.isArrayBuffer=function(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer};F.isArrayBufferView=function(e){return e&&F.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function Li(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}F.ByteBuffer=bf;function bf(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(F.isArrayBuffer(e)||F.isArrayBufferView(e))if(typeof Buffer<"u"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch{for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof bf||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}F.ByteStringBuffer=bf;var jP=4096;F.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>jP&&(this.data.substr(0,1),this._constructedStringLength=0)};F.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};F.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};F.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};F.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this};F.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};F.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(F.encodeUtf8(e))};F.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};F.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};F.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};F.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};F.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};F.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};F.ByteStringBuffer.prototype.putInt=function(e,t){Li(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)};F.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};F.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};F.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};F.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};F.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};F.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};F.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};F.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};F.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};F.ByteStringBuffer.prototype.getInt=function(e){Li(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};F.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};F.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};F.ByteStringBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};F.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};F.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};F.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};F.ByteStringBuffer.prototype.copy=function(){var e=F.createBuffer(this.data);return e.read=this.read,e};F.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};F.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};F.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};F.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};F.ByteStringBuffer.prototype.toString=function(){return F.decodeUtf8(this.bytes())};function VP(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=F.isArrayBuffer(e),n=F.isArrayBufferView(e);if(r||n){r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}F.DataBuffer=VP;F.DataBuffer.prototype.length=function(){return this.write-this.read};F.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};F.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this};F.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};F.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this};F.DataBuffer.prototype.putBytes=function(e,t){if(F.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var a=new Uint8Array(this.data.buffer,this.write);return a.set(r),this.write+=n,this}if(F.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var a=new Uint8Array(this.data.buffer);return a.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof F.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&F.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var a=new Uint8Array(e.data.byteLength,this.write);return a.set(r),this.write+=r.byteLength,this}if(e instanceof F.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var i;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=F.binary.hex.decode(e,i,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),i=new Uint8Array(this.data.buffer,this.write),this.write+=F.binary.base64.decode(e,i,this.write),this;if(t==="utf8"&&(e=F.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=F.binary.raw.decode(i),this;if(t==="utf16")return this.accommodate(e.length*2),i=new Uint16Array(this.data.buffer,this.write),this.write+=F.text.utf16.encode(i),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};F.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};F.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};F.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};F.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};F.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};F.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};F.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};F.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};F.DataBuffer.prototype.putInt=function(e,t){Li(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};F.DataBuffer.prototype.putSignedInt=function(e,t){return Li(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};F.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};F.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};F.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};F.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};F.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};F.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};F.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};F.DataBuffer.prototype.getInt=function(e){Li(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};F.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};F.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};F.DataBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};F.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};F.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};F.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};F.DataBuffer.prototype.copy=function(){return new F.DataBuffer(this)};F.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};F.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};F.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};F.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e};F.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return F.binary.raw.encode(t);if(e==="hex")return F.binary.hex.encode(t);if(e==="base64")return F.binary.base64.encode(t);if(e==="utf8")return F.text.utf8.decode(t);if(e==="utf16")return F.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};F.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=F.encodeUtf8(e)),new F.ByteBuffer(e)};F.fillString=function(e,t){for(var r="";t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return r};F.xorBytes=function(e,t,r){for(var n="",a="",i="",s=0,o=0;r>0;--r,++s)a=e.charCodeAt(s)^t.charCodeAt(s),o>=10&&(n+=i,i="",o=0),i+=String.fromCharCode(a),++o;return n+=i,n};F.hexToBytes=function(e){var t="",r=0;for(e.length&!0&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t};F.bytesToHex=function(e){return F.createBuffer(e).toHex()};F.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var dn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",hn=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],f_="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";F.encode64=function(e,t){for(var r="",n="",a,i,s,o=0;o<e.length;)a=e.charCodeAt(o++),i=e.charCodeAt(o++),s=e.charCodeAt(o++),r+=dn.charAt(a>>2),r+=dn.charAt((a&3)<<4|i>>4),isNaN(i)?r+="==":(r+=dn.charAt((i&15)<<2|s>>6),r+=isNaN(s)?"=":dn.charAt(s&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};F.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",r,n,a,i,s=0;s<e.length;)r=hn[e.charCodeAt(s++)-43],n=hn[e.charCodeAt(s++)-43],a=hn[e.charCodeAt(s++)-43],i=hn[e.charCodeAt(s++)-43],t+=String.fromCharCode(r<<2|n>>4),a!==64&&(t+=String.fromCharCode((n&15)<<4|a>>2),i!==64&&(t+=String.fromCharCode((a&3)<<6|i)));return t};F.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};F.decodeUtf8=function(e){return decodeURIComponent(escape(e))};F.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:T0.encode,decode:T0.decode}};F.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};F.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var a=r,i=0;i<e.length;++i)n[a++]=e.charCodeAt(i);return t?a-r:n};F.binary.hex.encode=F.bytesToHex;F.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var a=0,i=r;for(e.length&1&&(a=1,n[i++]=parseInt(e[0],16));a<e.length;a+=2)n[i++]=parseInt(e.substr(a,2),16);return t?i-r:n};F.binary.base64.encode=function(e,t){for(var r="",n="",a,i,s,o=0;o<e.byteLength;)a=e[o++],i=e[o++],s=e[o++],r+=dn.charAt(a>>2),r+=dn.charAt((a&3)<<4|i>>4),isNaN(i)?r+="==":(r+=dn.charAt((i&15)<<2|s>>6),r+=isNaN(s)?"=":dn.charAt(s&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};F.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var a,i,s,o,u=0,c=r;u<e.length;)a=hn[e.charCodeAt(u++)-43],i=hn[e.charCodeAt(u++)-43],s=hn[e.charCodeAt(u++)-43],o=hn[e.charCodeAt(u++)-43],n[c++]=a<<2|i>>4,s!==64&&(n[c++]=(i&15)<<4|s>>2,o!==64&&(n[c++]=(s&3)<<6|o));return t?c-r:n.subarray(0,c)};F.binary.base58.encode=function(e,t){return F.binary.baseN.encode(e,f_,t)};F.binary.base58.decode=function(e,t){return F.binary.baseN.decode(e,f_,t)};F.text={utf8:{},utf16:{}};F.text.utf8.encode=function(e,t,r){e=F.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var a=r,i=0;i<e.length;++i)n[a++]=e.charCodeAt(i);return t?a-r:n};F.text.utf8.decode=function(e){return F.decodeUtf8(String.fromCharCode.apply(null,e))};F.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length*2));var a=new Uint16Array(n.buffer);r=r||0;for(var i=r,s=r,o=0;o<e.length;++o)a[s++]=e.charCodeAt(o),i+=2;return t?i-r:n};F.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};F.deflate=function(e,t,r){if(t=F.decode64(e.deflate(F.encode64(t)).rval),r){var n=2,a=t.charCodeAt(1);a&32&&(n=6),t=t.substring(n,t.length-4)}return t};F.inflate=function(e,t,r){var n=e.inflate(F.encode64(t)).rval;return n===null?null:F.decode64(n)};var Tf=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=F.encode64(JSON.stringify(r)),n=e.setItem(t,r)),typeof n<"u"&&n.rval!==!0){var a=new Error(n.error.message);throw a.id=n.error.id,a.name=n.error.name,a}},Af=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(F.decode64(r))),r},YP=function(e,t,r,n){var a=Af(e,t);a===null&&(a={}),a[r]=n,Tf(e,t,a)},KP=function(e,t,r){var n=Af(e,t);return n!==null&&(n=r in n?n[r]:null),n},HP=function(e,t,r){var n=Af(e,t);if(n!==null&&r in n){delete n[r];var a=!0;for(var i in n){a=!1;break}a&&(n=null),Tf(e,t,n)}},GP=function(e,t){Tf(e,t,null)},_o=function(e,t,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var a,i=!1,s=null;for(var o in r){a=r[o];try{if(a==="flash"||a==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");n=e.apply(this,t),i=a==="flash"}(a==="web"||a==="both")&&(t[0]=localStorage,n=e.apply(this,t),i=!0)}catch(u){s=u}if(i)break}if(!i)throw s;return n};F.setItem=function(e,t,r,n,a){_o(YP,arguments,a)};F.getItem=function(e,t,r,n){return _o(KP,arguments,n)};F.removeItem=function(e,t,r,n){_o(HP,arguments,n)};F.clearItems=function(e,t,r){_o(GP,arguments,r)};F.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};F.format=function(e){for(var t=/%./g,r,n,a=0,i=[],s=0;r=t.exec(e);){n=e.substring(s,t.lastIndex-2),n.length>0&&i.push(n),s=t.lastIndex;var o=r[0][1];switch(o){case"s":case"o":a<arguments.length?i.push(arguments[a+++1]):i.push("<?>");break;case"%":i.push("%");break;default:i.push("<%"+o+"?>")}}return i.push(e.substring(s)),i.join("")};F.formatNumber=function(e,t,r,n){var a=e,i=isNaN(t=Math.abs(t))?2:t,s=r===void 0?",":r,o=n===void 0?".":n,u=a<0?"-":"",c=parseInt(a=Math.abs(+a||0).toFixed(i),10)+"",l=c.length>3?c.length%3:0;return u+(l?c.substr(0,l)+o:"")+c.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+o)+(i?s+Math.abs(a-c).toFixed(i).slice(2):"")};F.formatSize=function(e){return e>=1073741824?e=F.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=F.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=F.formatNumber(e/1024,0)+" KiB":e=F.formatNumber(e,0)+" bytes",e};F.bytesFromIP=function(e){return e.indexOf(".")!==-1?F.bytesFromIPv4(e):e.indexOf(":")!==-1?F.bytesFromIPv6(e):null};F.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=F.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()};F.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(s){return s.length===0&&++t,!0});for(var r=(8-e.length+t)*2,n=F.createBuffer(),a=0;a<8;++a){if(!e[a]||e[a].length===0){n.fillWithByte(0,r),r=0;continue}var i=F.hexToBytes(e[a]);i.length<2&&n.putByte(0),n.putBytes(i)}return n.getBytes()};F.bytesToIP=function(e){return e.length===4?F.bytesToIPv4(e):e.length===16?F.bytesToIPv6(e):null};F.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")};F.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,a=0;a<e.length;a+=2){for(var i=F.bytesToHex(e[a]+e[a+1]);i[0]==="0"&&i!=="0";)i=i.substr(1);if(i==="0"){var s=r[r.length-1],o=t.length;!s||o!==s.end+1?r.push({start:o,end:o}):(s.end=o,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}t.push(i)}if(r.length>0){var u=r[n];u.end-u.start>0&&(t.splice(u.start,u.end-u.start+1,""),u.start===0&&t.unshift(""),u.end===7&&t.push(""))}return t.join(":")};F.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in F&&!e.update)return t(null,F.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return F.cores=navigator.hardwareConcurrency,t(null,F.cores);if(typeof Worker>"u")return F.cores=1,t(null,F.cores);if(typeof Blob>"u")return F.cores=2,t(null,F.cores);var r=URL.createObjectURL(new Blob(["(",(function(){self.addEventListener("message",function(s){var o=Date.now(),u=o+4;self.postMessage({st:o,et:u})})}).toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,o,u){if(o===0){var c=Math.floor(s.reduce(function(l,f){return l+f},0)/s.length);return F.cores=Math.max(1,c),URL.revokeObjectURL(r),t(null,F.cores)}a(u,function(l,f){s.push(i(u,f)),n(s,o-1,u)})}function a(s,o){for(var u=[],c=[],l=0;l<s;++l){var f=new Worker(r);f.addEventListener("message",function(d){if(c.push(d.data),c.length===s){for(var p=0;p<s;++p)u[p].terminate();o(null,c)}}),u.push(f)}for(var l=0;l<s;++l)u[l].postMessage(l)}function i(s,o){for(var u=[],c=0;c<s;++c)for(var l=o[c],f=u[c]=[],d=0;d<s;++d)if(c!==d){var p=o[d];(l.st>p.st&&l.st<p.et||p.st>l.st&&p.st<l.et)&&f.push(d)}return u.reduce(function(h,_){return Math.max(h,_.length)},0)}};var wt=Ne;wt.cipher=wt.cipher||{};wt.cipher.algorithms=wt.cipher.algorithms||{};wt.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=wt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new wt.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})};wt.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=wt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new wt.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})};wt.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),wt.cipher.algorithms[e]=t};wt.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in wt.cipher.algorithms?wt.cipher.algorithms[e]:null};var wf=wt.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};wf.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=wt.util.createBuffer(),this.output=e.output||wt.util.createBuffer(),this.mode.start(t)};wf.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};wf.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))};var At=Ne;At.cipher=At.cipher||{};var Ue=At.cipher.modes=At.cipher.modes||{};Ue.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Ue.ecb.prototype.start=function(e){};Ue.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};Ue.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};Ue.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};Ue.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};Ue.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Ue.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=yo(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Ue.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock};Ue.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};Ue.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};Ue.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};Ue.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=At.util.createBuffer(),this._partialBytes=0};Ue.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=yo(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Ue.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32()^this._outBlock[a],t.putInt32(this._inBlock[a]);return}var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var a=0;a<this._ints;++a)this._partialBlock[a]=e.getInt32()^this._outBlock[a],this._partialOutput.putInt32(this._partialBlock[a]);if(i>0)e.read-=this.blockSize;else for(var a=0;a<this._ints;++a)this._inBlock[a]=this._partialBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Ue.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var a=0;a<this._ints;++a)this._inBlock[a]=e.getInt32(),t.putInt32(this._inBlock[a]^this._outBlock[a]);return}var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var a=0;a<this._ints;++a)this._partialBlock[a]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[a]^this._outBlock[a]);if(i>0)e.read-=this.blockSize;else for(var a=0;a<this._ints;++a)this._inBlock[a]=this._partialBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Ue.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=At.util.createBuffer(),this._partialBytes=0};Ue.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=yo(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Ue.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var a=0;a<this._ints;++a)t.putInt32(e.getInt32()^this._outBlock[a]),this._inBlock[a]=this._outBlock[a];return}var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(i>0)e.read-=this.blockSize;else for(var a=0;a<this._ints;++a)this._inBlock[a]=this._outBlock[a];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Ue.ofb.prototype.decrypt=Ue.ofb.prototype.encrypt;Ue.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=At.util.createBuffer(),this._partialBytes=0};Ue.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=yo(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Ue.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var a=0;a<this._ints;++a)t.putInt32(e.getInt32()^this._outBlock[a]);else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(i>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}Eo(this._inBlock)};Ue.ctr.prototype.decrypt=Ue.ctr.prototype.encrypt;Ue.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=At.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Ue.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=At.util.createBuffer(e.iv);this._cipherLength=0;var r;if("additionalData"in e?r=At.util.createBuffer(e.additionalData):r=At.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=At.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=t.length();if(n===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Cc(n*8)))}this._inBlock=this._j0.slice(0),Eo(this._inBlock),this._partialBytes=0,r=At.util.createBuffer(r),this._aDataLength=Cc(r.length()*8);var a=r.length()%this.blockSize;for(a&&r.fillWithByte(0,this.blockSize-a),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Ue.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]^=e.getInt32());this._cipherLength+=this.blockSize}else{var i=(this.blockSize-n)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(var a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(i<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var a=0;a<this._ints;++a)this._outBlock[a]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Eo(this._inBlock)};Ue.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),Eo(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]^this._hashBlock[a]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};Ue.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=At.util.createBuffer();var n=this._aDataLength.concat(Cc(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var a=[];this.cipher.encrypt(this._j0,a);for(var i=0;i<this._ints;++i)this.tag.putInt32(this._s[i]^a[i]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Ue.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),a=0;a<128;++a){var i=e[a/32|0]&1<<31-a%32;i&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};Ue.gcm.prototype.pow=function(e,t){for(var r=e[3]&1,n=3;n>0;--n)t[n]=e[n]>>>1|(e[n-1]&1)<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)};Ue.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,a=e[n]>>>(7-r%8)*4&15,i=this._m[r][a];t[0]^=i[0],t[1]^=i[1],t[2]^=i[2],t[3]^=i[3]}return t};Ue.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)};Ue.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,a=16*r,i=new Array(a),s=0;s<a;++s){var o=[0,0,0,0],u=s/n|0,c=(n-1-s%n)*t;o[u]=1<<t-1<<c,i[s]=this.generateSubHashTable(this.multiply(o,e),t)}return i};Ue.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,a=new Array(r);a[n]=e.slice(0);for(var i=n>>>1;i>0;)this.pow(a[2*i],a[i]=[]),i>>=1;for(i=2;i<n;){for(var s=1;s<i;++s){var o=a[i],u=a[s];a[i+s]=[o[0]^u[0],o[1]^u[1],o[2]^u[2],o[3]^u[3]]}i*=2}for(a[0]=[0,0,0,0],i=n+1;i<r;++i){var c=a[i^n];a[i]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return a};function yo(e,t){if(typeof e=="string"&&(e=At.util.createBuffer(e)),At.util.isArray(e)&&e.length>4){var r=e;e=At.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!At.util.isArray(e)){for(var a=[],i=t/4,n=0;n<i;++n)a.push(e.getInt32());e=a}return e}function Eo(e){e[e.length-1]=e[e.length-1]+1&4294967295}function Cc(e){return[e/4294967296|0,e&4294967295]}var tt=Ne;tt.aes=tt.aes||{};tt.aes.startEncrypting=function(e,t,r,n){var a=Co({key:e,output:r,decrypt:!1,mode:n});return a.start(t),a};tt.aes.createEncryptionCipher=function(e,t){return Co({key:e,output:null,decrypt:!1,mode:t})};tt.aes.startDecrypting=function(e,t,r,n){var a=Co({key:e,output:r,decrypt:!0,mode:n});return a.start(t),a};tt.aes.createDecryptionCipher=function(e,t){return Co({key:e,output:null,decrypt:!0,mode:t})};tt.aes.Algorithm=function(e,t){If||h_();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,a){return bc(r._w,n,a,!1)},decrypt:function(n,a){return bc(r._w,n,a,!0)}}}),r._init=!1};tt.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,r;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=tt.util.createBuffer(t);else if(tt.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){r=t,t=tt.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(!tt.util.isArray(t)){r=t,t=[];var a=r.length();if(a===16||a===24||a===32){a=a>>>2;for(var n=0;n<a;++n)t.push(r.getInt32())}}if(!tt.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var i=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(i)!==-1;this._w=p_(t,e.decrypt&&!s),this._init=!0}};tt.aes._expandKey=function(e,t){return If||h_(),p_(e,t)};tt.aes._updateBlock=bc;ja("AES-ECB",tt.cipher.modes.ecb);ja("AES-CBC",tt.cipher.modes.cbc);ja("AES-CFB",tt.cipher.modes.cfb);ja("AES-OFB",tt.cipher.modes.ofb);ja("AES-CTR",tt.cipher.modes.ctr);ja("AES-GCM",tt.cipher.modes.gcm);function ja(e,t){var r=function(){return new tt.aes.Algorithm(e,t)};tt.cipher.registerAlgorithm(e,r)}var If=!1,ma=4,Ft,Sc,d_,Vn,vr;function h_(){If=!0,d_=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;Ft=new Array(256),Sc=new Array(256),Vn=new Array(4),vr=new Array(4);for(var t=0;t<4;++t)Vn[t]=new Array(256),vr[t]=new Array(256);for(var r=0,n=0,a,i,s,o,u,c,l,t=0;t<256;++t){o=n^n<<1^n<<2^n<<3^n<<4,o=o>>8^o&255^99,Ft[r]=o,Sc[o]=r,u=e[o],a=e[r],i=e[a],s=e[i],c=u<<24^o<<16^o<<8^(o^u),l=(a^i^s)<<24^(r^s)<<16^(r^i^s)<<8^(r^a^s);for(var f=0;f<4;++f)Vn[f][r]=c,vr[f][o]=l,c=c<<24|c>>>8,l=l<<24|l>>>8;r===0?r=n=1:(r=a^e[e[e[a^s]]],n^=e[e[n]])}}function p_(e,t){for(var r=e.slice(0),n,a=1,i=r.length,s=i+6+1,o=ma*s,u=i;u<o;++u)n=r[u-1],u%i===0?(n=Ft[n>>>16&255]<<24^Ft[n>>>8&255]<<16^Ft[n&255]<<8^Ft[n>>>24]^d_[a]<<24,a++):i>6&&u%i===4&&(n=Ft[n>>>24]<<24^Ft[n>>>16&255]<<16^Ft[n>>>8&255]<<8^Ft[n&255]),r[u]=r[u-i]^n;if(t){var c,l=vr[0],f=vr[1],d=vr[2],p=vr[3],h=r.slice(0);o=r.length;for(var u=0,_=o-ma;u<o;u+=ma,_-=ma)if(u===0||u===o-ma)h[u]=r[_],h[u+1]=r[_+3],h[u+2]=r[_+2],h[u+3]=r[_+1];else for(var v=0;v<ma;++v)c=r[_+v],h[u+(3&-v)]=l[Ft[c>>>24]]^f[Ft[c>>>16&255]]^d[Ft[c>>>8&255]]^p[Ft[c&255]];r=h}return r}function bc(e,t,r,n){var a=e.length/4-1,i,s,o,u,c;n?(i=vr[0],s=vr[1],o=vr[2],u=vr[3],c=Sc):(i=Vn[0],s=Vn[1],o=Vn[2],u=Vn[3],c=Ft);var l,f,d,p,h,_,v;l=t[0]^e[0],f=t[n?3:1]^e[1],d=t[2]^e[2],p=t[n?1:3]^e[3];for(var m=3,b=1;b<a;++b)h=i[l>>>24]^s[f>>>16&255]^o[d>>>8&255]^u[p&255]^e[++m],_=i[f>>>24]^s[d>>>16&255]^o[p>>>8&255]^u[l&255]^e[++m],v=i[d>>>24]^s[p>>>16&255]^o[l>>>8&255]^u[f&255]^e[++m],p=i[p>>>24]^s[l>>>16&255]^o[f>>>8&255]^u[d&255]^e[++m],l=h,f=_,d=v;r[0]=c[l>>>24]<<24^c[f>>>16&255]<<16^c[d>>>8&255]<<8^c[p&255]^e[++m],r[n?3:1]=c[f>>>24]<<24^c[d>>>16&255]<<16^c[p>>>8&255]<<8^c[l&255]^e[++m],r[2]=c[d>>>24]<<24^c[p>>>16&255]<<16^c[l>>>8&255]<<8^c[f&255]^e[++m],r[n?1:3]=c[p>>>24]<<24^c[l>>>16&255]<<16^c[f>>>8&255]<<8^c[d&255]^e[++m]}function Co(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="AES-"+t,n;e.decrypt?n=tt.cipher.createDecipher(r,e.key):n=tt.cipher.createCipher(r,e.key);var a=n.start;return n.start=function(i,s){var o=null;s instanceof tt.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=i,a.call(n,s)},n}var mi=Ne;mi.pki=mi.pki||{};var Tc=mi.pki.oids=mi.oids=mi.oids||{};function ie(e,t){Tc[e]=t,Tc[t]=e}function Ke(e,t){Tc[e]=t}ie("1.2.840.113549.1.1.1","rsaEncryption");ie("1.2.840.113549.1.1.4","md5WithRSAEncryption");ie("1.2.840.113549.1.1.5","sha1WithRSAEncryption");ie("1.2.840.113549.1.1.7","RSAES-OAEP");ie("1.2.840.113549.1.1.8","mgf1");ie("1.2.840.113549.1.1.9","pSpecified");ie("1.2.840.113549.1.1.10","RSASSA-PSS");ie("1.2.840.113549.1.1.11","sha256WithRSAEncryption");ie("1.2.840.113549.1.1.12","sha384WithRSAEncryption");ie("1.2.840.113549.1.1.13","sha512WithRSAEncryption");ie("1.3.101.112","EdDSA25519");ie("1.2.840.10040.4.3","dsa-with-sha1");ie("1.3.14.3.2.7","desCBC");ie("1.3.14.3.2.26","sha1");ie("1.3.14.3.2.29","sha1WithRSASignature");ie("2.16.840.1.101.3.4.2.1","sha256");ie("2.16.840.1.101.3.4.2.2","sha384");ie("2.16.840.1.101.3.4.2.3","sha512");ie("2.16.840.1.101.3.4.2.4","sha224");ie("2.16.840.1.101.3.4.2.5","sha512-224");ie("2.16.840.1.101.3.4.2.6","sha512-256");ie("1.2.840.113549.2.2","md2");ie("1.2.840.113549.2.5","md5");ie("1.2.840.113549.1.7.1","data");ie("1.2.840.113549.1.7.2","signedData");ie("1.2.840.113549.1.7.3","envelopedData");ie("1.2.840.113549.1.7.4","signedAndEnvelopedData");ie("1.2.840.113549.1.7.5","digestedData");ie("1.2.840.113549.1.7.6","encryptedData");ie("1.2.840.113549.1.9.1","emailAddress");ie("1.2.840.113549.1.9.2","unstructuredName");ie("1.2.840.113549.1.9.3","contentType");ie("1.2.840.113549.1.9.4","messageDigest");ie("1.2.840.113549.1.9.5","signingTime");ie("1.2.840.113549.1.9.6","counterSignature");ie("1.2.840.113549.1.9.7","challengePassword");ie("1.2.840.113549.1.9.8","unstructuredAddress");ie("1.2.840.113549.1.9.14","extensionRequest");ie("1.2.840.113549.1.9.20","friendlyName");ie("1.2.840.113549.1.9.21","localKeyId");ie("1.2.840.113549.1.9.22.1","x509Certificate");ie("1.2.840.113549.1.12.10.1.1","keyBag");ie("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");ie("1.2.840.113549.1.12.10.1.3","certBag");ie("1.2.840.113549.1.12.10.1.4","crlBag");ie("1.2.840.113549.1.12.10.1.5","secretBag");ie("1.2.840.113549.1.12.10.1.6","safeContentsBag");ie("1.2.840.113549.1.5.13","pkcs5PBES2");ie("1.2.840.113549.1.5.12","pkcs5PBKDF2");ie("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");ie("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");ie("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");ie("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");ie("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");ie("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");ie("1.2.840.113549.2.7","hmacWithSHA1");ie("1.2.840.113549.2.8","hmacWithSHA224");ie("1.2.840.113549.2.9","hmacWithSHA256");ie("1.2.840.113549.2.10","hmacWithSHA384");ie("1.2.840.113549.2.11","hmacWithSHA512");ie("1.2.840.113549.3.7","des-EDE3-CBC");ie("2.16.840.1.101.3.4.1.2","aes128-CBC");ie("2.16.840.1.101.3.4.1.22","aes192-CBC");ie("2.16.840.1.101.3.4.1.42","aes256-CBC");ie("2.5.4.3","commonName");ie("2.5.4.4","surname");ie("2.5.4.5","serialNumber");ie("2.5.4.6","countryName");ie("2.5.4.7","localityName");ie("2.5.4.8","stateOrProvinceName");ie("2.5.4.9","streetAddress");ie("2.5.4.10","organizationName");ie("2.5.4.11","organizationalUnitName");ie("2.5.4.12","title");ie("2.5.4.13","description");ie("2.5.4.15","businessCategory");ie("2.5.4.17","postalCode");ie("2.5.4.42","givenName");ie("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");ie("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");ie("2.16.840.1.113730.1.1","nsCertType");ie("2.16.840.1.113730.1.13","nsComment");Ke("2.5.29.1","authorityKeyIdentifier");Ke("2.5.29.2","keyAttributes");Ke("2.5.29.3","certificatePolicies");Ke("2.5.29.4","keyUsageRestriction");Ke("2.5.29.5","policyMapping");Ke("2.5.29.6","subtreesConstraint");Ke("2.5.29.7","subjectAltName");Ke("2.5.29.8","issuerAltName");Ke("2.5.29.9","subjectDirectoryAttributes");Ke("2.5.29.10","basicConstraints");Ke("2.5.29.11","nameConstraints");Ke("2.5.29.12","policyConstraints");Ke("2.5.29.13","basicConstraints");ie("2.5.29.14","subjectKeyIdentifier");ie("2.5.29.15","keyUsage");Ke("2.5.29.16","privateKeyUsagePeriod");ie("2.5.29.17","subjectAltName");ie("2.5.29.18","issuerAltName");ie("2.5.29.19","basicConstraints");Ke("2.5.29.20","cRLNumber");Ke("2.5.29.21","cRLReason");Ke("2.5.29.22","expirationDate");Ke("2.5.29.23","instructionCode");Ke("2.5.29.24","invalidityDate");Ke("2.5.29.25","cRLDistributionPoints");Ke("2.5.29.26","issuingDistributionPoint");Ke("2.5.29.27","deltaCRLIndicator");Ke("2.5.29.28","issuingDistributionPoint");Ke("2.5.29.29","certificateIssuer");Ke("2.5.29.30","nameConstraints");ie("2.5.29.31","cRLDistributionPoints");ie("2.5.29.32","certificatePolicies");Ke("2.5.29.33","policyMappings");Ke("2.5.29.34","policyConstraints");ie("2.5.29.35","authorityKeyIdentifier");Ke("2.5.29.36","policyConstraints");ie("2.5.29.37","extKeyUsage");Ke("2.5.29.46","freshestCRL");Ke("2.5.29.54","inhibitAnyPolicy");ie("1.3.6.1.4.1.11129.2.4.2","timestampList");ie("1.3.6.1.5.5.7.1.1","authorityInfoAccess");ie("1.3.6.1.5.5.7.3.1","serverAuth");ie("1.3.6.1.5.5.7.3.2","clientAuth");ie("1.3.6.1.5.5.7.3.3","codeSigning");ie("1.3.6.1.5.5.7.3.4","emailProtection");ie("1.3.6.1.5.5.7.3.8","timeStamping");var nt=Ne,fe=nt.asn1=nt.asn1||{};fe.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};fe.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};fe.create=function(e,t,r,n,a){if(nt.util.isArray(n)){for(var i=[],s=0;s<n.length;++s)n[s]!==void 0&&i.push(n[s]);n=i}var o={tagClass:e,type:t,constructed:r,composed:r||nt.util.isArray(n),value:n};return a&&"bitStringContents"in a&&(o.bitStringContents=a.bitStringContents,o.original=fe.copy(o)),o};fe.copy=function(e,t){var r;if(nt.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(fe.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:fe.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)};fe.equals=function(e,t,r){if(nt.util.isArray(e)){if(!nt.util.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!fe.equals(e[n],t[n]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var a=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&fe.equals(e.value,t.value);return r&&r.includeBitStringContents&&(a=a&&e.bitStringContents===t.bitStringContents),a};fe.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var r,n=t&128;return n?r=e.getInt((t&127)<<3):r=t,r}};function oi(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}var qP=function(e,t){var r=e.getByte();if(t--,r!==128){var n,a=r&128;if(!a)n=r;else{var i=r&127;oi(e,t,i),n=e.getInt(i<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};fe.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=nt.util.createBuffer(e));var r=e.length(),n=gs(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var a=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw a.byteCount=r,a.remaining=e.length(),a}return n};function gs(e,t,r,n){var a;oi(e,t,2);var i=e.getByte();t--;var s=i&192,o=i&31;a=e.length();var u=qP(e,t);if(t-=a-e.length(),u!==void 0&&u>t){if(n.strict){var c=new Error("Too few bytes to read ASN.1 value.");throw c.available=e.length(),c.remaining=t,c.requested=u,c}u=t}var l,f,d=(i&32)===32;if(d)if(l=[],u===void 0)for(;;){if(oi(e,t,2),e.bytes(2)==="\0\0"){e.getBytes(2),t-=2;break}a=e.length(),l.push(gs(e,t,r+1,n)),t-=a-e.length()}else for(;u>0;)a=e.length(),l.push(gs(e,u,r+1,n)),t-=a-e.length(),u-=a-e.length();if(l===void 0&&s===fe.Class.UNIVERSAL&&o===fe.Type.BITSTRING&&(f=e.bytes(u)),l===void 0&&n.decodeBitStrings&&s===fe.Class.UNIVERSAL&&o===fe.Type.BITSTRING&&u>1){var p=e.read,h=t,_=0;if(o===fe.Type.BITSTRING&&(oi(e,t,1),_=e.getByte(),t--),_===0)try{a=e.length();var v={strict:!0,decodeBitStrings:!0},m=gs(e,t,r+1,v),b=a-e.length();t-=b,o==fe.Type.BITSTRING&&b++;var A=m.tagClass;b===u&&(A===fe.Class.UNIVERSAL||A===fe.Class.CONTEXT_SPECIFIC)&&(l=[m])}catch{}l===void 0&&(e.read=p,t=h)}if(l===void 0){if(u===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=t}if(o===fe.Type.BMPSTRING)for(l="";u>0;u-=2)oi(e,t,2),l+=String.fromCharCode(e.getInt16()),t-=2;else l=e.getBytes(u),t-=u}var D=f===void 0?null:{bitStringContents:f};return fe.create(s,o,d,l,D)}fe.toDer=function(e){var t=nt.util.createBuffer(),r=e.tagClass|e.type,n=nt.util.createBuffer(),a=!1;if("bitStringContents"in e&&(a=!0,e.original&&(a=fe.equals(e,e.original))),a)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var i=0;i<e.value.length;++i)e.value[i]!==void 0&&n.putBuffer(fe.toDer(e.value[i]))}else if(e.type===fe.Type.BMPSTRING)for(var i=0;i<e.value.length;++i)n.putInt16(e.value.charCodeAt(i));else e.type===fe.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&!(e.value.charCodeAt(1)&128)||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)===128)?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(n.length()&127);else{var s=n.length(),o="";do o+=String.fromCharCode(s&255),s=s>>>8;while(s>0);t.putByte(o.length|128);for(var i=o.length-1;i>=0;--i)t.putByte(o.charCodeAt(i))}return t.putBuffer(n),t};fe.oidToDer=function(e){var t=e.split("."),r=nt.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,a,i,s,o=2;o<t.length;++o){n=!0,a=[],i=parseInt(t[o],10);do s=i&127,i=i>>>7,n||(s|=128),a.push(s),n=!1;while(i>0);for(var u=a.length-1;u>=0;--u)r.putByte(a[u])}return r};fe.derToOid=function(e){var t;typeof e=="string"&&(e=nt.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)r=e.getByte(),n=n<<7,r&128?n+=r&127:(t+="."+(n+r),n=0);return t};fe.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,a=parseInt(e.substr(4,2),10),i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=0;if(e.length>11){var u=e.charAt(10),c=10;u!=="+"&&u!=="-"&&(o=parseInt(e.substr(10,2),10),c+=2)}if(t.setUTCFullYear(r,n,a),t.setUTCHours(i,s,o,0),c&&(u=e.charAt(c),u==="+"||u==="-")){var l=parseInt(e.substr(c+1,2),10),f=parseInt(e.substr(c+4,2),10),d=l*60+f;d*=6e4,u==="+"?t.setTime(+t-d):t.setTime(+t+d)}return t};fe.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,a=parseInt(e.substr(6,2),10),i=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),u=0,c=0,l=!1;e.charAt(e.length-1)==="Z"&&(l=!0);var f=e.length-5,d=e.charAt(f);if(d==="+"||d==="-"){var p=parseInt(e.substr(f+1,2),10),h=parseInt(e.substr(f+4,2),10);c=p*60+h,c*=6e4,d==="+"&&(c*=-1),l=!0}return e.charAt(14)==="."&&(u=parseFloat(e.substr(14),10)*1e3),l?(t.setUTCFullYear(r,n,a),t.setUTCHours(i,s,o,u),t.setTime(+t+c)):(t.setFullYear(r,n,a),t.setHours(i,s,o,u)),t};fe.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};fe.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};fe.integerToDer=function(e){var t=nt.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r};fe.derToInteger=function(e){typeof e=="string"&&(e=nt.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};fe.validate=function(e,t,r,n){var a=!1;if((e.tagClass===t.tagClass||typeof t.tagClass>"u")&&(e.type===t.type||typeof t.type>"u"))if(e.constructed===t.constructed||typeof t.constructed>"u"){if(a=!0,t.value&&nt.util.isArray(t.value))for(var i=0,s=0;a&&s<t.value.length;++s)a=t.value[s].optional||!1,e.value[i]&&(a=fe.validate(e.value[i],t.value[s],r,n),a?++i:t.value[s].optional&&(a=!0)),!a&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(a&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e))if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{var o=e.bitStringContents.charCodeAt(0);if(o!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return a};var A0=/[^\\u0000-\\u00ff]/;fe.prettyPrint=function(e,t,r){var n="";t=t||0,r=r||2,t>0&&(n+=`
`);for(var a="",i=0;i<t*r;++i)a+=" ";switch(n+=a+"Tag: ",e.tagClass){case fe.Class.UNIVERSAL:n+="Universal:";break;case fe.Class.APPLICATION:n+="Application:";break;case fe.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case fe.Class.PRIVATE:n+="Private:";break}if(e.tagClass===fe.Class.UNIVERSAL)switch(n+=e.type,e.type){case fe.Type.NONE:n+=" (None)";break;case fe.Type.BOOLEAN:n+=" (Boolean)";break;case fe.Type.INTEGER:n+=" (Integer)";break;case fe.Type.BITSTRING:n+=" (Bit string)";break;case fe.Type.OCTETSTRING:n+=" (Octet string)";break;case fe.Type.NULL:n+=" (Null)";break;case fe.Type.OID:n+=" (Object Identifier)";break;case fe.Type.ODESC:n+=" (Object Descriptor)";break;case fe.Type.EXTERNAL:n+=" (External or Instance of)";break;case fe.Type.REAL:n+=" (Real)";break;case fe.Type.ENUMERATED:n+=" (Enumerated)";break;case fe.Type.EMBEDDED:n+=" (Embedded PDV)";break;case fe.Type.UTF8:n+=" (UTF8)";break;case fe.Type.ROID:n+=" (Relative Object Identifier)";break;case fe.Type.SEQUENCE:n+=" (Sequence)";break;case fe.Type.SET:n+=" (Set)";break;case fe.Type.PRINTABLESTRING:n+=" (Printable String)";break;case fe.Type.IA5String:n+=" (IA5String (ASCII))";break;case fe.Type.UTCTIME:n+=" (UTC time)";break;case fe.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case fe.Type.BMPSTRING:n+=" (BMP String)";break}else n+=e.type;if(n+=`
`,n+=a+"Constructed: "+e.constructed+`
`,e.composed){for(var s=0,o="",i=0;i<e.value.length;++i)e.value[i]!==void 0&&(s+=1,o+=fe.prettyPrint(e.value[i],t+1,r),i+1<e.value.length&&(o+=","));n+=a+"Sub values: "+s+o}else{if(n+=a+"Value: ",e.type===fe.Type.OID){var u=fe.derToOid(e.value);n+=u,nt.pki&&nt.pki.oids&&u in nt.pki.oids&&(n+=" ("+nt.pki.oids[u]+") ")}if(e.type===fe.Type.INTEGER)try{n+=fe.derToInteger(e.value)}catch{n+="0x"+nt.util.bytesToHex(e.value)}else if(e.type===fe.Type.BITSTRING){if(e.value.length>1?n+="0x"+nt.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var c=e.value.charCodeAt(0);c==1?n+=" (1 unused bit shown)":c>1&&(n+=" ("+c+" unused bits shown)")}}else if(e.type===fe.Type.OCTETSTRING)A0.test(e.value)||(n+="("+e.value+") "),n+="0x"+nt.util.bytesToHex(e.value);else if(e.type===fe.Type.UTF8)try{n+=nt.util.decodeUtf8(e.value)}catch(l){if(l.message==="URI malformed")n+="0x"+nt.util.bytesToHex(e.value)+" (malformed UTF8)";else throw l}else e.type===fe.Type.PRINTABLESTRING||e.type===fe.Type.IA5String?n+=e.value:A0.test(e.value)?n+="0x"+nt.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value}return n};var Ps=Ne;Ps.md=Ps.md||{};Ps.md.algorithms=Ps.md.algorithms||{};var jr=Ne,zP=jr.hmac=jr.hmac||{};zP.create=function(){var e=null,t=null,r=null,n=null,a={};return a.start=function(i,s){if(i!==null)if(typeof i=="string")if(i=i.toLowerCase(),i in jr.md.algorithms)t=jr.md.algorithms[i].create();else throw new Error('Unknown hash algorithm "'+i+'"');else t=i;if(s===null)s=e;else{if(typeof s=="string")s=jr.util.createBuffer(s);else if(jr.util.isArray(s)){var o=s;s=jr.util.createBuffer();for(var u=0;u<o.length;++u)s.putByte(o[u])}var c=s.length();c>t.blockLength&&(t.start(),t.update(s.bytes()),s=t.digest()),r=jr.util.createBuffer(),n=jr.util.createBuffer(),c=s.length();for(var u=0;u<c;++u){var o=s.at(u);r.putByte(54^o),n.putByte(92^o)}if(c<t.blockLength)for(var o=t.blockLength-c,u=0;u<o;++u)r.putByte(54),n.putByte(92);e=s,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},a.update=function(i){t.update(i)},a.getMac=function(){var i=t.digest().bytes();return t.start(),t.update(n),t.update(i),t.digest()},a.digest=a.getMac,a};var wr=Ne,m_=wr.md5=wr.md5||{};wr.md.md5=wr.md.algorithms.md5=m_;m_.create=function(){v_||WP();var e=null,t=wr.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var a=n.messageLengthSize/4,i=0;i<a;++i)n.fullMessageLength.push(0);return t=wr.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(a,i){i==="utf8"&&(a=wr.util.encodeUtf8(a));var s=a.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=s[1],s[1]=s[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(a),w0(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var a=wr.util.createBuffer();a.putBytes(t.bytes());var i=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=i&n.blockLength-1;a.putBytes(Ac.substr(0,n.blockLength-s));for(var o,u=0,c=n.fullMessageLength.length-1;c>=0;--c)o=n.fullMessageLength[c]*8+u,u=o/4294967296>>>0,a.putInt32Le(o>>>0);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};w0(l,r,a);var f=wr.util.createBuffer();return f.putInt32Le(l.h0),f.putInt32Le(l.h1),f.putInt32Le(l.h2),f.putInt32Le(l.h3),f},n};var Ac=null,_s=null,ui=null,Sa=null,v_=!1;function WP(){Ac="",Ac+=wr.util.fillString("\0",64),_s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],ui=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],Sa=new Array(64);for(var e=0;e<64;++e)Sa[e]=Math.floor(Math.abs(Math.sin(e+1))*4294967296);v_=!0}function w0(e,t,r){for(var n,a,i,s,o,u,c,l,f=r.length();f>=64;){for(a=e.h0,i=e.h1,s=e.h2,o=e.h3,l=0;l<16;++l)t[l]=r.getInt32Le(),u=o^i&(s^o),n=a+u+Sa[l]+t[l],c=ui[l],a=o,o=s,s=i,i+=n<<c|n>>>32-c;for(;l<32;++l)u=s^o&(i^s),n=a+u+Sa[l]+t[_s[l]],c=ui[l],a=o,o=s,s=i,i+=n<<c|n>>>32-c;for(;l<48;++l)u=i^s^o,n=a+u+Sa[l]+t[_s[l]],c=ui[l],a=o,o=s,s=i,i+=n<<c|n>>>32-c;for(;l<64;++l)u=s^(i|~o),n=a+u+Sa[l]+t[_s[l]],c=ui[l],a=o,o=s,s=i,i+=n<<c|n>>>32-c;e.h0=e.h0+a|0,e.h1=e.h1+i|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,f-=64}}var Ls=Ne,g_=Ls.pem=Ls.pem||{};g_.encode=function(e,t){t=t||{};var r="-----BEGIN "+e.type+`-----\r
`,n;if(e.procType&&(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},r+=ts(n)),e.contentDomain&&(n={name:"Content-Domain",values:[e.contentDomain]},r+=ts(n)),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),r+=ts(n)),e.headers)for(var a=0;a<e.headers.length;++a)r+=ts(e.headers[a]);return e.procType&&(r+=`\r
`),r+=Ls.util.encode64(e.body,t.maxline||64)+`\r
`,r+="-----END "+e.type+`-----\r
`,r};g_.decode=function(e){for(var t=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,a=/\r?\n/,i;i=r.exec(e),!!i;){var s=i[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var o={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:Ls.util.decode64(i[3])};if(t.push(o),!!i[2]){for(var u=i[2].split(a),c=0;i&&c<u.length;){for(var l=u[c].replace(/\s+$/,""),f=c+1;f<u.length;++f){var d=u[f];if(!/\s/.test(d[0]))break;l+=d,c=f}if(i=l.match(n),i){for(var p={name:i[1],values:[]},h=i[2].split(","),_=0;_<h.length;++_)p.values.push(QP(h[_]));if(o.procType)if(!o.contentDomain&&p.name==="Content-Domain")o.contentDomain=h[0]||"";else if(!o.dekInfo&&p.name==="DEK-Info"){if(p.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:h[0],parameters:h[1]||null}}else o.headers.push(p);else{if(p.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(p.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:h[0],type:h[1]}}}++c}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function ts(e){for(var t=e.name+": ",r=[],n=function(u,c){return" "+c},a=0;a<e.values.length;++a)r.push(e.values[a].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;for(var i=0,s=-1,a=0;a<t.length;++a,++i)if(i>65&&s!==-1){var o=t[s];o===","?(++s,t=t.substr(0,s)+`\r
 `+t.substr(s)):t=t.substr(0,s)+`\r
`+o+t.substr(s+1),i=a-s-1,s=-1,++a}else(t[a]===" "||t[a]==="	"||t[a]===",")&&(s=a);return t}function QP(e){return e.replace(/^\s+/,"")}var ft=Ne;ft.des=ft.des||{};ft.des.startEncrypting=function(e,t,r,n){var a=So({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return a.start(t),a};ft.des.createEncryptionCipher=function(e,t){return So({key:e,output:null,decrypt:!1,mode:t})};ft.des.startDecrypting=function(e,t,r,n){var a=So({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return a.start(t),a};ft.des.createDecryptionCipher=function(e,t){return So({key:e,output:null,decrypt:!0,mode:t})};ft.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,a){return I0(r._keys,n,a,!1)},decrypt:function(n,a){return I0(r._keys,n,a,!0)}}}),r._init=!1};ft.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=ft.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=iL(t),this._init=!0}};Lr("DES-ECB",ft.cipher.modes.ecb);Lr("DES-CBC",ft.cipher.modes.cbc);Lr("DES-CFB",ft.cipher.modes.cfb);Lr("DES-OFB",ft.cipher.modes.ofb);Lr("DES-CTR",ft.cipher.modes.ctr);Lr("3DES-ECB",ft.cipher.modes.ecb);Lr("3DES-CBC",ft.cipher.modes.cbc);Lr("3DES-CFB",ft.cipher.modes.cfb);Lr("3DES-OFB",ft.cipher.modes.ofb);Lr("3DES-CTR",ft.cipher.modes.ctr);function Lr(e,t){var r=function(){return new ft.des.Algorithm(e,t)};ft.cipher.registerAlgorithm(e,r)}var XP=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],JP=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],ZP=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],eL=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],tL=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],rL=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],nL=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],aL=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function iL(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],a=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],i=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],d=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],h=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],_=e.length()>8?3:1,v=[],m=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,A,D=0;D<_;D++){var x=e.getInt32(),Y=e.getInt32();A=(x>>>4^Y)&252645135,Y^=A,x^=A<<4,A=(Y>>>-16^x)&65535,x^=A,Y^=A<<-16,A=(x>>>2^Y)&858993459,Y^=A,x^=A<<2,A=(Y>>>-16^x)&65535,x^=A,Y^=A<<-16,A=(x>>>1^Y)&1431655765,Y^=A,x^=A<<1,A=(Y>>>8^x)&16711935,x^=A,Y^=A<<8,A=(x>>>1^Y)&1431655765,Y^=A,x^=A<<1,A=x<<8|Y>>>20&240,x=Y<<24|Y<<8&16711680|Y>>>8&65280|Y>>>24&240,Y=A;for(var X=0;X<m.length;++X){m[X]?(x=x<<2|x>>>26,Y=Y<<2|Y>>>26):(x=x<<1|x>>>27,Y=Y<<1|Y>>>27),x&=-15,Y&=-15;var Z=t[x>>>28]|r[x>>>24&15]|n[x>>>20&15]|a[x>>>16&15]|i[x>>>12&15]|s[x>>>8&15]|o[x>>>4&15],W=u[Y>>>28]|c[Y>>>24&15]|l[Y>>>20&15]|f[Y>>>16&15]|d[Y>>>12&15]|p[Y>>>8&15]|h[Y>>>4&15];A=(W>>>16^Z)&65535,v[b++]=Z^A,v[b++]=W^A<<16}}return v}function I0(e,t,r,n){var a=e.length===32?3:9,i;a===3?i=n?[30,-2,-2]:[0,32,2]:i=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,o=t[0],u=t[1];s=(o>>>4^u)&252645135,u^=s,o^=s<<4,s=(o>>>16^u)&65535,u^=s,o^=s<<16,s=(u>>>2^o)&858993459,o^=s,u^=s<<2,s=(u>>>8^o)&16711935,o^=s,u^=s<<8,s=(o>>>1^u)&1431655765,u^=s,o^=s<<1,o=o<<1|o>>>31,u=u<<1|u>>>31;for(var c=0;c<a;c+=3){for(var l=i[c+1],f=i[c+2],d=i[c];d!=l;d+=f){var p=u^e[d],h=(u>>>4|u<<28)^e[d+1];s=o,o=u,u=s^(JP[p>>>24&63]|eL[p>>>16&63]|rL[p>>>8&63]|aL[p&63]|XP[h>>>24&63]|ZP[h>>>16&63]|tL[h>>>8&63]|nL[h&63])}s=o,o=u,u=s}o=o>>>1|o<<31,u=u>>>1|u<<31,s=(o>>>1^u)&1431655765,u^=s,o^=s<<1,s=(u>>>8^o)&16711935,o^=s,u^=s<<8,s=(u>>>2^o)&858993459,o^=s,u^=s<<2,s=(o>>>16^u)&65535,u^=s,o^=s<<16,s=(o>>>4^u)&252645135,u^=s,o^=s<<4,r[0]=o,r[1]=u}function So(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="DES-"+t,n;e.decrypt?n=ft.cipher.createDecipher(r,e.key):n=ft.cipher.createCipher(r,e.key);var a=n.start;return n.start=function(i,s){var o=null;s instanceof ft.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=i,a.call(n,s)},n}var Mt=Ne,sL=Mt.pkcs5=Mt.pkcs5||{},Mr;Mt.util.isNodejs&&!Mt.options.usePureJavaScript&&(Mr=qs);Mt.pbkdf2=sL.pbkdf2=function(e,t,r,n,a,i){if(typeof a=="function"&&(i=a,a=null),Mt.util.isNodejs&&!Mt.options.usePureJavaScript&&Mr.pbkdf2&&(a===null||typeof a!="object")&&(Mr.pbkdf2Sync.length>4||!a||a==="sha1"))return typeof a!="string"&&(a="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),i?Mr.pbkdf2Sync.length===4?Mr.pbkdf2(e,t,r,n,function(A,D){if(A)return i(A);i(null,D.toString("binary"))}):Mr.pbkdf2(e,t,r,n,a,function(A,D){if(A)return i(A);i(null,D.toString("binary"))}):Mr.pbkdf2Sync.length===4?Mr.pbkdf2Sync(e,t,r,n).toString("binary"):Mr.pbkdf2Sync(e,t,r,n,a).toString("binary");if((typeof a>"u"||a===null)&&(a="sha1"),typeof a=="string"){if(!(a in Mt.md.algorithms))throw new Error("Unknown hash algorithm: "+a);a=Mt.md[a].create()}var s=a.digestLength;if(n>4294967295*s){var o=new Error("Derived key is too long.");if(i)return i(o);throw o}var u=Math.ceil(n/s),c=n-(u-1)*s,l=Mt.hmac.create();l.start(a,e);var f="",d,p,h;if(!i){for(var _=1;_<=u;++_){l.start(null,null),l.update(t),l.update(Mt.util.int32ToBytes(_)),d=h=l.digest().getBytes();for(var v=2;v<=r;++v)l.start(null,null),l.update(h),p=l.digest().getBytes(),d=Mt.util.xorBytes(d,p,s),h=p;f+=_<u?d:d.substr(0,c)}return f}var _=1,v;function m(){if(_>u)return i(null,f);l.start(null,null),l.update(t),l.update(Mt.util.int32ToBytes(_)),d=h=l.digest().getBytes(),v=2,b()}function b(){if(v<=r)return l.start(null,null),l.update(h),p=l.digest().getBytes(),d=Mt.util.xorBytes(d,p,s),h=p,++v,Mt.util.setImmediate(b);f+=_<u?d:d.substr(0,c),++_,m()}m()};var Ir=Ne,__=Ir.sha256=Ir.sha256||{};Ir.md.sha256=Ir.md.algorithms.sha256=__;__.create=function(){y_||oL();var e=null,t=Ir.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var a=n.messageLengthSize/4,i=0;i<a;++i)n.fullMessageLength.push(0);return t=Ir.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(a,i){i==="utf8"&&(a=Ir.util.encodeUtf8(a));var s=a.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=s[1],s[1]=s[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(a),O0(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var a=Ir.util.createBuffer();a.putBytes(t.bytes());var i=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=i&n.blockLength-1;a.putBytes(wc.substr(0,n.blockLength-s));for(var o,u,c=n.fullMessageLength[0]*8,l=0;l<n.fullMessageLength.length-1;++l)o=n.fullMessageLength[l+1]*8,u=o/4294967296>>>0,c+=u,a.putInt32(c>>>0),c=o>>>0;a.putInt32(c);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};O0(f,r,a);var d=Ir.util.createBuffer();return d.putInt32(f.h0),d.putInt32(f.h1),d.putInt32(f.h2),d.putInt32(f.h3),d.putInt32(f.h4),d.putInt32(f.h5),d.putInt32(f.h6),d.putInt32(f.h7),d},n};var wc=null,y_=!1,E_=null;function oL(){wc="",wc+=Ir.util.fillString("\0",64),E_=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],y_=!0}function O0(e,t,r){for(var n,a,i,s,o,u,c,l,f,d,p,h,_,v,m,b=r.length();b>=64;){for(c=0;c<16;++c)t[c]=r.getInt32();for(;c<64;++c)n=t[c-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,a=t[c-15],a=(a>>>7|a<<25)^(a>>>18|a<<14)^a>>>3,t[c]=n+t[c-7]+a+t[c-16]|0;for(l=e.h0,f=e.h1,d=e.h2,p=e.h3,h=e.h4,_=e.h5,v=e.h6,m=e.h7,c=0;c<64;++c)s=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7),o=v^h&(_^v),i=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),u=l&f|d&(l^f),n=m+s+o+E_[c]+t[c],a=i+u,m=v,v=_,_=h,h=p+n>>>0,p=d,d=f,f=l,l=n+a>>>0;e.h0=e.h0+l|0,e.h1=e.h1+f|0,e.h2=e.h2+d|0,e.h3=e.h3+p|0,e.h4=e.h4+h|0,e.h5=e.h5+_|0,e.h6=e.h6+v|0,e.h7=e.h7+m|0,b-=64}}var br=Ne,ys=null;br.util.isNodejs&&!br.options.usePureJavaScript&&!process.versions["node-webkit"]&&(ys=qs);var uL=br.prng=br.prng||{};uL.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),a=0;a<32;++a)n[a]=r.create();t.pools=n,t.pool=0,t.generate=function(c,l){if(!l)return t.generateSync(c);var f=t.plugin.cipher,d=t.plugin.increment,p=t.plugin.formatKey,h=t.plugin.formatSeed,_=br.util.createBuffer();t.key=null,v();function v(m){if(m)return l(m);if(_.length()>=c)return l(null,_.getBytes(c));if(t.generated>1048575&&(t.key=null),t.key===null)return br.util.nextTick(function(){i(v)});var b=f(t.key,t.seed);t.generated+=b.length,_.putBytes(b),t.key=p(f(t.key,d(t.seed))),t.seed=h(f(t.key,t.seed)),br.util.setImmediate(v)}},t.generateSync=function(c){var l=t.plugin.cipher,f=t.plugin.increment,d=t.plugin.formatKey,p=t.plugin.formatSeed;t.key=null;for(var h=br.util.createBuffer();h.length()<c;){t.generated>1048575&&(t.key=null),t.key===null&&s();var _=l(t.key,t.seed);t.generated+=_.length,h.putBytes(_),t.key=d(l(t.key,f(t.seed))),t.seed=p(l(t.key,t.seed))}return h.getBytes(c)};function i(c){if(t.pools[0].messageLength>=32)return o(),c();var l=32-t.pools[0].messageLength<<5;t.seedFile(l,function(f,d){if(f)return c(f);t.collect(d),o(),c()})}function s(){if(t.pools[0].messageLength>=32)return o();var c=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(c)),o()}function o(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var c=t.plugin.md.create();c.update(t.keyBytes);for(var l=1,f=0;f<32;++f)t.reseeds%l===0&&(c.update(t.pools[f].digest().getBytes()),t.pools[f].start()),l=l<<1;t.keyBytes=c.digest().getBytes(),c.start(),c.update(t.keyBytes);var d=c.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(d),t.generated=0}function u(c){var l=null,f=br.util.globalScope,d=f.crypto||f.msCrypto;d&&d.getRandomValues&&(l=function(x){return d.getRandomValues(x)});var p=br.util.createBuffer();if(l)for(;p.length()<c;){var h=Math.max(1,Math.min(c-p.length(),65536)/4),_=new Uint32Array(Math.floor(h));try{l(_);for(var v=0;v<_.length;++v)p.putInt32(_[v])}catch(x){if(!(typeof QuotaExceededError<"u"&&x instanceof QuotaExceededError))throw x}}if(p.length()<c)for(var m,b,A,D=Math.floor(Math.random()*65536);p.length()<c;){b=16807*(D&65535),m=16807*(D>>16),b+=(m&32767)<<16,b+=m>>15,b=(b&2147483647)+(b>>31),D=b&4294967295;for(var v=0;v<3;++v)A=D>>>(v<<3),A^=Math.floor(Math.random()*256),p.putByte(A&255)}return p.getBytes(c)}return ys?(t.seedFile=function(c,l){ys.randomBytes(c,function(f,d){if(f)return l(f);l(null,d.toString())})},t.seedFileSync=function(c){return ys.randomBytes(c).toString()}):(t.seedFile=function(c,l){try{l(null,u(c))}catch(f){l(f)}},t.seedFileSync=u),t.collect=function(c){for(var l=c.length,f=0;f<l;++f)t.pools[t.pool].update(c.substr(f,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(c,l){for(var f="",d=0;d<l;d+=8)f+=String.fromCharCode(c>>d&255);t.collect(f)},t.registerWorker=function(c){if(c===self)t.seedFile=function(f,d){function p(h){var _=h.data;_.forge&&_.forge.prng&&(self.removeEventListener("message",p),d(_.forge.prng.err,_.forge.prng.bytes))}self.addEventListener("message",p),self.postMessage({forge:{prng:{needed:f}}})};else{var l=function(f){var d=f.data;d.forge&&d.forge.prng&&t.seedFile(d.forge.prng.needed,function(p,h){c.postMessage({forge:{prng:{err:p,bytes:h}}})})};c.addEventListener("message",l)}},t};var St=Ne;(function(){if(St.random&&St.random.getBytes){St.random;return}(function(e){var t={},r=new Array(4),n=St.util.createBuffer();t.formatKey=function(f){var d=St.util.createBuffer(f);return f=new Array(4),f[0]=d.getInt32(),f[1]=d.getInt32(),f[2]=d.getInt32(),f[3]=d.getInt32(),St.aes._expandKey(f,!1)},t.formatSeed=function(f){var d=St.util.createBuffer(f);return f=new Array(4),f[0]=d.getInt32(),f[1]=d.getInt32(),f[2]=d.getInt32(),f[3]=d.getInt32(),f},t.cipher=function(f,d){return St.aes._updateBlock(f,d,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(f){return++f[3],f},t.md=St.md.sha256;function a(){var f=St.prng.create(t);return f.getBytes=function(d,p){return f.generate(d,p)},f.getBytesSync=function(d){return f.generate(d)},f}var i=a(),s=null,o=St.util.globalScope,u=o.crypto||o.msCrypto;if(u&&u.getRandomValues&&(s=function(f){return u.getRandomValues(f)}),St.options.usePureJavaScript||!St.util.isNodejs&&!s){if(i.collectInt(+new Date,32),typeof navigator<"u"){var c="";for(var l in navigator)try{typeof navigator[l]=="string"&&(c+=navigator[l])}catch{}i.collect(c),c=null}e&&(e().mousemove(function(f){i.collectInt(f.clientX,16),i.collectInt(f.clientY,16)}),e().keypress(function(f){i.collectInt(f.charCode,8)}))}if(!St.random)St.random=i;else for(var l in i)St.random[l]=i[l];St.random.createInstance=a,St.random})(typeof jQuery<"u"?jQuery:null)})();var zt=Ne,Mu=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],x0=[1,2,3,5],cL=function(e,t){return e<<t&65535|(e&65535)>>16-t},lL=function(e,t){return(e&65535)>>t|e<<16-t&65535};zt.rc2=zt.rc2||{};zt.rc2.expandKey=function(e,t){typeof e=="string"&&(e=zt.util.createBuffer(e)),t=t||128;var r=e,n=e.length(),a=t,i=Math.ceil(a/8),s=255>>(a&7),o;for(o=n;o<128;o++)r.putByte(Mu[r.at(o-1)+r.at(o-n)&255]);for(r.setAt(128-i,Mu[r.at(128-i)&s]),o=127-i;o>=0;o--)r.setAt(o,Mu[r.at(o+1)^r.at(o+i)]);return r};var C_=function(e,t,r){var n=!1,a=null,i=null,s=null,o,u,c,l,f=[];for(e=zt.rc2.expandKey(e,t),c=0;c<64;c++)f.push(e.getInt16Le());r?(o=function(h){for(c=0;c<4;c++)h[c]+=f[l]+(h[(c+3)%4]&h[(c+2)%4])+(~h[(c+3)%4]&h[(c+1)%4]),h[c]=cL(h[c],x0[c]),l++},u=function(h){for(c=0;c<4;c++)h[c]+=f[h[(c+3)%4]&63]}):(o=function(h){for(c=3;c>=0;c--)h[c]=lL(h[c],x0[c]),h[c]-=f[l]+(h[(c+3)%4]&h[(c+2)%4])+(~h[(c+3)%4]&h[(c+1)%4]),l--},u=function(h){for(c=3;c>=0;c--)h[c]-=f[h[(c+3)%4]&63]});var d=function(h){var _=[];for(c=0;c<4;c++){var v=a.getInt16Le();s!==null&&(r?v^=s.getInt16Le():s.putInt16Le(v)),_.push(v&65535)}l=r?0:63;for(var m=0;m<h.length;m++)for(var b=0;b<h[m][0];b++)h[m][1](_);for(c=0;c<4;c++)s!==null&&(r?s.putInt16Le(_[c]):_[c]^=s.getInt16Le()),i.putInt16Le(_[c])},p=null;return p={start:function(h,_){h&&typeof h=="string"&&(h=zt.util.createBuffer(h)),n=!1,a=zt.util.createBuffer(),i=_||new zt.util.createBuffer,s=h,p.output=i},update:function(h){for(n||a.putBuffer(h);a.length()>=8;)d([[5,o],[1,u],[6,o],[1,u],[5,o]])},finish:function(h){var _=!0;if(r)if(h)_=h(8,a,!r);else{var v=a.length()===8?8:8-a.length();a.fillWithByte(v,v)}if(_&&(n=!0,p.update()),!r&&(_=a.length()===0,_))if(h)_=h(8,i,!r);else{var m=i.length(),b=i.at(m-1);b>m?_=!1:i.truncate(b)}return _}},p};zt.rc2.startEncrypting=function(e,t,r){var n=zt.rc2.createEncryptionCipher(e,128);return n.start(t,r),n};zt.rc2.createEncryptionCipher=function(e,t){return C_(e,t,!0)};zt.rc2.startDecrypting=function(e,t,r){var n=zt.rc2.createDecryptionCipher(e,128);return n.start(t,r),n};zt.rc2.createDecryptionCipher=function(e,t){return C_(e,t,!1)};var Ic=Ne;Ic.jsbn=Ic.jsbn||{};var Kr;function re(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}Ic.jsbn.BigInteger=re;function Ye(){return new re(null)}function fL(e,t,r,n,a,i){for(;--i>=0;){var s=t*this.data[e++]+r.data[n]+a;a=Math.floor(s/67108864),r.data[n++]=s&67108863}return a}function dL(e,t,r,n,a,i){for(var s=t&32767,o=t>>15;--i>=0;){var u=this.data[e]&32767,c=this.data[e++]>>15,l=o*u+c*s;u=s*u+((l&32767)<<15)+r.data[n]+(a&1073741823),a=(u>>>30)+(l>>>15)+o*c+(a>>>30),r.data[n++]=u&1073741823}return a}function D0(e,t,r,n,a,i){for(var s=t&16383,o=t>>14;--i>=0;){var u=this.data[e]&16383,c=this.data[e++]>>14,l=o*u+c*s;u=s*u+((l&16383)<<14)+r.data[n]+a,a=(u>>28)+(l>>14)+o*c,r.data[n++]=u&268435455}return a}typeof navigator>"u"?(re.prototype.am=D0,Kr=28):navigator.appName=="Microsoft Internet Explorer"?(re.prototype.am=dL,Kr=30):navigator.appName!="Netscape"?(re.prototype.am=fL,Kr=26):(re.prototype.am=D0,Kr=28);re.prototype.DB=Kr;re.prototype.DM=(1<<Kr)-1;re.prototype.DV=1<<Kr;var Of=52;re.prototype.FV=Math.pow(2,Of);re.prototype.F1=Of-Kr;re.prototype.F2=2*Kr-Of;var hL="0123456789abcdefghijklmnopqrstuvwxyz",bo=new Array,Va,ir;Va=48;for(ir=0;ir<=9;++ir)bo[Va++]=ir;Va=97;for(ir=10;ir<36;++ir)bo[Va++]=ir;Va=65;for(ir=10;ir<36;++ir)bo[Va++]=ir;function $0(e){return hL.charAt(e)}function S_(e,t){var r=bo[e.charCodeAt(t)];return r??-1}function pL(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function mL(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function pn(e){var t=Ye();return t.fromInt(e),t}function vL(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,a=!1,i=0;--n>=0;){var s=r==8?e[n]&255:S_(e,n);if(s<0){e.charAt(n)=="-"&&(a=!0);continue}a=!1,i==0?this.data[this.t++]=s:i+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-i)-1)<<i,this.data[this.t++]=s>>this.DB-i):this.data[this.t-1]|=s<<i,i+=r,i>=this.DB&&(i-=this.DB)}r==8&&e[0]&128&&(this.s=-1,i>0&&(this.data[this.t-1]|=(1<<this.DB-i)-1<<i)),this.clamp(),a&&re.ZERO.subTo(this,this)}function gL(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function _L(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,a=!1,i="",s=this.t,o=this.DB-s*this.DB%t;if(s-- >0)for(o<this.DB&&(n=this.data[s]>>o)>0&&(a=!0,i=$0(n));s>=0;)o<t?(n=(this.data[s]&(1<<o)-1)<<t-o,n|=this.data[--s]>>(o+=this.DB-t)):(n=this.data[s]>>(o-=t)&r,o<=0&&(o+=this.DB,--s)),n>0&&(a=!0),a&&(i+=$0(n));return a?i:"0"}function yL(){var e=Ye();return re.ZERO.subTo(this,e),e}function EL(){return this.s<0?this.negate():this}function CL(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0}function To(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function SL(){return this.t<=0?0:this.DB*(this.t-1)+To(this.data[this.t-1]^this.s&this.DM)}function bL(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function TL(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function AL(e,t){var r=e%this.DB,n=this.DB-r,a=(1<<n)-1,i=Math.floor(e/this.DB),s=this.s<<r&this.DM,o;for(o=this.t-1;o>=0;--o)t.data[o+i+1]=this.data[o]>>n|s,s=(this.data[o]&a)<<r;for(o=i-1;o>=0;--o)t.data[o]=0;t.data[i]=s,t.t=this.t+i+1,t.s=this.s,t.clamp()}function wL(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,a=this.DB-n,i=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)t.data[s-r-1]|=(this.data[s]&i)<<a,t.data[s-r]=this.data[s]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&i)<<a),t.t=this.t-r,t.clamp()}function IL(e,t){for(var r=0,n=0,a=Math.min(e.t,this.t);r<a;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function OL(e,t){var r=this.abs(),n=e.abs(),a=r.t;for(t.t=a+n.t;--a>=0;)t.data[a]=0;for(a=0;a<n.t;++a)t.data[a+r.t]=r.am(0,n.data[a],t,a,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&re.ZERO.subTo(t,t)}function xL(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function DL(e,t,r){var n=e.abs();if(!(n.t<=0)){var a=this.abs();if(a.t<n.t){t!=null&&t.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Ye());var i=Ye(),s=this.s,o=e.s,u=this.DB-To(n.data[n.t-1]);u>0?(n.lShiftTo(u,i),a.lShiftTo(u,r)):(n.copyTo(i),a.copyTo(r));var c=i.t,l=i.data[c-1];if(l!=0){var f=l*(1<<this.F1)+(c>1?i.data[c-2]>>this.F2:0),d=this.FV/f,p=(1<<this.F1)/f,h=1<<this.F2,_=r.t,v=_-c,m=t??Ye();for(i.dlShiftTo(v,m),r.compareTo(m)>=0&&(r.data[r.t++]=1,r.subTo(m,r)),re.ONE.dlShiftTo(c,m),m.subTo(i,i);i.t<c;)i.data[i.t++]=0;for(;--v>=0;){var b=r.data[--_]==l?this.DM:Math.floor(r.data[_]*d+(r.data[_-1]+h)*p);if((r.data[_]+=i.am(0,b,r,v,0,c))<b)for(i.dlShiftTo(v,m),r.subTo(m,r);r.data[_]<--b;)r.subTo(m,r)}t!=null&&(r.drShiftTo(c,t),s!=o&&re.ZERO.subTo(t,t)),r.t=c,r.clamp(),u>0&&r.rShiftTo(u,r),s<0&&re.ZERO.subTo(r,r)}}}function $L(e){var t=Ye();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(re.ZERO)>0&&e.subTo(t,t),t}function na(e){this.m=e}function NL(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function RL(e){return e}function PL(e){e.divRemTo(this.m,null,e)}function LL(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function BL(e,t){e.squareTo(t),this.reduce(t)}na.prototype.convert=NL;na.prototype.revert=RL;na.prototype.reduce=PL;na.prototype.mulTo=LL;na.prototype.sqrTo=BL;function kL(){if(this.t<1)return 0;var e=this.data[0];if(!(e&1))return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function aa(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function UL(e){var t=Ye();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(re.ZERO)>0&&this.m.subTo(t,t),t}function FL(e){var t=Ye();return e.copyTo(t),this.reduce(t),t}function ML(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e.data[t]&32767,n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function jL(e,t){e.squareTo(t),this.reduce(t)}function VL(e,t,r){e.multiplyTo(t,r),this.reduce(r)}aa.prototype.convert=UL;aa.prototype.revert=FL;aa.prototype.reduce=ML;aa.prototype.mulTo=VL;aa.prototype.sqrTo=jL;function YL(){return(this.t>0?this.data[0]&1:this.s)==0}function KL(e,t){if(e>4294967295||e<1)return re.ONE;var r=Ye(),n=Ye(),a=t.convert(this),i=To(e)-1;for(a.copyTo(r);--i>=0;)if(t.sqrTo(r,n),(e&1<<i)>0)t.mulTo(n,a,r);else{var s=r;r=n,n=s}return t.revert(r)}function HL(e,t){var r;return e<256||t.isEven()?r=new na(t):r=new aa(t),this.exp(e,r)}re.prototype.copyTo=pL;re.prototype.fromInt=mL;re.prototype.fromString=vL;re.prototype.clamp=gL;re.prototype.dlShiftTo=bL;re.prototype.drShiftTo=TL;re.prototype.lShiftTo=AL;re.prototype.rShiftTo=wL;re.prototype.subTo=IL;re.prototype.multiplyTo=OL;re.prototype.squareTo=xL;re.prototype.divRemTo=DL;re.prototype.invDigit=kL;re.prototype.isEven=YL;re.prototype.exp=KL;re.prototype.toString=_L;re.prototype.negate=yL;re.prototype.abs=EL;re.prototype.compareTo=CL;re.prototype.bitLength=SL;re.prototype.mod=$L;re.prototype.modPowInt=HL;re.ZERO=pn(0);re.ONE=pn(1);function GL(){var e=Ye();return this.copyTo(e),e}function qL(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function zL(){return this.t==0?this.s:this.data[0]<<24>>24}function WL(){return this.t==0?this.s:this.data[0]<<16>>16}function QL(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function XL(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function JL(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=pn(r),a=Ye(),i=Ye(),s="";for(this.divRemTo(n,a,i);a.signum()>0;)s=(r+i.intValue()).toString(e).substr(1)+s,a.divRemTo(n,a,i);return i.intValue().toString(e)+s}function ZL(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),a=!1,i=0,s=0,o=0;o<e.length;++o){var u=S_(e,o);if(u<0){e.charAt(o)=="-"&&this.signum()==0&&(a=!0);continue}s=t*s+u,++i>=r&&(this.dMultiply(n),this.dAddOffset(s,0),i=0,s=0)}i>0&&(this.dMultiply(Math.pow(t,i)),this.dAddOffset(s,0)),a&&re.ZERO.subTo(this,this)}function e4(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(re.ONE.shiftLeft(e-1),xf,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(re.ONE.shiftLeft(e-1),this);else{var n=new Array,a=e&7;n.length=(e>>3)+1,t.nextBytes(n),a>0?n[0]&=(1<<a)-1:n[0]=0,this.fromString(n,256)}}function t4(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,a=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[a++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),n&128&&(n|=-256),a==0&&(this.s&128)!=(n&128)&&++a,(a>0||n!=this.s)&&(t[a++]=n);return t}function r4(e){return this.compareTo(e)==0}function n4(e){return this.compareTo(e)<0?this:e}function a4(e){return this.compareTo(e)>0?this:e}function i4(e,t,r){var n,a,i=Math.min(e.t,this.t);for(n=0;n<i;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(a=e.s&this.DM,n=i;n<this.t;++n)r.data[n]=t(this.data[n],a);r.t=this.t}else{for(a=this.s&this.DM,n=i;n<e.t;++n)r.data[n]=t(a,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function s4(e,t){return e&t}function o4(e){var t=Ye();return this.bitwiseTo(e,s4,t),t}function xf(e,t){return e|t}function u4(e){var t=Ye();return this.bitwiseTo(e,xf,t),t}function b_(e,t){return e^t}function c4(e){var t=Ye();return this.bitwiseTo(e,b_,t),t}function T_(e,t){return e&~t}function l4(e){var t=Ye();return this.bitwiseTo(e,T_,t),t}function f4(){for(var e=Ye(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function d4(e){var t=Ye();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function h4(e){var t=Ye();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function p4(e){if(e==0)return-1;var t=0;return e&65535||(e>>=16,t+=16),e&255||(e>>=8,t+=8),e&15||(e>>=4,t+=4),e&3||(e>>=2,t+=2),e&1||++t,t}function m4(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+p4(this.data[e]);return this.s<0?this.t*this.DB:-1}function v4(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function g4(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=v4(this.data[r]^t);return e}function _4(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function y4(e,t){var r=re.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function E4(e){return this.changeBit(e,xf)}function C4(e){return this.changeBit(e,T_)}function S4(e){return this.changeBit(e,b_)}function b4(e,t){for(var r=0,n=0,a=Math.min(e.t,this.t);r<a;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function T4(e){var t=Ye();return this.addTo(e,t),t}function A4(e){var t=Ye();return this.subTo(e,t),t}function w4(e){var t=Ye();return this.multiplyTo(e,t),t}function I4(e){var t=Ye();return this.divRemTo(e,t,null),t}function O4(e){var t=Ye();return this.divRemTo(e,null,t),t}function x4(e){var t=Ye(),r=Ye();return this.divRemTo(e,t,r),new Array(t,r)}function D4(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function $4(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function Bi(){}function A_(e){return e}function N4(e,t,r){e.multiplyTo(t,r)}function R4(e,t){e.squareTo(t)}Bi.prototype.convert=A_;Bi.prototype.revert=A_;Bi.prototype.mulTo=N4;Bi.prototype.sqrTo=R4;function P4(e){return this.exp(e,new Bi)}function L4(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var a;for(a=r.t-this.t;n<a;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(a=Math.min(e.t,t);n<a;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp()}function B4(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function Ya(e){this.r2=Ye(),this.q3=Ye(),re.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function k4(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=Ye();return e.copyTo(t),this.reduce(t),t}function U4(e){return e}function F4(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function M4(e,t){e.squareTo(t),this.reduce(t)}function j4(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Ya.prototype.convert=k4;Ya.prototype.revert=U4;Ya.prototype.reduce=F4;Ya.prototype.mulTo=j4;Ya.prototype.sqrTo=M4;function V4(e,t){var r=e.bitLength(),n,a=pn(1),i;if(r<=0)return a;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?i=new na(t):t.isEven()?i=new Ya(t):i=new aa(t);var s=new Array,o=3,u=n-1,c=(1<<n)-1;if(s[1]=i.convert(this),n>1){var l=Ye();for(i.sqrTo(s[1],l);o<=c;)s[o]=Ye(),i.mulTo(l,s[o-2],s[o]),o+=2}var f=e.t-1,d,p=!0,h=Ye(),_;for(r=To(e.data[f])-1;f>=0;){for(r>=u?d=e.data[f]>>r-u&c:(d=(e.data[f]&(1<<r+1)-1)<<u-r,f>0&&(d|=e.data[f-1]>>this.DB+r-u)),o=n;!(d&1);)d>>=1,--o;if((r-=o)<0&&(r+=this.DB,--f),p)s[d].copyTo(a),p=!1;else{for(;o>1;)i.sqrTo(a,h),i.sqrTo(h,a),o-=2;o>0?i.sqrTo(a,h):(_=a,a=h,h=_),i.mulTo(h,s[d],a)}for(;f>=0&&!(e.data[f]&1<<r);)i.sqrTo(a,h),_=a,a=h,h=_,--r<0&&(r=this.DB-1,--f)}return i.revert(a)}function Y4(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var a=t.getLowestSetBit(),i=r.getLowestSetBit();if(i<0)return t;for(a<i&&(i=a),i>0&&(t.rShiftTo(i,t),r.rShiftTo(i,r));t.signum()>0;)(a=t.getLowestSetBit())>0&&t.rShiftTo(a,t),(a=r.getLowestSetBit())>0&&r.rShiftTo(a,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return i>0&&r.lShiftTo(i,r),r}function K4(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function H4(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return re.ZERO;for(var r=e.clone(),n=this.clone(),a=pn(1),i=pn(0),s=pn(0),o=pn(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!a.isEven()||!i.isEven())&&(a.addTo(this,a),i.subTo(e,i)),a.rShiftTo(1,a)):i.isEven()||i.subTo(e,i),i.rShiftTo(1,i);for(;n.isEven();)n.rShiftTo(1,n),t?((!s.isEven()||!o.isEven())&&(s.addTo(this,s),o.subTo(e,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);r.compareTo(n)>=0?(r.subTo(n,r),t&&a.subTo(s,a),i.subTo(o,i)):(n.subTo(r,n),t&&s.subTo(a,s),o.subTo(i,o))}if(n.compareTo(re.ONE)!=0)return re.ZERO;if(o.compareTo(e)>=0)return o.subtract(e);if(o.signum()<0)o.addTo(e,o);else return o;return o.signum()<0?o.add(e):o}var hr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],G4=(1<<26)/hr[hr.length-1];function q4(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=hr[hr.length-1]){for(t=0;t<hr.length;++t)if(r.data[0]==hr[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<hr.length;){for(var n=hr[t],a=t+1;a<hr.length&&n<G4;)n*=hr[a++];for(n=r.modInt(n);t<a;)if(n%hr[t++]==0)return!1}return r.millerRabin(e)}function z4(e){var t=this.subtract(re.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n=t.shiftRight(r),a=W4(),i,s=0;s<e;++s){do i=new re(this.bitLength(),a);while(i.compareTo(re.ONE)<=0||i.compareTo(t)>=0);var o=i.modPow(n,this);if(o.compareTo(re.ONE)!=0&&o.compareTo(t)!=0){for(var u=1;u++<r&&o.compareTo(t)!=0;)if(o=o.modPowInt(2,this),o.compareTo(re.ONE)==0)return!1;if(o.compareTo(t)!=0)return!1}}return!0}function W4(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}re.prototype.chunkSize=QL;re.prototype.toRadix=JL;re.prototype.fromRadix=ZL;re.prototype.fromNumber=e4;re.prototype.bitwiseTo=i4;re.prototype.changeBit=y4;re.prototype.addTo=b4;re.prototype.dMultiply=D4;re.prototype.dAddOffset=$4;re.prototype.multiplyLowerTo=L4;re.prototype.multiplyUpperTo=B4;re.prototype.modInt=K4;re.prototype.millerRabin=z4;re.prototype.clone=GL;re.prototype.intValue=qL;re.prototype.byteValue=zL;re.prototype.shortValue=WL;re.prototype.signum=XL;re.prototype.toByteArray=t4;re.prototype.equals=r4;re.prototype.min=n4;re.prototype.max=a4;re.prototype.and=o4;re.prototype.or=u4;re.prototype.xor=c4;re.prototype.andNot=l4;re.prototype.not=f4;re.prototype.shiftLeft=d4;re.prototype.shiftRight=h4;re.prototype.getLowestSetBit=m4;re.prototype.bitCount=g4;re.prototype.testBit=_4;re.prototype.setBit=E4;re.prototype.clearBit=C4;re.prototype.flipBit=S4;re.prototype.add=T4;re.prototype.subtract=A4;re.prototype.multiply=w4;re.prototype.divide=I4;re.prototype.remainder=O4;re.prototype.divideAndRemainder=x4;re.prototype.modPow=V4;re.prototype.modInverse=H4;re.prototype.pow=P4;re.prototype.gcd=Y4;re.prototype.isProbablePrime=q4;var Or=Ne,w_=Or.sha1=Or.sha1||{};Or.md.sha1=Or.md.algorithms.sha1=w_;w_.create=function(){I_||Q4();var e=null,t=Or.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var a=n.messageLengthSize/4,i=0;i<a;++i)n.fullMessageLength.push(0);return t=Or.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(a,i){i==="utf8"&&(a=Or.util.encodeUtf8(a));var s=a.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=s[1],s[1]=s[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(a),N0(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var a=Or.util.createBuffer();a.putBytes(t.bytes());var i=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=i&n.blockLength-1;a.putBytes(Oc.substr(0,n.blockLength-s));for(var o,u,c=n.fullMessageLength[0]*8,l=0;l<n.fullMessageLength.length-1;++l)o=n.fullMessageLength[l+1]*8,u=o/4294967296>>>0,c+=u,a.putInt32(c>>>0),c=o>>>0;a.putInt32(c);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};N0(f,r,a);var d=Or.util.createBuffer();return d.putInt32(f.h0),d.putInt32(f.h1),d.putInt32(f.h2),d.putInt32(f.h3),d.putInt32(f.h4),d},n};var Oc=null,I_=!1;function Q4(){Oc="",Oc+=Or.util.fillString("\0",64),I_=!0}function N0(e,t,r){for(var n,a,i,s,o,u,c,l,f=r.length();f>=64;){for(a=e.h0,i=e.h1,s=e.h2,o=e.h3,u=e.h4,l=0;l<16;++l)n=r.getInt32(),t[l]=n,c=o^i&(s^o),n=(a<<5|a>>>27)+c+u+1518500249+n,u=o,o=s,s=(i<<30|i>>>2)>>>0,i=a,a=n;for(;l<20;++l)n=t[l-3]^t[l-8]^t[l-14]^t[l-16],n=n<<1|n>>>31,t[l]=n,c=o^i&(s^o),n=(a<<5|a>>>27)+c+u+1518500249+n,u=o,o=s,s=(i<<30|i>>>2)>>>0,i=a,a=n;for(;l<32;++l)n=t[l-3]^t[l-8]^t[l-14]^t[l-16],n=n<<1|n>>>31,t[l]=n,c=i^s^o,n=(a<<5|a>>>27)+c+u+1859775393+n,u=o,o=s,s=(i<<30|i>>>2)>>>0,i=a,a=n;for(;l<40;++l)n=t[l-6]^t[l-16]^t[l-28]^t[l-32],n=n<<2|n>>>30,t[l]=n,c=i^s^o,n=(a<<5|a>>>27)+c+u+1859775393+n,u=o,o=s,s=(i<<30|i>>>2)>>>0,i=a,a=n;for(;l<60;++l)n=t[l-6]^t[l-16]^t[l-28]^t[l-32],n=n<<2|n>>>30,t[l]=n,c=i&s|o&(i^s),n=(a<<5|a>>>27)+c+u+2400959708+n,u=o,o=s,s=(i<<30|i>>>2)>>>0,i=a,a=n;for(;l<80;++l)n=t[l-6]^t[l-16]^t[l-28]^t[l-32],n=n<<2|n>>>30,t[l]=n,c=i^s^o,n=(a<<5|a>>>27)+c+u+3395469782+n,u=o,o=s,s=(i<<30|i>>>2)>>>0,i=a,a=n;e.h0=e.h0+a|0,e.h1=e.h1+i|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,e.h4=e.h4+u|0,f-=64}}var $r=Ne,O_=$r.pkcs1=$r.pkcs1||{};O_.encode_rsa_oaep=function(e,t,r){var n,a,i,s;typeof r=="string"?(n=r,a=arguments[3]||void 0,i=arguments[4]||void 0):r&&(n=r.label||void 0,a=r.seed||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),i?i.start():i=$r.md.sha1.create(),s||(s=i);var o=Math.ceil(e.n.bitLength()/8),u=o-2*i.digestLength-2;if(t.length>u){var c=new Error("RSAES-OAEP input message length is too long.");throw c.length=t.length,c.maxLength=u,c}n||(n=""),i.update(n,"raw");for(var l=i.digest(),f="",d=u-t.length,p=0;p<d;p++)f+="\0";var h=l.getBytes()+f+""+t;if(!a)a=$r.random.getBytes(i.digestLength);else if(a.length!==i.digestLength){var c=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw c.seedLength=a.length,c.digestLength=i.digestLength,c}var _=Bs(a,o-i.digestLength-1,s),v=$r.util.xorBytes(h,_,h.length),m=Bs(v,i.digestLength,s),b=$r.util.xorBytes(a,m,a.length);return"\0"+b+v};O_.decode_rsa_oaep=function(e,t,r){var n,a,i;typeof r=="string"?(n=r,a=arguments[3]||void 0):r&&(n=r.label||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(i=r.mgf1.md));var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s){var v=new Error("RSAES-OAEP encoded message length is invalid.");throw v.length=t.length,v.expectedLength=s,v}if(a===void 0?a=$r.md.sha1.create():a.start(),i||(i=a),s<2*a.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),a.update(n,"raw");for(var o=a.digest().getBytes(),u=t.charAt(0),c=t.substring(1,a.digestLength+1),l=t.substring(1+a.digestLength),f=Bs(l,a.digestLength,i),d=$r.util.xorBytes(c,f,c.length),p=Bs(d,s-a.digestLength-1,i),h=$r.util.xorBytes(l,p,l.length),_=h.substring(0,a.digestLength),v=u!=="\0",m=0;m<a.digestLength;++m)v|=o.charAt(m)!==_.charAt(m);for(var b=1,A=a.digestLength,D=a.digestLength;D<h.length;D++){var x=h.charCodeAt(D),Y=x&1^1,X=b?65534:0;v|=x&X,b=b&Y,A+=b}if(v||h.charCodeAt(A)!==1)throw new Error("Invalid RSAES-OAEP padding.");return h.substring(A+1)};function Bs(e,t,r){r||(r=$r.md.sha1.create());for(var n="",a=Math.ceil(t/r.digestLength),i=0;i<a;++i){var s=String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255);r.start(),r.update(e+s),n+=r.digest().getBytes()}return n.substring(0,t)}var an=Ne;(function(){if(an.prime){an.prime;return}var e=an.prime=an.prime||{},t=an.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var a=function(f,d){return f|d};e.generateProbablePrime=function(f,d,p){typeof d=="function"&&(p=d,d={}),d=d||{};var h=d.algorithm||"PRIMEINC";typeof h=="string"&&(h={name:h}),h.options=h.options||{};var _=d.prng||an.random,v={nextBytes:function(m){for(var b=_.getBytesSync(m.length),A=0;A<m.length;++A)m[A]=b.charCodeAt(A)}};if(h.name==="PRIMEINC")return i(f,v,h.options,p);throw new Error("Invalid prime generation algorithm: "+h.name)};function i(f,d,p,h){return"workers"in p?u(f,d,p,h):s(f,d,p,h)}function s(f,d,p,h){var _=c(f,d),v=0,m=l(_.bitLength());"millerRabinTests"in p&&(m=p.millerRabinTests);var b=10;"maxBlockTime"in p&&(b=p.maxBlockTime),o(_,f,d,v,m,b,h)}function o(f,d,p,h,_,v,m){var b=+new Date;do{if(f.bitLength()>d&&(f=c(d,p)),f.isProbablePrime(_))return m(null,f);f.dAddOffset(r[h++%8],0)}while(v<0||+new Date-b<v);an.util.setImmediate(function(){o(f,d,p,h,_,v,m)})}function u(f,d,p,h){if(typeof Worker>"u")return s(f,d,p,h);var _=c(f,d),v=p.workers,m=p.workLoad||100,b=m*30/8,A=p.workerScript||"forge/prime.worker.js";if(v===-1)return an.util.estimateCores(function(x,Y){x&&(Y=2),v=Y-1,D()});D();function D(){v=Math.max(1,v);for(var x=[],Y=0;Y<v;++Y)x[Y]=new Worker(A);for(var Y=0;Y<v;++Y)x[Y].addEventListener("message",Z);var X=!1;function Z(W){if(!X){var J=W.data;if(J.found){for(var ee=0;ee<x.length;++ee)x[ee].terminate();return X=!0,h(null,new t(J.prime,16))}_.bitLength()>f&&(_=c(f,d));var oe=_.toString(16);W.target.postMessage({hex:oe,workLoad:m}),_.dAddOffset(b,0)}}}}function c(f,d){var p=new t(f,d),h=f-1;return p.testBit(h)||p.bitwiseTo(t.ONE.shiftLeft(h),a,p),p.dAddOffset(31-p.mod(n).byteValue(),0),p}function l(f){return f<=100?27:f<=150?18:f<=200?15:f<=250?12:f<=300?9:f<=350?8:f<=400?7:f<=500?6:f<=600?5:f<=800?4:f<=1250?3:2}})();var _e=Ne;if(typeof Ve>"u")var Ve=_e.jsbn.BigInteger;var xc=_e.util.isNodejs?qs:null,K=_e.asn1,sr=_e.util;_e.pki=_e.pki||{};_e.pki.rsa=_e.rsa=_e.rsa||{};var Te=_e.pki,X4=[6,4,2,4,2,4,6,2],J4={name:"PrivateKeyInfo",tagClass:K.Class.UNIVERSAL,type:K.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:K.Class.UNIVERSAL,type:K.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:K.Class.UNIVERSAL,type:K.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:K.Class.UNIVERSAL,type:K.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:K.Class.UNIVERSAL,type:K.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},Z4={name:"RSAPrivateKey",tagClass:K.Class.UNIVERSAL,type:K.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:K.Class.UNIVERSAL,type:K.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:K.Class.UNIVERSAL,type:K.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:K.Class.UNIVERSAL,type:K.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:K.Class.UNIVERSAL,type:K.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:K.Class.UNIVERSAL,type:K.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:K.Class.UNIVERSAL,type:K.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:K.Class.UNIVERSAL,type:K.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:K.Class.UNIVERSAL,type:K.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:K.Class.UNIVERSAL,type:K.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},eB={name:"RSAPublicKey",tagClass:K.Class.UNIVERSAL,type:K.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:K.Class.UNIVERSAL,type:K.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:K.Class.UNIVERSAL,type:K.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},tB=_e.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:K.Class.UNIVERSAL,type:K.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:K.Class.UNIVERSAL,type:K.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:K.Class.UNIVERSAL,type:K.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:K.Class.UNIVERSAL,type:K.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:K.Class.UNIVERSAL,type:K.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},rB={name:"DigestInfo",tagClass:K.Class.UNIVERSAL,type:K.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:K.Class.UNIVERSAL,type:K.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:K.Class.UNIVERSAL,type:K.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:K.Class.UNIVERSAL,type:K.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:K.Class.UNIVERSAL,type:K.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},nB=function(e){var t;if(e.algorithm in Te.oids)t=Te.oids[e.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}var n=K.oidToDer(t).getBytes(),a=K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[]),i=K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[]);i.value.push(K.create(K.Class.UNIVERSAL,K.Type.OID,!1,n)),i.value.push(K.create(K.Class.UNIVERSAL,K.Type.NULL,!1,""));var s=K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,e.digest().getBytes());return a.value.push(i),a.value.push(s),K.toDer(a).getBytes()},x_=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(Ve.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(Ve.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var n;do n=new Ve(_e.util.bytesToHex(_e.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(Ve.ONE));e=e.multiply(n.modPow(t.e,t.n)).mod(t.n);for(var a=e.mod(t.p).modPow(t.dP,t.p),i=e.mod(t.q).modPow(t.dQ,t.q);a.compareTo(i)<0;)a=a.add(t.p);var s=a.subtract(i).multiply(t.qInv).mod(t.p).multiply(t.q).add(i);return s=s.multiply(n.modInverse(t.n)).mod(t.n),s};Te.rsa.encrypt=function(e,t,r){var n=r,a,i=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,a=D_(e,t,r)):(a=_e.util.createBuffer(),a.putBytes(e));for(var s=new Ve(a.toHex(),16),o=x_(s,t,n),u=o.toString(16),c=_e.util.createBuffer(),l=i-Math.ceil(u.length/2);l>0;)c.putByte(0),--l;return c.putBytes(_e.util.hexToBytes(u)),c.getBytes()};Te.rsa.decrypt=function(e,t,r,n){var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var i=new Error("Encrypted message length is invalid.");throw i.length=e.length,i.expected=a,i}var s=new Ve(_e.util.createBuffer(e).toHex(),16);if(s.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=x_(s,t,r),u=o.toString(16),c=_e.util.createBuffer(),l=a-Math.ceil(u.length/2);l>0;)c.putByte(0),--l;return c.putBytes(_e.util.hexToBytes(u)),n!==!1?ks(c.getBytes(),t,r):c.getBytes()};Te.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n=r.prng||_e.random,a={nextBytes:function(o){for(var u=n.getBytesSync(o.length),c=0;c<o.length;++c)o[c]=u.charCodeAt(c)}},i=r.algorithm||"PRIMEINC",s;if(i==="PRIMEINC")s={algorithm:i,state:0,bits:e,rng:a,eInt:t||65537,e:new Ve(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+i);return s};Te.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new Ve(null);r.fromInt(30);for(var n=0,a=function(f,d){return f|d},i=+new Date,s,o=0;e.keys===null&&(t<=0||o<t);){if(e.state===0){var u=e.p===null?e.pBits:e.qBits,c=u-1;e.pqState===0?(e.num=new Ve(u,e.rng),e.num.testBit(c)||e.num.bitwiseTo(Ve.ONE.shiftLeft(c),a,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),n=0,++e.pqState):e.pqState===1?e.num.bitLength()>u?e.pqState=0:e.num.isProbablePrime(iB(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(X4[n++%8],0):e.pqState===2?e.pqState=e.num.subtract(Ve.ONE).gcd(e.e).compareTo(Ve.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(Ve.ONE),e.q1=e.q.subtract(Ve.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(Ve.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var l=e.e.modInverse(e.phi);e.keys={privateKey:Te.rsa.setPrivateKey(e.n,e.e,l,e.p,e.q,l.mod(e.p1),l.mod(e.q1),e.q.modInverse(e.p)),publicKey:Te.rsa.setPublicKey(e.n,e.e)}}s=+new Date,o+=s-i,i=s}return e.keys!==null};Te.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!_e.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(R0("generateKeyPair"))return xc.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,u,c){if(o)return n(o);n(null,{privateKey:Te.privateKeyFromPem(c),publicKey:Te.publicKeyFromPem(u)})});if(P0("generateKey")&&P0("exportKey"))return sr.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:B0(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return sr.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){n(o)}).then(function(o){if(o){var u=Te.privateKeyFromAsn1(K.fromDer(_e.util.createBuffer(o)));n(null,{privateKey:u,publicKey:Te.setRsaPublicKey(u.n,u.e)})}});if(L0("generateKey")&&L0("exportKey")){var a=sr.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:B0(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);a.oncomplete=function(o){var u=o.target.result,c=sr.globalScope.msCrypto.subtle.exportKey("pkcs8",u.privateKey);c.oncomplete=function(l){var f=l.target.result,d=Te.privateKeyFromAsn1(K.fromDer(_e.util.createBuffer(f)));n(null,{privateKey:d,publicKey:Te.setRsaPublicKey(d.n,d.e)})},c.onerror=function(l){n(l)}},a.onerror=function(o){n(o)};return}}else if(R0("generateKeyPairSync")){var i=xc.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Te.privateKeyFromPem(i.privateKey),publicKey:Te.publicKeyFromPem(i.publicKey)}}}var s=Te.rsa.createKeyPairGenerationState(e,t,r);if(!n)return Te.rsa.stepKeyPairGenerationState(s,0),s.keys;aB(s,r,n)};Te.setRsaPublicKey=Te.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(n,a,i){if(typeof a=="string"?a=a.toUpperCase():a===void 0&&(a="RSAES-PKCS1-V1_5"),a==="RSAES-PKCS1-V1_5")a={encode:function(o,u,c){return D_(o,u,2).getBytes()}};else if(a==="RSA-OAEP"||a==="RSAES-OAEP")a={encode:function(o,u){return _e.pkcs1.encode_rsa_oaep(u,o,i)}};else if(["RAW","NONE","NULL",null].indexOf(a)!==-1)a={encode:function(o){return o}};else if(typeof a=="string")throw new Error('Unsupported encryption scheme: "'+a+'".');var s=a.encode(n,r,!0);return Te.rsa.encrypt(s,r,!0)},r.verify=function(n,a,i,s){typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),i==="RSASSA-PKCS1-V1_5"?i={verify:function(u,c){c=ks(c,r,!0);var l=K.fromDer(c,{parseAllBytes:s._parseAllDigestBytes}),f={},d=[];if(!K.validate(l,rB,f,d)){var p=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw p.errors=d,p}var h=K.derToOid(f.algorithmIdentifier);if(!(h===_e.oids.md2||h===_e.oids.md5||h===_e.oids.sha1||h===_e.oids.sha224||h===_e.oids.sha256||h===_e.oids.sha384||h===_e.oids.sha512||h===_e.oids["sha512-224"]||h===_e.oids["sha512-256"])){var p=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw p.oid=h,p}if((h===_e.oids.md2||h===_e.oids.md5)&&!("parameters"in f))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return u===f.digest}}:(i==="NONE"||i==="NULL"||i===null)&&(i={verify:function(u,c){return c=ks(c,r,!0),u===c}});var o=Te.rsa.decrypt(a,r,!0,!1);return i.verify(n,o,r.n.bitLength())},r};Te.setRsaPrivateKey=Te.rsa.setPrivateKey=function(e,t,r,n,a,i,s,o){var u={n:e,e:t,d:r,p:n,q:a,dP:i,dQ:s,qInv:o};return u.decrypt=function(c,l,f){typeof l=="string"?l=l.toUpperCase():l===void 0&&(l="RSAES-PKCS1-V1_5");var d=Te.rsa.decrypt(c,u,!1,!1);if(l==="RSAES-PKCS1-V1_5")l={decode:ks};else if(l==="RSA-OAEP"||l==="RSAES-OAEP")l={decode:function(p,h){return _e.pkcs1.decode_rsa_oaep(h,p,f)}};else if(["RAW","NONE","NULL",null].indexOf(l)!==-1)l={decode:function(p){return p}};else throw new Error('Unsupported encryption scheme: "'+l+'".');return l.decode(d,u,!1)},u.sign=function(c,l){var f=!1;typeof l=="string"&&(l=l.toUpperCase()),l===void 0||l==="RSASSA-PKCS1-V1_5"?(l={encode:nB},f=1):(l==="NONE"||l==="NULL"||l===null)&&(l={encode:function(){return c}},f=1);var d=l.encode(c,u.n.bitLength());return Te.rsa.encrypt(d,u,f)},u};Te.wrapRsaPrivateKey=function(e){return K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,K.integerToDer(0).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(Te.oids.rsaEncryption).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.NULL,!1,"")]),K.create(K.Class.UNIVERSAL,K.Type.OCTETSTRING,!1,K.toDer(e).getBytes())])};Te.privateKeyFromAsn1=function(e){var t={},r=[];if(K.validate(e,J4,t,r)&&(e=K.fromDer(_e.util.createBuffer(t.privateKey))),t={},r=[],!K.validate(e,Z4,t,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var a,i,s,o,u,c,l,f;return a=_e.util.createBuffer(t.privateKeyModulus).toHex(),i=_e.util.createBuffer(t.privateKeyPublicExponent).toHex(),s=_e.util.createBuffer(t.privateKeyPrivateExponent).toHex(),o=_e.util.createBuffer(t.privateKeyPrime1).toHex(),u=_e.util.createBuffer(t.privateKeyPrime2).toHex(),c=_e.util.createBuffer(t.privateKeyExponent1).toHex(),l=_e.util.createBuffer(t.privateKeyExponent2).toHex(),f=_e.util.createBuffer(t.privateKeyCoefficient).toHex(),Te.setRsaPrivateKey(new Ve(a,16),new Ve(i,16),new Ve(s,16),new Ve(o,16),new Ve(u,16),new Ve(c,16),new Ve(l,16),new Ve(f,16))};Te.privateKeyToAsn1=Te.privateKeyToRSAPrivateKey=function(e){return K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,K.integerToDer(0).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,Sr(e.n)),K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,Sr(e.e)),K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,Sr(e.d)),K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,Sr(e.p)),K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,Sr(e.q)),K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,Sr(e.dP)),K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,Sr(e.dQ)),K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,Sr(e.qInv))])};Te.publicKeyFromAsn1=function(e){var t={},r=[];if(K.validate(e,tB,t,r)){var n=K.derToOid(t.publicKeyOid);if(n!==Te.oids.rsaEncryption){var a=new Error("Cannot read public key. Unknown OID.");throw a.oid=n,a}e=t.rsaPublicKey}if(r=[],!K.validate(e,eB,t,r)){var a=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw a.errors=r,a}var i=_e.util.createBuffer(t.publicKeyModulus).toHex(),s=_e.util.createBuffer(t.publicKeyExponent).toHex();return Te.setRsaPublicKey(new Ve(i,16),new Ve(s,16))};Te.publicKeyToAsn1=Te.publicKeyToSubjectPublicKeyInfo=function(e){return K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.OID,!1,K.oidToDer(Te.oids.rsaEncryption).getBytes()),K.create(K.Class.UNIVERSAL,K.Type.NULL,!1,"")]),K.create(K.Class.UNIVERSAL,K.Type.BITSTRING,!1,[Te.publicKeyToRSAPublicKey(e)])])};Te.publicKeyToRSAPublicKey=function(e){return K.create(K.Class.UNIVERSAL,K.Type.SEQUENCE,!0,[K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,Sr(e.n)),K.create(K.Class.UNIVERSAL,K.Type.INTEGER,!1,Sr(e.e))])};function D_(e,t,r){var n=_e.util.createBuffer(),a=Math.ceil(t.n.bitLength()/8);if(e.length>a-11){var i=new Error("Message is too long for PKCS#1 v1.5 padding.");throw i.length=e.length,i.max=a-11,i}n.putByte(0),n.putByte(r);var s=a-3-e.length,o;if(r===0||r===1){o=r===0?0:255;for(var u=0;u<s;++u)n.putByte(o)}else for(;s>0;){for(var c=0,l=_e.random.getBytes(s),u=0;u<s;++u)o=l.charCodeAt(u),o===0?++c:n.putByte(o);s=c}return n.putByte(0),n.putBytes(e),n}function ks(e,t,r,n){var a=Math.ceil(t.n.bitLength()/8),i=_e.util.createBuffer(e),s=i.getByte(),o=i.getByte();if(s!==0||r&&o!==0&&o!==1||!r&&o!=2||r&&o===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var u=0;if(o===0){u=a-3-n;for(var c=0;c<u;++c)if(i.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(u=0;i.length()>1;){if(i.getByte()!==255){--i.read;break}++u}else if(o===2)for(u=0;i.length()>1;){if(i.getByte()===0){--i.read;break}++u}var l=i.getByte();if(l!==0||u!==a-3-i.length())throw new Error("Encryption block is invalid.");return i.getBytes()}function aB(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng),a();function a(){i(e.pBits,function(o,u){if(o)return r(o);if(e.p=u,e.q!==null)return s(o,e.q);i(e.qBits,s)})}function i(o,u){_e.prime.generateProbablePrime(o,n,u)}function s(o,u){if(o)return r(o);if(e.q=u,e.p.compareTo(e.q)<0){var c=e.p;e.p=e.q,e.q=c}if(e.p.subtract(Ve.ONE).gcd(e.e).compareTo(Ve.ONE)!==0){e.p=null,a();return}if(e.q.subtract(Ve.ONE).gcd(e.e).compareTo(Ve.ONE)!==0){e.q=null,i(e.qBits,s);return}if(e.p1=e.p.subtract(Ve.ONE),e.q1=e.q.subtract(Ve.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(Ve.ONE)!==0){e.p=e.q=null,a();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,i(e.qBits,s);return}var l=e.e.modInverse(e.phi);e.keys={privateKey:Te.rsa.setPrivateKey(e.n,e.e,l,e.p,e.q,l.mod(e.p1),l.mod(e.q1),e.q.modInverse(e.p)),publicKey:Te.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}}function Sr(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=_e.util.hexToBytes(t);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function iB(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function R0(e){return _e.util.isNodejs&&typeof xc[e]=="function"}function P0(e){return typeof sr.globalScope<"u"&&typeof sr.globalScope.crypto=="object"&&typeof sr.globalScope.crypto.subtle=="object"&&typeof sr.globalScope.crypto.subtle[e]=="function"}function L0(e){return typeof sr.globalScope<"u"&&typeof sr.globalScope.msCrypto=="object"&&typeof sr.globalScope.msCrypto.subtle=="object"&&typeof sr.globalScope.msCrypto.subtle[e]=="function"}function B0(e){for(var t=_e.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}var he=Ne;if(typeof sB>"u")var sB=he.jsbn.BigInteger;var Q=he.asn1,Oe=he.pki=he.pki||{};Oe.pbe=he.pbe=he.pbe||{};var Nn=Oe.oids,oB={name:"EncryptedPrivateKeyInfo",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},uB={name:"PBES2Algorithms",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},cB={name:"pkcs-12PbeParams",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"iterations"}]};Oe.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=he.random.getBytesSync(r.saltSize),a=r.count,i=Q.integerToDer(a),s,o,u;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var c,l,f;switch(r.algorithm){case"aes128":s=16,c=16,l=Nn["aes128-CBC"],f=he.aes.createEncryptionCipher;break;case"aes192":s=24,c=16,l=Nn["aes192-CBC"],f=he.aes.createEncryptionCipher;break;case"aes256":s=32,c=16,l=Nn["aes256-CBC"],f=he.aes.createEncryptionCipher;break;case"des":s=8,c=8,l=Nn.desCBC,f=he.des.createEncryptionCipher;break;default:var d=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw d.algorithm=r.algorithm,d}var p="hmacWith"+r.prfAlgorithm.toUpperCase(),h=N_(p),_=he.pkcs5.pbkdf2(t,n,a,s,h),v=he.random.getBytesSync(c),m=f(_);m.start(v),m.update(Q.toDer(e)),m.finish(),u=m.output.getBytes();var b=lB(n,i,s,p);o=Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(Nn.pkcs5PBES2).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(Nn.pkcs5PBKDF2).getBytes()),b]),Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(l).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.OCTETSTRING,!1,v)])])])}else if(r.algorithm==="3des"){s=24;var A=new he.util.ByteBuffer(n),_=Oe.pbe.generatePkcs12Key(t,A,1,a,s),v=Oe.pbe.generatePkcs12Key(t,A,2,a,s),m=he.des.createEncryptionCipher(_);m.start(v),m.update(Q.toDer(e)),m.finish(),u=m.output.getBytes(),o=Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(Nn["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OCTETSTRING,!1,n),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,i.getBytes())])])}else{var d=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw d.algorithm=r.algorithm,d}var D=Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[o,Q.create(Q.Class.UNIVERSAL,Q.Type.OCTETSTRING,!1,u)]);return D};Oe.decryptPrivateKeyInfo=function(e,t){var r=null,n={},a=[];if(!Q.validate(e,oB,n,a)){var i=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw i.errors=a,i}var s=Q.derToOid(n.encryptionOid),o=Oe.pbe.getCipher(s,n.encryptionParams,t),u=he.util.createBuffer(n.encryptedData);return o.update(u),o.finish()&&(r=Q.fromDer(o.output)),r};Oe.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:Q.toDer(e).getBytes()};return he.pem.encode(r,{maxline:t})};Oe.encryptedPrivateKeyFromPem=function(e){var t=he.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return Q.fromDer(t.body)};Oe.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var n=Oe.wrapRsaPrivateKey(Oe.privateKeyToAsn1(e));return n=Oe.encryptPrivateKeyInfo(n,t,r),Oe.encryptedPrivateKeyToPem(n)}var a,i,s,o;switch(r.algorithm){case"aes128":a="AES-128-CBC",s=16,i=he.random.getBytesSync(16),o=he.aes.createEncryptionCipher;break;case"aes192":a="AES-192-CBC",s=24,i=he.random.getBytesSync(16),o=he.aes.createEncryptionCipher;break;case"aes256":a="AES-256-CBC",s=32,i=he.random.getBytesSync(16),o=he.aes.createEncryptionCipher;break;case"3des":a="DES-EDE3-CBC",s=24,i=he.random.getBytesSync(8),o=he.des.createEncryptionCipher;break;case"des":a="DES-CBC",s=8,i=he.random.getBytesSync(8),o=he.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw u.algorithm=r.algorithm,u}var c=he.pbe.opensslDeriveBytes(t,i.substr(0,8),s),l=o(c);l.start(i),l.update(Q.toDer(Oe.privateKeyToAsn1(e))),l.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:a,parameters:he.util.bytesToHex(i).toUpperCase()},body:l.output.getBytes()};return he.pem.encode(f)};Oe.decryptRsaPrivateKey=function(e,t){var r=null,n=he.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var a=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw a.headerType=a,a}if(n.procType&&n.procType.type==="ENCRYPTED"){var i,s;switch(n.dekInfo.algorithm){case"DES-CBC":i=8,s=he.des.createDecryptionCipher;break;case"DES-EDE3-CBC":i=24,s=he.des.createDecryptionCipher;break;case"AES-128-CBC":i=16,s=he.aes.createDecryptionCipher;break;case"AES-192-CBC":i=24,s=he.aes.createDecryptionCipher;break;case"AES-256-CBC":i=32,s=he.aes.createDecryptionCipher;break;case"RC2-40-CBC":i=5,s=function(f){return he.rc2.createDecryptionCipher(f,40)};break;case"RC2-64-CBC":i=8,s=function(f){return he.rc2.createDecryptionCipher(f,64)};break;case"RC2-128-CBC":i=16,s=function(f){return he.rc2.createDecryptionCipher(f,128)};break;default:var a=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw a.algorithm=n.dekInfo.algorithm,a}var o=he.util.hexToBytes(n.dekInfo.parameters),u=he.pbe.opensslDeriveBytes(t,o.substr(0,8),i),c=s(u);if(c.start(o),c.update(he.util.createBuffer(n.body)),c.finish())r=c.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=Oe.decryptPrivateKeyInfo(Q.fromDer(r),t):r=Q.fromDer(r),r!==null&&(r=Oe.privateKeyFromAsn1(r)),r};Oe.pbe.generatePkcs12Key=function(e,t,r,n,a,i){var s,o;if(typeof i>"u"||i===null){if(!("sha1"in he.md))throw new Error('"sha1" hash algorithm unavailable.');i=he.md.sha1.create()}var u=i.digestLength,c=i.blockLength,l=new he.util.ByteBuffer,f=new he.util.ByteBuffer;if(e!=null){for(o=0;o<e.length;o++)f.putInt16(e.charCodeAt(o));f.putInt16(0)}var d=f.length(),p=t.length(),h=new he.util.ByteBuffer;h.fillWithByte(r,c);var _=c*Math.ceil(p/c),v=new he.util.ByteBuffer;for(o=0;o<_;o++)v.putByte(t.at(o%p));var m=c*Math.ceil(d/c),b=new he.util.ByteBuffer;for(o=0;o<m;o++)b.putByte(f.at(o%d));var A=v;A.putBuffer(b);for(var D=Math.ceil(a/u),x=1;x<=D;x++){var Y=new he.util.ByteBuffer;Y.putBytes(h.bytes()),Y.putBytes(A.bytes());for(var X=0;X<n;X++)i.start(),i.update(Y.getBytes()),Y=i.digest();var Z=new he.util.ByteBuffer;for(o=0;o<c;o++)Z.putByte(Y.at(o%u));var W=Math.ceil(p/c)+Math.ceil(d/c),J=new he.util.ByteBuffer;for(s=0;s<W;s++){var ee=new he.util.ByteBuffer(A.getBytes(c)),oe=511;for(o=Z.length()-1;o>=0;o--)oe=oe>>8,oe+=Z.at(o)+ee.at(o),ee.setAt(o,oe&255);J.putBuffer(ee)}A=J,l.putBuffer(Y)}return l.truncate(l.length()-a),l};Oe.pbe.getCipher=function(e,t,r){switch(e){case Oe.oids.pkcs5PBES2:return Oe.pbe.getCipherForPBES2(e,t,r);case Oe.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case Oe.oids["pbewithSHAAnd40BitRC2-CBC"]:return Oe.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};Oe.pbe.getCipherForPBES2=function(e,t,r){var n={},a=[];if(!Q.validate(t,uB,n,a)){var i=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw i.errors=a,i}if(e=Q.derToOid(n.kdfOid),e!==Oe.oids.pkcs5PBKDF2){var i=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw i.oid=e,i.supportedOids=["pkcs5PBKDF2"],i}if(e=Q.derToOid(n.encOid),e!==Oe.oids["aes128-CBC"]&&e!==Oe.oids["aes192-CBC"]&&e!==Oe.oids["aes256-CBC"]&&e!==Oe.oids["des-EDE3-CBC"]&&e!==Oe.oids.desCBC){var i=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw i.oid=e,i.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],i}var s=n.kdfSalt,o=he.util.createBuffer(n.kdfIterationCount);o=o.getInt(o.length()<<3);var u,c;switch(Oe.oids[e]){case"aes128-CBC":u=16,c=he.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,c=he.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,c=he.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,c=he.des.createDecryptionCipher;break;case"desCBC":u=8,c=he.des.createDecryptionCipher;break}var l=$_(n.prfOid),f=he.pkcs5.pbkdf2(r,s,o,u,l),d=n.encIv,p=c(f);return p.start(d),p};Oe.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},a=[];if(!Q.validate(t,cB,n,a)){var i=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw i.errors=a,i}var s=he.util.createBuffer(n.salt),o=he.util.createBuffer(n.iterations);o=o.getInt(o.length()<<3);var u,c,l;switch(e){case Oe.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,c=8,l=he.des.startDecrypting;break;case Oe.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,c=8,l=function(_,v){var m=he.rc2.createDecryptionCipher(_,40);return m.start(v,null),m};break;default:var i=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw i.oid=e,i}var f=$_(n.prfOid),d=Oe.pbe.generatePkcs12Key(r,s,1,o,u,f);f.start();var p=Oe.pbe.generatePkcs12Key(r,s,2,o,c,f);return l(d,p)};Oe.pbe.opensslDeriveBytes=function(e,t,r,n){if(typeof n>"u"||n===null){if(!("md5"in he.md))throw new Error('"md5" hash algorithm unavailable.');n=he.md.md5.create()}t===null&&(t="");for(var a=[k0(n,e+t)],i=16,s=1;i<r;++s,i+=16)a.push(k0(n,a[s-1]+e+t));return a.join("").substr(0,r)};function k0(e,t){return e.start().update(t).digest().getBytes()}function $_(e){var t;if(!e)t="hmacWithSHA1";else if(t=Oe.oids[Q.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return N_(t)}function N_(e){var t=he.md;switch(e){case"hmacWithSHA224":t=he.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function lB(e,t,r,n){var a=Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OCTETSTRING,!1,e),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,t.getBytes())]);return n!=="hmacWithSHA1"&&a.value.push(Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,he.util.hexToBytes(r.toString(16))),Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(Oe.oids[n]).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.NULL,!1,"")])),a}var Ra=Ne,de=Ra.asn1,Ka=Ra.pkcs7asn1=Ra.pkcs7asn1||{};Ra.pkcs7=Ra.pkcs7||{};Ra.pkcs7.asn1=Ka;var R_={name:"ContentInfo",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:de.Class.UNIVERSAL,type:de.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:de.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};Ka.contentInfoValidator=R_;var P_={name:"EncryptedContentInfo",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:de.Class.UNIVERSAL,type:de.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:de.Class.UNIVERSAL,type:de.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:de.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:de.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};Ka.envelopedDataValidator={name:"EnvelopedData",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:de.Class.UNIVERSAL,type:de.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:de.Class.UNIVERSAL,type:de.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(P_)};Ka.encryptedDataValidator={name:"EncryptedData",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:de.Class.UNIVERSAL,type:de.Type.INTEGER,constructed:!1,capture:"version"}].concat(P_)};var fB={name:"SignerInfo",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:de.Class.UNIVERSAL,type:de.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:de.Class.UNIVERSAL,type:de.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:de.Class.UNIVERSAL,type:de.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:de.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:de.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:de.Class.UNIVERSAL,type:de.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:de.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};Ka.signedDataValidator={name:"SignedData",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:de.Class.UNIVERSAL,type:de.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:de.Class.UNIVERSAL,type:de.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},R_,{name:"SignedData.Certificates",tagClass:de.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:de.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:de.Class.UNIVERSAL,type:de.Type.SET,capture:"signerInfos",optional:!0,value:[fB]}]};Ka.recipientInfoValidator={name:"RecipientInfo",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:de.Class.UNIVERSAL,type:de.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:de.Class.UNIVERSAL,type:de.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:de.Class.UNIVERSAL,type:de.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:de.Class.UNIVERSAL,type:de.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:de.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:de.Class.UNIVERSAL,type:de.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]};var Kn=Ne;Kn.mgf=Kn.mgf||{};var dB=Kn.mgf.mgf1=Kn.mgf1=Kn.mgf1||{};dB.create=function(e){var t={generate:function(r,n){for(var a=new Kn.util.ByteBuffer,i=Math.ceil(n/e.digestLength),s=0;s<i;s++){var o=new Kn.util.ByteBuffer;o.putInt32(s),e.start(),e.update(r+o.getBytes()),a.putBuffer(e.digest())}return a.truncate(a.length()-n),a.getBytes()}};return t};var Us=Ne;Us.mgf=Us.mgf||{};Us.mgf.mgf1=Us.mgf1;var Fn=Ne,hB=Fn.pss=Fn.pss||{};hB.create=function(e){arguments.length===3&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t=e.md,r=e.mgf,n=t.digestLength,a=e.salt||null;typeof a=="string"&&(a=Fn.util.createBuffer(a));var i;if("saltLength"in e)i=e.saltLength;else if(a!==null)i=a.length();else throw new Error("Salt length not specified or specific salt not given.");if(a!==null&&a.length()!==i)throw new Error("Given salt length does not match length of given salt.");var s=e.prng||Fn.random,o={};return o.encode=function(u,c){var l,f=c-1,d=Math.ceil(f/8),p=u.digest().getBytes();if(d<n+i+2)throw new Error("Message is too long to encrypt.");var h;a===null?h=s.getBytesSync(i):h=a.bytes();var _=new Fn.util.ByteBuffer;_.fillWithByte(0,8),_.putBytes(p),_.putBytes(h),t.start(),t.update(_.getBytes());var v=t.digest().getBytes(),m=new Fn.util.ByteBuffer;m.fillWithByte(0,d-i-n-2),m.putByte(1),m.putBytes(h);var b=m.getBytes(),A=d-n-1,D=r.generate(v,A),x="";for(l=0;l<A;l++)x+=String.fromCharCode(b.charCodeAt(l)^D.charCodeAt(l));var Y=65280>>8*d-f&255;return x=String.fromCharCode(x.charCodeAt(0)&~Y)+x.substr(1),x+v+"¼"},o.verify=function(u,c,l){var f,d=l-1,p=Math.ceil(d/8);if(c=c.substr(-p),p<n+i+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(c.charCodeAt(p-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var h=p-n-1,_=c.substr(0,h),v=c.substr(h,n),m=65280>>8*p-d&255;if(_.charCodeAt(0)&m)throw new Error("Bits beyond keysize not zero as expected.");var b=r.generate(v,h),A="";for(f=0;f<h;f++)A+=String.fromCharCode(_.charCodeAt(f)^b.charCodeAt(f));A=String.fromCharCode(A.charCodeAt(0)&~m)+A.substr(1);var D=p-n-i-2;for(f=0;f<D;f++)if(A.charCodeAt(f)!==0)throw new Error("Leftmost octets not zero as expected");if(A.charCodeAt(D)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var x=A.substr(-i),Y=new Fn.util.ByteBuffer;Y.fillWithByte(0,8),Y.putBytes(u),Y.putBytes(x),t.start(),t.update(Y.getBytes());var X=t.digest().getBytes();return v===X},o};var ye=Ne,E=ye.asn1,ce=ye.pki=ye.pki||{},je=ce.oids,dt={};dt.CN=je.commonName;dt.commonName="CN";dt.C=je.countryName;dt.countryName="C";dt.L=je.localityName;dt.localityName="L";dt.ST=je.stateOrProvinceName;dt.stateOrProvinceName="ST";dt.O=je.organizationName;dt.organizationName="O";dt.OU=je.organizationalUnitName;dt.organizationalUnitName="OU";dt.E=je.emailAddress;dt.emailAddress="E";var L_=ye.pki.rsa.publicKeyValidator,pB={name:"Certificate",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:E.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:E.Class.UNIVERSAL,type:E.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:E.Class.UNIVERSAL,type:E.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:E.Class.UNIVERSAL,type:E.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:E.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:E.Class.UNIVERSAL,type:E.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:E.Class.UNIVERSAL,type:E.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:E.Class.UNIVERSAL,type:E.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:E.Class.UNIVERSAL,type:E.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},L_,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:E.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:E.Class.UNIVERSAL,type:E.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:E.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:E.Class.UNIVERSAL,type:E.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:E.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:E.Class.UNIVERSAL,type:E.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:E.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:E.Class.UNIVERSAL,type:E.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},mB={name:"rsapss",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:E.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:E.Class.UNIVERSAL,type:E.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:E.Class.UNIVERSAL,type:E.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:E.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:E.Class.UNIVERSAL,type:E.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:E.Class.UNIVERSAL,type:E.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:E.Class.UNIVERSAL,type:E.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:E.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:E.Class.UNIVERSAL,type:E.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:E.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:E.Class.UNIVERSAL,type:E.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},vB={name:"CertificationRequestInfo",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:E.Class.UNIVERSAL,type:E.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},L_,{name:"CertificationRequestInfo.attributes",tagClass:E.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:E.Class.UNIVERSAL,type:E.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:E.Class.UNIVERSAL,type:E.Type.SET,constructed:!0}]}]}]},gB={name:"CertificationRequest",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[vB,{name:"CertificationRequest.signatureAlgorithm",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:E.Class.UNIVERSAL,type:E.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:E.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:E.Class.UNIVERSAL,type:E.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};ce.RDNAttributesAsArray=function(e,t){for(var r=[],n,a,i,s=0;s<e.value.length;++s){n=e.value[s];for(var o=0;o<n.value.length;++o)i={},a=n.value[o],i.type=E.derToOid(a.value[0].value),i.value=a.value[1].value,i.valueTagClass=a.value[1].type,i.type in je&&(i.name=je[i.type],i.name in dt&&(i.shortName=dt[i.name])),t&&(t.update(i.type),t.update(i.value)),r.push(i)}return r};ce.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],a=E.derToOid(n.value[0].value),i=n.value[1].value,s=0;s<i.length;++s){var o={};if(o.type=a,o.value=i[s].value,o.valueTagClass=i[s].type,o.type in je&&(o.name=je[o.type],o.name in dt&&(o.shortName=dt[o.name])),o.type===je.extensionRequest){o.extensions=[];for(var u=0;u<o.value.length;++u)o.extensions.push(ce.certificateExtensionFromAsn1(o.value[u]))}t.push(o)}return t};function Sn(e,t){typeof t=="string"&&(t={shortName:t});for(var r=null,n,a=0;r===null&&a<e.attributes.length;++a)n=e.attributes[a],(t.type&&t.type===n.type||t.name&&t.name===n.name||t.shortName&&t.shortName===n.shortName)&&(r=n);return r}var Fs=function(e,t,r){var n={};if(e!==je["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:je.sha1},mgf:{algorithmOid:je.mgf1,hash:{algorithmOid:je.sha1}},saltLength:20});var a={},i=[];if(!E.validate(t,mB,a,i)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=i,s}return a.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=E.derToOid(a.hashOid)),a.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=E.derToOid(a.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=E.derToOid(a.maskGenHashOid)),a.saltLength!==void 0&&(n.saltLength=a.saltLength.charCodeAt(0)),n},Ao=function(e){switch(je[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return ye.md.sha1.create();case"md5WithRSAEncryption":return ye.md.md5.create();case"sha256WithRSAEncryption":return ye.md.sha256.create();case"sha384WithRSAEncryption":return ye.md.sha384.create();case"sha512WithRSAEncryption":return ye.md.sha512.create();case"RSASSA-PSS":return ye.md.sha256.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},B_=function(e){var t=e.certificate,r;switch(t.signatureOid){case je.sha1WithRSAEncryption:case je.sha1WithRSASignature:break;case je["RSASSA-PSS"]:var n,a;if(n=je[t.signatureParameters.mgf.hash.algorithmOid],n===void 0||ye.md[n]===void 0){var i=new Error("Unsupported MGF hash function.");throw i.oid=t.signatureParameters.mgf.hash.algorithmOid,i.name=n,i}if(a=je[t.signatureParameters.mgf.algorithmOid],a===void 0||ye.mgf[a]===void 0){var i=new Error("Unsupported MGF function.");throw i.oid=t.signatureParameters.mgf.algorithmOid,i.name=a,i}if(a=ye.mgf[a].create(ye.md[n].create()),n=je[t.signatureParameters.hash.algorithmOid],n===void 0||ye.md[n]===void 0){var i=new Error("Unsupported RSASSA-PSS hash function.");throw i.oid=t.signatureParameters.hash.algorithmOid,i.name=n,i}r=ye.pss.create(ye.md[n].create(),a,t.signatureParameters.saltLength);break}return t.publicKey.verify(e.md.digest().getBytes(),e.signature,r)};ce.certificateFromPem=function(e,t,r){var n=ye.pem.decode(e)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var a=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw a.headerType=n.type,a}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var i=E.fromDer(n.body,r);return ce.certificateFromAsn1(i,t)};ce.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:E.toDer(ce.certificateToAsn1(e)).getBytes()};return ye.pem.encode(r,{maxline:t})};ce.publicKeyFromPem=function(e){var t=ye.pem.decode(e)[0];if(t.type!=="PUBLIC KEY"&&t.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=E.fromDer(t.body);return ce.publicKeyFromAsn1(n)};ce.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:E.toDer(ce.publicKeyToAsn1(e)).getBytes()};return ye.pem.encode(r,{maxline:t})};ce.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:E.toDer(ce.publicKeyToRSAPublicKey(e)).getBytes()};return ye.pem.encode(r,{maxline:t})};ce.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||ye.md.sha1.create(),n=t.type||"RSAPublicKey",a;switch(n){case"RSAPublicKey":a=E.toDer(ce.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":a=E.toDer(ce.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}r.start(),r.update(a);var i=r.digest();if(t.encoding==="hex"){var s=i.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}else{if(t.encoding==="binary")return i.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return i};ce.certificationRequestFromPem=function(e,t,r){var n=ye.pem.decode(e)[0];if(n.type!=="CERTIFICATE REQUEST"){var a=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw a.headerType=n.type,a}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var i=E.fromDer(n.body,r);return ce.certificationRequestFromAsn1(i,t)};ce.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:E.toDer(ce.certificationRequestToAsn1(e)).getBytes()};return ye.pem.encode(r,{maxline:t})};ce.createCertificate=function(){var e={};return e.version=2,e.serialNumber="00",e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return Sn(e.issuer,t)},e.issuer.addField=function(t){or([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return Sn(e.subject,t)},e.subject.addField=function(t){or([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){or(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){or(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)k_(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){typeof t=="string"&&(t={name:t});for(var r=null,n,a=0;r===null&&a<e.extensions.length;++a)n=e.extensions[a],(t.id&&n.id===t.id||t.name&&n.name===t.name)&&(r=n);return r},e.sign=function(t,r){e.md=r||ye.md.sha1.create();var n=je[e.md.algorithm+"WithRSAEncryption"];if(!n){var a=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw a.algorithm=e.md.algorithm,a}e.signatureOid=e.siginfo.algorithmOid=n,e.tbsCertificate=ce.getTBSCertificate(e);var i=E.toDer(e.tbsCertificate);e.md.update(i.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,a=e.subject,i=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw i.expectedIssuer=a.attributes,i.actualIssuer=n.attributes,i}var s=t.md;if(s===null){s=Ao({signatureOid:t.signatureOid,type:"certificate"});var o=t.tbsCertificate||ce.getTBSCertificate(t),u=E.toDer(o);s.update(u.getBytes())}return s!==null&&(r=B_({certificate:e,md:s,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,a=t.subject;if(n.hash&&a.hash)r=n.hash===a.hash;else if(n.attributes.length===a.attributes.length){r=!0;for(var i,s,o=0;r&&o<n.attributes.length;++o)i=n.attributes[o],s=a.attributes[o],(i.type!==s.type||i.value!==s.value)&&(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return ce.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=je.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var n=e.extensions[r];if(n.id===t){var a=e.generateSubjectKeyIdentifier().getBytes();return ye.util.hexToBytes(n.subjectKeyIdentifier)===a}}return!1},e};ce.certificateFromAsn1=function(e,t){var r={},n=[];if(!E.validate(e,pB,r,n)){var a=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw a.errors=n,a}var i=E.derToOid(r.publicKeyOid);if(i!==ce.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=ce.createCertificate();s.version=r.certVersion?r.certVersion.charCodeAt(0):0;var o=ye.util.createBuffer(r.certSerialNumber);s.serialNumber=o.toHex(),s.signatureOid=ye.asn1.derToOid(r.certSignatureOid),s.signatureParameters=Fs(s.signatureOid,r.certSignatureParams,!0),s.siginfo.algorithmOid=ye.asn1.derToOid(r.certinfoSignatureOid),s.siginfo.parameters=Fs(s.siginfo.algorithmOid,r.certinfoSignatureParams,!1),s.signature=r.certSignature;var u=[];if(r.certValidity1UTCTime!==void 0&&u.push(E.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&u.push(E.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&u.push(E.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&u.push(E.generalizedTimeToDate(r.certValidity4GeneralizedTime)),u.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(u.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=u[0],s.validity.notAfter=u[1],s.tbsCertificate=r.tbsCertificate,t){s.md=Ao({signatureOid:s.signatureOid,type:"certificate"});var c=E.toDer(s.tbsCertificate);s.md.update(c.getBytes())}var l=ye.md.sha1.create(),f=E.toDer(r.certIssuer);l.update(f.getBytes()),s.issuer.getField=function(h){return Sn(s.issuer,h)},s.issuer.addField=function(h){or([h]),s.issuer.attributes.push(h)},s.issuer.attributes=ce.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(s.issuer.uniqueId=r.certIssuerUniqueId),s.issuer.hash=l.digest().toHex();var d=ye.md.sha1.create(),p=E.toDer(r.certSubject);return d.update(p.getBytes()),s.subject.getField=function(h){return Sn(s.subject,h)},s.subject.addField=function(h){or([h]),s.subject.attributes.push(h)},s.subject.attributes=ce.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(s.subject.uniqueId=r.certSubjectUniqueId),s.subject.hash=d.digest().toHex(),r.certExtensions?s.extensions=ce.certificateExtensionsFromAsn1(r.certExtensions):s.extensions=[],s.publicKey=ce.publicKeyFromAsn1(r.subjectPublicKeyInfo),s};ce.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],a=0;a<n.value.length;++a)t.push(ce.certificateExtensionFromAsn1(n.value[a]));return t};ce.certificateExtensionFromAsn1=function(e){var t={};if(t.id=E.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===E.Type.BOOLEAN?(t.critical=e.value[1].value.charCodeAt(0)!==0,t.value=e.value[2].value):t.value=e.value[1].value,t.id in je){if(t.name=je[t.id],t.name==="keyUsage"){var r=E.fromDer(t.value),n=0,a=0;r.value.length>1&&(n=r.value.charCodeAt(1),a=r.value.length>2?r.value.charCodeAt(2):0),t.digitalSignature=(n&128)===128,t.nonRepudiation=(n&64)===64,t.keyEncipherment=(n&32)===32,t.dataEncipherment=(n&16)===16,t.keyAgreement=(n&8)===8,t.keyCertSign=(n&4)===4,t.cRLSign=(n&2)===2,t.encipherOnly=(n&1)===1,t.decipherOnly=(a&128)===128}else if(t.name==="basicConstraints"){var r=E.fromDer(t.value);r.value.length>0&&r.value[0].type===E.Type.BOOLEAN?t.cA=r.value[0].value.charCodeAt(0)!==0:t.cA=!1;var i=null;r.value.length>0&&r.value[0].type===E.Type.INTEGER?i=r.value[0].value:r.value.length>1&&(i=r.value[1].value),i!==null&&(t.pathLenConstraint=E.derToInteger(i))}else if(t.name==="extKeyUsage")for(var r=E.fromDer(t.value),s=0;s<r.value.length;++s){var o=E.derToOid(r.value[s].value);o in je?t[je[o]]=!0:t[o]=!0}else if(t.name==="nsCertType"){var r=E.fromDer(t.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),t.client=(n&128)===128,t.server=(n&64)===64,t.email=(n&32)===32,t.objsign=(n&16)===16,t.reserved=(n&8)===8,t.sslCA=(n&4)===4,t.emailCA=(n&2)===2,t.objCA=(n&1)===1}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.altNames=[];for(var u,r=E.fromDer(t.value),c=0;c<r.value.length;++c){u=r.value[c];var l={type:u.type,value:u.value};switch(t.altNames.push(l),u.type){case 1:case 2:case 6:break;case 7:l.ip=ye.util.bytesToIP(u.value);break;case 8:l.oid=E.derToOid(u.value);break}}}else if(t.name==="subjectKeyIdentifier"){var r=E.fromDer(t.value);t.subjectKeyIdentifier=ye.util.bytesToHex(r.value)}}return t};ce.certificationRequestFromAsn1=function(e,t){var r={},n=[];if(!E.validate(e,gB,r,n)){var a=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw a.errors=n,a}var i=E.derToOid(r.publicKeyOid);if(i!==ce.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=ce.createCertificationRequest();if(s.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,s.signatureOid=ye.asn1.derToOid(r.csrSignatureOid),s.signatureParameters=Fs(s.signatureOid,r.csrSignatureParams,!0),s.siginfo.algorithmOid=ye.asn1.derToOid(r.csrSignatureOid),s.siginfo.parameters=Fs(s.siginfo.algorithmOid,r.csrSignatureParams,!1),s.signature=r.csrSignature,s.certificationRequestInfo=r.certificationRequestInfo,t){s.md=Ao({signatureOid:s.signatureOid,type:"certification request"});var o=E.toDer(s.certificationRequestInfo);s.md.update(o.getBytes())}var u=ye.md.sha1.create();return s.subject.getField=function(c){return Sn(s.subject,c)},s.subject.addField=function(c){or([c]),s.subject.attributes.push(c)},s.subject.attributes=ce.RDNAttributesAsArray(r.certificationRequestInfoSubject,u),s.subject.hash=u.digest().toHex(),s.publicKey=ce.publicKeyFromAsn1(r.subjectPublicKeyInfo),s.getAttribute=function(c){return Sn(s,c)},s.addAttribute=function(c){or([c]),s.attributes.push(c)},s.attributes=ce.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),s};ce.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return Sn(e.subject,t)},e.subject.addField=function(t){or([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return Sn(e,t)},e.addAttribute=function(t){or([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){or(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){or(t),e.attributes=t},e.sign=function(t,r){e.md=r||ye.md.sha1.create();var n=je[e.md.algorithm+"WithRSAEncryption"];if(!n){var a=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw a.algorithm=e.md.algorithm,a}e.signatureOid=e.siginfo.algorithmOid=n,e.certificationRequestInfo=ce.getCertificationRequestInfo(e);var i=E.toDer(e.certificationRequestInfo);e.md.update(i.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(r===null){r=Ao({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||ce.getCertificationRequestInfo(e),a=E.toDer(n);r.update(a.getBytes())}return r!==null&&(t=B_({certificate:e,md:r,signature:e.signature})),t},e};function Pa(e){for(var t=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[]),r,n,a=e.attributes,i=0;i<a.length;++i){r=a[i];var s=r.value,o=E.Type.PRINTABLESTRING;"valueTagClass"in r&&(o=r.valueTagClass,o===E.Type.UTF8&&(s=ye.util.encodeUtf8(s))),n=E.create(E.Class.UNIVERSAL,E.Type.SET,!0,[E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(r.type).getBytes()),E.create(E.Class.UNIVERSAL,o,!1,s)])]),t.value.push(n)}return t}function or(e){for(var t,r=0;r<e.length;++r){if(t=e[r],typeof t.name>"u"&&(t.type&&t.type in ce.oids?t.name=ce.oids[t.type]:t.shortName&&t.shortName in dt&&(t.name=ce.oids[dt[t.shortName]])),typeof t.type>"u")if(t.name&&t.name in ce.oids)t.type=ce.oids[t.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=t,n}if(typeof t.shortName>"u"&&t.name&&t.name in dt&&(t.shortName=dt[t.name]),t.type===je.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=E.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var a=0;a<t.extensions.length;++a)t.value.push(ce.certificateExtensionToAsn1(k_(t.extensions[a])))}if(typeof t.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=t,n}}}function k_(e,t){if(t=t||{},typeof e.name>"u"&&e.id&&e.id in ce.oids&&(e.name=ce.oids[e.id]),typeof e.id>"u")if(e.name&&e.name in ce.oids)e.id=ce.oids[e.name];else{var r=new Error("Extension ID not specified.");throw r.extension=e,r}if(typeof e.value<"u")return e;if(e.name==="keyUsage"){var n=0,a=0,i=0;e.digitalSignature&&(a|=128,n=7),e.nonRepudiation&&(a|=64,n=6),e.keyEncipherment&&(a|=32,n=5),e.dataEncipherment&&(a|=16,n=4),e.keyAgreement&&(a|=8,n=3),e.keyCertSign&&(a|=4,n=2),e.cRLSign&&(a|=2,n=1),e.encipherOnly&&(a|=1,n=0),e.decipherOnly&&(i|=128,n=7);var s=String.fromCharCode(n);i!==0?s+=String.fromCharCode(a)+String.fromCharCode(i):a!==0&&(s+=String.fromCharCode(a)),e.value=E.create(E.Class.UNIVERSAL,E.Type.BITSTRING,!1,s)}else if(e.name==="basicConstraints")e.value=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(E.create(E.Class.UNIVERSAL,E.Type.BOOLEAN,!1,"ÿ")),"pathLenConstraint"in e&&e.value.value.push(E.create(E.Class.UNIVERSAL,E.Type.INTEGER,!1,E.integerToDer(e.pathLenConstraint).getBytes()));else if(e.name==="extKeyUsage"){e.value=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[]);var o=e.value.value;for(var u in e)e[u]===!0&&(u in je?o.push(E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(je[u]).getBytes())):u.indexOf(".")!==-1&&o.push(E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(u).getBytes())))}else if(e.name==="nsCertType"){var n=0,a=0;e.client&&(a|=128,n=7),e.server&&(a|=64,n=6),e.email&&(a|=32,n=5),e.objsign&&(a|=16,n=4),e.reserved&&(a|=8,n=3),e.sslCA&&(a|=4,n=2),e.emailCA&&(a|=2,n=1),e.objCA&&(a|=1,n=0);var s=String.fromCharCode(n);a!==0&&(s+=String.fromCharCode(a)),e.value=E.create(E.Class.UNIVERSAL,E.Type.BITSTRING,!1,s)}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.value=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[]);for(var c,l=0;l<e.altNames.length;++l){c=e.altNames[l];var s=c.value;if(c.type===7&&c.ip){if(s=ye.util.bytesFromIP(c.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else c.type===8&&(c.oid?s=E.oidToDer(E.oidToDer(c.oid)):s=E.oidToDer(s));e.value.value.push(E.create(E.Class.CONTEXT_SPECIFIC,c.type,!1,s))}}else if(e.name==="nsComment"&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=E.create(E.Class.UNIVERSAL,E.Type.IA5STRING,!1,e.comment)}else if(e.name==="subjectKeyIdentifier"&&t.cert){var f=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=f.toHex(),e.value=E.create(E.Class.UNIVERSAL,E.Type.OCTETSTRING,!1,f.getBytes())}else if(e.name==="authorityKeyIdentifier"&&t.cert){e.value=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[]);var o=e.value.value;if(e.keyIdentifier){var d=e.keyIdentifier===!0?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;o.push(E.create(E.Class.CONTEXT_SPECIFIC,0,!1,d))}if(e.authorityCertIssuer){var p=[E.create(E.Class.CONTEXT_SPECIFIC,4,!0,[Pa(e.authorityCertIssuer===!0?t.cert.issuer:e.authorityCertIssuer)])];o.push(E.create(E.Class.CONTEXT_SPECIFIC,1,!0,p))}if(e.serialNumber){var h=ye.util.hexToBytes(e.serialNumber===!0?t.cert.serialNumber:e.serialNumber);o.push(E.create(E.Class.CONTEXT_SPECIFIC,2,!1,h))}}else if(e.name==="cRLDistributionPoints"){e.value=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[]);for(var o=e.value.value,_=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[]),v=E.create(E.Class.CONTEXT_SPECIFIC,0,!0,[]),c,l=0;l<e.altNames.length;++l){c=e.altNames[l];var s=c.value;if(c.type===7&&c.ip){if(s=ye.util.bytesFromIP(c.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else c.type===8&&(c.oid?s=E.oidToDer(E.oidToDer(c.oid)):s=E.oidToDer(s));v.value.push(E.create(E.Class.CONTEXT_SPECIFIC,c.type,!1,s))}_.value.push(E.create(E.Class.CONTEXT_SPECIFIC,0,!0,[v])),o.push(_)}if(typeof e.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=e,r}return e}function Df(e,t){switch(e){case je["RSASSA-PSS"]:var r=[];return t.hash.algorithmOid!==void 0&&r.push(E.create(E.Class.CONTEXT_SPECIFIC,0,!0,[E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(t.hash.algorithmOid).getBytes()),E.create(E.Class.UNIVERSAL,E.Type.NULL,!1,"")])])),t.mgf.algorithmOid!==void 0&&r.push(E.create(E.Class.CONTEXT_SPECIFIC,1,!0,[E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(t.mgf.algorithmOid).getBytes()),E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(t.mgf.hash.algorithmOid).getBytes()),E.create(E.Class.UNIVERSAL,E.Type.NULL,!1,"")])])])),t.saltLength!==void 0&&r.push(E.create(E.Class.CONTEXT_SPECIFIC,2,!0,[E.create(E.Class.UNIVERSAL,E.Type.INTEGER,!1,E.integerToDer(t.saltLength).getBytes())])),E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,r);default:return E.create(E.Class.UNIVERSAL,E.Type.NULL,!1,"")}}function _B(e){var t=E.create(E.Class.CONTEXT_SPECIFIC,0,!0,[]);if(e.attributes.length===0)return t;for(var r=e.attributes,n=0;n<r.length;++n){var a=r[n],i=a.value,s=E.Type.UTF8;"valueTagClass"in a&&(s=a.valueTagClass),s===E.Type.UTF8&&(i=ye.util.encodeUtf8(i));var o=!1;"valueConstructed"in a&&(o=a.valueConstructed);var u=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(a.type).getBytes()),E.create(E.Class.UNIVERSAL,E.Type.SET,!0,[E.create(E.Class.UNIVERSAL,s,o,i)])]);t.value.push(u)}return t}var yB=new Date("1950-01-01T00:00:00Z"),EB=new Date("2050-01-01T00:00:00Z");function U0(e){return e>=yB&&e<EB?E.create(E.Class.UNIVERSAL,E.Type.UTCTIME,!1,E.dateToUtcTime(e)):E.create(E.Class.UNIVERSAL,E.Type.GENERALIZEDTIME,!1,E.dateToGeneralizedTime(e))}ce.getTBSCertificate=function(e){var t=U0(e.validity.notBefore),r=U0(e.validity.notAfter),n=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.CONTEXT_SPECIFIC,0,!0,[E.create(E.Class.UNIVERSAL,E.Type.INTEGER,!1,E.integerToDer(e.version).getBytes())]),E.create(E.Class.UNIVERSAL,E.Type.INTEGER,!1,ye.util.hexToBytes(e.serialNumber)),E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(e.siginfo.algorithmOid).getBytes()),Df(e.siginfo.algorithmOid,e.siginfo.parameters)]),Pa(e.issuer),E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[t,r]),Pa(e.subject),ce.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&n.value.push(E.create(E.Class.CONTEXT_SPECIFIC,1,!0,[E.create(E.Class.UNIVERSAL,E.Type.BITSTRING,!1,"\0"+e.issuer.uniqueId)])),e.subject.uniqueId&&n.value.push(E.create(E.Class.CONTEXT_SPECIFIC,2,!0,[E.create(E.Class.UNIVERSAL,E.Type.BITSTRING,!1,"\0"+e.subject.uniqueId)])),e.extensions.length>0&&n.value.push(ce.certificateExtensionsToAsn1(e.extensions)),n};ce.getCertificationRequestInfo=function(e){var t=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.INTEGER,!1,E.integerToDer(e.version).getBytes()),Pa(e.subject),ce.publicKeyToAsn1(e.publicKey),_B(e)]);return t};ce.distinguishedNameToAsn1=function(e){return Pa(e)};ce.certificateToAsn1=function(e){var t=e.tbsCertificate||ce.getTBSCertificate(e);return E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[t,E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(e.signatureOid).getBytes()),Df(e.signatureOid,e.signatureParameters)]),E.create(E.Class.UNIVERSAL,E.Type.BITSTRING,!1,"\0"+e.signature)])};ce.certificateExtensionsToAsn1=function(e){var t=E.create(E.Class.CONTEXT_SPECIFIC,3,!0,[]),r=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(ce.certificateExtensionToAsn1(e[n]));return t};ce.certificateExtensionToAsn1=function(e){var t=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[]);t.value.push(E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(e.id).getBytes())),e.critical&&t.value.push(E.create(E.Class.UNIVERSAL,E.Type.BOOLEAN,!1,"ÿ"));var r=e.value;return typeof e.value!="string"&&(r=E.toDer(r).getBytes()),t.value.push(E.create(E.Class.UNIVERSAL,E.Type.OCTETSTRING,!1,r)),t};ce.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||ce.getCertificationRequestInfo(e);return E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[t,E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(e.signatureOid).getBytes()),Df(e.signatureOid,e.signatureParameters)]),E.create(E.Class.UNIVERSAL,E.Type.BITSTRING,!1,"\0"+e.signature)])};ce.createCaStore=function(e){var t={certs:{}};t.getIssuer=function(s){var o=r(s.issuer);return o},t.addCertificate=function(s){if(typeof s=="string"&&(s=ye.pki.certificateFromPem(s)),n(s.subject),!t.hasCertificate(s))if(s.subject.hash in t.certs){var o=t.certs[s.subject.hash];ye.util.isArray(o)||(o=[o]),o.push(s),t.certs[s.subject.hash]=o}else t.certs[s.subject.hash]=s},t.hasCertificate=function(s){typeof s=="string"&&(s=ye.pki.certificateFromPem(s));var o=r(s.subject);if(!o)return!1;ye.util.isArray(o)||(o=[o]);for(var u=E.toDer(ce.certificateToAsn1(s)).getBytes(),c=0;c<o.length;++c){var l=E.toDer(ce.certificateToAsn1(o[c])).getBytes();if(u===l)return!0}return!1},t.listAllCertificates=function(){var s=[];for(var o in t.certs)if(t.certs.hasOwnProperty(o)){var u=t.certs[o];if(!ye.util.isArray(u))s.push(u);else for(var c=0;c<u.length;++c)s.push(u[c])}return s},t.removeCertificate=function(s){var o;if(typeof s=="string"&&(s=ye.pki.certificateFromPem(s)),n(s.subject),!t.hasCertificate(s))return null;var u=r(s.subject);if(!ye.util.isArray(u))return o=t.certs[s.subject.hash],delete t.certs[s.subject.hash],o;for(var c=E.toDer(ce.certificateToAsn1(s)).getBytes(),l=0;l<u.length;++l){var f=E.toDer(ce.certificateToAsn1(u[l])).getBytes();c===f&&(o=u[l],u.splice(l,1))}return u.length===0&&delete t.certs[s.subject.hash],o};function r(s){return n(s),t.certs[s.hash]||null}function n(s){if(!s.hash){var o=ye.md.sha1.create();s.attributes=ce.RDNAttributesAsArray(Pa(s),o),s.hash=o.digest().toHex()}}if(e)for(var a=0;a<e.length;++a){var i=e[a];t.addCertificate(i)}return t};ce.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};ce.verifyCertificateChain=function(e,t,r){typeof r=="function"&&(r={verify:r}),r=r||{},t=t.slice(0);var n=t.slice(0),a=r.validityCheckDate;typeof a>"u"&&(a=new Date);var i=!0,s=null,o=0;do{var u=t.shift(),c=null,l=!1;if(a&&(a<u.validity.notBefore||a>u.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:ce.certificateError.certificate_expired,notBefore:u.validity.notBefore,notAfter:u.validity.notAfter,now:a}),s===null){if(c=t[0]||e.getIssuer(u),c===null&&u.isIssuer(u)&&(l=!0,c=u),c){var f=c;ye.util.isArray(f)||(f=[f]);for(var d=!1;!d&&f.length>0;){c=f.shift();try{d=c.verify(u)}catch{}}d||(s={message:"Certificate signature is invalid.",error:ce.certificateError.bad_certificate})}s===null&&(!c||l)&&!e.hasCertificate(u)&&(s={message:"Certificate is not trusted.",error:ce.certificateError.unknown_ca})}if(s===null&&c&&!u.isIssuer(c)&&(s={message:"Certificate issuer is invalid.",error:ce.certificateError.bad_certificate}),s===null)for(var p={keyUsage:!0,basicConstraints:!0},h=0;s===null&&h<u.extensions.length;++h){var _=u.extensions[h];_.critical&&!(_.name in p)&&(s={message:"Certificate has an unsupported critical extension.",error:ce.certificateError.unsupported_certificate})}if(s===null&&(!i||t.length===0&&(!c||l))){var v=u.getExtension("basicConstraints"),m=u.getExtension("keyUsage");if(m!==null&&(!m.keyCertSign||v===null)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:ce.certificateError.bad_certificate}),s===null&&v!==null&&!v.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:ce.certificateError.bad_certificate}),s===null&&m!==null&&"pathLenConstraint"in v){var b=o-1;b>v.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:ce.certificateError.bad_certificate})}}var A=s===null?!0:s.error,D=r.verify?r.verify(A,o,n):A;if(D===!0)s=null;else throw A===!0&&(s={message:"The application rejected the certificate.",error:ce.certificateError.bad_certificate}),(D||D===0)&&(typeof D=="object"&&!ye.util.isArray(D)?(D.message&&(s.message=D.message),D.error&&(s.error=D.error)):typeof D=="string"&&(s.error=D)),s;i=!1,++o}while(t.length>0);return!0};var et=Ne,$=et.asn1,Le=et.pki,Ti=et.pkcs12=et.pkcs12||{},U_={name:"ContentInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:$.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},CB={name:"PFX",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"version"},U_,{name:"PFX.macData",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:$.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:$.Class.UNIVERSAL,type:$.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:$.Class.UNIVERSAL,type:$.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},SB={name:"SafeBag",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:$.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:$.Class.UNIVERSAL,type:$.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},bB={name:"Attribute",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:$.Class.UNIVERSAL,type:$.Type.SET,constructed:!0,capture:"values"}]},TB={name:"CertBag",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:$.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:$.Class.UNIVERSAL,type:$.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function ri(e,t,r,n){for(var a=[],i=0;i<e.length;i++)for(var s=0;s<e[i].safeBags.length;s++){var o=e[i].safeBags[s];if(!(n!==void 0&&o.type!==n)){if(t===null){a.push(o);continue}o.attributes[t]!==void 0&&o.attributes[t].indexOf(r)>=0&&a.push(o)}}return a}Ti.pkcs12FromAsn1=function(e,t,r){typeof t=="string"?(r=t,t=!0):t===void 0&&(t=!0);var n={},a=[];if(!$.validate(e,CB,n,a)){var i=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw i.errors=i,i}var s={version:n.version.charCodeAt(0),safeContents:[],getBags:function(v){var m={},b;return"localKeyId"in v?b=v.localKeyId:"localKeyIdHex"in v&&(b=et.util.hexToBytes(v.localKeyIdHex)),b===void 0&&!("friendlyName"in v)&&"bagType"in v&&(m[v.bagType]=ri(s.safeContents,null,null,v.bagType)),b!==void 0&&(m.localKeyId=ri(s.safeContents,"localKeyId",b,v.bagType)),"friendlyName"in v&&(m.friendlyName=ri(s.safeContents,"friendlyName",v.friendlyName,v.bagType)),m},getBagsByFriendlyName:function(v,m){return ri(s.safeContents,"friendlyName",v,m)},getBagsByLocalKeyId:function(v,m){return ri(s.safeContents,"localKeyId",v,m)}};if(n.version.charCodeAt(0)!==3){var i=new Error("PKCS#12 PFX of version other than 3 not supported.");throw i.version=n.version.charCodeAt(0),i}if($.derToOid(n.contentType)!==Le.oids.data){var i=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw i.oid=$.derToOid(n.contentType),i}var o=n.content.value[0];if(o.tagClass!==$.Class.UNIVERSAL||o.type!==$.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(o=$f(o),n.mac){var u=null,c=0,l=$.derToOid(n.macAlgorithm);switch(l){case Le.oids.sha1:u=et.md.sha1.create(),c=20;break;case Le.oids.sha256:u=et.md.sha256.create(),c=32;break;case Le.oids.sha384:u=et.md.sha384.create(),c=48;break;case Le.oids.sha512:u=et.md.sha512.create(),c=64;break;case Le.oids.md5:u=et.md.md5.create(),c=16;break}if(u===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+l);var f=new et.util.ByteBuffer(n.macSalt),d="macIterations"in n?parseInt(et.util.bytesToHex(n.macIterations),16):1,p=Ti.generateKey(r,f,3,d,c,u),h=et.hmac.create();h.start(u,p),h.update(o.value);var _=h.getMac();if(_.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return AB(s,o.value,t,r),s};function $f(e){if(e.composed||e.constructed){for(var t=et.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function AB(e,t,r,n){if(t=$.fromDer(t,r),t.tagClass!==$.Class.UNIVERSAL||t.type!==$.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var a=0;a<t.value.length;a++){var i=t.value[a],s={},o=[];if(!$.validate(i,U_,s,o)){var u=new Error("Cannot read ContentInfo.");throw u.errors=o,u}var c={encrypted:!1},l=null,f=s.content.value[0];switch($.derToOid(s.contentType)){case Le.oids.data:if(f.tagClass!==$.Class.UNIVERSAL||f.type!==$.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");l=$f(f).value;break;case Le.oids.encryptedData:l=wB(f,n),c.encrypted=!0;break;default:var u=new Error("Unsupported PKCS#12 contentType.");throw u.contentType=$.derToOid(s.contentType),u}c.safeBags=IB(l,r,n),e.safeContents.push(c)}}function wB(e,t){var r={},n=[];if(!$.validate(e,et.pkcs7.asn1.encryptedDataValidator,r,n)){var a=new Error("Cannot read EncryptedContentInfo.");throw a.errors=n,a}var i=$.derToOid(r.contentType);if(i!==Le.oids.data){var a=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw a.oid=i,a}i=$.derToOid(r.encAlgorithm);var s=Le.pbe.getCipher(i,r.encParameter,t),o=$f(r.encryptedContentAsn1),u=et.util.createBuffer(o.value);if(s.update(u),!s.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return s.output.getBytes()}function IB(e,t,r){if(!t&&e.length===0)return[];if(e=$.fromDer(e,t),e.tagClass!==$.Class.UNIVERSAL||e.type!==$.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],a=0;a<e.value.length;a++){var i=e.value[a],s={},o=[];if(!$.validate(i,SB,s,o)){var u=new Error("Cannot read SafeBag.");throw u.errors=o,u}var c={type:$.derToOid(s.bagId),attributes:OB(s.bagAttributes)};n.push(c);var l,f,d=s.bagValue.value[0];switch(c.type){case Le.oids.pkcs8ShroudedKeyBag:if(d=Le.decryptPrivateKeyInfo(d,r),d===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case Le.oids.keyBag:try{c.key=Le.privateKeyFromAsn1(d)}catch{c.key=null,c.asn1=d}continue;case Le.oids.certBag:l=TB,f=function(){if($.derToOid(s.certId)!==Le.oids.x509Certificate){var h=new Error("Unsupported certificate type, only X.509 supported.");throw h.oid=$.derToOid(s.certId),h}var _=$.fromDer(s.cert,t);try{c.cert=Le.certificateFromAsn1(_,!0)}catch{c.cert=null,c.asn1=_}};break;default:var u=new Error("Unsupported PKCS#12 SafeBag type.");throw u.oid=c.type,u}if(l!==void 0&&!$.validate(d,l,s,o)){var u=new Error("Cannot read PKCS#12 "+l.name);throw u.errors=o,u}f()}return n}function OB(e){var t={};if(e!==void 0)for(var r=0;r<e.length;++r){var n={},a=[];if(!$.validate(e[r],bB,n,a)){var i=new Error("Cannot read PKCS#12 BagAttribute.");throw i.errors=a,i}var s=$.derToOid(n.oid);if(Le.oids[s]!==void 0){t[Le.oids[s]]=[];for(var o=0;o<n.values.length;++o)t[Le.oids[s]].push(n.values[o].value)}}return t}Ti.toPkcs12Asn1=function(e,t,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var a=n.localKeyId,i;if(a!==null)a=et.util.hexToBytes(a);else if(n.generateLocalKeyId)if(t){var s=et.util.isArray(t)?t[0]:t;typeof s=="string"&&(s=Le.certificateFromPem(s));var o=et.md.sha1.create();o.update($.toDer(Le.certificateToAsn1(s)).getBytes()),a=o.digest().getBytes()}else a=et.random.getBytes(20);var u=[];a!==null&&u.push($.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(Le.oids.localKeyId).getBytes()),$.create($.Class.UNIVERSAL,$.Type.SET,!0,[$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,a)])])),"friendlyName"in n&&u.push($.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(Le.oids.friendlyName).getBytes()),$.create($.Class.UNIVERSAL,$.Type.SET,!0,[$.create($.Class.UNIVERSAL,$.Type.BMPSTRING,!1,n.friendlyName)])])),u.length>0&&(i=$.create($.Class.UNIVERSAL,$.Type.SET,!0,u));var c=[],l=[];t!==null&&(et.util.isArray(t)?l=t:l=[t]);for(var f=[],d=0;d<l.length;++d){t=l[d],typeof t=="string"&&(t=Le.certificateFromPem(t));var p=d===0?i:void 0,h=Le.certificateToAsn1(t),_=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(Le.oids.certBag).getBytes()),$.create($.Class.CONTEXT_SPECIFIC,0,!0,[$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(Le.oids.x509Certificate).getBytes()),$.create($.Class.CONTEXT_SPECIFIC,0,!0,[$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,$.toDer(h).getBytes())])])]),p]);f.push(_)}if(f.length>0){var v=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,f),m=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(Le.oids.data).getBytes()),$.create($.Class.CONTEXT_SPECIFIC,0,!0,[$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,$.toDer(v).getBytes())])]);c.push(m)}var b=null;if(e!==null){var A=Le.wrapRsaPrivateKey(Le.privateKeyToAsn1(e));r===null?b=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(Le.oids.keyBag).getBytes()),$.create($.Class.CONTEXT_SPECIFIC,0,!0,[A]),i]):b=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(Le.oids.pkcs8ShroudedKeyBag).getBytes()),$.create($.Class.CONTEXT_SPECIFIC,0,!0,[Le.encryptPrivateKeyInfo(A,r,n)]),i]);var D=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[b]),x=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(Le.oids.data).getBytes()),$.create($.Class.CONTEXT_SPECIFIC,0,!0,[$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,$.toDer(D).getBytes())])]);c.push(x)}var Y=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,c),X;if(n.useMac){var o=et.md.sha1.create(),Z=new et.util.ByteBuffer(et.random.getBytes(n.saltSize)),W=n.count,e=Ti.generateKey(r,Z,3,W,20),J=et.hmac.create();J.start(o,e),J.update($.toDer(Y).getBytes());var ee=J.getMac();X=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(Le.oids.sha1).getBytes()),$.create($.Class.UNIVERSAL,$.Type.NULL,!1,"")]),$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,ee.getBytes())]),$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,Z.getBytes()),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,$.integerToDer(W).getBytes())])}return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,$.integerToDer(3).getBytes()),$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(Le.oids.data).getBytes()),$.create($.Class.CONTEXT_SPECIFIC,0,!0,[$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,$.toDer(Y).getBytes())])]),X])};Ti.generateKey=et.pbe.generatePkcs12Key;var bn=Ne,Nf=bn.asn1,La=bn.pki=bn.pki||{};La.pemToDer=function(e){var t=bn.pem.decode(e)[0];if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return bn.util.createBuffer(t.body)};La.privateKeyFromPem=function(e){var t=bn.pem.decode(e)[0];if(t.type!=="PRIVATE KEY"&&t.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=Nf.fromDer(t.body);return La.privateKeyFromAsn1(n)};La.privateKeyToPem=function(e,t){var r={type:"RSA PRIVATE KEY",body:Nf.toDer(La.privateKeyToAsn1(e)).getBytes()};return bn.pem.encode(r,{maxline:t})};La.privateKeyInfoToPem=function(e,t){var r={type:"PRIVATE KEY",body:Nf.toDer(e).getBytes()};return bn.pem.encode(r,{maxline:t})};var te=Ne,wo=function(e,t,r,n){var a=te.util.createBuffer(),i=e.length>>1,s=i+(e.length&1),o=e.substr(0,s),u=e.substr(i,s),c=te.util.createBuffer(),l=te.hmac.create();r=t+r;var f=Math.ceil(n/16),d=Math.ceil(n/20);l.start("MD5",o);var p=te.util.createBuffer();c.putBytes(r);for(var h=0;h<f;++h)l.start(null,null),l.update(c.getBytes()),c.putBuffer(l.digest()),l.start(null,null),l.update(c.bytes()+r),p.putBuffer(l.digest());l.start("SHA1",u);var _=te.util.createBuffer();c.clear(),c.putBytes(r);for(var h=0;h<d;++h)l.start(null,null),l.update(c.getBytes()),c.putBuffer(l.digest()),l.start(null,null),l.update(c.bytes()+r),_.putBuffer(l.digest());return a.putBytes(te.util.xorBytes(p.getBytes(),_.getBytes(),n)),a},xB=function(e,t,r){var n=te.hmac.create();n.start("SHA1",e);var a=te.util.createBuffer();return a.putInt32(t[0]),a.putInt32(t[1]),a.putByte(r.type),a.putByte(r.version.major),a.putByte(r.version.minor),a.putInt16(r.length),a.putBytes(r.fragment.bytes()),n.update(a.getBytes()),n.digest().getBytes()},DB=function(e,t,r){var n=!1;try{var a=e.deflate(t.fragment.getBytes());t.fragment=te.util.createBuffer(a),t.length=a.length,n=!0}catch{}return n},$B=function(e,t,r){var n=!1;try{var a=e.inflate(t.fragment.getBytes());t.fragment=te.util.createBuffer(a),t.length=a.length,n=!0}catch{}return n},Zt=function(e,t){var r=0;switch(t){case 1:r=e.getByte();break;case 2:r=e.getInt16();break;case 3:r=e.getInt24();break;case 4:r=e.getInt32();break}return te.util.createBuffer(e.getBytes(r))},ar=function(e,t,r){e.putInt(r.length(),t<<3),e.putBuffer(r)},T={};T.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};T.SupportedVersions=[T.Versions.TLS_1_1,T.Versions.TLS_1_0];T.Version=T.SupportedVersions[0];T.MaxFragment=15360;T.ConnectionEnd={server:0,client:1};T.PRFAlgorithm={tls_prf_sha256:0};T.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};T.CipherType={stream:0,block:1,aead:2};T.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};T.CompressionMethod={none:0,deflate:1};T.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};T.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};T.Alert={};T.Alert.Level={warning:1,fatal:2};T.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};T.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};T.CipherSuites={};T.getCipherSuite=function(e){var t=null;for(var r in T.CipherSuites){var n=T.CipherSuites[r];if(n.id[0]===e.charCodeAt(0)&&n.id[1]===e.charCodeAt(1)){t=n;break}}return t};T.handleUnexpected=function(e,t){var r=!e.open&&e.entity===T.ConnectionEnd.client;r||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.unexpected_message}})};T.handleHelloRequest=function(e,t,r){!e.handshaking&&e.handshakes>0&&(T.queue(e,T.createAlert(e,{level:T.Alert.Level.warning,description:T.Alert.Description.no_renegotiation})),T.flush(e)),e.process()};T.parseHelloMessage=function(e,t,r){var n=null,a=e.entity===T.ConnectionEnd.client;if(r<38)e.error(e,{message:a?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});else{var i=t.fragment,s=i.length();if(n={version:{major:i.getByte(),minor:i.getByte()},random:te.util.createBuffer(i.getBytes(32)),session_id:Zt(i,1),extensions:[]},a?(n.cipher_suite=i.getBytes(2),n.compression_method=i.getByte()):(n.cipher_suites=Zt(i,2),n.compression_methods=Zt(i,1)),s=r-(s-i.length()),s>0){for(var o=Zt(i,2);o.length()>0;)n.extensions.push({type:[o.getByte(),o.getByte()],data:Zt(o,2)});if(!a)for(var u=0;u<n.extensions.length;++u){var c=n.extensions[u];if(c.type[0]===0&&c.type[1]===0)for(var l=Zt(c.data,2);l.length()>0;){var f=l.getByte();if(f!==0)break;e.session.extensions.server_name.serverNameList.push(Zt(l,2).getBytes())}}}if(e.session.version&&(n.version.major!==e.session.version.major||n.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.protocol_version}});if(a)e.session.cipherSuite=T.getCipherSuite(n.cipher_suite);else for(var d=te.util.createBuffer(n.cipher_suites.bytes());d.length()>0&&(e.session.cipherSuite=T.getCipherSuite(d.getBytes(2)),e.session.cipherSuite===null););if(e.session.cipherSuite===null)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.handshake_failure},cipherSuite:te.util.bytesToHex(n.cipher_suite)});a?e.session.compressionMethod=n.compression_method:e.session.compressionMethod=T.CompressionMethod.none}return n};T.createSecurityParameters=function(e,t){var r=e.entity===T.ConnectionEnd.client,n=t.random.bytes(),a=r?e.session.sp.client_random:n,i=r?n:T.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:T.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:a,server_random:i}};T.handleServerHello=function(e,t,r){var n=T.parseHelloMessage(e,t,r);if(!e.fail){if(n.version.minor<=e.version.minor)e.version.minor=n.version.minor;else return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.protocol_version}});e.session.version=e.version;var a=n.session_id.bytes();a.length>0&&a===e.session.id?(e.expect=F_,e.session.resuming=!0,e.session.sp.server_random=n.random.bytes()):(e.expect=RB,e.session.resuming=!1,T.createSecurityParameters(e,n)),e.session.id=a,e.process()}};T.handleClientHello=function(e,t,r){var n=T.parseHelloMessage(e,t,r);if(!e.fail){var a=n.session_id.bytes(),i=null;if(e.sessionCache&&(i=e.sessionCache.getSession(a),i===null?a="":(i.version.major!==n.version.major||i.version.minor>n.version.minor)&&(i=null,a="")),a.length===0&&(a=te.random.getBytes(32)),e.session.id=a,e.session.clientHelloVersion=n.version,e.session.sp={},i)e.version=e.session.version=i.version,e.session.sp=i.sp;else{for(var s,o=1;o<T.SupportedVersions.length&&(s=T.SupportedVersions[o],!(s.minor<=n.version.minor));++o);e.version={major:s.major,minor:s.minor},e.session.version=e.version}i!==null?(e.expect=Rf,e.session.resuming=!0,e.session.sp.client_random=n.random.bytes()):(e.expect=e.verifyClient!==!1?MB:Dc,e.session.resuming=!1,T.createSecurityParameters(e,n)),e.open=!0,T.queue(e,T.createRecord(e,{type:T.ContentType.handshake,data:T.createServerHello(e)})),e.session.resuming?(T.queue(e,T.createRecord(e,{type:T.ContentType.change_cipher_spec,data:T.createChangeCipherSpec()})),e.state.pending=T.createConnectionState(e),e.state.current.write=e.state.pending.write,T.queue(e,T.createRecord(e,{type:T.ContentType.handshake,data:T.createFinished(e)}))):(T.queue(e,T.createRecord(e,{type:T.ContentType.handshake,data:T.createCertificate(e)})),e.fail||(T.queue(e,T.createRecord(e,{type:T.ContentType.handshake,data:T.createServerKeyExchange(e)})),e.verifyClient!==!1&&T.queue(e,T.createRecord(e,{type:T.ContentType.handshake,data:T.createCertificateRequest(e)})),T.queue(e,T.createRecord(e,{type:T.ContentType.handshake,data:T.createServerHelloDone(e)})))),T.flush(e),e.process()}};T.handleCertificate=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});var n=t.fragment,a={certificate_list:Zt(n,3)},i,s,o=[];try{for(;a.certificate_list.length()>0;)i=Zt(a.certificate_list,3),s=te.asn1.fromDer(i),i=te.pki.certificateFromAsn1(s,!0),o.push(i)}catch(c){return e.error(e,{message:"Could not parse certificate list.",cause:c,send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.bad_certificate}})}var u=e.entity===T.ConnectionEnd.client;(u||e.verifyClient===!0)&&o.length===0?e.error(e,{message:u?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}}):o.length===0?e.expect=u?F0:Dc:(u?e.session.serverCertificate=o[0]:e.session.clientCertificate=o[0],T.verifyCertificateChain(e,o)&&(e.expect=u?F0:Dc)),e.process()};T.handleServerKeyExchange=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.unsupported_certificate}});e.expect=PB,e.process()};T.handleClientKeyExchange=function(e,t,r){if(r<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.unsupported_certificate}});var n=t.fragment,a={enc_pre_master_secret:Zt(n,2).getBytes()},i=null;if(e.getPrivateKey)try{i=e.getPrivateKey(e,e.session.serverCertificate),i=te.pki.privateKeyFromPem(i)}catch(u){e.error(e,{message:"Could not get private key.",cause:u,send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}})}if(i===null)return e.error(e,{message:"No private key set.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}});try{var s=e.session.sp;s.pre_master_secret=i.decrypt(a.enc_pre_master_secret);var o=e.session.clientHelloVersion;if(o.major!==s.pre_master_secret.charCodeAt(0)||o.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{s.pre_master_secret=te.random.getBytes(48)}e.expect=Rf,e.session.clientCertificate!==null&&(e.expect=jB),e.process()};T.handleCertificateRequest=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});var n=t.fragment,a={certificate_types:Zt(n,1),certificate_authorities:Zt(n,2)};e.session.certificateRequest=a,e.expect=LB,e.process()};T.handleCertificateVerify=function(e,t,r){if(r<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});var n=t.fragment;n.read-=4;var a=n.bytes();n.read+=4;var i={signature:Zt(n,2).getBytes()},s=te.util.createBuffer();s.putBuffer(e.session.md5.digest()),s.putBuffer(e.session.sha1.digest()),s=s.getBytes();try{var o=e.session.clientCertificate;if(!o.publicKey.verify(s,i.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(a),e.session.sha1.update(a)}catch{return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.handshake_failure}})}e.expect=Rf,e.process()};T.handleServerHelloDone=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.record_overflow}});if(e.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.insufficient_security}},a=0,i=e.verify(e,n.alert.description,a,[]);if(i!==!0)return(i||i===0)&&(typeof i=="object"&&!te.util.isArray(i)?(i.message&&(n.message=i.message),i.alert&&(n.alert.description=i.alert)):typeof i=="number"&&(n.alert.description=i)),e.error(e,n)}e.session.certificateRequest!==null&&(t=T.createRecord(e,{type:T.ContentType.handshake,data:T.createCertificate(e)}),T.queue(e,t)),t=T.createRecord(e,{type:T.ContentType.handshake,data:T.createClientKeyExchange(e)}),T.queue(e,t),e.expect=UB;var s=function(o,u){o.session.certificateRequest!==null&&o.session.clientCertificate!==null&&T.queue(o,T.createRecord(o,{type:T.ContentType.handshake,data:T.createCertificateVerify(o,u)})),T.queue(o,T.createRecord(o,{type:T.ContentType.change_cipher_spec,data:T.createChangeCipherSpec()})),o.state.pending=T.createConnectionState(o),o.state.current.write=o.state.pending.write,T.queue(o,T.createRecord(o,{type:T.ContentType.handshake,data:T.createFinished(o)})),o.expect=F_,T.flush(o),o.process()};if(e.session.certificateRequest===null||e.session.clientCertificate===null)return s(e,null);T.getClientSignature(e,s)};T.handleChangeCipherSpec=function(e,t){if(t.fragment.getByte()!==1)return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.illegal_parameter}});var r=e.entity===T.ConnectionEnd.client;(e.session.resuming&&r||!e.session.resuming&&!r)&&(e.state.pending=T.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&r||e.session.resuming&&!r)&&(e.state.pending=null),e.expect=r?BB:VB,e.process()};T.handleFinished=function(e,t,r){var n=t.fragment;n.read-=4;var a=n.bytes();n.read+=4;var i=t.fragment.getBytes();n=te.util.createBuffer(),n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest());var s=e.entity===T.ConnectionEnd.client,o=s?"server finished":"client finished",u=e.session.sp,c=12,l=wo;if(n=l(u.master_secret,o,n.getBytes(),c),n.getBytes()!==i)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.decrypt_error}});e.session.md5.update(a),e.session.sha1.update(a),(e.session.resuming&&s||!e.session.resuming&&!s)&&(T.queue(e,T.createRecord(e,{type:T.ContentType.change_cipher_spec,data:T.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,T.queue(e,T.createRecord(e,{type:T.ContentType.handshake,data:T.createFinished(e)}))),e.expect=s?kB:YB,e.handshaking=!1,++e.handshakes,e.peerCertificate=s?e.session.serverCertificate:e.session.clientCertificate,T.flush(e),e.isConnected=!0,e.connected(e),e.process()};T.handleAlert=function(e,t){var r=t.fragment,n={level:r.getByte(),description:r.getByte()},a;switch(n.description){case T.Alert.Description.close_notify:a="Connection closed.";break;case T.Alert.Description.unexpected_message:a="Unexpected message.";break;case T.Alert.Description.bad_record_mac:a="Bad record MAC.";break;case T.Alert.Description.decryption_failed:a="Decryption failed.";break;case T.Alert.Description.record_overflow:a="Record overflow.";break;case T.Alert.Description.decompression_failure:a="Decompression failed.";break;case T.Alert.Description.handshake_failure:a="Handshake failure.";break;case T.Alert.Description.bad_certificate:a="Bad certificate.";break;case T.Alert.Description.unsupported_certificate:a="Unsupported certificate.";break;case T.Alert.Description.certificate_revoked:a="Certificate revoked.";break;case T.Alert.Description.certificate_expired:a="Certificate expired.";break;case T.Alert.Description.certificate_unknown:a="Certificate unknown.";break;case T.Alert.Description.illegal_parameter:a="Illegal parameter.";break;case T.Alert.Description.unknown_ca:a="Unknown certificate authority.";break;case T.Alert.Description.access_denied:a="Access denied.";break;case T.Alert.Description.decode_error:a="Decode error.";break;case T.Alert.Description.decrypt_error:a="Decrypt error.";break;case T.Alert.Description.export_restriction:a="Export restriction.";break;case T.Alert.Description.protocol_version:a="Unsupported protocol version.";break;case T.Alert.Description.insufficient_security:a="Insufficient security.";break;case T.Alert.Description.internal_error:a="Internal error.";break;case T.Alert.Description.user_canceled:a="User canceled.";break;case T.Alert.Description.no_renegotiation:a="Renegotiation not supported.";break;default:a="Unknown error.";break}if(n.description===T.Alert.Description.close_notify)return e.close();e.error(e,{message:a,send:!1,origin:e.entity===T.ConnectionEnd.client?"server":"client",alert:n}),e.process()};T.handleHandshake=function(e,t){var r=t.fragment,n=r.getByte(),a=r.getInt24();if(a>r.length())return e.fragmented=t,t.fragment=te.util.createBuffer(),r.read-=4,e.process();e.fragmented=null,r.read-=4;var i=r.bytes(a+4);r.read+=4,n in Ms[e.entity][e.expect]?(e.entity===T.ConnectionEnd.server&&!e.open&&!e.fail&&(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:te.md.md5.create(),sha1:te.md.sha1.create()}),n!==T.HandshakeType.hello_request&&n!==T.HandshakeType.certificate_verify&&n!==T.HandshakeType.finished&&(e.session.md5.update(i),e.session.sha1.update(i)),Ms[e.entity][e.expect][n](e,t,a)):T.handleUnexpected(e,t)};T.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()};T.handleHeartbeat=function(e,t){var r=t.fragment,n=r.getByte(),a=r.getInt16(),i=r.getBytes(a);if(n===T.HeartbeatMessageType.heartbeat_request){if(e.handshaking||a>i.length)return e.process();T.queue(e,T.createRecord(e,{type:T.ContentType.heartbeat,data:T.createHeartbeat(T.HeartbeatMessageType.heartbeat_response,i)})),T.flush(e)}else if(n===T.HeartbeatMessageType.heartbeat_response){if(i!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,te.util.createBuffer(i))}e.process()};var NB=0,RB=1,F0=2,PB=3,LB=4,F_=5,BB=6,kB=7,UB=8,FB=0,MB=1,Dc=2,jB=3,Rf=4,VB=5,YB=6,S=T.handleUnexpected,M_=T.handleChangeCipherSpec,Dt=T.handleAlert,Vt=T.handleHandshake,j_=T.handleApplicationData,$t=T.handleHeartbeat,Pf=[];Pf[T.ConnectionEnd.client]=[[S,Dt,Vt,S,$t],[S,Dt,Vt,S,$t],[S,Dt,Vt,S,$t],[S,Dt,Vt,S,$t],[S,Dt,Vt,S,$t],[M_,Dt,S,S,$t],[S,Dt,Vt,S,$t],[S,Dt,Vt,j_,$t],[S,Dt,Vt,S,$t]];Pf[T.ConnectionEnd.server]=[[S,Dt,Vt,S,$t],[S,Dt,Vt,S,$t],[S,Dt,Vt,S,$t],[S,Dt,Vt,S,$t],[M_,Dt,S,S,$t],[S,Dt,Vt,S,$t],[S,Dt,Vt,j_,$t],[S,Dt,Vt,S,$t]];var sn=T.handleHelloRequest,KB=T.handleServerHello,V_=T.handleCertificate,M0=T.handleServerKeyExchange,ju=T.handleCertificateRequest,rs=T.handleServerHelloDone,Y_=T.handleFinished,Ms=[];Ms[T.ConnectionEnd.client]=[[S,S,KB,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[sn,S,S,S,S,S,S,S,S,S,S,V_,M0,ju,rs,S,S,S,S,S,S],[sn,S,S,S,S,S,S,S,S,S,S,S,M0,ju,rs,S,S,S,S,S,S],[sn,S,S,S,S,S,S,S,S,S,S,S,S,ju,rs,S,S,S,S,S,S],[sn,S,S,S,S,S,S,S,S,S,S,S,S,S,rs,S,S,S,S,S,S],[sn,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[sn,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,Y_],[sn,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[sn,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S]];var HB=T.handleClientHello,GB=T.handleClientKeyExchange,qB=T.handleCertificateVerify;Ms[T.ConnectionEnd.server]=[[S,HB,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,V_,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,GB,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,qB,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,Y_],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S],[S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S,S]];T.generateKeys=function(e,t){var r=wo,n=t.client_random+t.server_random;e.session.resuming||(t.master_secret=r(t.pre_master_secret,"master secret",n,48).bytes(),t.pre_master_secret=null),n=t.server_random+t.client_random;var a=2*t.mac_key_length+2*t.enc_key_length,i=e.version.major===T.Versions.TLS_1_0.major&&e.version.minor===T.Versions.TLS_1_0.minor;i&&(a+=2*t.fixed_iv_length);var s=r(t.master_secret,"key expansion",n,a),o={client_write_MAC_key:s.getBytes(t.mac_key_length),server_write_MAC_key:s.getBytes(t.mac_key_length),client_write_key:s.getBytes(t.enc_key_length),server_write_key:s.getBytes(t.enc_key_length)};return i&&(o.client_write_IV=s.getBytes(t.fixed_iv_length),o.server_write_IV=s.getBytes(t.fixed_iv_length)),o};T.createConnectionState=function(e){var t=e.entity===T.ConnectionEnd.client,r=function(){var i={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(s){return!0},compressionState:null,compressFunction:function(s){return!0},updateSequenceNumber:function(){i.sequenceNumber[1]===4294967295?(i.sequenceNumber[1]=0,++i.sequenceNumber[0]):++i.sequenceNumber[1]}};return i},n={read:r(),write:r()};if(n.read.update=function(i,s){return n.read.cipherFunction(s,n.read)?n.read.compressFunction(i,s,n.read)||i.error(i,{message:"Could not decompress record.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.decompression_failure}}):i.error(i,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.bad_record_mac}}),!i.fail},n.write.update=function(i,s){return n.write.compressFunction(i,s,n.write)?n.write.cipherFunction(s,n.write)||i.error(i,{message:"Could not encrypt record.",send:!1,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}}):i.error(i,{message:"Could not compress record.",send:!1,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}}),!i.fail},e.session){var a=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(a),a.keys=T.generateKeys(e,a),n.read.macKey=t?a.keys.server_write_MAC_key:a.keys.client_write_MAC_key,n.write.macKey=t?a.keys.client_write_MAC_key:a.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(n,e,a),a.compression_algorithm){case T.CompressionMethod.none:break;case T.CompressionMethod.deflate:n.read.compressFunction=$B,n.write.compressFunction=DB;break;default:throw new Error("Unsupported compression algorithm.")}}return n};T.createRandom=function(){var e=new Date,t=+e+e.getTimezoneOffset()*6e4,r=te.util.createBuffer();return r.putInt32(t),r.putBytes(te.random.getBytes(28)),r};T.createRecord=function(e,t){if(!t.data)return null;var r={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return r};T.createAlert=function(e,t){var r=te.util.createBuffer();return r.putByte(t.level),r.putByte(t.description),T.createRecord(e,{type:T.ContentType.alert,data:r})};T.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=te.util.createBuffer(),r=0;r<e.cipherSuites.length;++r){var n=e.cipherSuites[r];t.putByte(n.id[0]),t.putByte(n.id[1])}var a=t.length(),i=te.util.createBuffer();i.putByte(T.CompressionMethod.none);var s=i.length(),o=te.util.createBuffer();if(e.virtualHost){var u=te.util.createBuffer();u.putByte(0),u.putByte(0);var c=te.util.createBuffer();c.putByte(0),ar(c,2,te.util.createBuffer(e.virtualHost));var l=te.util.createBuffer();ar(l,2,c),ar(u,2,l),o.putBuffer(u)}var f=o.length();f>0&&(f+=2);var d=e.session.id,p=d.length+1+2+4+28+2+a+1+s+f,h=te.util.createBuffer();return h.putByte(T.HandshakeType.client_hello),h.putInt24(p),h.putByte(e.version.major),h.putByte(e.version.minor),h.putBytes(e.session.sp.client_random),ar(h,1,te.util.createBuffer(d)),ar(h,2,t),ar(h,1,i),f>0&&ar(h,2,o),h};T.createServerHello=function(e){var t=e.session.id,r=t.length+1+2+4+28+2+1,n=te.util.createBuffer();return n.putByte(T.HandshakeType.server_hello),n.putInt24(r),n.putByte(e.version.major),n.putByte(e.version.minor),n.putBytes(e.session.sp.server_random),ar(n,1,te.util.createBuffer(t)),n.putByte(e.session.cipherSuite.id[0]),n.putByte(e.session.cipherSuite.id[1]),n.putByte(e.session.compressionMethod),n};T.createCertificate=function(e){var t=e.entity===T.ConnectionEnd.client,r=null;if(e.getCertificate){var n;t?n=e.session.certificateRequest:n=e.session.extensions.server_name.serverNameList,r=e.getCertificate(e,n)}var a=te.util.createBuffer();if(r!==null)try{te.util.isArray(r)||(r=[r]);for(var i=null,s=0;s<r.length;++s){var o=te.pem.decode(r[s])[0];if(o.type!=="CERTIFICATE"&&o.type!=="X509 CERTIFICATE"&&o.type!=="TRUSTED CERTIFICATE"){var u=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw u.headerType=o.type,u}if(o.procType&&o.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=te.util.createBuffer(o.body);i===null&&(i=te.asn1.fromDer(c.bytes(),!1));var l=te.util.createBuffer();ar(l,3,c),a.putBuffer(l)}r=te.pki.certificateFromAsn1(i),t?e.session.clientCertificate=r:e.session.serverCertificate=r}catch(p){return e.error(e,{message:"Could not send certificate list.",cause:p,send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.bad_certificate}})}var f=3+a.length(),d=te.util.createBuffer();return d.putByte(T.HandshakeType.certificate),d.putInt24(f),ar(d,3,a),d};T.createClientKeyExchange=function(e){var t=te.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(te.random.getBytes(46));var r=e.session.sp;r.pre_master_secret=t.getBytes();var n=e.session.serverCertificate.publicKey;t=n.encrypt(r.pre_master_secret);var a=t.length+2,i=te.util.createBuffer();return i.putByte(T.HandshakeType.client_key_exchange),i.putInt24(a),i.putInt16(t.length),i.putBytes(t),i};T.createServerKeyExchange=function(e){var t=te.util.createBuffer();return t};T.getClientSignature=function(e,t){var r=te.util.createBuffer();r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest()),r=r.getBytes(),e.getSignature=e.getSignature||function(n,a,i){var s=null;if(n.getPrivateKey)try{s=n.getPrivateKey(n,n.session.clientCertificate),s=te.pki.privateKeyFromPem(s)}catch(o){n.error(n,{message:"Could not get private key.",cause:o,send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}})}s===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.internal_error}}):a=s.sign(a,null),i(n,a)},e.getSignature(e,r,t)};T.createCertificateVerify=function(e,t){var r=t.length+2,n=te.util.createBuffer();return n.putByte(T.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(t.length),n.putBytes(t),n};T.createCertificateRequest=function(e){var t=te.util.createBuffer();t.putByte(1);var r=te.util.createBuffer();for(var n in e.caStore.certs){var a=e.caStore.certs[n],i=te.pki.distinguishedNameToAsn1(a.subject),s=te.asn1.toDer(i);r.putInt16(s.length()),r.putBuffer(s)}var o=1+t.length()+2+r.length(),u=te.util.createBuffer();return u.putByte(T.HandshakeType.certificate_request),u.putInt24(o),ar(u,1,t),ar(u,2,r),u};T.createServerHelloDone=function(e){var t=te.util.createBuffer();return t.putByte(T.HandshakeType.server_hello_done),t.putInt24(0),t};T.createChangeCipherSpec=function(){var e=te.util.createBuffer();return e.putByte(1),e};T.createFinished=function(e){var t=te.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var r=e.entity===T.ConnectionEnd.client,n=e.session.sp,a=12,i=wo,s=r?"client finished":"server finished";t=i(n.master_secret,s,t.getBytes(),a);var o=te.util.createBuffer();return o.putByte(T.HandshakeType.finished),o.putInt24(t.length()),o.putBuffer(t),o};T.createHeartbeat=function(e,t,r){typeof r>"u"&&(r=t.length);var n=te.util.createBuffer();n.putByte(e),n.putInt16(r),n.putBytes(t);var a=n.length(),i=Math.max(16,a-r-3);return n.putBytes(te.random.getBytes(i)),n};T.queue=function(e,t){if(t&&!(t.fragment.length()===0&&(t.type===T.ContentType.handshake||t.type===T.ContentType.alert||t.type===T.ContentType.change_cipher_spec))){if(t.type===T.ContentType.handshake){var r=t.fragment.bytes();e.session.md5.update(r),e.session.sha1.update(r),r=null}var n;if(t.fragment.length()<=T.MaxFragment)n=[t];else{n=[];for(var a=t.fragment.bytes();a.length>T.MaxFragment;)n.push(T.createRecord(e,{type:t.type,data:te.util.createBuffer(a.slice(0,T.MaxFragment))})),a=a.slice(T.MaxFragment);a.length>0&&n.push(T.createRecord(e,{type:t.type,data:te.util.createBuffer(a)}))}for(var i=0;i<n.length&&!e.fail;++i){var s=n[i],o=e.state.current.write;o.update(e,s)&&e.records.push(s)}}};T.flush=function(e){for(var t=0;t<e.records.length;++t){var r=e.records[t];e.tlsData.putByte(r.type),e.tlsData.putByte(r.version.major),e.tlsData.putByte(r.version.minor),e.tlsData.putInt16(r.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var Vu=function(e){switch(e){case!0:return!0;case te.pki.certificateError.bad_certificate:return T.Alert.Description.bad_certificate;case te.pki.certificateError.unsupported_certificate:return T.Alert.Description.unsupported_certificate;case te.pki.certificateError.certificate_revoked:return T.Alert.Description.certificate_revoked;case te.pki.certificateError.certificate_expired:return T.Alert.Description.certificate_expired;case te.pki.certificateError.certificate_unknown:return T.Alert.Description.certificate_unknown;case te.pki.certificateError.unknown_ca:return T.Alert.Description.unknown_ca;default:return T.Alert.Description.bad_certificate}},zB=function(e){switch(e){case!0:return!0;case T.Alert.Description.bad_certificate:return te.pki.certificateError.bad_certificate;case T.Alert.Description.unsupported_certificate:return te.pki.certificateError.unsupported_certificate;case T.Alert.Description.certificate_revoked:return te.pki.certificateError.certificate_revoked;case T.Alert.Description.certificate_expired:return te.pki.certificateError.certificate_expired;case T.Alert.Description.certificate_unknown:return te.pki.certificateError.certificate_unknown;case T.Alert.Description.unknown_ca:return te.pki.certificateError.unknown_ca;default:return te.pki.certificateError.bad_certificate}};T.verifyCertificateChain=function(e,t){try{var r={};for(var n in e.verifyOptions)r[n]=e.verifyOptions[n];r.verify=function(i,s,o){var u=Vu(i),c=e.verify(e,i,s,o);if(c!==!0){if(typeof c=="object"&&!te.util.isArray(c)){var l=new Error("The application rejected the certificate.");throw l.send=!0,l.alert={level:T.Alert.Level.fatal,description:T.Alert.Description.bad_certificate},c.message&&(l.message=c.message),c.alert&&(l.alert.description=c.alert),l}c!==i&&(c=zB(c))}return c},te.pki.verifyCertificateChain(e.caStore,t,r)}catch(i){var a=i;(typeof a!="object"||te.util.isArray(a))&&(a={send:!0,alert:{level:T.Alert.Level.fatal,description:Vu(i)}}),"send"in a||(a.send=!0),"alert"in a||(a.alert={level:T.Alert.Level.fatal,description:Vu(a.error)}),e.error(e,a)}return!e.fail};T.createSessionCache=function(e,t){var r=null;if(e&&e.getSession&&e.setSession&&e.order)r=e;else{r={},r.cache=e||{},r.capacity=Math.max(t||100,1),r.order=[];for(var n in e)r.order.length<=t?r.order.push(n):delete e[n];r.getSession=function(a){var i=null,s=null;if(a?s=te.util.bytesToHex(a):r.order.length>0&&(s=r.order[0]),s!==null&&s in r.cache){i=r.cache[s],delete r.cache[s];for(var o in r.order)if(r.order[o]===s){r.order.splice(o,1);break}}return i},r.setSession=function(a,i){if(r.order.length===r.capacity){var s=r.order.shift();delete r.cache[s]}var s=te.util.bytesToHex(a);r.order.push(s),r.cache[s]=i}}return r};T.createConnection=function(e){var t=null;e.caStore?te.util.isArray(e.caStore)?t=te.pki.createCaStore(e.caStore):t=e.caStore:t=te.pki.createCaStore();var r=e.cipherSuites||null;if(r===null){r=[];for(var n in T.CipherSuites)r.push(T.CipherSuites[n])}var a=e.server?T.ConnectionEnd.server:T.ConnectionEnd.client,i=e.sessionCache?T.createSessionCache(e.sessionCache):null,s={version:{major:T.Version.major,minor:T.Version.minor},entity:a,sessionId:e.sessionId,caStore:t,sessionCache:i,cipherSuites:r,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(l,f,d,p){return f},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:te.util.createBuffer(),tlsData:te.util.createBuffer(),data:te.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(l,f){f.origin=f.origin||(l.entity===T.ConnectionEnd.client?"client":"server"),f.send&&(T.queue(l,T.createAlert(l,f.alert)),T.flush(l));var d=f.fatal!==!1;d&&(l.fail=!0),e.error(l,f),d&&l.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null};s.reset=function(l){s.version={major:T.Version.major,minor:T.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=s.entity===T.ConnectionEnd.client?NB:FB,s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(l||typeof l>"u"),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=T.createConnectionState(s)},s.reset();var o=function(l,f){var d=f.type-T.ContentType.change_cipher_spec,p=Pf[l.entity][l.expect];d in p?p[d](l,f):T.handleUnexpected(l,f)},u=function(l){var f=0,d=l.input,p=d.length();if(p<5)f=5-p;else{l.record={type:d.getByte(),version:{major:d.getByte(),minor:d.getByte()},length:d.getInt16(),fragment:te.util.createBuffer(),ready:!1};var h=l.record.version.major===l.version.major;h&&l.session&&l.session.version&&(h=l.record.version.minor===l.version.minor),h||l.error(l,{message:"Incompatible TLS version.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.protocol_version}})}return f},c=function(l){var f=0,d=l.input,p=d.length();if(p<l.record.length)f=l.record.length-p;else{l.record.fragment.putBytes(d.getBytes(l.record.length)),d.compact();var h=l.state.current.read;h.update(l,l.record)&&(l.fragmented!==null&&(l.fragmented.type===l.record.type?(l.fragmented.fragment.putBuffer(l.record.fragment),l.record=l.fragmented):l.error(l,{message:"Invalid fragmented record.",send:!0,alert:{level:T.Alert.Level.fatal,description:T.Alert.Description.unexpected_message}})),l.record.ready=!0)}return f};return s.handshake=function(l){if(s.entity!==T.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&s.handshakes===0&&(s.fail=!1),s.handshaking=!0,l=l||"";var f=null;l.length>0&&(s.sessionCache&&(f=s.sessionCache.getSession(l)),f===null&&(l="")),l.length===0&&s.sessionCache&&(f=s.sessionCache.getSession(),f!==null&&(l=f.id)),s.session={id:l,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:te.md.md5.create(),sha1:te.md.sha1.create()},f&&(s.version=f.version,s.session.sp=f.sp),s.session.sp.client_random=T.createRandom().getBytes(),s.open=!0,T.queue(s,T.createRecord(s,{type:T.ContentType.handshake,data:T.createClientHello(s)})),T.flush(s)}},s.process=function(l){var f=0;return l&&s.input.putBytes(l),s.fail||(s.record!==null&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),s.record===null&&(f=u(s)),!s.fail&&s.record!==null&&!s.record.ready&&(f=c(s)),!s.fail&&s.record!==null&&s.record.ready&&o(s,s.record)),f},s.prepare=function(l){return T.queue(s,T.createRecord(s,{type:T.ContentType.application_data,data:te.util.createBuffer(l)})),T.flush(s)},s.prepareHeartbeatRequest=function(l,f){return l instanceof te.util.ByteBuffer&&(l=l.bytes()),typeof f>"u"&&(f=l.length),s.expectedHeartbeatPayload=l,T.queue(s,T.createRecord(s,{type:T.ContentType.heartbeat,data:T.createHeartbeat(T.HeartbeatMessageType.heartbeat_request,l,f)})),T.flush(s)},s.close=function(l){if(!s.fail&&s.sessionCache&&s.session){var f={id:s.session.id,version:s.session.version,sp:s.session.sp};f.sp.keys=null,s.sessionCache.setSession(f.id,f)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,T.queue(s,T.createAlert(s,{level:T.Alert.Level.warning,description:T.Alert.Description.close_notify})),T.flush(s)),s.closed(s)),s.reset(l)},s};te.tls=te.tls||{};for(var Yu in T)typeof T[Yu]!="function"&&(te.tls[Yu]=T[Yu]);te.tls.prf_tls1=wo;te.tls.hmac_sha1=xB;te.tls.createSessionCache=T.createSessionCache;te.tls.createConnection=T.createConnection;var _n=Ne,ur=_n.tls;ur.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=ur.BulkCipherAlgorithm.aes,e.cipher_type=ur.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=ur.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:K_};ur.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=ur.BulkCipherAlgorithm.aes,e.cipher_type=ur.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=ur.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:K_};function K_(e,t,r){var n=t.entity===_n.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:_n.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},e.write.cipherState={init:!1,cipher:_n.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},e.read.cipherFunction=JB,e.write.cipherFunction=WB,e.read.macLength=e.write.macLength=r.mac_length,e.read.macFunction=e.write.macFunction=ur.hmac_sha1}function WB(e,t){var r=!1,n=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(n),t.updateSequenceNumber();var a;e.version.minor===ur.Versions.TLS_1_0.minor?a=t.cipherState.init?null:t.cipherState.iv:a=_n.random.getBytesSync(16),t.cipherState.init=!0;var i=t.cipherState.cipher;return i.start({iv:a}),e.version.minor>=ur.Versions.TLS_1_1.minor&&i.output.putBytes(a),i.update(e.fragment),i.finish(QB)&&(e.fragment=i.output,e.length=e.fragment.length(),r=!0),r}function QB(e,t,r){if(!r){var n=e-t.length()%e;t.fillWithByte(n-1,n)}return!0}function XB(e,t,r){var n=!0;if(r){for(var a=t.length(),i=t.last(),s=a-1-i;s<a-1;++s)n=n&&t.at(s)==i;n&&t.truncate(i+1)}return n}function JB(e,t){var r=!1,n;e.version.minor===ur.Versions.TLS_1_0.minor?n=t.cipherState.init?null:t.cipherState.iv:n=e.fragment.getBytes(16),t.cipherState.init=!0;var a=t.cipherState.cipher;a.start({iv:n}),a.update(e.fragment),r=a.finish(XB);var i=t.macLength,s=_n.random.getBytesSync(i),o=a.output.length();o>=i?(e.fragment=a.output.getBytes(o-i),s=a.output.getBytes(i)):e.fragment=a.output.getBytes(),e.fragment=_n.util.createBuffer(e.fragment),e.length=e.fragment.length();var u=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),r=ZB(t.macKey,s,u)&&r,r}function ZB(e,t,r){var n=_n.hmac.create();return n.start("SHA1",e),n.update(t),t=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),t===r}var it=Ne,ki=it.sha512=it.sha512||{};it.md.sha512=it.md.algorithms.sha512=ki;var H_=it.sha384=it.sha512.sha384=it.sha512.sha384||{};H_.create=function(){return ki.create("SHA-384")};it.md.sha384=it.md.algorithms.sha384=H_;it.sha512.sha256=it.sha512.sha256||{create:function(){return ki.create("SHA-512/256")}};it.md["sha512/256"]=it.md.algorithms["sha512/256"]=it.sha512.sha256;it.sha512.sha224=it.sha512.sha224||{create:function(){return ki.create("SHA-512/224")}};it.md["sha512/224"]=it.md.algorithms["sha512/224"]=it.sha512.sha224;ki.create=function(e){if(G_||e3(),typeof e>"u"&&(e="SHA-512"),!(e in Mn))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=Mn[e],r=null,n=it.util.createBuffer(),a=new Array(80),i=0;i<80;++i)a[i]=new Array(2);var s=64;switch(e){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var o={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var u=o.messageLengthSize/4,c=0;c<u;++c)o.fullMessageLength.push(0);n=it.util.createBuffer(),r=new Array(t.length);for(var c=0;c<t.length;++c)r[c]=t[c].slice(0);return o},o.start(),o.update=function(u,c){c==="utf8"&&(u=it.util.encodeUtf8(u));var l=u.length;o.messageLength+=l,l=[l/4294967296>>>0,l>>>0];for(var f=o.fullMessageLength.length-1;f>=0;--f)o.fullMessageLength[f]+=l[1],l[1]=l[0]+(o.fullMessageLength[f]/4294967296>>>0),o.fullMessageLength[f]=o.fullMessageLength[f]>>>0,l[0]=l[1]/4294967296>>>0;return n.putBytes(u),j0(r,a,n),(n.read>2048||n.length()===0)&&n.compact(),o},o.digest=function(){var u=it.util.createBuffer();u.putBytes(n.bytes());var c=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,l=c&o.blockLength-1;u.putBytes($c.substr(0,o.blockLength-l));for(var f,d,p=o.fullMessageLength[0]*8,h=0;h<o.fullMessageLength.length-1;++h)f=o.fullMessageLength[h+1]*8,d=f/4294967296>>>0,p+=d,u.putInt32(p>>>0),p=f>>>0;u.putInt32(p);for(var _=new Array(r.length),h=0;h<r.length;++h)_[h]=r[h].slice(0);j0(_,a,u);var v=it.util.createBuffer(),m;e==="SHA-512"?m=_.length:e==="SHA-384"?m=_.length-2:m=_.length-4;for(var h=0;h<m;++h)v.putInt32(_[h][0]),(h!==m-1||e!=="SHA-512/224")&&v.putInt32(_[h][1]);return v},o};var $c=null,G_=!1,Nc=null,Mn=null;function e3(){$c="",$c+=it.util.fillString("\0",128),Nc=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Mn={},Mn["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Mn["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Mn["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Mn["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],G_=!0}function j0(e,t,r){for(var n,a,i,s,o,u,c,l,f,d,p,h,_,v,m,b,A,D,x,Y,X,Z,W,J,ee,oe,z,M,N,U,L,H,w,R,O,P=r.length();P>=128;){for(N=0;N<16;++N)t[N][0]=r.getInt32()>>>0,t[N][1]=r.getInt32()>>>0;for(;N<80;++N)H=t[N-2],U=H[0],L=H[1],n=((U>>>19|L<<13)^(L>>>29|U<<3)^U>>>6)>>>0,a=((U<<13|L>>>19)^(L<<3|U>>>29)^(U<<26|L>>>6))>>>0,R=t[N-15],U=R[0],L=R[1],i=((U>>>1|L<<31)^(U>>>8|L<<24)^U>>>7)>>>0,s=((U<<31|L>>>1)^(U<<24|L>>>8)^(U<<25|L>>>7))>>>0,w=t[N-7],O=t[N-16],L=a+w[1]+s+O[1],t[N][0]=n+w[0]+i+O[0]+(L/4294967296>>>0)>>>0,t[N][1]=L>>>0;for(_=e[0][0],v=e[0][1],m=e[1][0],b=e[1][1],A=e[2][0],D=e[2][1],x=e[3][0],Y=e[3][1],X=e[4][0],Z=e[4][1],W=e[5][0],J=e[5][1],ee=e[6][0],oe=e[6][1],z=e[7][0],M=e[7][1],N=0;N<80;++N)c=((X>>>14|Z<<18)^(X>>>18|Z<<14)^(Z>>>9|X<<23))>>>0,l=((X<<18|Z>>>14)^(X<<14|Z>>>18)^(Z<<23|X>>>9))>>>0,f=(ee^X&(W^ee))>>>0,d=(oe^Z&(J^oe))>>>0,o=((_>>>28|v<<4)^(v>>>2|_<<30)^(v>>>7|_<<25))>>>0,u=((_<<4|v>>>28)^(v<<30|_>>>2)^(v<<25|_>>>7))>>>0,p=(_&m|A&(_^m))>>>0,h=(v&b|D&(v^b))>>>0,L=M+l+d+Nc[N][1]+t[N][1],n=z+c+f+Nc[N][0]+t[N][0]+(L/4294967296>>>0)>>>0,a=L>>>0,L=u+h,i=o+p+(L/4294967296>>>0)>>>0,s=L>>>0,z=ee,M=oe,ee=W,oe=J,W=X,J=Z,L=Y+a,X=x+n+(L/4294967296>>>0)>>>0,Z=L>>>0,x=A,Y=D,A=m,D=b,m=_,b=v,L=a+s,_=n+i+(L/4294967296>>>0)>>>0,v=L>>>0;L=e[0][1]+v,e[0][0]=e[0][0]+_+(L/4294967296>>>0)>>>0,e[0][1]=L>>>0,L=e[1][1]+b,e[1][0]=e[1][0]+m+(L/4294967296>>>0)>>>0,e[1][1]=L>>>0,L=e[2][1]+D,e[2][0]=e[2][0]+A+(L/4294967296>>>0)>>>0,e[2][1]=L>>>0,L=e[3][1]+Y,e[3][0]=e[3][0]+x+(L/4294967296>>>0)>>>0,e[3][1]=L>>>0,L=e[4][1]+Z,e[4][0]=e[4][0]+X+(L/4294967296>>>0)>>>0,e[4][1]=L>>>0,L=e[5][1]+J,e[5][0]=e[5][0]+W+(L/4294967296>>>0)>>>0,e[5][1]=L>>>0,L=e[6][1]+oe,e[6][0]=e[6][0]+ee+(L/4294967296>>>0)>>>0,e[6][1]=L>>>0,L=e[7][1]+M,e[7][0]=e[7][0]+z+(L/4294967296>>>0)>>>0,e[7][1]=L>>>0,P-=128}}var Lf={},t3=Ne,bt=t3.asn1;Lf.privateKeyValidator={name:"PrivateKeyInfo",tagClass:bt.Class.UNIVERSAL,type:bt.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:bt.Class.UNIVERSAL,type:bt.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:bt.Class.UNIVERSAL,type:bt.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:bt.Class.UNIVERSAL,type:bt.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:bt.Class.UNIVERSAL,type:bt.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};Lf.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:bt.Class.UNIVERSAL,type:bt.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:bt.Class.UNIVERSAL,type:bt.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:bt.Class.UNIVERSAL,type:bt.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:bt.Class.UNIVERSAL,type:bt.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]};var Rt=Ne,q_=Lf,r3=q_.publicKeyValidator,n3=q_.privateKeyValidator;if(typeof a3>"u")var a3=Rt.jsbn.BigInteger;var Rc=Rt.util.ByteBuffer,Wt=typeof Buffer>"u"?Uint8Array:Buffer;Rt.pki=Rt.pki||{};Rt.pki.ed25519=Rt.ed25519=Rt.ed25519||{};var ke=Rt.ed25519;ke.constants={};ke.constants.PUBLIC_KEY_BYTE_LENGTH=32;ke.constants.PRIVATE_KEY_BYTE_LENGTH=64;ke.constants.SEED_BYTE_LENGTH=32;ke.constants.SIGN_BYTE_LENGTH=64;ke.constants.HASH_BYTE_LENGTH=64;ke.generateKeyPair=function(e){e=e||{};var t=e.seed;if(t===void 0)t=Rt.random.getBytesSync(ke.constants.SEED_BYTE_LENGTH);else if(typeof t=="string"){if(t.length!==ke.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+ke.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=zr({message:t,encoding:"binary"});for(var r=new Wt(ke.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Wt(ke.constants.PRIVATE_KEY_BYTE_LENGTH),a=0;a<32;++a)n[a]=t[a];return u3(r,n),{publicKey:r,privateKey:n}};ke.privateKeyFromAsn1=function(e){var t={},r=[],n=Rt.asn1.validate(e,n3,t,r);if(!n){var a=new Error("Invalid Key.");throw a.errors=r,a}var i=Rt.asn1.derToOid(t.privateKeyOid),s=Rt.oids.EdDSA25519;if(i!==s)throw new Error('Invalid OID "'+i+'"; OID must be "'+s+'".');var o=t.privateKey,u=zr({message:Rt.asn1.fromDer(o).value,encoding:"binary"});return{privateKeyBytes:u}};ke.publicKeyFromAsn1=function(e){var t={},r=[],n=Rt.asn1.validate(e,r3,t,r);if(!n){var a=new Error("Invalid Key.");throw a.errors=r,a}var i=Rt.asn1.derToOid(t.publicKeyOid),s=Rt.oids.EdDSA25519;if(i!==s)throw new Error('Invalid OID "'+i+'"; OID must be "'+s+'".');var o=t.ed25519PublicKey;if(o.length!==ke.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return zr({message:o,encoding:"binary"})};ke.publicKeyFromPrivateKey=function(e){e=e||{};var t=zr({message:e.privateKey,encoding:"binary"});if(t.length!==ke.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+ke.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Wt(ke.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=t[32+n];return r};ke.sign=function(e){e=e||{};var t=zr(e),r=zr({message:e.privateKey,encoding:"binary"});if(r.length===ke.constants.SEED_BYTE_LENGTH){var n=ke.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==ke.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+ke.constants.SEED_BYTE_LENGTH+" or "+ke.constants.PRIVATE_KEY_BYTE_LENGTH);var a=new Wt(ke.constants.SIGN_BYTE_LENGTH+t.length);c3(a,t,t.length,r);for(var i=new Wt(ke.constants.SIGN_BYTE_LENGTH),s=0;s<i.length;++s)i[s]=a[s];return i};ke.verify=function(e){e=e||{};var t=zr(e);if(e.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=zr({message:e.signature,encoding:"binary"});if(r.length!==ke.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+ke.constants.SIGN_BYTE_LENGTH);var n=zr({message:e.publicKey,encoding:"binary"});if(n.length!==ke.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+ke.constants.PUBLIC_KEY_BYTE_LENGTH);var a=new Wt(ke.constants.SIGN_BYTE_LENGTH+t.length),i=new Wt(ke.constants.SIGN_BYTE_LENGTH+t.length),s;for(s=0;s<ke.constants.SIGN_BYTE_LENGTH;++s)a[s]=r[s];for(s=0;s<t.length;++s)a[s+ke.constants.SIGN_BYTE_LENGTH]=t[s];return l3(i,a,a.length,n)>=0};function zr(e){var t=e.message;if(t instanceof Uint8Array||t instanceof Wt)return t;var r=e.encoding;if(t===void 0)if(e.md)t=e.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof t=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof t=="string"){if(typeof Buffer<"u")return Buffer.from(t,r);t=new Rc(t,r)}else if(!(t instanceof Rc))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Wt(t.length()),a=0;a<n.length;++a)n[a]=t.at(a);return n}var Pc=Ee(),js=Ee([1]),i3=Ee([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),s3=Ee([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),V0=Ee([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Y0=Ee([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Ku=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),o3=Ee([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function vi(e,t){var r=Rt.md.sha512.create(),n=new Rc(e);r.update(n.getBytes(t),"binary");var a=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(a,"binary");for(var i=new Wt(ke.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)i[s]=a.charCodeAt(s);return i}function u3(e,t){var r=[Ee(),Ee(),Ee(),Ee()],n,a=vi(t,32);for(a[0]&=248,a[31]&=127,a[31]|=64,kf(r,a),Bf(e,r),n=0;n<32;++n)t[n+32]=e[n];return 0}function c3(e,t,r,n){var a,i,s=new Float64Array(64),o=[Ee(),Ee(),Ee(),Ee()],u=vi(n,32);u[0]&=248,u[31]&=127,u[31]|=64;var c=r+64;for(a=0;a<r;++a)e[64+a]=t[a];for(a=0;a<32;++a)e[32+a]=u[32+a];var l=vi(e.subarray(32),r+32);for(Lc(l),kf(o,l),Bf(e,o),a=32;a<64;++a)e[a]=n[a];var f=vi(e,r+64);for(Lc(f),a=32;a<64;++a)s[a]=0;for(a=0;a<32;++a)s[a]=l[a];for(a=0;a<32;++a)for(i=0;i<32;i++)s[a+i]+=f[a]*u[i];return z_(e.subarray(32),s),c}function l3(e,t,r,n){var a,i,s=new Wt(32),o=[Ee(),Ee(),Ee(),Ee()],u=[Ee(),Ee(),Ee(),Ee()];if(i=-1,r<64||f3(u,n))return-1;for(a=0;a<r;++a)e[a]=t[a];for(a=0;a<32;++a)e[a+32]=n[a];var c=vi(e,r);if(Lc(c),X_(o,u,c),kf(u,t.subarray(32)),Bc(o,u),Bf(s,o),r-=64,W_(t,0,s,0)){for(a=0;a<r;++a)e[a]=0;return-1}for(a=0;a<r;++a)e[a]=t[a+64];return i=r,i}function z_(e,t){var r,n,a,i;for(n=63;n>=32;--n){for(r=0,a=n-32,i=n-12;a<i;++a)t[a]+=r-16*t[n]*Ku[a-(n-32)],r=t[a]+128>>8,t[a]-=r*256;t[a]+=r,t[n]=0}for(r=0,a=0;a<32;++a)t[a]+=r-(t[31]>>4)*Ku[a],r=t[a]>>8,t[a]&=255;for(a=0;a<32;++a)t[a]-=r*Ku[a];for(n=0;n<32;++n)t[n+1]+=t[n]>>8,e[n]=t[n]&255}function Lc(e){for(var t=new Float64Array(64),r=0;r<64;++r)t[r]=e[r],e[r]=0;z_(e,t)}function Bc(e,t){var r=Ee(),n=Ee(),a=Ee(),i=Ee(),s=Ee(),o=Ee(),u=Ee(),c=Ee(),l=Ee();ba(r,e[1],e[0]),ba(l,t[1],t[0]),Qe(r,r,l),ya(n,e[0],e[1]),ya(l,t[0],t[1]),Qe(n,n,l),Qe(a,e[3],t[3]),Qe(a,a,s3),Qe(i,e[2],t[2]),ya(i,i,i),ba(s,n,r),ba(o,i,a),ya(u,i,a),ya(c,n,r),Qe(e[0],s,o),Qe(e[1],c,u),Qe(e[2],u,o),Qe(e[3],s,c)}function K0(e,t,r){for(var n=0;n<4;++n)J_(e[n],t[n],r)}function Bf(e,t){var r=Ee(),n=Ee(),a=Ee();m3(a,t[2]),Qe(r,t[0],a),Qe(n,t[1],a),Vs(e,n),e[31]^=Q_(r)<<7}function Vs(e,t){var r,n,a,i=Ee(),s=Ee();for(r=0;r<16;++r)s[r]=t[r];for(Hu(s),Hu(s),Hu(s),n=0;n<2;++n){for(i[0]=s[0]-65517,r=1;r<15;++r)i[r]=s[r]-65535-(i[r-1]>>16&1),i[r-1]&=65535;i[15]=s[15]-32767-(i[14]>>16&1),a=i[15]>>16&1,i[14]&=65535,J_(s,i,1-a)}for(r=0;r<16;r++)e[2*r]=s[r]&255,e[2*r+1]=s[r]>>8}function f3(e,t){var r=Ee(),n=Ee(),a=Ee(),i=Ee(),s=Ee(),o=Ee(),u=Ee();return mn(e[2],js),d3(e[1],t),jn(a,e[1]),Qe(i,a,i3),ba(a,a,e[2]),ya(i,e[2],i),jn(s,i),jn(o,s),Qe(u,o,s),Qe(r,u,a),Qe(r,r,i),h3(r,r),Qe(r,r,a),Qe(r,r,i),Qe(r,r,i),Qe(e[0],r,i),jn(n,e[0]),Qe(n,n,i),H0(n,a)&&Qe(e[0],e[0],o3),jn(n,e[0]),Qe(n,n,i),H0(n,a)?-1:(Q_(e[0])===t[31]>>7&&ba(e[0],Pc,e[0]),Qe(e[3],e[0],e[1]),0)}function d3(e,t){var r;for(r=0;r<16;++r)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function h3(e,t){var r=Ee(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=250;n>=0;--n)jn(r,r),n!==1&&Qe(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}function H0(e,t){var r=new Wt(32),n=new Wt(32);return Vs(r,e),Vs(n,t),W_(r,0,n,0)}function W_(e,t,r,n){return p3(e,t,r,n,32)}function p3(e,t,r,n,a){var i,s=0;for(i=0;i<a;++i)s|=e[t+i]^r[n+i];return(1&s-1>>>8)-1}function Q_(e){var t=new Wt(32);return Vs(t,e),t[0]&1}function X_(e,t,r){var n,a;for(mn(e[0],Pc),mn(e[1],js),mn(e[2],js),mn(e[3],Pc),a=255;a>=0;--a)n=r[a/8|0]>>(a&7)&1,K0(e,t,n),Bc(t,e),Bc(e,e),K0(e,t,n)}function kf(e,t){var r=[Ee(),Ee(),Ee(),Ee()];mn(r[0],V0),mn(r[1],Y0),mn(r[2],js),Qe(r[3],V0,Y0),X_(e,r,t)}function mn(e,t){var r;for(r=0;r<16;r++)e[r]=t[r]|0}function m3(e,t){var r=Ee(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=253;n>=0;--n)jn(r,r),n!==2&&n!==4&&Qe(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}function Hu(e){var t,r,n=1;for(t=0;t<16;++t)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-n*65536;e[0]+=n-1+37*(n-1)}function J_(e,t,r){for(var n,a=~(r-1),i=0;i<16;++i)n=a&(e[i]^t[i]),e[i]^=n,t[i]^=n}function Ee(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;++t)r[t]=e[t];return r}function ya(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]+r[n]}function ba(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]-r[n]}function jn(e,t){Qe(e,t,t)}function Qe(e,t,r){var n,a,i=0,s=0,o=0,u=0,c=0,l=0,f=0,d=0,p=0,h=0,_=0,v=0,m=0,b=0,A=0,D=0,x=0,Y=0,X=0,Z=0,W=0,J=0,ee=0,oe=0,z=0,M=0,N=0,U=0,L=0,H=0,w=0,R=r[0],O=r[1],P=r[2],g=r[3],y=r[4],C=r[5],I=r[6],j=r[7],q=r[8],se=r[9],ue=r[10],ve=r[11],$e=r[12],Re=r[13],He=r[14],Ge=r[15];n=t[0],i+=n*R,s+=n*O,o+=n*P,u+=n*g,c+=n*y,l+=n*C,f+=n*I,d+=n*j,p+=n*q,h+=n*se,_+=n*ue,v+=n*ve,m+=n*$e,b+=n*Re,A+=n*He,D+=n*Ge,n=t[1],s+=n*R,o+=n*O,u+=n*P,c+=n*g,l+=n*y,f+=n*C,d+=n*I,p+=n*j,h+=n*q,_+=n*se,v+=n*ue,m+=n*ve,b+=n*$e,A+=n*Re,D+=n*He,x+=n*Ge,n=t[2],o+=n*R,u+=n*O,c+=n*P,l+=n*g,f+=n*y,d+=n*C,p+=n*I,h+=n*j,_+=n*q,v+=n*se,m+=n*ue,b+=n*ve,A+=n*$e,D+=n*Re,x+=n*He,Y+=n*Ge,n=t[3],u+=n*R,c+=n*O,l+=n*P,f+=n*g,d+=n*y,p+=n*C,h+=n*I,_+=n*j,v+=n*q,m+=n*se,b+=n*ue,A+=n*ve,D+=n*$e,x+=n*Re,Y+=n*He,X+=n*Ge,n=t[4],c+=n*R,l+=n*O,f+=n*P,d+=n*g,p+=n*y,h+=n*C,_+=n*I,v+=n*j,m+=n*q,b+=n*se,A+=n*ue,D+=n*ve,x+=n*$e,Y+=n*Re,X+=n*He,Z+=n*Ge,n=t[5],l+=n*R,f+=n*O,d+=n*P,p+=n*g,h+=n*y,_+=n*C,v+=n*I,m+=n*j,b+=n*q,A+=n*se,D+=n*ue,x+=n*ve,Y+=n*$e,X+=n*Re,Z+=n*He,W+=n*Ge,n=t[6],f+=n*R,d+=n*O,p+=n*P,h+=n*g,_+=n*y,v+=n*C,m+=n*I,b+=n*j,A+=n*q,D+=n*se,x+=n*ue,Y+=n*ve,X+=n*$e,Z+=n*Re,W+=n*He,J+=n*Ge,n=t[7],d+=n*R,p+=n*O,h+=n*P,_+=n*g,v+=n*y,m+=n*C,b+=n*I,A+=n*j,D+=n*q,x+=n*se,Y+=n*ue,X+=n*ve,Z+=n*$e,W+=n*Re,J+=n*He,ee+=n*Ge,n=t[8],p+=n*R,h+=n*O,_+=n*P,v+=n*g,m+=n*y,b+=n*C,A+=n*I,D+=n*j,x+=n*q,Y+=n*se,X+=n*ue,Z+=n*ve,W+=n*$e,J+=n*Re,ee+=n*He,oe+=n*Ge,n=t[9],h+=n*R,_+=n*O,v+=n*P,m+=n*g,b+=n*y,A+=n*C,D+=n*I,x+=n*j,Y+=n*q,X+=n*se,Z+=n*ue,W+=n*ve,J+=n*$e,ee+=n*Re,oe+=n*He,z+=n*Ge,n=t[10],_+=n*R,v+=n*O,m+=n*P,b+=n*g,A+=n*y,D+=n*C,x+=n*I,Y+=n*j,X+=n*q,Z+=n*se,W+=n*ue,J+=n*ve,ee+=n*$e,oe+=n*Re,z+=n*He,M+=n*Ge,n=t[11],v+=n*R,m+=n*O,b+=n*P,A+=n*g,D+=n*y,x+=n*C,Y+=n*I,X+=n*j,Z+=n*q,W+=n*se,J+=n*ue,ee+=n*ve,oe+=n*$e,z+=n*Re,M+=n*He,N+=n*Ge,n=t[12],m+=n*R,b+=n*O,A+=n*P,D+=n*g,x+=n*y,Y+=n*C,X+=n*I,Z+=n*j,W+=n*q,J+=n*se,ee+=n*ue,oe+=n*ve,z+=n*$e,M+=n*Re,N+=n*He,U+=n*Ge,n=t[13],b+=n*R,A+=n*O,D+=n*P,x+=n*g,Y+=n*y,X+=n*C,Z+=n*I,W+=n*j,J+=n*q,ee+=n*se,oe+=n*ue,z+=n*ve,M+=n*$e,N+=n*Re,U+=n*He,L+=n*Ge,n=t[14],A+=n*R,D+=n*O,x+=n*P,Y+=n*g,X+=n*y,Z+=n*C,W+=n*I,J+=n*j,ee+=n*q,oe+=n*se,z+=n*ue,M+=n*ve,N+=n*$e,U+=n*Re,L+=n*He,H+=n*Ge,n=t[15],D+=n*R,x+=n*O,Y+=n*P,X+=n*g,Z+=n*y,W+=n*C,J+=n*I,ee+=n*j,oe+=n*q,z+=n*se,M+=n*ue,N+=n*ve,U+=n*$e,L+=n*Re,H+=n*He,w+=n*Ge,i+=38*x,s+=38*Y,o+=38*X,u+=38*Z,c+=38*W,l+=38*J,f+=38*ee,d+=38*oe,p+=38*z,h+=38*M,_+=38*N,v+=38*U,m+=38*L,b+=38*H,A+=38*w,a=1,n=i+a+65535,a=Math.floor(n/65536),i=n-a*65536,n=s+a+65535,a=Math.floor(n/65536),s=n-a*65536,n=o+a+65535,a=Math.floor(n/65536),o=n-a*65536,n=u+a+65535,a=Math.floor(n/65536),u=n-a*65536,n=c+a+65535,a=Math.floor(n/65536),c=n-a*65536,n=l+a+65535,a=Math.floor(n/65536),l=n-a*65536,n=f+a+65535,a=Math.floor(n/65536),f=n-a*65536,n=d+a+65535,a=Math.floor(n/65536),d=n-a*65536,n=p+a+65535,a=Math.floor(n/65536),p=n-a*65536,n=h+a+65535,a=Math.floor(n/65536),h=n-a*65536,n=_+a+65535,a=Math.floor(n/65536),_=n-a*65536,n=v+a+65535,a=Math.floor(n/65536),v=n-a*65536,n=m+a+65535,a=Math.floor(n/65536),m=n-a*65536,n=b+a+65535,a=Math.floor(n/65536),b=n-a*65536,n=A+a+65535,a=Math.floor(n/65536),A=n-a*65536,n=D+a+65535,a=Math.floor(n/65536),D=n-a*65536,i+=a-1+37*(a-1),a=1,n=i+a+65535,a=Math.floor(n/65536),i=n-a*65536,n=s+a+65535,a=Math.floor(n/65536),s=n-a*65536,n=o+a+65535,a=Math.floor(n/65536),o=n-a*65536,n=u+a+65535,a=Math.floor(n/65536),u=n-a*65536,n=c+a+65535,a=Math.floor(n/65536),c=n-a*65536,n=l+a+65535,a=Math.floor(n/65536),l=n-a*65536,n=f+a+65535,a=Math.floor(n/65536),f=n-a*65536,n=d+a+65535,a=Math.floor(n/65536),d=n-a*65536,n=p+a+65535,a=Math.floor(n/65536),p=n-a*65536,n=h+a+65535,a=Math.floor(n/65536),h=n-a*65536,n=_+a+65535,a=Math.floor(n/65536),_=n-a*65536,n=v+a+65535,a=Math.floor(n/65536),v=n-a*65536,n=m+a+65535,a=Math.floor(n/65536),m=n-a*65536,n=b+a+65535,a=Math.floor(n/65536),b=n-a*65536,n=A+a+65535,a=Math.floor(n/65536),A=n-a*65536,n=D+a+65535,a=Math.floor(n/65536),D=n-a*65536,i+=a-1+37*(a-1),e[0]=i,e[1]=s,e[2]=o,e[3]=u,e[4]=c,e[5]=l,e[6]=f,e[7]=d,e[8]=p,e[9]=h,e[10]=_,e[11]=v,e[12]=m,e[13]=b,e[14]=A,e[15]=D}var er=Ne;er.kem=er.kem||{};var G0=er.jsbn.BigInteger;er.kem.rsa={};er.kem.rsa.create=function(e,t){t=t||{};var r=t.prng||er.random,n={};return n.encrypt=function(a,i){var s=Math.ceil(a.n.bitLength()/8),o;do o=new G0(er.util.bytesToHex(r.getBytesSync(s)),16).mod(a.n);while(o.compareTo(G0.ONE)<=0);o=er.util.hexToBytes(o.toString(16));var u=s-o.length;u>0&&(o=er.util.fillString("\0",u)+o);var c=a.encrypt(o,"NONE"),l=e.generate(o,i);return{encapsulation:c,key:l}},n.decrypt=function(a,i,s){var o=a.decrypt(i,"NONE");return e.generate(o,s)},n};er.kem.kdf1=function(e,t){Z_(this,e,0,t||e.digestLength)};er.kem.kdf2=function(e,t){Z_(this,e,1,t||e.digestLength)};function Z_(e,t,r,n){e.generate=function(a,i){for(var s=new er.util.ByteBuffer,o=Math.ceil(i/n)+r,u=new er.util.ByteBuffer,c=r;c<o;++c){u.putInt32(c),t.start(),t.update(a+u.getBytes());var l=t.digest();s.putBytes(l.getBytes(n))}return s.truncate(s.length()-i),s.getBytes()}}var Fe=Ne;Fe.log=Fe.log||{};Fe.log.levels=["none","error","warning","info","debug","verbose","max"];var Ys={},kc=[],gi=null;Fe.log.LEVEL_LOCKED=2;Fe.log.NO_LEVEL_CHECK=4;Fe.log.INTERPOLATE=8;for(var vn=0;vn<Fe.log.levels.length;++vn){var q0=Fe.log.levels[vn];Ys[q0]={index:vn,name:q0.toUpperCase()}}Fe.log.logMessage=function(e){for(var t=Ys[e.level].index,r=0;r<kc.length;++r){var n=kc[r];if(n.flags&Fe.log.NO_LEVEL_CHECK)n.f(e);else{var a=Ys[n.level].index;t<=a&&n.f(n,e)}}};Fe.log.prepareStandard=function(e){"standard"in e||(e.standard=Ys[e.level].name+" ["+e.category+"] "+e.message)};Fe.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]),e.full=Fe.util.format.apply(this,t)}};Fe.log.prepareStandardFull=function(e){"standardFull"in e||(Fe.log.prepareStandard(e),e.standardFull=e.standard)};for(var z0=["error","warning","info","debug","verbose"],vn=0;vn<z0.length;++vn)(function(t){Fe.log[t]=function(r,n){var a=Array.prototype.slice.call(arguments).slice(2),i={timestamp:new Date,level:t,category:r,message:n,arguments:a};Fe.log.logMessage(i)}})(z0[vn]);Fe.log.makeLogger=function(e){var t={flags:0,f:e};return Fe.log.setLevel(t,"none"),t};Fe.log.setLevel=function(e,t){var r=!1;if(e&&!(e.flags&Fe.log.LEVEL_LOCKED))for(var n=0;n<Fe.log.levels.length;++n){var a=Fe.log.levels[n];if(t==a){e.level=t,r=!0;break}}return r};Fe.log.lock=function(e,t){typeof t>"u"||t?e.flags|=Fe.log.LEVEL_LOCKED:e.flags&=~Fe.log.LEVEL_LOCKED};Fe.log.addLogger=function(e){kc.push(e)};if(typeof console<"u"&&"log"in console){var ni;if(console.error&&console.warn&&console.info&&console.debug){var v3={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},Uf=function(e,t){Fe.log.prepareStandard(t);var r=v3[t.level],n=[t.standard];n=n.concat(t.arguments.slice()),r.apply(console,n)};ni=Fe.log.makeLogger(Uf)}else{var Uf=function(t,r){Fe.log.prepareStandardFull(r),console.log(r.standardFull)};ni=Fe.log.makeLogger(Uf)}Fe.log.setLevel(ni,"debug"),Fe.log.addLogger(ni),gi=ni}else console={log:function(){}};if(gi!==null&&typeof window<"u"&&window.location){var ns=new URL(window.location.href).searchParams;if(ns.has("console.level")&&Fe.log.setLevel(gi,ns.get("console.level").slice(-1)[0]),ns.has("console.lock")){var g3=ns.get("console.lock").slice(-1)[0];g3=="true"&&Fe.log.lock(gi)}}Fe.log.consoleLogger=gi;var le=Ne,B=le.asn1,Yt=le.pkcs7=le.pkcs7||{};Yt.messageFromPem=function(e){var t=le.pem.decode(e)[0];if(t.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=B.fromDer(t.body);return Yt.messageFromAsn1(n)};Yt.messageToPem=function(e,t){var r={type:"PKCS7",body:B.toDer(e.toAsn1()).getBytes()};return le.pem.encode(r,{maxline:t})};Yt.messageFromAsn1=function(e){var t={},r=[];if(!B.validate(e,Yt.asn1.contentInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var a=B.derToOid(t.contentType),i;switch(a){case le.pki.oids.envelopedData:i=Yt.createEnvelopedData();break;case le.pki.oids.encryptedData:i=Yt.createEncryptedData();break;case le.pki.oids.signedData:i=Yt.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+a+" is not (yet) supported.")}return i.fromAsn1(t.content.value[0]),i};Yt.createSignedData=function(){var e=null;return e={type:le.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(Ff(e,n,Yt.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var a=e.rawCapture.certificates.value,i=0;i<a.length;++i)e.certificates.push(le.pki.certificateFromAsn1(a[i]))},toAsn1:function(){e.contentInfo||e.sign();for(var n=[],a=0;a<e.certificates.length;++a)n.push(le.pki.certificateToAsn1(e.certificates[a]));var i=[],s=B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.INTEGER,!1,B.integerToDer(e.version).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return n.length>0&&s.value[0].value.push(B.create(B.Class.CONTEXT_SPECIFIC,0,!0,n)),i.length>0&&s.value[0].value.push(B.create(B.Class.CONTEXT_SPECIFIC,1,!0,i)),s.value[0].value.push(B.create(B.Class.UNIVERSAL,B.Type.SET,!0,e.signerInfos)),B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(e.type).getBytes()),s])},addSigner:function(n){var a=n.issuer,i=n.serialNumber;if(n.certificate){var s=n.certificate;typeof s=="string"&&(s=le.pki.certificateFromPem(s)),a=s.issuer.attributes,i=s.serialNumber}var o=n.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof o=="string"&&(o=le.pki.privateKeyFromPem(o));var u=n.digestAlgorithm||le.pki.oids.sha1;switch(u){case le.pki.oids.sha1:case le.pki.oids.sha256:case le.pki.oids.sha384:case le.pki.oids.sha512:case le.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+u)}var c=n.authenticatedAttributes||[];if(c.length>0){for(var l=!1,f=!1,d=0;d<c.length;++d){var p=c[d];if(!l&&p.type===le.pki.oids.contentType){if(l=!0,f)break;continue}if(!f&&p.type===le.pki.oids.messageDigest){if(f=!0,l)break;continue}}if(!l||!f)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:a,serialNumber:i,digestAlgorithm:u,signatureAlgorithm:le.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:c,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof e.content!="object"||e.contentInfo===null)&&(e.contentInfo=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(le.pki.oids.data).getBytes())]),"content"in e)){var a;e.content instanceof le.util.ByteBuffer?a=e.content.bytes():typeof e.content=="string"&&(a=le.util.encodeUtf8(e.content)),n.detached?e.detachedContent=B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,a):e.contentInfo.value.push(B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,a)]))}if(e.signers.length!==0){var i=t();r(i)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=le.pki.certificateFromPem(n)),e.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},e;function t(){for(var n={},a=0;a<e.signers.length;++a){var i=e.signers[a],s=i.digestAlgorithm;s in n||(n[s]=le.md[le.pki.oids[s]].create()),i.authenticatedAttributes.length===0?i.md=n[s]:i.md=le.md[le.pki.oids[s]].create()}e.digestAlgorithmIdentifiers=[];for(var s in n)e.digestAlgorithmIdentifiers.push(B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(s).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.NULL,!1,"")]));return n}function r(n){var a;if(e.detachedContent?a=e.detachedContent:(a=e.contentInfo.value[1],a=a.value[0]),!a)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var i=B.derToOid(e.contentInfo.value[0].value),s=B.toDer(a);s.getByte(),B.getBerValueLength(s),s=s.getBytes();for(var o in n)n[o].start().update(s);for(var u=new Date,c=0;c<e.signers.length;++c){var l=e.signers[c];if(l.authenticatedAttributes.length===0){if(i!==le.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{l.authenticatedAttributesAsn1=B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=B.create(B.Class.UNIVERSAL,B.Type.SET,!0,[]),d=0;d<l.authenticatedAttributes.length;++d){var p=l.authenticatedAttributes[d];p.type===le.pki.oids.messageDigest?p.value=n[l.digestAlgorithm].digest():p.type===le.pki.oids.signingTime&&(p.value||(p.value=u)),f.value.push(Uc(p)),l.authenticatedAttributesAsn1.value.push(Uc(p))}s=B.toDer(f).getBytes(),l.md.start().update(s)}l.signature=l.key.sign(l.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=b3(e.signers)}};Yt.createEncryptedData=function(){var e=null;return e={type:le.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:le.pki.oids["aes256-CBC"]},fromAsn1:function(t){Ff(e,t,Yt.asn1.encryptedDataValidator)},decrypt:function(t){t!==void 0&&(e.encryptedContent.key=t),ey(e)}},e};Yt.createEnvelopedData=function(){var e=null;return e={type:le.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:le.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=Ff(e,t,Yt.asn1.envelopedDataValidator);e.recipients=E3(r.recipientInfos.value)},toAsn1:function(){return B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(e.type).getBytes()),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.INTEGER,!1,B.integerToDer(e.version).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SET,!0,C3(e.recipients)),B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,T3(e.encryptedContent))])])])},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var a=e.recipients[n],i=a.issuer;if(a.serialNumber===t.serialNumber&&i.length===r.length){for(var s=!0,o=0;o<r.length;++o)if(i[o].type!==r[o].type||i[o].value!==r[o].value){s=!1;break}if(s)return a}}return null},decrypt:function(t,r){if(e.encryptedContent.key===void 0&&t!==void 0&&r!==void 0)switch(t.encryptedContent.algorithm){case le.pki.oids.rsaEncryption:case le.pki.oids.desCBC:var n=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=le.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}ey(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:le.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(e.encryptedContent.content===void 0){r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key;var n,a,i;switch(r){case le.pki.oids["aes128-CBC"]:n=16,a=16,i=le.aes.createEncryptionCipher;break;case le.pki.oids["aes192-CBC"]:n=24,a=16,i=le.aes.createEncryptionCipher;break;case le.pki.oids["aes256-CBC"]:n=32,a=16,i=le.aes.createEncryptionCipher;break;case le.pki.oids["des-EDE3-CBC"]:n=24,a=8,i=le.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(t===void 0)t=le.util.createBuffer(le.random.getBytes(n));else if(t.length()!=n)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+n+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=le.util.createBuffer(le.random.getBytes(a));var s=i(t);if(s.start(e.encryptedContent.parameter.copy()),s.update(e.content),!s.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=s.output}for(var o=0;o<e.recipients.length;++o){var u=e.recipients[o];if(u.encryptedContent.content===void 0)switch(u.encryptedContent.algorithm){case le.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm)}}}},e};function _3(e){var t={},r=[];if(!B.validate(e,Yt.asn1.recipientInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:t.version.charCodeAt(0),issuer:le.pki.RDNAttributesAsArray(t.issuer),serialNumber:le.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:B.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function y3(e){return B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.INTEGER,!1,B.integerToDer(e.version).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[le.pki.distinguishedNameToAsn1({attributes:e.issuer}),B.create(B.Class.UNIVERSAL,B.Type.INTEGER,!1,le.util.hexToBytes(e.serialNumber))]),B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(e.encryptedContent.algorithm).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.NULL,!1,"")]),B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function E3(e){for(var t=[],r=0;r<e.length;++r)t.push(_3(e[r]));return t}function C3(e){for(var t=[],r=0;r<e.length;++r)t.push(y3(e[r]));return t}function S3(e){var t=B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.INTEGER,!1,B.integerToDer(e.version).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[le.pki.distinguishedNameToAsn1({attributes:e.issuer}),B.create(B.Class.UNIVERSAL,B.Type.INTEGER,!1,le.util.hexToBytes(e.serialNumber))]),B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(e.digestAlgorithm).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(e.signatureAlgorithm).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.NULL,!1,"")])),t.value.push(B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=B.create(B.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<e.unauthenticatedAttributes.length;++n){var a=e.unauthenticatedAttributes[n];r.values.push(Uc(a))}t.value.push(r)}return t}function b3(e){for(var t=[],r=0;r<e.length;++r)t.push(S3(e[r]));return t}function Uc(e){var t;if(e.type===le.pki.oids.contentType)t=B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(e.value).getBytes());else if(e.type===le.pki.oids.messageDigest)t=B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===le.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),a=e.value;if(typeof a=="string"){var i=Date.parse(a);isNaN(i)?a.length===13?a=B.utcTimeToDate(a):a=B.generalizedTimeToDate(a):a=new Date(i)}a>=r&&a<n?t=B.create(B.Class.UNIVERSAL,B.Type.UTCTIME,!1,B.dateToUtcTime(a)):t=B.create(B.Class.UNIVERSAL,B.Type.GENERALIZEDTIME,!1,B.dateToGeneralizedTime(a))}return B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(e.type).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SET,!0,[t])])}function T3(e){return[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(le.pki.oids.data).getBytes()),B.create(B.Class.UNIVERSAL,B.Type.SEQUENCE,!0,[B.create(B.Class.UNIVERSAL,B.Type.OID,!1,B.oidToDer(e.algorithm).getBytes()),e.parameter?B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),B.create(B.Class.CONTEXT_SPECIFIC,0,!0,[B.create(B.Class.UNIVERSAL,B.Type.OCTETSTRING,!1,e.content.getBytes())])]}function Ff(e,t,r){var n={},a=[];if(!B.validate(t,r,n,a)){var i=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw i.errors=i,i}var s=B.derToOid(n.contentType);if(s!==le.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var o="";if(le.util.isArray(n.encryptedContent))for(var u=0;u<n.encryptedContent.length;++u){if(n.encryptedContent[u].type!==B.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");o+=n.encryptedContent[u].value}else o=n.encryptedContent;e.encryptedContent={algorithm:B.derToOid(n.encAlgorithm),parameter:le.util.createBuffer(n.encParameter.value),content:le.util.createBuffer(o)}}if(n.content){var o="";if(le.util.isArray(n.content))for(var u=0;u<n.content.length;++u){if(n.content[u].type!==B.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");o+=n.content[u].value}else o=n.content;e.content=le.util.createBuffer(o)}return e.version=n.version.charCodeAt(0),e.rawCapture=n,n}function ey(e){if(e.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(e.content===void 0){var t;switch(e.encryptedContent.algorithm){case le.pki.oids["aes128-CBC"]:case le.pki.oids["aes192-CBC"]:case le.pki.oids["aes256-CBC"]:t=le.aes.createDecryptionCipher(e.encryptedContent.key);break;case le.pki.oids.desCBC:case le.pki.oids["des-EDE3-CBC"]:t=le.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}var gt=Ne,Io=gt.ssh=gt.ssh||{};Io.privateKeyToPutty=function(e,t,r){r=r||"",t=t||"";var n="ssh-rsa",a=t===""?"none":"aes256-cbc",i="PuTTY-User-Key-File-2: "+n+`\r
`;i+="Encryption: "+a+`\r
`,i+="Comment: "+r+`\r
`;var s=gt.util.createBuffer();Ta(s,n),Tr(s,e.e),Tr(s,e.n);var o=gt.util.encode64(s.bytes(),64),u=Math.floor(o.length/66)+1;i+="Public-Lines: "+u+`\r
`,i+=o;var c=gt.util.createBuffer();Tr(c,e.d),Tr(c,e.p),Tr(c,e.q),Tr(c,e.qInv);var l;if(!t)l=gt.util.encode64(c.bytes(),64);else{var f=c.length()+16-1;f-=f%16;var d=as(c.bytes());d.truncate(d.length()-f+c.length()),c.putBuffer(d);var p=gt.util.createBuffer();p.putBuffer(as("\0\0\0\0",t)),p.putBuffer(as("\0\0\0",t));var h=gt.aes.createEncryptionCipher(p.truncate(8),"CBC");h.start(gt.util.createBuffer().fillWithByte(0,16)),h.update(c.copy()),h.finish();var _=h.output;_.truncate(16),l=gt.util.encode64(_.bytes(),64)}u=Math.floor(l.length/66)+1,i+=`\r
Private-Lines: `+u+`\r
`,i+=l;var v=as("putty-private-key-file-mac-key",t),m=gt.util.createBuffer();Ta(m,n),Ta(m,a),Ta(m,r),m.putInt32(s.length()),m.putBuffer(s),m.putInt32(c.length()),m.putBuffer(c);var b=gt.hmac.create();return b.start("sha1",v),b.update(m.bytes()),i+=`\r
Private-MAC: `+b.digest().toHex()+`\r
`,i};Io.publicKeyToOpenSSH=function(e,t){var r="ssh-rsa";t=t||"";var n=gt.util.createBuffer();return Ta(n,r),Tr(n,e.e),Tr(n,e.n),r+" "+gt.util.encode64(n.bytes())+" "+t};Io.privateKeyToOpenSSH=function(e,t){return t?gt.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):gt.pki.privateKeyToPem(e)};Io.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||gt.md.md5.create(),n="ssh-rsa",a=gt.util.createBuffer();Ta(a,n),Tr(a,e.e),Tr(a,e.n),r.start(),r.update(a.getBytes());var i=r.digest();if(t.encoding==="hex"){var s=i.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}else{if(t.encoding==="binary")return i.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return i};function Tr(e,t){var r=t.toString(16);r[0]>="8"&&(r="00"+r);var n=gt.util.hexToBytes(r);e.putInt32(n.length),e.putBytes(n)}function Ta(e,t){e.putInt32(t.length),e.putString(t)}function as(){for(var e=gt.md.sha1.create(),t=arguments.length,r=0;r<t;++r)e.update(arguments[r]);return e.digest()}var A3=Ne,ty=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(go,"__esModule",{value:!0});const Fc=ty(A3),w3=ty(Er),W0=Fc.default.jsbn.BigInteger;class Ai{static parsePublicKey(t){return new w3.default(function(r,n){const a=Ai.RE.exec(t);if(a){const i=Buffer.from(a[1],"base64"),s=a[2].trim();return r(Ai.readPublicKeyFromStruct(i,s))}else return n(new Error("Unrecognizable public key format"))})}static readPublicKeyFromStruct(t,r){if(!t.length)throw new Error("Invalid public key");let n=0;const a=t.readUInt32LE(n)*4;if(n+=4,t.length!==8+a+a+4)throw new Error("Invalid public key");n+=4;const i=Buffer.alloc(a);t.copy(i,0,n,n+a),[].reverse.call(i),n+=a,n+=a;const s=t.readUInt32LE(n);if(!(s===3||s===65537))throw new Error(`Invalid exponent ${s}, only 3 and 65537 are supported`);const o=new W0(i.toString("hex"),16),u=new W0(s.toString(),10),c=Fc.default.pki.rsa.setPublicKey(o,u),l=Fc.default.md.md5.create();l.update(t.toString("binary"));const f=c;return f.fingerprint=l.digest().toHex().match(/../g).join(":"),f.comment=r,f}}Ai.RE=/^((?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?)\0?( .*|)\s*$/;go.default=Ai;var Mf={};Object.defineProperty(Mf,"__esModule",{value:!0});class I3{constructor(){this.remotes=Object.create(null),this.count=0}end(){const t=this.remotes;for(const r in t)t[r].end();this.remotes=Object.create(null),this.count=0}insert(t,r){if(this.remotes[t])throw new Error(`Remote ID ${t} is already being used`);return this.count+=1,this.remotes[t]=r}get(t){return this.remotes[t]||null}remove(t){let r;return(r=this.remotes[t])?(delete this.remotes[t],this.count-=1,r):null}}Mf.default=I3;var jf={},Oo=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jf,"__esModule",{value:!0});const O3=Oo(ra),x3=Pt,rr=Oo(Pi),Q0=Oo(Er),Gu=Oo(Se),on=(0,O3.default)("adb:tcpusb:service");class Vf extends Error{constructor(t){super(),this.packet=t,Object.setPrototypeOf(this,Vf.prototype),this.name="PrematurePacketError",this.message="Premature packet",Error.captureStackTrace(this,Wr.PrematurePacketError)}}class xo extends Error{constructor(){super(),Object.setPrototypeOf(this,xo.prototype),this.name="LateTransportError",this.message="Late transport",Error.captureStackTrace(this,Wr.LateTransportError)}}class Wr extends x3.EventEmitter{constructor(t,r,n,a,i){super(),this.client=t,this.serial=r,this.localId=n,this.remoteId=a,this.socket=i,this.opened=!1,this.ended=!1,this.needAck=!1}end(){if(this.transport&&this.transport.end(),this.ended)return this;on("O:A_CLSE");const t=this.opened?this.localId:0;try{this.socket.write(rr.default.assemble(rr.default.A_CLSE,t,this.remoteId,null))}catch{}return this.transport=null,this.ended=!0,this.emit("end"),this}handle(t){return Q0.default.try(()=>{switch(t.command){case rr.default.A_OPEN:return this._handleOpenPacket(t);case rr.default.A_OKAY:return this._handleOkayPacket(t);case rr.default.A_WRTE:return this._handleWritePacket(t);case rr.default.A_CLSE:return this._handleClosePacket(t);default:throw new Error(`Unexpected packet ${t.command}`)}}).catch(r=>(this.emit("error",r),this.end()))}_handleOpenPacket(t){return on("I:A_OPEN",t),this.client.getDevice(this.serial).transport().then(r=>{if(this.transport=r,this.ended)throw new xo;return this.transport.write(Gu.default.encodeData(t.data.slice(0,-1))),this.transport.parser.readAscii(4).then(n=>{switch(n){case Gu.default.OKAY:return on("O:A_OKAY"),this.socket.write(rr.default.assemble(rr.default.A_OKAY,this.localId,this.remoteId,null)),this.opened=!0;case Gu.default.FAIL:return this.transport.parser.readError();default:return this.transport.parser.unexpected(n,"OKAY or FAIL")}})}).then(()=>new Q0.default((r,n)=>(this.transport.socket.on("readable",()=>this._tryPush()).on("end",r).on("error",n),this._tryPush()))).finally(()=>this.end())}_handleOkayPacket(t){if(on("I:A_OKAY",t),!this.ended){if(!this.transport)throw new Wr.PrematurePacketError(t);return this.needAck=!1,this._tryPush()}}_handleWritePacket(t){if(on("I:A_WRTE",t),!this.ended){if(!this.transport)throw new Wr.PrematurePacketError(t);return this.transport&&t.data&&this.transport.write(t.data),on("O:A_OKAY"),this.socket.write(rr.default.assemble(rr.default.A_OKAY,this.localId,this.remoteId,null))}}_handleClosePacket(t){if(on("I:A_CLSE",t),!this.ended){if(!this.transport)throw new Wr.PrematurePacketError(t);return this.end()}}_tryPush(){if(this.needAck||this.ended)return;const t=this._readChunk(this.transport.socket);if(t)return on("O:A_WRTE"),this.socket.write(rr.default.assemble(rr.default.A_WRTE,this.localId,this.remoteId,t)),this.needAck=!0}_readChunk(t){return t.read(this.socket.maxPayload)||t.read()}}Wr.PrematurePacketError=Vf;Wr.LateTransportError=xo;jf.default=Wr;var D3=k&&k.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),$3=k&&k.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),N3=k&&k.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&D3(t,e,r);return $3(t,e),t},An=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gf,"__esModule",{value:!0});const R3=Pt,P3=N3(qs),L3=An(ra),Rn=An(Er),B3=An(_f),X0=An(Cf),Ot=An(Pi),k3=An(go),U3=An(Mf),F3=An(jf),_t=(0,L3.default)("adb:tcpusb:socket"),J0=4294967295,M3=65535,Z0=1,j3=2,V3=3,Y3=20;class Yf extends Error{constructor(t){super(t),Object.setPrototypeOf(this,Yf.prototype),this.name="AuthError",Error.captureStackTrace(this,Gt.AuthError)}}class Kf extends Error{constructor(){super("Unauthorized access"),Object.setPrototypeOf(this,Kf.prototype),this.name="UnauthorizedError",Error.captureStackTrace(this,Gt.UnauthorizedError)}}class Gt extends R3.EventEmitter{constructor(t,r,n,a={}){super(),this.client=t,this.serial=r,this.socket=n,this.options=a,this.ended=!1,this.authorized=!1,this.syncToken=new X0.default(J0),this.remoteId=new X0.default(J0),this.services=new U3.default,this.version=1,this.maxPayload=4096;let i;(i=this.options).auth||(i.auth=()=>Rn.default.resolve(!0)),this.socket.setNoDelay(!0),this.reader=new B3.default(this.socket).on("packet",this._handle.bind(this)).on("error",s=>(_t(`PacketReader error: ${s.message}`),this.end())).on("end",this.end.bind(this)),this.remoteAddress=this.socket.remoteAddress,this.token=void 0,this.signature=void 0}end(){return this.ended?this:(this.services.end(),this.socket.end(),this.ended=!0,this.emit("end"),this)}_error(t){return this.emit("error",t),this.end()}_handle(t){return this.ended?Rn.default.resolve(!1):(this.emit("userActivity",t),Rn.default.try(()=>{switch(t.command){case Ot.default.A_SYNC:return Rn.default.resolve(this._handleSyncPacket());case Ot.default.A_CNXN:return this._handleConnectionPacket(t);case Ot.default.A_OPEN:return this._handleOpenPacket(t).then(r=>!!r);case Ot.default.A_OKAY:case Ot.default.A_WRTE:case Ot.default.A_CLSE:return this._forwardServicePacket(t).then(r=>!!r);case Ot.default.A_AUTH:return this._handleAuthPacket(t);default:throw new Error(`Unknown command ${t.command}`)}}).catch(Gt.AuthError,()=>(this.end(),!1)).catch(Gt.UnauthorizedError,()=>(this.end(),!1)).catch(r=>(this._error(r),!1)))}_handleSyncPacket(){return _t("I:A_SYNC"),_t("O:A_SYNC"),this.write(Ot.default.assemble(Ot.default.A_SYNC,1,this.syncToken.next()))}_handleConnectionPacket(t){return _t("I:A_CNXN",t),this.version=Ot.default.swap32(t.arg0),this.maxPayload=Math.min(M3,t.arg1),this._createToken().then(r=>(this.token=r,_t(`Created challenge '${this.token.toString("base64")}'`),_t("O:A_AUTH"),this.write(Ot.default.assemble(Ot.default.A_AUTH,Z0,0,this.token))))}_handleAuthPacket(t){switch(_t("I:A_AUTH",t),t.arg0){case j3:t.data&&_t(`Received signature '${t.data.toString("base64")}'`),this.signature||(this.signature=t.data),_t("O:A_AUTH");const r=this.write(Ot.default.assemble(Ot.default.A_AUTH,Z0,0,this.token));return Rn.default.resolve(r);case V3:if(!this.signature)throw new Gt.AuthError("Public key sent before signature");if(!t.data||t.data.length<2)throw new Gt.AuthError("Empty RSA public key");return _t(`Received RSA public key '${t.data.toString("base64")}'`),k3.default.parsePublicKey(this._skipNull(t.data).toString()).then(n=>{const a=this.token.toString("binary"),i=this.signature.toString("binary");if(!n.verify(a,i))throw _t("Signature mismatch"),new Gt.AuthError("Signature mismatch");return _t("Signature verified"),n}).then(n=>{if(this.options.auth)return this.options.auth(n).catch(()=>{throw _t("Connection rejected by user-defined auth handler"),new Gt.AuthError("Rejected by user-defined handler")})}).then(()=>this._deviceId()).then(n=>(this.authorized=!0,_t("O:A_CNXN"),this.write(Ot.default.assemble(Ot.default.A_CNXN,Ot.default.swap32(this.version),this.maxPayload,n))));default:throw new Error(`Unknown authentication method ${t.arg0}`)}}_handleOpenPacket(t){if(!this.authorized)throw new Gt.UnauthorizedError;const r=t.arg0,n=this.remoteId.next();if(!(t.data&&t.data.length>=2))throw new Error("Empty service name");const a=this._skipNull(t.data);_t(`Calling ${a}`);const i=new F3.default(this.client,this.serial,n,r,this);return new Rn.default((s,o)=>(i.on("error",o),i.on("end",s),this.services.insert(n,i),_t(`Handling ${this.services.count} services simultaneously`),i.handle(t))).catch(()=>!0).finally(()=>(this.services.remove(n),_t(`Handling ${this.services.count} services simultaneously`),i.end()))}_forwardServicePacket(t){if(!this.authorized)throw new Gt.UnauthorizedError;const r=t.arg1,n=this.services.get(r);return n?n.handle(t):(_t("Received a packet to a service that may have been closed already"),Promise.resolve(!1))}write(t){return this.ended?!1:this.socket.write(t)}_createToken(){return Rn.default.promisify(P3.randomBytes)(Y3)}_skipNull(t){return t.slice(0,-1)}_deviceId(){return _t("Loading device properties to form a standard device ID"),this.client.getDevice(this.serial).getProperties().then(function(t){const r=function(){const n=["ro.product.name","ro.product.model","ro.product.device"],a=[];for(let i=0,s=n.length;i<s;i++){const o=n[i];a.push(`${o}=${t[o]};`)}return a}().join("");return Buffer.from(`device::${r}\0`)})}}Gt.AuthError=Yf;Gt.UnauthorizedError=Kf;gf.default=Gt;var K3=k&&k.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),H3=k&&k.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),G3=k&&k.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&K3(t,e,r);return H3(t,e),t},q3=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vf,"__esModule",{value:!0});const z3=G3(Vc),W3=q3(gf),Q3=Pt;class X3 extends Q3.EventEmitter{constructor(t,r,n){super(),this.client=t,this.serial=r,this.options=n,this.connections=[],this.server=z3.createServer({allowHalfOpen:!0}),this.server.on("error",a=>this.emit("error",a)),this.server.on("listening",()=>this.emit("listening")),this.server.on("close",()=>this.emit("close")),this.server.on("connection",a=>{const i=new W3.default(this.client,this.serial,a,this.options);return this.connections.push(i),i.on("error",s=>this.emit("error",s)),i.once("end",()=>this.connections=this.connections.filter(function(s){return s!==i})),this.emit("connection",i)})}listen(...t){return this.server.listen(...t),this}close(){return this.server.close(),this}end(){const t=this.connections;for(let r=0,n=t.length;r<n;r++)t[r].end();return this}}vf.default=X3;var Do={},ry={exports:{}},qu={exports:{}},zu={exports:{}},em;function ny(){return em||(em=1,(function(){var e,t,r,n={}.hasOwnProperty,a=function(i,s){for(var o in s)n.call(s,o)&&(i[o]=s[o]);function u(){this.constructor=i}return u.prototype=s.prototype,i.prototype=new u,i.__super__=s.prototype,i};t=Pt.EventEmitter,e=function(i){a(s,i);function s(){return r=s.__super__.constructor.apply(this,arguments),r}return s.prototype.send=function(){throw new Error("send is not implemented")},s.prototype.keyDown=function(o,u){return this.send("key down "+o,u),this},s.prototype.keyUp=function(o,u){return this.send("key up "+o,u),this},s.prototype.touchDown=function(o,u,c){return this.send("touch down "+o+" "+u,c),this},s.prototype.touchUp=function(o,u,c){return this.send("touch up "+o+" "+u,c),this},s.prototype.touchMove=function(o,u,c){return this.send("touch move "+o+" "+u,c),this},s.prototype.trackball=function(o,u,c){return this.send("trackball "+o+" "+u,c),this},s.prototype.flipOpen=function(o){return this.send("flip open",o),this},s.prototype.flipClose=function(o){return this.send("flip close",o),this},s.prototype.wake=function(o){return this.send("wake",o),this},s.prototype.tap=function(o,u,c){return this.send("tap "+o+" "+u,c),this},s.prototype.press=function(o,u){return this.send("press "+o,u),this},s.prototype.type=function(o,u){return o=o.replace(/"/g,'\\"'),o.indexOf(" ")===-1?this.send("type "+o,u):this.send('type "'+o+'"',u),this},s.prototype.list=function(o){var u=this;return this.send("listvar",function(c,l){return c?u(o(c)):c?o(c):o(null,l.split(/\s+/g))}),this},s.prototype.get=function(o,u){return this.send("getvar "+o,u),this},s.prototype.quit=function(o){return this.send("quit",o),this},s.prototype.done=function(o){return this.send("done",o),this},s.prototype.sleep=function(o,u){return this.send("sleep "+o,u),this},s.prototype.getAmCurrentAction=function(o){return this.get("am.current.action",o),this},s.prototype.getAmCurrentCategories=function(o){return this.get("am.current.categories",o),this},s.prototype.getAmCurrentCompClass=function(o){return this.get("am.current.comp.class",o),this},s.prototype.getAmCurrentCompPackage=function(o){return this.get("am.current.comp.package",o),this},s.prototype.getAmCurrentData=function(o){return this.get("am.current.data",o),this},s.prototype.getAmCurrentPackage=function(o){return this.get("am.current.package",o),this},s.prototype.getBuildBoard=function(o){return this.get("build.board",o),this},s.prototype.getBuildBrand=function(o){return this.get("build.brand",o),this},s.prototype.getBuildCpuAbi=function(o){return this.get("build.cpu_abi",o),this},s.prototype.getBuildDevice=function(o){return this.get("build.device",o),this},s.prototype.getBuildDisplay=function(o){return this.get("build.display",o),this},s.prototype.getBuildFingerprint=function(o){return this.get("build.fingerprint",o),this},s.prototype.getBuildHost=function(o){return this.get("build.host",o),this},s.prototype.getBuildId=function(o){return this.get("build.id",o),this},s.prototype.getBuildManufacturer=function(o){return this.get("build.manufacturer",o),this},s.prototype.getBuildModel=function(o){return this.get("build.model",o),this},s.prototype.getBuildProduct=function(o){return this.get("build.product",o),this},s.prototype.getBuildTags=function(o){return this.get("build.tags",o),this},s.prototype.getBuildType=function(o){return this.get("build.type",o),this},s.prototype.getBuildUser=function(o){return this.get("build.user",o),this},s.prototype.getBuildVersionCodename=function(o){return this.get("build.version.codename",o),this},s.prototype.getBuildVersionIncremental=function(o){return this.get("build.version.incremental",o),this},s.prototype.getBuildVersionRelease=function(o){return this.get("build.version.release",o),this},s.prototype.getBuildVersionSdk=function(o){return this.get("build.version.sdk",o),this},s.prototype.getClockMillis=function(o){return this.get("clock.millis",o),this},s.prototype.getClockRealtime=function(o){return this.get("clock.realtime",o),this},s.prototype.getClockUptime=function(o){return this.get("clock.uptime",o),this},s.prototype.getDisplayDensity=function(o){return this.get("display.density",o),this},s.prototype.getDisplayHeight=function(o){return this.get("display.height",o),this},s.prototype.getDisplayWidth=function(o){return this.get("display.width",o),this},s}(t),zu.exports=e}).call(k)),zu.exports}var Wu={exports:{}},tm;function ay(){return tm||(tm=1,(function(){var e;e=function(){function t(r,n){this.command=r,this.callback=n,this.next=null}return t}(),Wu.exports=e}).call(k)),Wu.exports}var Qu={exports:{}},rm;function iy(){return rm||(rm=1,(function(){var e;e=function(){t.ERROR="ERROR",t.OK="OK";function t(r,n){this.type=r,this.value=n}return t.prototype.isError=function(){return this.type===t.ERROR},t.prototype.toError=function(){if(!this.isError())throw new Error("toError() cannot be called for non-errors");return new Error(this.value)},t}(),Qu.exports=e}).call(k)),Qu.exports}var Xu={exports:{}},nm;function J3(){return nm||(nm=1,(function(){var e;e=function(){function t(){this.head=null,this.tail=null}return t.prototype.enqueue=function(r){this.tail?this.tail.next=r:this.head=r,this.tail=r},t.prototype.dequeue=function(){var r;return r=this.head,r&&(r===this.tail&&(this.tail=null),this.head=r.next,r.next=null),r},t}(),Xu.exports=e}).call(k)),Xu.exports}var Ju={exports:{}},am;function Z3(){return am||(am=1,(function(){var e,t,r,n={}.hasOwnProperty,a=function(i,s){for(var o in s)n.call(s,o)&&(i[o]=s[o]);function u(){this.constructor=i}return u.prototype=s.prototype,i.prototype=new u,i.__super__=s.prototype,i};e=ny(),t=ay(),r=function(i){a(s,i);function s(o){var u=this;this.monkey=o,this.commands=[],this.replies=[],this.errors=[],this.counter=0,this.sent=!1,this.callback=null,this.collector=function(c,l,f){return c&&u.errors.push(""+f+": "+c.message),u.replies.push(l),u.counter-=1,u._maybeFinish()}}return s.prototype._maybeFinish=function(){var o=this;this.counter===0&&(this.errors.length?setImmediate(function(){return o.callback(new Error(o.errors.join(", ")))}):setImmediate(function(){return o.callback(null,o.replies)}))},s.prototype._forbidReuse=function(){if(this.sent)throw new Error("Reuse not supported")},s.prototype.send=function(o){this._forbidReuse(),this.commands.push(new t(o,this.collector))},s.prototype.execute=function(o){var u,c,l,f,d;if(this._forbidReuse(),this.counter=this.commands.length,this.sent=!0,this.callback=o,this.counter!==0){for(c=[],d=this.commands,l=0,f=d.length;l<f;l++)u=d[l],this.monkey.commandQueue.enqueue(u),c.push(u.command);c.push(""),this.commands=[],this.monkey.stream.write(c.join(`
`))}},s}(e),Ju.exports=r}).call(k)),Ju.exports}var Zu={exports:{}},im;function e5(){return im||(im=1,(function(){var e,t,r,n={}.hasOwnProperty,a=function(i,s){for(var o in s)n.call(s,o)&&(i[o]=s[o]);function u(){this.constructor=i}return u.prototype=s.prototype,i.prototype=new u,i.__super__=s.prototype,i};e=Pt.EventEmitter,r=iy(),t=function(i){a(s,i);function s(o){this.column=0,this.buffer=new Buffer("")}return s.prototype.parse=function(o){for(this.buffer=Buffer.concat([this.buffer,o]);this.column<this.buffer.length;)this.buffer[this.column]===10&&(this._parseLine(this.buffer.slice(0,this.column)),this.buffer=this.buffer.slice(this.column+1),this.column=0),this.column+=1;this.buffer.length?this.emit("wait"):this.emit("drain")},s.prototype._parseLine=function(o){switch(o[0]){case 79:o.length===2?this.emit("reply",new r(r.OK,null)):this.emit("reply",new r(r.OK,o.toString("ascii",3)));break;case 69:o.length===5?this.emit("reply",new r(r.ERROR,null)):this.emit("reply",new r(r.ERROR,o.toString("ascii",6)));break;default:this._complain(o)}},s.prototype._complain=function(o){this.emit("error",new SyntaxError("Unparseable line '"+o+"'"))},s}(e),Zu.exports=t}).call(k)),Zu.exports}var sm;function sy(){return sm||(sm=1,(function(){var e,t,r,n,a,i,s={}.hasOwnProperty,o=function(u,c){for(var l in c)s.call(c,l)&&(u[l]=c[l]);function f(){this.constructor=u}return f.prototype=c.prototype,u.prototype=new f,u.__super__=c.prototype,u};e=ny(),r=ay(),iy(),i=J3(),n=Z3(),a=e5(),t=function(u){o(c,u);function c(){this.commandQueue=new i,this.parser=new a,this.stream=null}return c.prototype._hook=function(){var l=this;this.stream.on("data",function(f){return l.parser.parse(f)}),this.stream.on("error",function(f){return l.emit("error",f)}),this.stream.on("end",function(){return l.emit("end")}),this.stream.on("finish",function(){return l.emit("finish")}),this.parser.on("reply",function(f){return l._consume(f)}),this.parser.on("error",function(f){return l.emit("error",f)})},c.prototype._consume=function(l){var f;if(f=this.commandQueue.dequeue())l.isError()?f.callback(l.toError(),null,f.command):f.callback(null,l.value,f.command);else throw new Error("Command queue depleted, but replies still coming in")},c.prototype.connect=function(l){return this.stream=l,this._hook(),this},c.prototype.end=function(){return this.stream.end(),this},c.prototype.send=function(l,f){var d,p,h;if(Array.isArray(l)){for(p=0,h=l.length;p<h;p++)d=l[p],this.commandQueue.enqueue(new r(d,f));this.stream.write(""+l.join(`
`)+`
`)}else this.commandQueue.enqueue(new r(l,f)),this.stream.write(""+l+`
`);return this},c.prototype.multi=function(){return new n(this)},c}(e),qu.exports=t}).call(k)),qu.exports}var ec={exports:{}},om;function t5(){return om||(om=1,(function(){var e,t,r,n,a={}.hasOwnProperty,i=function(s,o){for(var u in o)a.call(o,u)&&(s[u]=o[u]);function c(){this.constructor=s}return c.prototype=o.prototype,s.prototype=new c,s.__super__=o.prototype,s};r=Vc,e=sy(),t=function(s){i(o,s);function o(){return n=o.__super__.constructor.apply(this,arguments),n}return o.prototype.connect=function(u){var c;return c=r.connect(u),c.setNoDelay(!0),o.__super__.connect.call(this,c)},o.prototype._hook=function(){var u=this;return this.stream.on("connect",function(){return u.emit("connect")}),this.stream.on("close",function(c){return u.emit("close",c)}),o.__super__._hook.call(this)},o}(e),ec.exports=t}).call(k)),ec.exports}(function(){var e,t,r;e=sy(),t=t5(),r=function(){function n(){}return n.connect=function(a){return new t().connect(a)},n.connectStream=function(a){return new e().connect(a)},n}(),r.Connection=t,r.Client=e,ry.exports=r}).call(k);var r5=ry.exports,n5=function(){function e(){this.date=null,this.pid=-1,this.tid=-1,this.priority=null,this.tag=null,this.message=null}return e.prototype.setDate=function(t){this.date=t},e.prototype.setPid=function(t){this.pid=t},e.prototype.setTid=function(t){this.tid=t},e.prototype.setPriority=function(t){this.priority=t},e.prototype.setTag=function(t){this.tag=t},e.prototype.setMessage=function(t){this.message=t},e.prototype.toBinary=function(){var t=20;t+=1,t+=this.tag.length,t+=1,t+=this.message.length,t+=1;var r=new Buffer(t),n=0;return r.writeUInt16LE(t-20,n),n+=4,r.writeInt32LE(this.pid,n),n+=4,r.writeInt32LE(this.tid,n),n+=4,r.writeInt32LE(Math.floor(this.date.getTime()/1e3),n),n+=4,r.writeInt32LE(this.date.getTime()%1e3*1e6,n),n+=4,r[n]=this.priority,n+=1,r.write(this.tag,n,this.tag.length),n+=this.tag.length,r[n]=0,n+=1,r.write(this.message,n,this.message.length),n+=this.message.length,r[n]=0,r},e}(),a5=n5,i5=k&&k.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),s5=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o5=Pt,u5=s5(a5),um=20,c5=100,l5=function(e){i5(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.buffer=new Buffer(0),r}return t.prototype.parse=function(r){for(this.buffer=Buffer.concat([this.buffer,r]);this.buffer.length>4;){var n=0,a=this.buffer.readUInt16LE(n);n+=2;var i=this.buffer.readUInt16LE(n);if((i<um||i>c5)&&(i=um),n+=2,this.buffer.length<i+a)break;var s=new u5.default;s.setPid(this.buffer.readInt32LE(n)),n+=4,s.setTid(this.buffer.readInt32LE(n)),n+=4;var o=this.buffer.readInt32LE(n);n+=4;var u=this.buffer.readInt32LE(n);s.setDate(new Date(o*1e3+u/1e6)),n+=4,n=i;var c=this.buffer.slice(n,n+a);n+=a,this.buffer=this.buffer.slice(n),this._processEntry(s,c)}this.buffer.length?this.emit("wait"):this.emit("drain")},t.prototype._processEntry=function(r,n){r.setPriority(n[0]);for(var a=1;a<n.length;){if(n[a]===0){r.setTag(n.slice(1,a).toString()),r.setMessage(n.slice(a+1,n.length-1).toString()),this.emit("entry",r);return}a+=1}this.emit("error",new Error("Unprocessable entry data '".concat(n,"'")))},t}(o5.EventEmitter),f5=l5,d5=k&&k.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),h5=zs,p5=function(e){d5(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.savedR=null,r}return t.prototype._transform=function(r,n,a){var i=0,s=0;this.savedR&&(r[0]!==10&&this.push(this.savedR),this.savedR=null);for(var o=r.length-1;s<=o;){if(r[s]===13)if(s===o){this.savedR=r.slice(o);break}else r[s+1]===10&&(this.push(r.slice(i,s)),i=s+1);s+=1}s!==i&&this.push(r.slice(i,s)),a()},t}(h5.Transform),m5=p5,Tt={UNKNOWN:0,DEFAULT:1,VERBOSE:2,DEBUG:3,INFO:4,WARN:5,ERROR:6,FATAL:7,SILENT:8},v5={0:"UNKNOWN",1:"DEFAULT",2:"VERBOSE",3:"DEBUG",4:"INFO",5:"WARN",6:"ERROR",7:"FATAL",8:"SILENT"},g5={"?":Tt.UNKNOWN,V:Tt.VERBOSE,D:Tt.DEBUG,I:Tt.INFO,W:Tt.WARN,E:Tt.ERROR,F:Tt.FATAL,S:Tt.SILENT},_5={0:"?",1:"?",2:"V",3:"D",4:"I",5:"W",6:"E",7:"F",8:"S"},y5=function(){function e(){}return e.fromName=function(t){var r=Tt[t.toUpperCase()];return r||r===0?r:e.fromLetter(t)},e.toName=function(t){return v5[t]},e.fromLetter=function(t){return g5[t.toUpperCase()]},e.toLetter=function(t){return _5[t]},e.UNKNOWN=Tt.UNKNOWN,e.DEFAULT=Tt.DEFAULT,e.VERBOSE=Tt.VERBOSE,e.DEBUG=Tt.DEBUG,e.INFO=Tt.INFO,e.WARN=Tt.WARN,e.ERROR=Tt.ERROR,e.FATAL=Tt.FATAL,e.SILENT=Tt.SILENT,e}(),oy=y5,E5=k&&k.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hf=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},C5=Pt,S5=Hf(f5),b5=Hf(m5),is=Hf(oy),T5=function(e){E5(t,e);function t(r){var n=e.call(this,r)||this;n.options=r,n.parser=new S5.default,n.stream=null;var a={format:"binary",fixLineFeeds:!0,priority:is.default.DEBUG};if(n.options=Object.assign({},a,r),n.filters={all:-1,tags:{}},n.options.format!=="binary")throw new Error("Unsupported format '".concat(n.options.format,"'"));return n}return t.prototype.exclude=function(r){return r===t.ANY?this.excludeAll():(this.filters.tags[r]=is.default.SILENT,this)},t.prototype.excludeAll=function(){return this.filters.all=is.default.SILENT,this},t.prototype.include=function(r,n){return n===void 0&&(n=this.options.priority),r===t.ANY?this.includeAll(n):(this.filters.tags[r]=this._priority(n),this)},t.prototype.includeAll=function(r){return r===void 0&&(r=this.options.priority),this.filters.all=this._priority(r),this},t.prototype.resetFilters=function(){return this.filters.all=-1,this.filters.tags={},this},t.prototype._hook=function(){var r=this;if(this.options.fixLineFeeds){var n=this.stream.pipe(new b5.default);n.on("data",function(a){r.parser.parse(a)})}else this.stream.on("data",function(a){r.parser.parse(a)});this.stream.on("error",function(a){r.emit("error",a)}),this.stream.on("end",function(){r.emit("end")}),this.stream.on("finish",function(){r.emit("finish")}),this.parser.on("entry",function(a){r._filter(a)&&r.emit("entry",a)}),this.parser.on("error",function(a){r.emit("error",a)})},t.prototype._filter=function(r){var n=r.tag in this.filters.tags?this.filters.tags[r.tag]:this.filters.all;return r.priority>=n},t.prototype._priority=function(r){return typeof r=="number"?r:is.default.fromName(r)},t.prototype.connect=function(r){return this.stream=r,this._hook(),this},t.prototype.end=function(){return this.stream.end(),this},t.ANY="*",t}(C5.EventEmitter),A5=T5,uy=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},cm=uy(A5),w5=uy(oy),I5=function(){function e(){}return e.readStream=function(t,r){return new cm.default(r).connect(t)},e.Reader=cm.default,e.Priority=w5.default,e}(),O5=I5,x5=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},D5=x5(O5),$5=D5.default,$o={},No={},N5=k&&k.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),R5=k&&k.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),P5=k&&k.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&N5(t,e,r);return R5(t,e),t};Object.defineProperty(No,"__esModule",{value:!0});const L5=P5(Nr);class It extends L5.Stats{constructor(t,r,n){super(),this.mode=Number(t),this.size=Number(r),this.sizeBig=r,this.mtime=new Date(n*1e3)}}It.S_IFMT=61440;It.S_IFSOCK=49152;It.S_IFLNK=40960;It.S_IFREG=32768;It.S_IFBLK=24576;It.S_IFDIR=16384;It.S_IFCHR=8192;It.S_IFIFO=4096;It.S_ISUID=2048;It.S_ISGID=1024;It.S_ISVTX=512;It.S_IRWXU=448;It.S_IRUSR=256;It.S_IWUSR=128;It.S_IXUSR=64;It.S_IRWXG=56;It.S_IRGRP=32;No.default=It;var B5=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const k5=B5(No);class U5 extends k5.default{constructor(t,r,n,a){super(r,BigInt(n),a),this.name=t}toString(){return this.name}}var F5=U5,Gf={};Object.defineProperty(Gf,"__esModule",{value:!0});const M5=Pt;class j5 extends M5.EventEmitter{constructor(){super(...arguments),this._stack=[],this.stats={bytesTransferred:0}}cancel(){return this.emit("cancel")}push(t){return this._stack.push(t)}pop(){const t=this._stack.pop();return t&&(this.stats.bytesTransferred+=t),this.emit("progress",this.stats)}end(){return this.emit("end")}}Gf.default=j5;var qf={};Object.defineProperty(qf,"__esModule",{value:!0});const V5=zs;class Y5 extends V5.Stream.PassThrough{constructor(){super(...arguments),this.stats={bytesTransferred:0}}cancel(){return this.emit("cancel")}write(t,r,n){return this.stats.bytesTransferred+=t.length,this.emit("progress",this.stats),typeof r=="function"?super.write(t,r):super.write(t,r,n)}}qf.default=Y5;var K5=k&&k.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),H5=k&&k.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),cy=k&&k.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&K5(t,e,r);return H5(t,e),t},wn=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($o,"__esModule",{value:!0});const G5=cy(Nr),q5=cy(Tn),Fr=wn(Er),z5=Pt,W5=wn(ra),Q5=wn(tr),vt=wn(Se),tc=wn(No),X5=wn(F5),J5=wn(Gf),Z5=wn(qf),ek="/data/local/tmp",rc=420,tk=65536,lm=(0,W5.default)("adb:sync");class zf extends z5.EventEmitter{static temp(t){return`${ek}/${q5.basename(t)}`}constructor(t){super(),this.connection=t,this.parser=this.connection.parser}stat(t,r){return this._sendCommandWithArg(vt.default.STAT,t),this.parser.readAscii(4).then(n=>{switch(n){case vt.default.STAT:return this.parser.readBytes(12).then(a=>{const i=a.readUInt32LE(0),s=a.readUInt32LE(4),o=a.readUInt32LE(8);return i===0?this._enoent(t):new tc.default(i,BigInt(s),o)});case vt.default.FAIL:return this._readError();default:return this.parser.unexpected(n,"STAT or FAIL")}}).nodeify(r)}sta2(t,r){return this._sendCommandWithArg(vt.default.STA2,t),this.parser.readAscii(4).then(n=>{switch(n){case vt.default.STA2:return this.parser.readBytes(68).then(a=>{const i=a.readUInt32LE(20),s=a.readBigUInt64LE(36),o=a.readBigUInt64LE(52);return i===0?this._enoent(t):new tc.default(i,s,Number(o))});case vt.default.FAIL:return this._readError();default:return this.parser.unexpected(n,"STA2 or FAIL")}}).nodeify(r)}readdir(t,r){const n=[],a=()=>this.parser.readAscii(4).then(i=>{switch(i){case vt.default.DENT:return this.parser.readBytes(16).then(s=>{const o=s.readUInt32LE(0),u=s.readUInt32LE(4),c=s.readUInt32LE(8),l=s.readUInt32LE(12);return this.parser.readBytes(l).then(function(f){const d=f.toString();return d==="."||d===".."||n.push(new X5.default(d,o,u,c)),a()})});case vt.default.DONE:return this.parser.readBytes(16).then(function(){return n});case vt.default.FAIL:return this._readError();default:return this.parser.unexpected(i,"DENT, DONE or FAIL")}});return this._sendCommandWithArg(vt.default.LIST,t),a().nodeify(r)}push(t,r,n){return typeof t=="string"?this.pushFile(t,r,n):this.pushStream(t,r,n)}pushFile(t,r,n=rc){return n||(n=rc),this.pushStream(G5.createReadStream(t),r,n)}pushStream(t,r,n=rc){return n|=tc.default.S_IFREG,this._sendCommandWithArg(vt.default.SEND,`${r},${n}`),this._writeData(t,Math.floor(Date.now()/1e3))}pull(t){return this._sendCommandWithArg(vt.default.RECV,`${t}`),this._readData()}end(){return this.connection.end(),this}tempFile(t){return zf.temp(t)}_writeData(t,r){const n=new J5.default,a=()=>{let u,c,l,f,d=Fr.default.defer();const p=Fr.default.resolve();l=()=>{p.then(()=>(this._sendCommandWithLength(vt.default.DONE,r),d.resolve()))},t.on("end",l);const h=()=>{d=Fr.default.defer();const m=()=>{d.resolve()};return this.connection.on("drain",m),d.promise.finally(()=>this.connection.removeListener("drain",m))},_=()=>n.pop(),v=()=>{let m;return(m=t.read(tk)||t.read())?(this._sendCommandWithLength(vt.default.DATA,m.length),n.push(m.length),this.connection.write(m,_)?v():h().then(v)):Fr.default.resolve()};return u=()=>p.then(v),t.on("readable",u),f=m=>d.reject(m),t.on("error",f),c=m=>{t.destroy(m),this.connection.end(),d.reject(m)},this.connection.on("error",c),d.promise.finally(()=>(t.removeListener("end",l),t.removeListener("readable",u),t.removeListener("error",f),this.connection.removeListener("error",c),p.cancel()))},i=()=>this.parser.readAscii(4).then(u=>{switch(u){case vt.default.OKAY:return this.parser.readBytes(4).then(function(){return!0});case vt.default.FAIL:return this._readError();default:return this.parser.unexpected(u,"OKAY or FAIL")}}),s=a().catch(Fr.default.CancellationError,()=>this.connection.end()).catch(function(u){return n.emit("error",u),o.cancel()}),o=i().catch(Fr.default.CancellationError,()=>!0).catch(u=>(n.emit("error",u),s.cancel())).finally(()=>n.end());return n.on("cancel",()=>{s.cancel(),o.cancel()}),n}_readData(){const t=new Z5.default,r=s=>{t.removeListener("cancel",i);let o=t.end();return s?s():o},n=()=>this.parser.readAscii(4).then(s=>{switch(s){case vt.default.DATA:return this.parser.readBytes(4).then(o=>{const u=o.readUInt32LE(0);return this.parser.readByteFlow(u,t).then(()=>{n()})});case vt.default.DONE:return this.parser.readBytes(4).then(function(){return r()});case vt.default.FAIL:return r(()=>this._readError());default:return r(()=>this.parser.unexpected(s,"DATA, DONE or FAIL"))}}),a=n().catch(Fr.default.CancellationError,()=>this.connection.end()).catch(s=>t.emit("error",s)),i=()=>a.cancel();return t.on("cancel",i),t}_readError(){return this.parser.readBytes(4).then(t=>this.parser.readBytes(t.readUInt32LE(0)).then(r=>Fr.default.reject(new Q5.default.FailError(r.toString())))).finally(()=>this.parser.end())}_sendCommandWithLength(t,r){t!==vt.default.DATA&&lm(t);const n=Buffer.alloc(t.length+4);return n.write(t,0,t.length),n.writeUInt32LE(r,t.length),this.connection.write(n)}_sendCommandWithArg(t,r){lm(`${t} ${r}`);const n=Buffer.byteLength(r,"utf-8"),a=Buffer.alloc(t.length+4+n);let i=0;return a.write(t,i,t.length),i+=t.length,a.writeUInt32LE(n,i),i+=4,a.write(r,i),this.connection.write(a)}_enoent(t){const r=new Error(`ENOENT, no such file or directory '${t}'`);return r.errno=34,r.code="ENOENT",r.path=t,Fr.default.reject(r)}}$o.default=zf;var ly=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const rk=Pt,nk=ly(tr),ak=ly(Er),ik=/^cpu[0-9]+ .*$/gm,sk=/\ +/g;class ok extends rk.EventEmitter{constructor(t){super(),this.sync=t,this.interval=1e3,this.stats=this._emptyStats(),this._ignore={},this._timer=setInterval(()=>this.update(),this.interval),this.update()}end(){clearInterval(this._timer),this.sync&&(this.sync.end(),this.sync=void 0)}update(){if(!this.sync)throw Error("Closed");return new nk.default(this.sync.pull("/proc/stat")).readAll().then(t=>this._parse(t.toString())).catch(t=>(this._error(t),ak.default.reject(t)))}_parse(t){let r,n;const a=this._emptyStats();for(;r=ik.exec(t);){const i=r[0],s=i.split(sk),o=s.shift();if(this._ignore[o]===i)continue;let u=0;for(let c=0,l=s.length;c<l;c++)n=s[c],u+=+n;a.cpus[o]={line:i,user:+s[0]||0,nice:+s[1]||0,system:+s[2]||0,idle:+s[3]||0,iowait:+s[4]||0,irq:+s[5]||0,softirq:+s[6]||0,steal:+s[7]||0,guest:+s[8]||0,guestnice:+s[9]||0,total:u}}return this._set(a)}_set(t){const r={};let n=!1;const a=t.cpus;for(const i in a){const s=a[i],o=this.stats.cpus[i];if(!o)continue;const u=s.total-o.total;if(u>0){n=!0;const c=100/u;r[i]={user:Math.floor(c*(s.user-o.user)),nice:Math.floor(c*(s.nice-o.nice)),system:Math.floor(c*(s.system-o.system)),idle:Math.floor(c*(s.idle-o.idle)),iowait:Math.floor(c*(s.iowait-o.iowait)),irq:Math.floor(c*(s.irq-o.irq)),softirq:Math.floor(c*(s.softirq-o.softirq)),steal:Math.floor(c*(s.steal-o.steal)),guest:Math.floor(c*(s.guest-o.guest)),guestnice:Math.floor(c*(s.guestnice-o.guestnice)),total:100}}else this._ignore[i]=s.line,delete t.cpus[i]}return n&&this.emit("load",r),this.stats=t}_error(t){return this.emit("error",t)}_emptyStats(){return{cpus:{}}}}var uk=ok,fy={},Wf={},dy=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wf,"__esModule",{value:!0});const fm=dy(Se),ck=dy(De);class lk extends ck.default{execute(t){return this._send(`shell:pm clear ${t}`),this.parser.readAscii(4).then(r=>{switch(r){case fm.default.OKAY:return this.parser.searchLine(/^(Success|Failed)$/).finally(()=>this.parser.end()).then(function(n){switch(n[0]){case"Success":return!0;case"Failed":throw new Error(`Package '${t}' could not be cleared`)}return!1});case fm.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(r,"OKAY or FAIL")}})}}Wf.default=lk;var Qf={},fk=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const dk=fk(tE),hk=zs;class pk extends hk.Stream.Transform{constructor(t,r){super(r),this.meta=t,this._buffer=Buffer.from(""),dk.default.ok(this.meta.bpp===24||this.meta.bpp===32,"Only 24-bit and 32-bit raw images with 8-bits per color are supported"),this._r_pos=this.meta.red_offset/8,this._g_pos=this.meta.green_offset/8,this._b_pos=this.meta.blue_offset/8,this._a_pos=this.meta.alpha_offset/8,this._pixel_bytes=this.meta.bpp/8}_transform(t,r,n){this._buffer.length?this._buffer=Buffer.concat([this._buffer,t],this._buffer.length+t.length):this._buffer=t;let a=0,i=0;const s=this._pixel_bytes===3?this._buffer:Buffer.alloc(Math.max(4,t.length/this._pixel_bytes*3));for(;this._buffer.length-a>=this._pixel_bytes;){const o=this._buffer[a+this._r_pos],u=this._buffer[a+this._g_pos],c=this._buffer[a+this._b_pos];s[i+0]=o,s[i+1]=u,s[i+2]=c,a+=this._pixel_bytes,i+=3}i&&(this.push(s.slice(0,i)),this._buffer=this._buffer.slice(a)),n()}}var mk=pk,Ro=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qf,"__esModule",{value:!0});const vk=jc,gk=Ro(ra),_k=Ro(mk),dm=Ro(Se),yk=Ro(De),hm=(0,gk.default)("adb:command:framebuffer");class Ek extends yk.default{execute(t){return this._send("framebuffer:"),this.parser.readAscii(4).then(r=>{switch(r){case dm.default.OKAY:return this.parser.readBytes(52).then(n=>{let a;const i=this._parseHeader(n);switch(t){case"raw":return a=this.parser.raw(),a.meta=i,a;default:return a=this._convert(i,t),a.meta=i,a}});case dm.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(r,"OKAY or FAIL")}})}_convert(t,r,n){switch(hm(`Converting raw framebuffer stream into ${r.toUpperCase()}`),t.format){case"rgb":case"rgba":break;default:hm(`Silently transforming '${t.format}' into 'rgb' for \`gm\``);const i=new _k.default(t);t.format="rgb",n=this.parser.raw().pipe(i)}const a=(0,vk.spawn)("gm",["convert","-size",`${t.width}x${t.height}`,`${t.format}:-`,`${r}:-`]);return n&&n.pipe(a.stdin),a.stdout}_parseHeader(t){let r=0;const n=t.readUInt32LE(r);if(n===16)throw new Error("Old-style raw images are not supported");r+=4;const a=t.readUInt32LE(r);r+=4;const i=t.readUInt32LE(r);r+=4;const s=t.readUInt32LE(r);r+=4;const o=t.readUInt32LE(r);r+=4;const u=t.readUInt32LE(r);r+=4;const c=t.readUInt32LE(r);r+=4;const l=t.readUInt32LE(r);r+=4;const f=t.readUInt32LE(r);r+=4;const d=t.readUInt32LE(r);r+=4;const p=t.readUInt32LE(r);r+=4;const h=t.readUInt32LE(r);r+=4;const _=t.readUInt32LE(r);let v=l===0?"bgr":"rgb";return(a===32||_)&&(v+="a"),{version:n,bpp:a,size:i,width:s,height:o,red_offset:u,red_length:c,blue_offset:l,blue_length:f,green_offset:d,green_length:p,alpha_offset:h,alpha_length:_,format:v}}}Qf.default=Ek;var Xf={},hy=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xf,"__esModule",{value:!0});const Ck=hy(De),pm=hy(Se),Sk=/^feature:(.*?)(?:=(.*?))?\r?$/gm;class bk extends Ck.default{execute(){return this._send("shell:pm list features 2>/dev/null"),this.parser.readAscii(4).then(t=>{switch(t){case pm.default.OKAY:return this.parser.readAll().then(r=>this._parseFeatures(r.toString()));case pm.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(t,"OKAY or FAIL")}})}_parseFeatures(t){const r={};let n;for(;n=Sk.exec(t);)r[n[1]]=n[2]||!0;return r}}Xf.default=bk;var Jf={},py=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jf,"__esModule",{value:!0});const Tk=py(De),mm=py(Se);class Ak extends Tk.default{execute(t){return t?this._send(`shell:pm list packages ${t} 2>/dev/null`):this._send("shell:pm list packages 2>/dev/null"),this.parser.readAscii(4).then(r=>{switch(r){case mm.default.OKAY:return this.parser.readAll().then(n=>this._parsePackages(n.toString()));case mm.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(r,"OKAY or FAIL")}})}_parsePackages(t){const r=[],n=/^package:(.*?)\r?$/gm;for(;;){const a=n.exec(t);if(a)r.push(a[1]);else break}return r}}Jf.default=Ak;var Zf={},my=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zf,"__esModule",{value:!0});const vm=my(Se),wk=my(De),Ik=/^\[([\s\S]*?)\]: \[([\s\S]*?)\]\r?$/gm;class Ok extends wk.default{execute(){return this._send("shell:getprop"),this.parser.readAscii(4).then(t=>{switch(t){case vm.default.OKAY:return this.parser.readAll().then(r=>this._parseProperties(r.toString()));case vm.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(t,"OKAY or FAIL")}})}_parseProperties(t){const r={};let n;for(;n=Ik.exec(t);)r[n[1]]=n[2];return r}}Zf.default=Ok;var ed={},vy=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ed,"__esModule",{value:!0});const gm=vy(Se),xk=vy(De),Dk=/^(Success|Failure \[(.*?)\]|Exception)(.*)$/,$k="INSTALL_EXCEPTION";class _m extends Error{constructor(t,r){super(t),this.code=r}}class Nk extends xk.default{execute(t){return this._send(`shell:pm install -r ${this._escapeCompat(t)}`),this.parser.readAscii(4).then(r=>{switch(r){case gm.default.OKAY:return this.parser.searchLine(Dk).then(n=>{if(n[1]==="Success")return!0;if(n[1]==="Exception")return this.parser.readLine().then(a=>{throw new _m(a.toString(),$k)});{const a=n[2];throw new _m(`${t} could not be installed [${a}]`,a)}}).finally(()=>this.parser.readAll());case gm.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(r,"OKAY or FAIL")}})}}ed.default=Nk;var td={},rd=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(td,"__esModule",{value:!0});const ym=rd(Se),Rk=rd(tr),Pk=rd(De);class Lk extends Pk.default{execute(t){return this._send(`shell:pm path ${t} 2>/dev/null`),this.parser.readAscii(4).then(r=>{switch(r){case ym.default.OKAY:return this.parser.readAscii(8).then(n=>{switch(n){case"package:":return!0;default:return this.parser.unexpected(n,"'package:'")}}).catch(Rk.default.PrematureEOFError,function(){return!1});case ym.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(r,"OKAY or FAIL")}})}}td.default=Lk;var nd={},gy=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nd,"__esModule",{value:!0});const Em=gy(Se),Bk=gy(De);class kk extends Bk.default{execute(){return this._send("reverse:list-forward"),this.parser.readAscii(4).then(t=>{switch(t){case Em.default.OKAY:return this.parser.readValue().then(r=>this._parseReverses(r));case Em.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(t,"OKAY or FAIL")}})}_parseReverses(t){const r=[],n=t.toString().split(`
`);for(let a=0,i=n.length;a<i;a++){const s=n[a];if(s){const[,o,u]=s.split(/\s+/);r.push({remote:o,local:u})}}return r}}nd.default=kk;var ad={},_y=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ad,"__esModule",{value:!0});const Cm=_y(Se),Uk=_y(De);class Fk extends Uk.default{execute(t){return this._send(/:/.test(t)?t:`localfilesystem:${t}`),this.parser.readAscii(4).then(r=>{switch(r){case Cm.default.OKAY:return this.parser.raw();case Cm.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(r,"OKAY or FAIL")}})}}ad.default=Fk;var id={},yy=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(id,"__esModule",{value:!0});const Sm=yy(Se),Mk=yy(De);class jk extends Mk.default{execute(t){return this._send(`log:${t}`),this.parser.readAscii(4).then(r=>{switch(r){case Sm.default.OKAY:return this.parser.raw();case Sm.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(r,"OKAY or FAIL")}})}}id.default=jk;var sd={},Po={},Vk=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Po,"__esModule",{value:!0});const Yk=Vk(zs);class Kk extends Yk.default.Transform{constructor(t={}){super(t),this.autoDetect=t.autoDetect||!1,this.transformNeeded=!0,this.skipBytes=0}_nullTransform(t,r,n){this.push(t),n()}_transform(t,r,n){if(this.autoDetect&&(t[0]===10?(this.transformNeeded=!1,this.skipBytes=1):this.skipBytes=2,this.autoDetect=!1),this.skipBytes){const o=Math.min(t.length,this.skipBytes);t=t.slice(o),this.skipBytes-=o}if(!t.length)return n();if(!this.transformNeeded)return this._nullTransform(t,r,n);let a=0,i=0;this.savedR&&(t[0]!==10&&this.push(this.savedR),this.savedR=void 0);const s=t.length-1;for(;i<=s;){if(t[i]===13)if(i===s){this.savedR=t.slice(s);break}else t[i+1]===10&&(this.push(t.slice(a,i)),a=i+1);i+=1}i!==a&&this.push(t.slice(a,i)),n()}_flush(t){this.savedR&&this.push(this.savedR),t()}}Po.default=Kk;var od=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sd,"__esModule",{value:!0});const Hk=od(Po),bm=od(Se),Gk=od(De);class qk extends Gk.default{execute(t={}){let r;return r="logcat -B *:I 2>/dev/null",t.clear&&(r=`logcat -c 2>/dev/null && ${r}`),this._send(`shell:echo && ${r}`),this.parser.readAscii(4).then(n=>{switch(n){case bm.default.OKAY:return this.parser.raw().pipe(new Hk.default({autoDetect:!0}));case bm.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(n,"OKAY or FAIL")}})}}sd.default=qk;var ud={},cd=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ud,"__esModule",{value:!0});const zk=cd(Er),Tm=cd(Se),Wk=cd(De);class Qk extends Wk.default{execute(t){return this._send(`shell:EXTERNAL_STORAGE=/data/local/tmp monkey --port ${t} -v`),this.parser.readAscii(4).then(r=>{switch(r){case Tm.default.OKAY:return this.parser.searchLine(/^:Monkey:/).timeout(1e3).then(()=>this.parser.raw()).catch(zk.default.TimeoutError,()=>this.parser.raw());case Tm.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(r,"OKAY or FAIL")}})}}ud.default=Qk;var ld={},Ey=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ld,"__esModule",{value:!0});const Am=Ey(Se),Xk=Ey(De);class Jk extends Xk.default{execute(){return this._send("reboot:"),this.parser.readAscii(4).then(t=>{switch(t){case Am.default.OKAY:return this.parser.readAll().return(!0);case Am.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(t,"OKAY or FAIL")}})}}ld.default=Jk;var fd={},Cy=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fd,"__esModule",{value:!0});const wm=Cy(Se),Zk=Cy(De);class eU extends Zk.default{execute(){return this._send("remount:"),this.parser.readAscii(4).then(t=>{switch(t){case wm.default.OKAY:return!0;case wm.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(t,"OKAY or FAIL")}})}}fd.default=eU;var dd={},Sy=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dd,"__esModule",{value:!0});const ss=Sy(Se),tU=Sy(De);class rU extends tU.default{execute(t,r){return this._send(`reverse:forward:${t};${r}`),this.parser.readAscii(4).then(n=>{switch(n){case ss.default.OKAY:return this.parser.readAscii(4).then(a=>{switch(a){case ss.default.OKAY:return!0;case ss.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(a,"OKAY or FAIL")}});case ss.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(n,"OKAY or FAIL")}})}}dd.default=rU;var hd={},by=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hd,"__esModule",{value:!0});const Im=by(Se),nU=by(De),aU=/restarting adbd as root/;class iU extends nU.default{execute(){return this._send("root:"),this.parser.readAscii(4).then(t=>{switch(t){case Im.default.OKAY:return this.parser.readAll().then(function(r){if(aU.test(r.toString()))return!0;throw new Error(r.toString().trim())});case Im.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(t,"OKAY or FAIL")}})}}hd.default=iU;var pd={},Lo=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pd,"__esModule",{value:!0});const Om=Lo(Po),xm=Lo(Se),sU=Lo(tr),oU=Lo(De);class uU extends oU.default{execute(){return this._send("shell:echo && screencap -p 2>/dev/null"),this.parser.readAscii(4).then(t=>{switch(t){case xm.default.OKAY:let r=new Om.default;return this.parser.readBytes(1).then(n=>(r=new Om.default({autoDetect:!0}),r.write(n),this.parser.raw().pipe(r))).catch(sU.default.PrematureEOFError,()=>{throw Error("No support for the screencap command")});case xm.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(t,"OKAY or FAIL")}})}}pd.default=uU;var Bo={},Ty=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bo,"__esModule",{value:!0});const Dm=Ty(Se),cU=Ty(De);class lU extends cU.default{execute(t){return Array.isArray(t)&&(t=t.map(this._escape).join(" ")),this._send(`shell:${t}`),this.parser.readAscii(4).then(r=>{switch(r){case Dm.default.OKAY:return this.parser.raw();case Dm.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(r,"OKAY or FAIL")}})}}Bo.default=lU;var md=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const $m=md(Se),fU=md(tr),dU=md(De),hU=/^Error: (.*)$/,pU={string:"s",null:"sn",bool:"z",int:"i",long:"l",float:"f",uri:"u",component:"cn"};class mU extends dU.default{execute(t){const r=this._intentArgs(t);return t.debug&&r.push("-D"),t.wait&&r.push("-W"),(t.user||t.user===0)&&r.push("--user",this._escape(t.user)),this._run("start",r)}_run(t,r){return this._send(`shell:am ${t} ${r.join(" ")}`),this.parser.readAscii(4).then(n=>{switch(n){case $m.default.OKAY:return this.parser.searchLine(hU).finally(()=>this.parser.end()).then(function(a){throw new Error(a[1])}).catch(fU.default.PrematureEOFError,function(){return!0});case $m.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(n,"OKAY or FAIL")}})}_intentArgs(t){const r=[];return t.extras&&r.push(...this._formatExtras(t.extras)),t.action&&r.push("-a",this._escape(t.action)),t.data&&r.push("-d",this._escape(t.data)),t.mimeType&&r.push("-t",this._escape(t.mimeType)),t.category&&(Array.isArray(t.category)?t.category.forEach(n=>r.push("-c",this._escape(n))):r.push("-c",this._escape(t.category))),t.component&&r.push("-n",this._escape(t.component)),t.flags&&r.push("-f",this._escape(t.flags)),r}_formatExtras(t){return t?Array.isArray(t)?t.reduce((r,n)=>r.concat(this._formatLongExtra(n)),[]):Object.keys(t).reduce((r,n)=>r.concat(this._formatShortExtra(n,t[n])),[]):[]}_formatShortExtra(t,r){let n={key:t,type:"",value:void 0};if(r===null)n.type="null";else{if(Array.isArray(r))throw new Error(`Refusing to format array value '${t}' using short syntax; empty array would cause unpredictable results due to unknown type. Please use long syntax instead.`);switch(typeof r){case"string":n.type="string",n.value=r;break;case"boolean":n.type="bool",n.value=r;break;case"number":n.type="int",n.value=r;break;case"object":n=r,n.key=t}}return this._formatLongExtra(n)}_formatLongExtra(t){const r=[];t.type||(t.type="string");const n=pU[t.type];if(!n)throw new Error(`Unsupported type '${t.type}' for extra '${t.key}'`);return t.type==="null"?(r.push(`--e${n}`),r.push(this._escape(t.key))):Array.isArray(t.value)?(r.push(`--e${n}a`),r.push(this._escape(t.key)),r.push(this._escape(t.value.join(",")))):(r.push(`--e${n}`),r.push(this._escape(t.key)),r.push(this._escape(t.value))),r}}var Ay=mU,vd={},vU=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vd,"__esModule",{value:!0});const gU=vU(Ay);class _U extends gU.default{execute(t){const r=this._intentArgs(t);return(t.user||t.user===0)&&r.push("--user",this._escape(t.user)),this._run("startservice",r)}}vd.default=_U;var gd={},_d=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gd,"__esModule",{value:!0});const Nm=_d(Se),yU=_d($o),EU=_d(De);class CU extends EU.default{execute(){return this._send("sync:"),this.parser.readAscii(4).then(t=>{switch(t){case Nm.default.OKAY:return new yU.default(this.connection);case Nm.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(t,"OKAY or FAIL")}})}}gd.default=CU;var yd={},wy=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yd,"__esModule",{value:!0});const Rm=wy(Se),SU=wy(De);class bU extends SU.default{execute(t,r){return this._send(`tcp:${t}`+(r?`:${r}`:"")),this.parser.readAscii(4).then(n=>{switch(n){case Rm.default.OKAY:return this.parser.raw();case Rm.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(n,"OKAY or FAIL")}})}}yd.default=bU;var Ed={},Iy=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ed,"__esModule",{value:!0});const Pm=Iy(Se),TU=Iy(De),AU=/restarting in/;class wU extends TU.default{execute(t){return this._send(`tcpip:${t}`),this.parser.readAscii(4).then(r=>{switch(r){case Pm.default.OKAY:return this.parser.readAll().then(function(n){if(AU.test(n.toString()))return t;throw new Error(n.toString().trim())});case Pm.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(r,"OKAY or FAIL")}})}}Ed.default=wU;var Cd={},Sd={},Oy=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sd,"__esModule",{value:!0});const IU=Pt,OU=Oy(Er),xU=Oy(tr);class DU extends IU.EventEmitter{constructor(t){super(),this.command=t,this.pids=[],this.pidMap=Object.create(null),this.command=t,this.pids=[],this.pidMap=Object.create(null),this.reader=this.read().catch(xU.default.PrematureEOFError,()=>this.emit("end")).catch(OU.default.CancellationError,()=>(this.command.connection.end(),this.emit("end"))).catch(r=>(this.command.connection.end(),this.emit("error",r),this.emit("end")))}on(t,r){return super.on(t,r)}once(t,r){return super.once(t,r)}emit(t,...r){return super.emit(t,...r)}read(){return this.command.parser.readValue().then(t=>{const r=t.toString().split(`
`),n=r.pop();return n&&r.push(n),this.update(r)})}update(t){const r={removed:[],added:[]},n=Object.create(null);for(let i=0,s=t.length;i<s;i++){const o=t[i];this.pidMap[o]||(r.added.push(o),this.emit("add",o),n[o]=o)}const a=this.pids;for(let i=0,s=a.length;i<s;i++){const o=a[i];n[o]||(r.removed.push(o),this.emit("remove",o))}return this.pids=t,this.pidMap=n,this.emit("changeSet",r,t),this}end(){return this.reader.cancel(),this}}Sd.default=DU;var bd=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cd,"__esModule",{value:!0});const Lm=bd(Se),$U=bd(De),NU=bd(Sd);class RU extends $U.default{execute(){return this._send("track-jdwp"),this.parser.readAscii(4).then(t=>{switch(t){case Lm.default.OKAY:return new NU.default(this);case Lm.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(t,"OKAY or FAIL")}})}}Cd.default=RU;var Td={},xy=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Td,"__esModule",{value:!0});const Bm=xy(Se),PU=xy(De);class LU extends Error{constructor(t){super(t)}}class BU extends PU.default{execute(t){return this._send(`shell:pm uninstall ${t}`),this.parser.readAscii(4).then(r=>{switch(r){case Bm.default.OKAY:return this.parser.searchLine(/^(Success|Failure.*|.*Unknown package:.*)$/).then(function(n){if(n[1]==="Success")return!0;if(n[1].includes("DELETE_FAILED_DEVICE_POLICY_MANAGER")){const a=n[1];throw new LU(`${t} could not be uninstalled [${a}]`)}else return!0}).finally(()=>this.parser.readAll());case Bm.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(r,"OKAY or FAIL")}})}}Td.default=BU;var Ad={},Dy=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ad,"__esModule",{value:!0});const km=Dy(Se),kU=Dy(De),UU=/restarting in/;class FU extends kU.default{execute(){return this._send("usb:"),this.parser.readAscii(4).then(t=>{switch(t){case km.default.OKAY:return this.parser.readAll().then(function(r){if(UU.test(r.toString()))return!0;throw new Error(r.toString().trim())});case km.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(t,"OKAY or FAIL")}})}}Ad.default=FU;var wd={},$y=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wd,"__esModule",{value:!0});const Um=$y(Se),MU=$y(De);class jU extends MU.default{execute(){return this._send("shell:while getprop sys.boot_completed 2>/dev/null; do sleep 1; done"),this.parser.readAscii(4).then(t=>{switch(t){case Um.default.OKAY:return this.parser.searchLine(/^1$/).finally(()=>this.parser.end()).then(()=>!0);case Um.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(t,"OKAY or FAIL")}})}}wd.default=jU;(function(e){var t=k&&k.__importDefault||function(z){return z&&z.__esModule?z:{default:z}};Object.defineProperty(e,"__esModule",{value:!0}),e.WaitBootCompleteCommand=e.UsbCommand=e.UninstallCommand=e.TrackJdwpCommand=e.TcpIpCommand=e.TcpCommand=e.SyncCommand=e.StartServiceCommand=e.StartActivityCommand=e.ShellCommand=e.ScreencapCommand=e.RootCommand=e.ReverseCommand=e.RemountCommand=e.RebootCommand=e.MonkeyCommand=e.LogcatCommand=e.LogCommand=e.LocalCommand=e.ListReversesCommand=e.IsInstalledCommand=e.InstallCommand=e.GetPropertiesCommand=e.GetPackagesCommand=e.GetFeaturesCommand=e.FrameBufferCommand=e.ClearCommand=void 0;var r=Wf;Object.defineProperty(e,"ClearCommand",{enumerable:!0,get:function(){return t(r).default}});var n=Qf;Object.defineProperty(e,"FrameBufferCommand",{enumerable:!0,get:function(){return t(n).default}});var a=Xf;Object.defineProperty(e,"GetFeaturesCommand",{enumerable:!0,get:function(){return t(a).default}});var i=Jf;Object.defineProperty(e,"GetPackagesCommand",{enumerable:!0,get:function(){return t(i).default}});var s=Zf;Object.defineProperty(e,"GetPropertiesCommand",{enumerable:!0,get:function(){return t(s).default}});var o=ed;Object.defineProperty(e,"InstallCommand",{enumerable:!0,get:function(){return t(o).default}});var u=td;Object.defineProperty(e,"IsInstalledCommand",{enumerable:!0,get:function(){return t(u).default}});var c=nd;Object.defineProperty(e,"ListReversesCommand",{enumerable:!0,get:function(){return t(c).default}});var l=ad;Object.defineProperty(e,"LocalCommand",{enumerable:!0,get:function(){return t(l).default}});var f=id;Object.defineProperty(e,"LogCommand",{enumerable:!0,get:function(){return t(f).default}});var d=sd;Object.defineProperty(e,"LogcatCommand",{enumerable:!0,get:function(){return t(d).default}});var p=ud;Object.defineProperty(e,"MonkeyCommand",{enumerable:!0,get:function(){return t(p).default}});var h=ld;Object.defineProperty(e,"RebootCommand",{enumerable:!0,get:function(){return t(h).default}});var _=fd;Object.defineProperty(e,"RemountCommand",{enumerable:!0,get:function(){return t(_).default}});var v=dd;Object.defineProperty(e,"ReverseCommand",{enumerable:!0,get:function(){return t(v).default}});var m=hd;Object.defineProperty(e,"RootCommand",{enumerable:!0,get:function(){return t(m).default}});var b=pd;Object.defineProperty(e,"ScreencapCommand",{enumerable:!0,get:function(){return t(b).default}});var A=Bo;Object.defineProperty(e,"ShellCommand",{enumerable:!0,get:function(){return t(A).default}});var D=Ay;Object.defineProperty(e,"StartActivityCommand",{enumerable:!0,get:function(){return t(D).default}});var x=vd;Object.defineProperty(e,"StartServiceCommand",{enumerable:!0,get:function(){return t(x).default}});var Y=gd;Object.defineProperty(e,"SyncCommand",{enumerable:!0,get:function(){return t(Y).default}});var X=yd;Object.defineProperty(e,"TcpCommand",{enumerable:!0,get:function(){return t(X).default}});var Z=Ed;Object.defineProperty(e,"TcpIpCommand",{enumerable:!0,get:function(){return t(Z).default}});var W=Cd;Object.defineProperty(e,"TrackJdwpCommand",{enumerable:!0,get:function(){return t(W).default}});var J=Td;Object.defineProperty(e,"UninstallCommand",{enumerable:!0,get:function(){return t(J).default}});var ee=Ad;Object.defineProperty(e,"UsbCommand",{enumerable:!0,get:function(){return t(ee).default}});var oe=wd;Object.defineProperty(e,"WaitBootCompleteCommand",{enumerable:!0,get:function(){return t(oe).default}})})(fy);var Ny={},Id={},Ry=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Id,"__esModule",{value:!0});const VU=Ry(De),os=Ry(Se);class YU extends VU.default{execute(t,r,n){return this._send(`host-serial:${t}:forward:${r};${n}`),this.parser.readAscii(4).then(a=>{switch(a){case os.default.OKAY:return this.parser.readAscii(4).then(i=>{switch(i){case os.default.OKAY:return!0;case os.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(i,"OKAY or FAIL")}});case os.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(a,"OKAY or FAIL")}})}}Id.default=YU;var Ks={},Py=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ks,"__esModule",{value:!0});const Fm=Py(Se),KU=Py(De);class HU extends KU.default{execute(t){return this._send(`host-serial:${t}:get-devpath`),this.parser.readAscii(4).then(r=>{switch(r){case Fm.default.OKAY:return this.parser.readValue().then(n=>n.toString());case Fm.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(r,"OKAY or FAIL")}})}}Ks.default=HU;var Od={},Ly=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Od,"__esModule",{value:!0});const GU=Ly(De),Mm=Ly(Se);class qU extends GU.default{execute(t){return this._send(`host-serial:${t}:get-state`),this.parser.readAscii(4).then(r=>{switch(r){case Mm.default.OKAY:return this.parser.readValue().then(n=>n.toString());case Mm.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(r,"OKAY or FAIL")}})}}Od.default=qU;var xd={},By=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xd,"__esModule",{value:!0});const zU=By(De),jm=By(Se);class WU extends zU.default{execute(t){return this._send(`host-serial:${t}:list-forward`),this.parser.readAscii(4).then(r=>{switch(r){case jm.default.OKAY:return this.parser.readValue().then(this._parseForwards);case jm.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(r,"OKAY or FAIL")}})}_parseForwards(t){return t.toString().split(`
`).filter(r=>r).map(r=>{const[n,a,i]=r.split(/\s+/);return{serial:n,local:a,remote:i}})}}xd.default=WU;var Dd={},ky=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dd,"__esModule",{value:!0});const us=ky(Se),QU=ky(De);class XU extends QU.default{execute(t){return this._send(`host-serial:${t}:wait-for-any-device`),this.parser.readAscii(4).then(r=>{switch(r){case us.default.OKAY:return this.parser.readAscii(4).then(n=>{switch(n){case us.default.OKAY:return t;case us.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(n,"OKAY or FAIL")}});case us.default.FAIL:return this.parser.readError();default:return this.parser.unexpected(r,"OKAY or FAIL")}})}}Dd.default=XU;(function(e){var t=k&&k.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.WaitForDeviceCommand=e.ListForwardsCommand=e.GetStateCommand=e.GetSerialNoCommand=e.GetDevicePathCommand=e.ForwardCommand=void 0;var r=Id;Object.defineProperty(e,"ForwardCommand",{enumerable:!0,get:function(){return t(r).default}});var n=Ks;Object.defineProperty(e,"GetDevicePathCommand",{enumerable:!0,get:function(){return t(n).default}});var a=Ks;Object.defineProperty(e,"GetSerialNoCommand",{enumerable:!0,get:function(){return t(a).default}});var i=Od;Object.defineProperty(e,"GetStateCommand",{enumerable:!0,get:function(){return t(i).default}});var s=xd;Object.defineProperty(e,"ListForwardsCommand",{enumerable:!0,get:function(){return t(s).default}});var o=Dd;Object.defineProperty(e,"WaitForDeviceCommand",{enumerable:!0,get:function(){return t(o).default}})})(Ny);var ia=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Do,"__esModule",{value:!0});const JU=ia(r5),ZU=ia($5),eF=ia($o),tF=ia(tr),rF=ia(uk),nF=sf,ze=fy,va=Ny,aF=ia(ra),Vm=ia(Er),Ym=(0,aF.default)("adb:client"),Km=e=>e.message.indexOf("--user")!==-1;class iF{constructor(t,r){this.client=t,this.serial=r}getSerialNo(){return this.connection().then(t=>new va.GetSerialNoCommand(t).execute(this.serial))}getDevicePath(){return this.connection().then(t=>new va.GetDevicePathCommand(t).execute(this.serial))}getState(){return this.connection().then(t=>new va.GetStateCommand(t).execute(this.serial))}getProperties(){return this.transport().then(t=>new ze.GetPropertiesCommand(t).execute())}getFeatures(){return this.transport().then(t=>new ze.GetFeaturesCommand(t).execute())}getPackages(t){return this.transport().then(r=>new ze.GetPackagesCommand(r).execute(t))}getDHCPIpAddress(t="wlan0"){return this.getProperties().then(r=>{const n=r[`dhcp.${t}.ipaddress`];if(n)return n;throw Error(`Unable to find ipaddress for '${t}'`)})}forward(t,r){return this.connection().then(n=>new va.ForwardCommand(n).execute(this.serial,t,r))}listForwards(){return this.connection().then(t=>new va.ListForwardsCommand(t).execute(this.serial))}reverse(t,r){return this.transport().then(n=>new ze.ReverseCommand(n).execute(t,r))}listReverses(){return this.transport().then(t=>new ze.ListReversesCommand(t).execute())}connection(){return this.client.connection()}transport(){return this.connection().then(t=>new nF.HostTransportCommand(t).execute(this.serial).return(t))}shell(t){return this.transport().then(r=>new ze.ShellCommand(r).execute(t))}reboot(){return this.transport().then(t=>new ze.RebootCommand(t).execute())}remount(){return this.transport().then(t=>new ze.RemountCommand(t).execute())}root(){return this.transport().then(t=>new ze.RootCommand(t).execute())}trackJdwp(){return this.transport().then(t=>new ze.TrackJdwpCommand(t).execute())}framebuffer(t="raw"){return this.transport().then(r=>new ze.FrameBufferCommand(r).execute(t))}screencap(){return this.transport().then(t=>new ze.ScreencapCommand(t).execute().catch(r=>(Ym(`Emulating screencap command due to '${r}'`),this.framebuffer("png"))))}openLocal(t){return this.transport().then(r=>new ze.LocalCommand(r).execute(t))}openLog(t){return this.transport().then(r=>new ze.LogCommand(r).execute(t))}openTcp(t,r){return this.transport().then(n=>new ze.TcpCommand(n).execute(t,r))}openMonkey(t=1080){const r=n=>this.openTcp(t).then(a=>JU.default.connectStream(a)).catch(a=>{if(n-=1)return Ym(`Monkey can't be reached, trying ${n} more times`),Vm.default.delay(100).then(()=>r(n));throw a});return r(1).catch(()=>this.transport().then(n=>new ze.MonkeyCommand(n).execute(t)).then(n=>r(20).then(a=>a.once("end",()=>n.end()))))}openLogcat(t={}){return this.transport().then(r=>new ze.LogcatCommand(r).execute(t)).then(r=>ZU.default.readStream(r,{fixLineFeeds:!1}))}openProcStat(){return this.syncService().then(t=>new rF.default(t))}clear(t){return this.transport().then(r=>new ze.ClearCommand(r).execute(t))}install(t){const r=eF.default.temp(typeof t=="string"?t:"_stream.apk");return this.push(t,r).then(n=>{let a,i;return new Vm.default((s,o)=>{i=u=>o(u),a=()=>this.installRemote(r).then(u=>s(u)).catch(o),n.on("error",i),n.on("end",a)}).finally(()=>{n.removeListener("error",i),n.removeListener("end",a)})})}installRemote(t){return this.transport().then(r=>new ze.InstallCommand(r).execute(t).finally(()=>this.shell(["rm","-f",t]).then(n=>new tF.default(n).readAll())).then(()=>!0))}uninstall(t){return this.transport().then(r=>new ze.UninstallCommand(r).execute(t))}isInstalled(t){return this.transport().then(r=>new ze.IsInstalledCommand(r).execute(t))}startActivity(t){return this.transport().then(r=>new ze.StartActivityCommand(r).execute(t)).catch(Km,()=>(t.user=void 0,this.startActivity(t)))}startService(t){return this.transport().then(r=>(t.user||t.user===null||(t.user=0),new ze.StartServiceCommand(r).execute(t))).catch(Km,()=>(t.user=void 0,this.startService(t)))}syncService(){return this.transport().then(t=>new ze.SyncCommand(t).execute())}stat(t){return this.syncService().then(r=>r.stat(t).finally(()=>r.end()))}readdir(t){return this.syncService().then(r=>r.readdir(t).finally(()=>r.end()))}pull(t){return this.syncService().then(r=>r.pull(t).on("end",()=>r.end()))}push(t,r,n){return this.syncService().then(a=>a.push(t,r,n).on("end",()=>a.end()))}tcpip(t=5555){return this.transport().then(r=>new ze.TcpIpCommand(r).execute(t))}usb(){return this.transport().then(t=>new ze.UsbCommand(t).execute())}waitBootComplete(){return this.transport().then(t=>new ze.WaitBootCompleteCommand(t).execute())}waitForDevice(){return this.connection().then(t=>new va.WaitForDeviceCommand(t).execute(this.serial))}}Do.default=iF;var $d=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(po,"__esModule",{value:!0});const sF=Pt,oF=$d(af),Pn=sf,uF=$d(vf),Hm=$d(Do);class cF extends sF.EventEmitter{constructor({host:t="127.0.0.1",port:r=5037,bin:n="adb",timeout:a=0}={port:5037}){super(),this.host=t,this.port=r,this.bin=n,this.timeout=a,this.options={host:t,port:r,bin:n,timeout:a}}createTcpUsbBridge(t,r){return new uF.default(this,t,r)}connection(){const t=new oF.default(this.options);return t.on("error",r=>this.emit("error",r)),t.connect()}version(){return this.connection().then(t=>new Pn.HostVersionCommand(t).execute())}connect(t,r=5555){if(t.indexOf(":")!==-1){const[n,a]=t.split(":",2);t=n;const i=parseInt(a,10);isNaN(i)||(r=i)}return this.connection().then(n=>new Pn.HostConnectCommand(n).execute(t,r))}disconnect(t,r=5555){if(t.indexOf(":")!==-1){const[n,a]=t.split(":",2);t=n;const i=parseInt(a,10);isNaN(i)||(r=i)}return this.connection().then(n=>new Pn.HostDisconnectCommand(n).execute(t,r)).then(n=>new Hm.default(this,n))}listDevices(){return this.connection().then(t=>new Pn.HostDevicesCommand(t).execute())}listDevicesWithPaths(){return this.connection().then(t=>new Pn.HostDevicesWithPathsCommand(t).execute())}trackDevices(){return this.connection().then(t=>new Pn.HostTrackDevicesCommand(t).execute())}kill(){return this.connection().then(t=>new Pn.HostKillCommand(t).execute())}getDevice(t){return new Hm.default(this,t)}}po.default=cF;var Nd={},Uy=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Nd,"__esModule",{value:!0});const lF=Uy(tr),fF=Uy(go);class dF{static readAll(t,r){return new lF.default(t).readAll().nodeify(r)}static parsePublicKey(t,r){return fF.default.parsePublicKey(t).nodeify(r)}}Nd.default=dF;var Fy=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Os,"__esModule",{value:!0});const hF=Fy(po),pF=Fy(Nd);class My{static createClient(t={}){const r={bin:t.bin,host:t.host||process.env.ADB_HOST,port:t.port||5037,timeout:t.timeout||0};if(!r.port){const n=parseInt(process.env.ADB_PORT||"5037",10);isNaN(n)||(r.port=n)}return new hF.default(r)}}My.util=pF.default;Os.default=My;var ko={};Object.defineProperty(ko,"__esModule",{value:!0});ko.KeyCodes=void 0;var Gm;(function(e){e[e.KEYCODE_UNKNOWN=0]="KEYCODE_UNKNOWN",e[e.KEYCODE_SOFT_LEFT=1]="KEYCODE_SOFT_LEFT",e[e.KEYCODE_SOFT_RIGHT=2]="KEYCODE_SOFT_RIGHT",e[e.KEYCODE_HOME=3]="KEYCODE_HOME",e[e.KEYCODE_BACK=4]="KEYCODE_BACK",e[e.KEYCODE_CALL=5]="KEYCODE_CALL",e[e.KEYCODE_ENDCALL=6]="KEYCODE_ENDCALL",e[e.KEYCODE_0=7]="KEYCODE_0",e[e.KEYCODE_1=8]="KEYCODE_1",e[e.KEYCODE_2=9]="KEYCODE_2",e[e.KEYCODE_3=10]="KEYCODE_3",e[e.KEYCODE_4=11]="KEYCODE_4",e[e.KEYCODE_5=12]="KEYCODE_5",e[e.KEYCODE_6=13]="KEYCODE_6",e[e.KEYCODE_7=14]="KEYCODE_7",e[e.KEYCODE_8=15]="KEYCODE_8",e[e.KEYCODE_9=16]="KEYCODE_9",e[e.KEYCODE_STAR=17]="KEYCODE_STAR",e[e.KEYCODE_POUND=18]="KEYCODE_POUND",e[e.KEYCODE_DPAD_UP=19]="KEYCODE_DPAD_UP",e[e.KEYCODE_DPAD_DOWN=20]="KEYCODE_DPAD_DOWN",e[e.KEYCODE_DPAD_LEFT=21]="KEYCODE_DPAD_LEFT",e[e.KEYCODE_DPAD_RIGHT=22]="KEYCODE_DPAD_RIGHT",e[e.KEYCODE_DPAD_CENTER=23]="KEYCODE_DPAD_CENTER",e[e.KEYCODE_VOLUME_UP=24]="KEYCODE_VOLUME_UP",e[e.KEYCODE_VOLUME_DOWN=25]="KEYCODE_VOLUME_DOWN",e[e.KEYCODE_POWER=26]="KEYCODE_POWER",e[e.KEYCODE_CAMERA=27]="KEYCODE_CAMERA",e[e.KEYCODE_CLEAR=28]="KEYCODE_CLEAR",e[e.KEYCODE_A=29]="KEYCODE_A",e[e.KEYCODE_B=30]="KEYCODE_B",e[e.KEYCODE_C=31]="KEYCODE_C",e[e.KEYCODE_D=32]="KEYCODE_D",e[e.KEYCODE_E=33]="KEYCODE_E",e[e.KEYCODE_F=34]="KEYCODE_F",e[e.KEYCODE_G=35]="KEYCODE_G",e[e.KEYCODE_H=36]="KEYCODE_H",e[e.KEYCODE_I=37]="KEYCODE_I",e[e.KEYCODE_J=38]="KEYCODE_J",e[e.KEYCODE_K=39]="KEYCODE_K",e[e.KEYCODE_L=40]="KEYCODE_L",e[e.KEYCODE_M=41]="KEYCODE_M",e[e.KEYCODE_N=42]="KEYCODE_N",e[e.KEYCODE_O=43]="KEYCODE_O",e[e.KEYCODE_P=44]="KEYCODE_P",e[e.KEYCODE_Q=45]="KEYCODE_Q",e[e.KEYCODE_R=46]="KEYCODE_R",e[e.KEYCODE_S=47]="KEYCODE_S",e[e.KEYCODE_T=48]="KEYCODE_T",e[e.KEYCODE_U=49]="KEYCODE_U",e[e.KEYCODE_V=50]="KEYCODE_V",e[e.KEYCODE_W=51]="KEYCODE_W",e[e.KEYCODE_X=52]="KEYCODE_X",e[e.KEYCODE_Y=53]="KEYCODE_Y",e[e.KEYCODE_Z=54]="KEYCODE_Z",e[e.KEYCODE_COMMA=55]="KEYCODE_COMMA",e[e.KEYCODE_PERIOD=56]="KEYCODE_PERIOD",e[e.KEYCODE_ALT_LEFT=57]="KEYCODE_ALT_LEFT",e[e.KEYCODE_ALT_RIGHT=58]="KEYCODE_ALT_RIGHT",e[e.KEYCODE_SHIFT_LEFT=59]="KEYCODE_SHIFT_LEFT",e[e.KEYCODE_SHIFT_RIGHT=60]="KEYCODE_SHIFT_RIGHT",e[e.KEYCODE_TAB=61]="KEYCODE_TAB",e[e.KEYCODE_SPACE=62]="KEYCODE_SPACE",e[e.KEYCODE_SYM=63]="KEYCODE_SYM",e[e.KEYCODE_EXPLORER=64]="KEYCODE_EXPLORER",e[e.KEYCODE_ENVELOPE=65]="KEYCODE_ENVELOPE",e[e.KEYCODE_ENTER=66]="KEYCODE_ENTER",e[e.KEYCODE_DEL=67]="KEYCODE_DEL",e[e.KEYCODE_GRAVE=68]="KEYCODE_GRAVE",e[e.KEYCODE_MINUS=69]="KEYCODE_MINUS",e[e.KEYCODE_EQUALS=70]="KEYCODE_EQUALS",e[e.KEYCODE_LEFT_BRACKET=71]="KEYCODE_LEFT_BRACKET",e[e.KEYCODE_RIGHT_BRACKET=72]="KEYCODE_RIGHT_BRACKET",e[e.KEYCODE_BACKSLASH=73]="KEYCODE_BACKSLASH",e[e.KEYCODE_SEMICOLON=74]="KEYCODE_SEMICOLON",e[e.KEYCODE_APOSTROPHE=75]="KEYCODE_APOSTROPHE",e[e.KEYCODE_SLASH=76]="KEYCODE_SLASH",e[e.KEYCODE_AT=77]="KEYCODE_AT",e[e.KEYCODE_NUM=78]="KEYCODE_NUM",e[e.KEYCODE_HEADSETHOOK=79]="KEYCODE_HEADSETHOOK",e[e.KEYCODE_FOCUS=80]="KEYCODE_FOCUS",e[e.KEYCODE_PLUS=81]="KEYCODE_PLUS",e[e.KEYCODE_MENU=82]="KEYCODE_MENU",e[e.KEYCODE_NOTIFICATION=83]="KEYCODE_NOTIFICATION",e[e.KEYCODE_SEARCH=84]="KEYCODE_SEARCH",e[e.KEYCODE_MEDIA_PLAY_PAUSE=85]="KEYCODE_MEDIA_PLAY_PAUSE",e[e.KEYCODE_MEDIA_STOP=86]="KEYCODE_MEDIA_STOP",e[e.KEYCODE_MEDIA_NEXT=87]="KEYCODE_MEDIA_NEXT",e[e.KEYCODE_MEDIA_PREVIOUS=88]="KEYCODE_MEDIA_PREVIOUS",e[e.KEYCODE_MEDIA_REWIND=89]="KEYCODE_MEDIA_REWIND",e[e.KEYCODE_MEDIA_FAST_FORWARD=90]="KEYCODE_MEDIA_FAST_FORWARD",e[e.KEYCODE_MUTE=91]="KEYCODE_MUTE",e[e.KEYCODE_PAGE_UP=92]="KEYCODE_PAGE_UP",e[e.KEYCODE_PAGE_DOWN=93]="KEYCODE_PAGE_DOWN",e[e.KEYCODE_PICTSYMBOLS=94]="KEYCODE_PICTSYMBOLS",e[e.KEYCODE_SWITCH_CHARSET=95]="KEYCODE_SWITCH_CHARSET",e[e.KEYCODE_BUTTON_A=96]="KEYCODE_BUTTON_A",e[e.KEYCODE_BUTTON_B=97]="KEYCODE_BUTTON_B",e[e.KEYCODE_BUTTON_C=98]="KEYCODE_BUTTON_C",e[e.KEYCODE_BUTTON_X=99]="KEYCODE_BUTTON_X",e[e.KEYCODE_BUTTON_Y=100]="KEYCODE_BUTTON_Y",e[e.KEYCODE_BUTTON_Z=101]="KEYCODE_BUTTON_Z",e[e.KEYCODE_BUTTON_L1=102]="KEYCODE_BUTTON_L1",e[e.KEYCODE_BUTTON_R1=103]="KEYCODE_BUTTON_R1",e[e.KEYCODE_BUTTON_L2=104]="KEYCODE_BUTTON_L2",e[e.KEYCODE_BUTTON_R2=105]="KEYCODE_BUTTON_R2",e[e.KEYCODE_BUTTON_THUMBL=106]="KEYCODE_BUTTON_THUMBL",e[e.KEYCODE_BUTTON_THUMBR=107]="KEYCODE_BUTTON_THUMBR",e[e.KEYCODE_BUTTON_START=108]="KEYCODE_BUTTON_START",e[e.KEYCODE_BUTTON_SELECT=109]="KEYCODE_BUTTON_SELECT",e[e.KEYCODE_BUTTON_MODE=110]="KEYCODE_BUTTON_MODE",e[e.KEYCODE_ESCAPE=111]="KEYCODE_ESCAPE",e[e.KEYCODE_FORWARD_DEL=112]="KEYCODE_FORWARD_DEL",e[e.KEYCODE_CTRL_LEFT=113]="KEYCODE_CTRL_LEFT",e[e.KEYCODE_CTRL_RIGHT=114]="KEYCODE_CTRL_RIGHT",e[e.KEYCODE_CAPS_LOCK=115]="KEYCODE_CAPS_LOCK",e[e.KEYCODE_SCROLL_LOCK=116]="KEYCODE_SCROLL_LOCK",e[e.KEYCODE_META_LEFT=117]="KEYCODE_META_LEFT",e[e.KEYCODE_META_RIGHT=118]="KEYCODE_META_RIGHT",e[e.KEYCODE_FUNCTION=119]="KEYCODE_FUNCTION",e[e.KEYCODE_SYSRQ=120]="KEYCODE_SYSRQ",e[e.KEYCODE_BREAK=121]="KEYCODE_BREAK",e[e.KEYCODE_MOVE_HOME=122]="KEYCODE_MOVE_HOME",e[e.KEYCODE_MOVE_END=123]="KEYCODE_MOVE_END",e[e.KEYCODE_INSERT=124]="KEYCODE_INSERT",e[e.KEYCODE_FORWARD=125]="KEYCODE_FORWARD",e[e.KEYCODE_MEDIA_PLAY=126]="KEYCODE_MEDIA_PLAY",e[e.KEYCODE_MEDIA_PAUSE=127]="KEYCODE_MEDIA_PAUSE",e[e.KEYCODE_MEDIA_CLOSE=128]="KEYCODE_MEDIA_CLOSE",e[e.KEYCODE_MEDIA_EJECT=129]="KEYCODE_MEDIA_EJECT",e[e.KEYCODE_MEDIA_RECORD=130]="KEYCODE_MEDIA_RECORD",e[e.KEYCODE_F1=131]="KEYCODE_F1",e[e.KEYCODE_F2=132]="KEYCODE_F2",e[e.KEYCODE_F3=133]="KEYCODE_F3",e[e.KEYCODE_F4=134]="KEYCODE_F4",e[e.KEYCODE_F5=135]="KEYCODE_F5",e[e.KEYCODE_F6=136]="KEYCODE_F6",e[e.KEYCODE_F7=137]="KEYCODE_F7",e[e.KEYCODE_F8=138]="KEYCODE_F8",e[e.KEYCODE_F9=139]="KEYCODE_F9",e[e.KEYCODE_F10=140]="KEYCODE_F10",e[e.KEYCODE_F11=141]="KEYCODE_F11",e[e.KEYCODE_F12=142]="KEYCODE_F12",e[e.KEYCODE_NUM_LOCK=143]="KEYCODE_NUM_LOCK",e[e.KEYCODE_NUMPAD_0=144]="KEYCODE_NUMPAD_0",e[e.KEYCODE_NUMPAD_1=145]="KEYCODE_NUMPAD_1",e[e.KEYCODE_NUMPAD_2=146]="KEYCODE_NUMPAD_2",e[e.KEYCODE_NUMPAD_3=147]="KEYCODE_NUMPAD_3",e[e.KEYCODE_NUMPAD_4=148]="KEYCODE_NUMPAD_4",e[e.KEYCODE_NUMPAD_5=149]="KEYCODE_NUMPAD_5",e[e.KEYCODE_NUMPAD_6=150]="KEYCODE_NUMPAD_6",e[e.KEYCODE_NUMPAD_7=151]="KEYCODE_NUMPAD_7",e[e.KEYCODE_NUMPAD_8=152]="KEYCODE_NUMPAD_8",e[e.KEYCODE_NUMPAD_9=153]="KEYCODE_NUMPAD_9",e[e.KEYCODE_NUMPAD_DIVIDE=154]="KEYCODE_NUMPAD_DIVIDE",e[e.KEYCODE_NUMPAD_MULTIPLY=155]="KEYCODE_NUMPAD_MULTIPLY",e[e.KEYCODE_NUMPAD_SUBTRACT=156]="KEYCODE_NUMPAD_SUBTRACT",e[e.KEYCODE_NUMPAD_ADD=157]="KEYCODE_NUMPAD_ADD",e[e.KEYCODE_NUMPAD_DOT=158]="KEYCODE_NUMPAD_DOT",e[e.KEYCODE_NUMPAD_COMMA=159]="KEYCODE_NUMPAD_COMMA",e[e.KEYCODE_NUMPAD_ENTER=160]="KEYCODE_NUMPAD_ENTER",e[e.KEYCODE_NUMPAD_EQUALS=161]="KEYCODE_NUMPAD_EQUALS",e[e.KEYCODE_NUMPAD_LEFT_PAREN=162]="KEYCODE_NUMPAD_LEFT_PAREN",e[e.KEYCODE_NUMPAD_RIGHT_PAREN=163]="KEYCODE_NUMPAD_RIGHT_PAREN",e[e.KEYCODE_VOLUME_MUTE=164]="KEYCODE_VOLUME_MUTE",e[e.KEYCODE_INFO=165]="KEYCODE_INFO",e[e.KEYCODE_CHANNEL_UP=166]="KEYCODE_CHANNEL_UP",e[e.KEYCODE_CHANNEL_DOWN=167]="KEYCODE_CHANNEL_DOWN",e[e.KEYCODE_ZOOM_IN=168]="KEYCODE_ZOOM_IN",e[e.KEYCODE_ZOOM_OUT=169]="KEYCODE_ZOOM_OUT",e[e.KEYCODE_TV=170]="KEYCODE_TV",e[e.KEYCODE_WINDOW=171]="KEYCODE_WINDOW",e[e.KEYCODE_GUIDE=172]="KEYCODE_GUIDE",e[e.KEYCODE_DVR=173]="KEYCODE_DVR",e[e.KEYCODE_BOOKMARK=174]="KEYCODE_BOOKMARK",e[e.KEYCODE_CAPTIONS=175]="KEYCODE_CAPTIONS",e[e.KEYCODE_SETTINGS=176]="KEYCODE_SETTINGS",e[e.KEYCODE_TV_POWER=177]="KEYCODE_TV_POWER",e[e.KEYCODE_TV_INPUT=178]="KEYCODE_TV_INPUT",e[e.KEYCODE_STB_POWER=179]="KEYCODE_STB_POWER",e[e.KEYCODE_STB_INPUT=180]="KEYCODE_STB_INPUT",e[e.KEYCODE_AVR_POWER=181]="KEYCODE_AVR_POWER",e[e.KEYCODE_AVR_INPUT=182]="KEYCODE_AVR_INPUT",e[e.KEYCODE_PROG_RED=183]="KEYCODE_PROG_RED",e[e.KEYCODE_PROG_GREEN=184]="KEYCODE_PROG_GREEN",e[e.KEYCODE_PROG_YELLOW=185]="KEYCODE_PROG_YELLOW",e[e.KEYCODE_PROG_BLUE=186]="KEYCODE_PROG_BLUE",e[e.KEYCODE_APP_SWITCH=187]="KEYCODE_APP_SWITCH",e[e.KEYCODE_BUTTON_1=188]="KEYCODE_BUTTON_1",e[e.KEYCODE_BUTTON_2=189]="KEYCODE_BUTTON_2",e[e.KEYCODE_BUTTON_3=190]="KEYCODE_BUTTON_3",e[e.KEYCODE_BUTTON_4=191]="KEYCODE_BUTTON_4",e[e.KEYCODE_BUTTON_5=192]="KEYCODE_BUTTON_5",e[e.KEYCODE_BUTTON_6=193]="KEYCODE_BUTTON_6",e[e.KEYCODE_BUTTON_7=194]="KEYCODE_BUTTON_7",e[e.KEYCODE_BUTTON_8=195]="KEYCODE_BUTTON_8",e[e.KEYCODE_BUTTON_9=196]="KEYCODE_BUTTON_9",e[e.KEYCODE_BUTTON_10=197]="KEYCODE_BUTTON_10",e[e.KEYCODE_BUTTON_11=198]="KEYCODE_BUTTON_11",e[e.KEYCODE_BUTTON_12=199]="KEYCODE_BUTTON_12",e[e.KEYCODE_BUTTON_13=200]="KEYCODE_BUTTON_13",e[e.KEYCODE_BUTTON_14=201]="KEYCODE_BUTTON_14",e[e.KEYCODE_BUTTON_15=202]="KEYCODE_BUTTON_15",e[e.KEYCODE_BUTTON_16=203]="KEYCODE_BUTTON_16",e[e.KEYCODE_LANGUAGE_SWITCH=204]="KEYCODE_LANGUAGE_SWITCH",e[e.KEYCODE_MANNER_MODE=205]="KEYCODE_MANNER_MODE",e[e.KEYCODE_3D_MODE=206]="KEYCODE_3D_MODE",e[e.KEYCODE_CONTACTS=207]="KEYCODE_CONTACTS",e[e.KEYCODE_CALENDAR=208]="KEYCODE_CALENDAR",e[e.KEYCODE_MUSIC=209]="KEYCODE_MUSIC",e[e.KEYCODE_CALCULATOR=210]="KEYCODE_CALCULATOR",e[e.KEYCODE_ZENKAKU_HANKAKU=211]="KEYCODE_ZENKAKU_HANKAKU",e[e.KEYCODE_EISU=212]="KEYCODE_EISU",e[e.KEYCODE_MUHENKAN=213]="KEYCODE_MUHENKAN",e[e.KEYCODE_HENKAN=214]="KEYCODE_HENKAN",e[e.KEYCODE_KATAKANA_HIRAGANA=215]="KEYCODE_KATAKANA_HIRAGANA",e[e.KEYCODE_YEN=216]="KEYCODE_YEN",e[e.KEYCODE_RO=217]="KEYCODE_RO",e[e.KEYCODE_KANA=218]="KEYCODE_KANA",e[e.KEYCODE_ASSIST=219]="KEYCODE_ASSIST",e[e.KEYCODE_BRIGHTNESS_DOWN=220]="KEYCODE_BRIGHTNESS_DOWN",e[e.KEYCODE_BRIGHTNESS_UP=221]="KEYCODE_BRIGHTNESS_UP",e[e.KEYCODE_MEDIA_AUDIO_TRACK=222]="KEYCODE_MEDIA_AUDIO_TRACK",e[e.KEYCODE_SLEEP=223]="KEYCODE_SLEEP",e[e.KEYCODE_WAKEUP=224]="KEYCODE_WAKEUP",e[e.KEYCODE_PAIRING=225]="KEYCODE_PAIRING",e[e.KEYCODE_MEDIA_TOP_MENU=226]="KEYCODE_MEDIA_TOP_MENU",e[e.KEYCODE_11=227]="KEYCODE_11",e[e.KEYCODE_12=228]="KEYCODE_12",e[e.KEYCODE_LAST_CHANNEL=229]="KEYCODE_LAST_CHANNEL",e[e.KEYCODE_TV_DATA_SERVICE=230]="KEYCODE_TV_DATA_SERVICE",e[e.KEYCODE_VOICE_ASSIST=231]="KEYCODE_VOICE_ASSIST",e[e.KEYCODE_TV_RADIO_SERVICE=232]="KEYCODE_TV_RADIO_SERVICE",e[e.KEYCODE_TV_TELETEXT=233]="KEYCODE_TV_TELETEXT",e[e.KEYCODE_TV_NUMBER_ENTRY=234]="KEYCODE_TV_NUMBER_ENTRY",e[e.KEYCODE_TV_TERRESTRIAL_ANALOG=235]="KEYCODE_TV_TERRESTRIAL_ANALOG",e[e.KEYCODE_TV_TERRESTRIAL_DIGITAL=236]="KEYCODE_TV_TERRESTRIAL_DIGITAL",e[e.KEYCODE_TV_SATELLITE=237]="KEYCODE_TV_SATELLITE",e[e.KEYCODE_TV_SATELLITE_BS=238]="KEYCODE_TV_SATELLITE_BS",e[e.KEYCODE_TV_SATELLITE_CS=239]="KEYCODE_TV_SATELLITE_CS",e[e.KEYCODE_TV_SATELLITE_SERVICE=240]="KEYCODE_TV_SATELLITE_SERVICE",e[e.KEYCODE_TV_NETWORK=241]="KEYCODE_TV_NETWORK",e[e.KEYCODE_TV_ANTENNA_CABLE=242]="KEYCODE_TV_ANTENNA_CABLE",e[e.KEYCODE_TV_INPUT_HDMI_1=243]="KEYCODE_TV_INPUT_HDMI_1",e[e.KEYCODE_TV_INPUT_HDMI_2=244]="KEYCODE_TV_INPUT_HDMI_2",e[e.KEYCODE_TV_INPUT_HDMI_3=245]="KEYCODE_TV_INPUT_HDMI_3",e[e.KEYCODE_TV_INPUT_HDMI_4=246]="KEYCODE_TV_INPUT_HDMI_4",e[e.KEYCODE_TV_INPUT_COMPOSITE_1=247]="KEYCODE_TV_INPUT_COMPOSITE_1",e[e.KEYCODE_TV_INPUT_COMPOSITE_2=248]="KEYCODE_TV_INPUT_COMPOSITE_2",e[e.KEYCODE_TV_INPUT_COMPONENT_1=249]="KEYCODE_TV_INPUT_COMPONENT_1",e[e.KEYCODE_TV_INPUT_COMPONENT_2=250]="KEYCODE_TV_INPUT_COMPONENT_2",e[e.KEYCODE_TV_INPUT_VGA_1=251]="KEYCODE_TV_INPUT_VGA_1",e[e.KEYCODE_TV_AUDIO_DESCRIPTION=252]="KEYCODE_TV_AUDIO_DESCRIPTION",e[e.KEYCODE_TV_AUDIO_DESCRIPTION_MIX_UP=253]="KEYCODE_TV_AUDIO_DESCRIPTION_MIX_UP",e[e.KEYCODE_TV_AUDIO_DESCRIPTION_MIX_DOWN=254]="KEYCODE_TV_AUDIO_DESCRIPTION_MIX_DOWN",e[e.KEYCODE_TV_ZOOM_MODE=255]="KEYCODE_TV_ZOOM_MODE",e[e.KEYCODE_TV_CONTENTS_MENU=256]="KEYCODE_TV_CONTENTS_MENU",e[e.KEYCODE_TV_MEDIA_CONTEXT_MENU=257]="KEYCODE_TV_MEDIA_CONTEXT_MENU",e[e.KEYCODE_TV_TIMER_PROGRAMMING=258]="KEYCODE_TV_TIMER_PROGRAMMING",e[e.KEYCODE_HELP=259]="KEYCODE_HELP",e[e.KEYCODE_NAVIGATE_PREVIOUS=260]="KEYCODE_NAVIGATE_PREVIOUS",e[e.KEYCODE_NAVIGATE_NEXT=261]="KEYCODE_NAVIGATE_NEXT",e[e.KEYCODE_NAVIGATE_IN=262]="KEYCODE_NAVIGATE_IN",e[e.KEYCODE_NAVIGATE_OUT=263]="KEYCODE_NAVIGATE_OUT",e[e.KEYCODE_STEM_PRIMARY=264]="KEYCODE_STEM_PRIMARY",e[e.KEYCODE_STEM_1=265]="KEYCODE_STEM_1",e[e.KEYCODE_STEM_2=266]="KEYCODE_STEM_2",e[e.KEYCODE_STEM_3=267]="KEYCODE_STEM_3",e[e.KEYCODE_DPAD_UP_LEFT=268]="KEYCODE_DPAD_UP_LEFT",e[e.KEYCODE_DPAD_DOWN_LEFT=269]="KEYCODE_DPAD_DOWN_LEFT",e[e.KEYCODE_DPAD_UP_RIGHT=270]="KEYCODE_DPAD_UP_RIGHT",e[e.KEYCODE_DPAD_DOWN_RIGHT=271]="KEYCODE_DPAD_DOWN_RIGHT",e[e.KEYCODE_MEDIA_SKIP_FORWARD=272]="KEYCODE_MEDIA_SKIP_FORWARD",e[e.KEYCODE_MEDIA_SKIP_BACKWARD=273]="KEYCODE_MEDIA_SKIP_BACKWARD",e[e.KEYCODE_MEDIA_STEP_FORWARD=274]="KEYCODE_MEDIA_STEP_FORWARD",e[e.KEYCODE_MEDIA_STEP_BACKWARD=275]="KEYCODE_MEDIA_STEP_BACKWARD",e[e.KEYCODE_SOFT_SLEEP=276]="KEYCODE_SOFT_SLEEP",e[e.KEYCODE_CUT=277]="KEYCODE_CUT",e[e.KEYCODE_COPY=278]="KEYCODE_COPY",e[e.KEYCODE_PASTE=279]="KEYCODE_PASTE",e[e.KEYCODE_SYSTEM_NAVIGATION_UP=280]="KEYCODE_SYSTEM_NAVIGATION_UP",e[e.KEYCODE_SYSTEM_NAVIGATION_DOWN=281]="KEYCODE_SYSTEM_NAVIGATION_DOWN",e[e.KEYCODE_SYSTEM_NAVIGATION_LEFT=282]="KEYCODE_SYSTEM_NAVIGATION_LEFT",e[e.KEYCODE_SYSTEM_NAVIGATION_RIGHT=283]="KEYCODE_SYSTEM_NAVIGATION_RIGHT",e[e.KEYCODE_ALL_APPS=284]="KEYCODE_ALL_APPS",e[e.KEYCODE_REFRESH=285]="KEYCODE_REFRESH",e[e.KEYCODE_THUMBS_UP=286]="KEYCODE_THUMBS_UP",e[e.KEYCODE_THUMBS_DOWN=287]="KEYCODE_THUMBS_DOWN",e[e.KEYCODE_PROFILE_SWITCH=288]="KEYCODE_PROFILE_SWITCH"})(Gm||(ko.KeyCodes=Gm={}));(function(e){var t=k&&k.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.KeyCodes=e.ShellCommand=e.DeviceClient=e.Client=e.Parser=e.Adb=e.default=void 0;var r=Os;Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t(r).default}});var n=Os;Object.defineProperty(e,"Adb",{enumerable:!0,get:function(){return t(n).default}});var a=tr;Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return t(a).default}});var i=po;Object.defineProperty(e,"Client",{enumerable:!0,get:function(){return t(i).default}});var s=Do;Object.defineProperty(e,"DeviceClient",{enumerable:!0,get:function(){return t(s).default}});var o=Bo;Object.defineProperty(e,"ShellCommand",{enumerable:!0,get:function(){return t(o).default}});var u=ko;Object.defineProperty(e,"KeyCodes",{enumerable:!0,get:function(){return u.KeyCodes}})})(ho);var jy={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(k,function(){var r=1e3,n=6e4,a=36e5,i="millisecond",s="second",o="minute",u="hour",c="day",l="week",f="month",d="quarter",p="year",h="date",_="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(M){var N=["th","st","nd","rd"],U=M%100;return"["+M+(N[(U-20)%10]||N[U]||N[0])+"]"}},A=function(M,N,U){var L=String(M);return!L||L.length>=N?M:""+Array(N+1-L.length).join(U)+M},D={s:A,z:function(M){var N=-M.utcOffset(),U=Math.abs(N),L=Math.floor(U/60),H=U%60;return(N<=0?"+":"-")+A(L,2,"0")+":"+A(H,2,"0")},m:function M(N,U){if(N.date()<U.date())return-M(U,N);var L=12*(U.year()-N.year())+(U.month()-N.month()),H=N.clone().add(L,f),w=U-H<0,R=N.clone().add(L+(w?-1:1),f);return+(-(L+(U-H)/(w?H-R:R-H))||0)},a:function(M){return M<0?Math.ceil(M)||0:Math.floor(M)},p:function(M){return{M:f,y:p,w:l,d:c,D:h,h:u,m:o,s,ms:i,Q:d}[M]||String(M||"").toLowerCase().replace(/s$/,"")},u:function(M){return M===void 0}},x="en",Y={};Y[x]=b;var X="$isDayjsObject",Z=function(M){return M instanceof oe||!(!M||!M[X])},W=function M(N,U,L){var H;if(!N)return x;if(typeof N=="string"){var w=N.toLowerCase();Y[w]&&(H=w),U&&(Y[w]=U,H=w);var R=N.split("-");if(!H&&R.length>1)return M(R[0])}else{var O=N.name;Y[O]=N,H=O}return!L&&H&&(x=H),H||!L&&x},J=function(M,N){if(Z(M))return M.clone();var U=typeof N=="object"?N:{};return U.date=M,U.args=arguments,new oe(U)},ee=D;ee.l=W,ee.i=Z,ee.w=function(M,N){return J(M,{locale:N.$L,utc:N.$u,x:N.$x,$offset:N.$offset})};var oe=function(){function M(U){this.$L=W(U.locale,null,!0),this.parse(U),this.$x=this.$x||U.x||{},this[X]=!0}var N=M.prototype;return N.parse=function(U){this.$d=function(L){var H=L.date,w=L.utc;if(H===null)return new Date(NaN);if(ee.u(H))return new Date;if(H instanceof Date)return new Date(H);if(typeof H=="string"&&!/Z$/i.test(H)){var R=H.match(v);if(R){var O=R[2]-1||0,P=(R[7]||"0").substring(0,3);return w?new Date(Date.UTC(R[1],O,R[3]||1,R[4]||0,R[5]||0,R[6]||0,P)):new Date(R[1],O,R[3]||1,R[4]||0,R[5]||0,R[6]||0,P)}}return new Date(H)}(U),this.init()},N.init=function(){var U=this.$d;this.$y=U.getFullYear(),this.$M=U.getMonth(),this.$D=U.getDate(),this.$W=U.getDay(),this.$H=U.getHours(),this.$m=U.getMinutes(),this.$s=U.getSeconds(),this.$ms=U.getMilliseconds()},N.$utils=function(){return ee},N.isValid=function(){return this.$d.toString()!==_},N.isSame=function(U,L){var H=J(U);return this.startOf(L)<=H&&H<=this.endOf(L)},N.isAfter=function(U,L){return J(U)<this.startOf(L)},N.isBefore=function(U,L){return this.endOf(L)<J(U)},N.$g=function(U,L,H){return ee.u(U)?this[L]:this.set(H,U)},N.unix=function(){return Math.floor(this.valueOf()/1e3)},N.valueOf=function(){return this.$d.getTime()},N.startOf=function(U,L){var H=this,w=!!ee.u(L)||L,R=ee.p(U),O=function(se,ue){var ve=ee.w(H.$u?Date.UTC(H.$y,ue,se):new Date(H.$y,ue,se),H);return w?ve:ve.endOf(c)},P=function(se,ue){return ee.w(H.toDate()[se].apply(H.toDate("s"),(w?[0,0,0,0]:[23,59,59,999]).slice(ue)),H)},g=this.$W,y=this.$M,C=this.$D,I="set"+(this.$u?"UTC":"");switch(R){case p:return w?O(1,0):O(31,11);case f:return w?O(1,y):O(0,y+1);case l:var j=this.$locale().weekStart||0,q=(g<j?g+7:g)-j;return O(w?C-q:C+(6-q),y);case c:case h:return P(I+"Hours",0);case u:return P(I+"Minutes",1);case o:return P(I+"Seconds",2);case s:return P(I+"Milliseconds",3);default:return this.clone()}},N.endOf=function(U){return this.startOf(U,!1)},N.$set=function(U,L){var H,w=ee.p(U),R="set"+(this.$u?"UTC":""),O=(H={},H[c]=R+"Date",H[h]=R+"Date",H[f]=R+"Month",H[p]=R+"FullYear",H[u]=R+"Hours",H[o]=R+"Minutes",H[s]=R+"Seconds",H[i]=R+"Milliseconds",H)[w],P=w===c?this.$D+(L-this.$W):L;if(w===f||w===p){var g=this.clone().set(h,1);g.$d[O](P),g.init(),this.$d=g.set(h,Math.min(this.$D,g.daysInMonth())).$d}else O&&this.$d[O](P);return this.init(),this},N.set=function(U,L){return this.clone().$set(U,L)},N.get=function(U){return this[ee.p(U)]()},N.add=function(U,L){var H,w=this;U=Number(U);var R=ee.p(L),O=function(y){var C=J(w);return ee.w(C.date(C.date()+Math.round(y*U)),w)};if(R===f)return this.set(f,this.$M+U);if(R===p)return this.set(p,this.$y+U);if(R===c)return O(1);if(R===l)return O(7);var P=(H={},H[o]=n,H[u]=a,H[s]=r,H)[R]||1,g=this.$d.getTime()+U*P;return ee.w(g,this)},N.subtract=function(U,L){return this.add(-1*U,L)},N.format=function(U){var L=this,H=this.$locale();if(!this.isValid())return H.invalidDate||_;var w=U||"YYYY-MM-DDTHH:mm:ssZ",R=ee.z(this),O=this.$H,P=this.$m,g=this.$M,y=H.weekdays,C=H.months,I=H.meridiem,j=function(ue,ve,$e,Re){return ue&&(ue[ve]||ue(L,w))||$e[ve].slice(0,Re)},q=function(ue){return ee.s(O%12||12,ue,"0")},se=I||function(ue,ve,$e){var Re=ue<12?"AM":"PM";return $e?Re.toLowerCase():Re};return w.replace(m,function(ue,ve){return ve||function($e){switch($e){case"YY":return String(L.$y).slice(-2);case"YYYY":return ee.s(L.$y,4,"0");case"M":return g+1;case"MM":return ee.s(g+1,2,"0");case"MMM":return j(H.monthsShort,g,C,3);case"MMMM":return j(C,g);case"D":return L.$D;case"DD":return ee.s(L.$D,2,"0");case"d":return String(L.$W);case"dd":return j(H.weekdaysMin,L.$W,y,2);case"ddd":return j(H.weekdaysShort,L.$W,y,3);case"dddd":return y[L.$W];case"H":return String(O);case"HH":return ee.s(O,2,"0");case"h":return q(1);case"hh":return q(2);case"a":return se(O,P,!0);case"A":return se(O,P,!1);case"m":return String(P);case"mm":return ee.s(P,2,"0");case"s":return String(L.$s);case"ss":return ee.s(L.$s,2,"0");case"SSS":return ee.s(L.$ms,3,"0");case"Z":return R}return null}(ue)||R.replace(":","")})},N.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},N.diff=function(U,L,H){var w,R=this,O=ee.p(L),P=J(U),g=(P.utcOffset()-this.utcOffset())*n,y=this-P,C=function(){return ee.m(R,P)};switch(O){case p:w=C()/12;break;case f:w=C();break;case d:w=C()/3;break;case l:w=(y-g)/6048e5;break;case c:w=(y-g)/864e5;break;case u:w=y/a;break;case o:w=y/n;break;case s:w=y/r;break;default:w=y}return H?w:ee.a(w)},N.daysInMonth=function(){return this.endOf(f).$D},N.$locale=function(){return Y[this.$L]},N.locale=function(U,L){if(!U)return this.$L;var H=this.clone(),w=W(U,L,!0);return w&&(H.$L=w),H},N.clone=function(){return ee.w(this.$d,this)},N.toDate=function(){return new Date(this.valueOf())},N.toJSON=function(){return this.isValid()?this.toISOString():null},N.toISOString=function(){return this.$d.toISOString()},N.toString=function(){return this.$d.toUTCString()},M}(),z=oe.prototype;return J.prototype=z,[["$ms",i],["$s",s],["$m",o],["$H",u],["$W",c],["$M",f],["$y",p],["$D",h]].forEach(function(M){z[M[1]]=function(N){return this.$g(N,M[0],M[1])}}),J.extend=function(M,N){return M.$i||(M(N,oe,J),M.$i=!0),J},J.locale=W,J.isDayjs=Z,J.unix=function(M){return J(1e3*M)},J.en=Y[x],J.Ls=Y,J.p={},J})})(jy);var mF=jy.exports;const Vy=Ba(mF),vF=yt.promisify(Gs.exec);let lt=null;window.addEventListener("beforeunload",()=>{lt&&lt.kill()});cr.onDidChange("common.adbPath",async(e,t)=>{var r;if(e===t||e===((r=lt==null?void 0:lt.options)==null?void 0:r.bin))return!1;lt&&(await lt.kill().catch(n=>console.warn(n)),lt=null),lt=ho.Adb.createClient({bin:e||ea})});const Yy=async e=>{const t=cr.get("common.adbPath")||ea;return vF(`"${t}" ${e}`,{env:{...process.env},shell:!0})},gF=async(e,{stdout:t,stderr:r}={})=>{const n=cr.get("common.adbPath")||ea,a=e.split(" "),i=Gs.spawn(`"${n}"`,a,{env:{...process.env},shell:!0,encoding:"utf8"});i.stdout.on("data",o=>{const u=o.toString();t&&t(u,i)});const s=[];return i.stderr.on("data",o=>{const u=o.toString();s.push(u),console.error("spawnProcess.stderr.data:",u),r&&r(u,i)}),new Promise((o,u)=>{i.on("close",c=>{c===0?o():u(new Error(s.join(",")||`Command failed with code ${c}`))}),i.on("error",c=>{u(c)})})},_F=async()=>lt.listDevicesWithPaths(),Rd=async(e,t)=>(await lt.getDevice(e).shell(t).then(ho.Adb.util.readAll)).toString(),yF=async(...e)=>lt.kill(...e),EF=async(...e)=>lt.connect(...e),CF=async(...e)=>lt.disconnect(...e),Ky=async e=>{try{const{stdout:t}=await Yy(`-s ${e} shell ip -f inet addr show wlan0`),r=/inet ([0-9.]+)\/\d+/;return t.match(r)[1]}catch(t){console.warn("adbkit.getDeviceIP.error",t.message)}},SF=async(e,t=5555)=>lt.getDevice(e).tcpip(t),bF=async(e,t={})=>{let r=null;try{r=await lt.getDevice(e).screencap()}catch(i){return console.warn((i==null?void 0:i.message)||i),!1}if(!r)return!1;const n=`Screencap-${Vy().format("YYYY-MM-DD-HH-mm-ss")}.png`,a=t.savePath||Be.resolve("../",n);return new Promise((i,s)=>{r.pipe(Ae.createWriteStream(a)).on("finish",()=>{i(!0)}).on("error",o=>{console.warn((o==null?void 0:o.message)||o),s(!1)})})},TF=async(e,t)=>lt.getDevice(e).install(t),AF=async(e,t)=>lt.getDevice(e).isInstalled(t),wF=async()=>lt.version(),IF=async e=>{let t=[];try{const r=await Rd(e,"dumpsys display"),n=/Display Id=(\d+)/g,i=(r.match(n)||[]).map(s=>s.split("=")[1]);t=mb(i)}catch(r){console.warn((r==null?void 0:r.message)||r)}return t},OF=async e=>Rd(e,"settings put global overlay_display_devices none"),xF=async e=>{const t=await lt.trackDevices();return t.on("add",async n=>{const a=await Ky(n.id);e("add",{...n,$host:a})}),t.on("remove",n=>{e("remove",n)}),t.on("end",n=>{e("end",n)}),t.on("error",n=>{e("error",n)}),()=>t.end()};async function DF(e,t){return console.log("readdir",e,t),(await lt.getDevice(e).readdir(t)).map(n=>({...n,id:[t,n.name].join("/"),type:n.isFile()?"file":"directory",name:n.name,size:uR(n.size),updateTime:Vy(n.mtime).format("YYYY-MM-DD HH:mm:ss")}))}async function $F(e,t,r={}){const{progress:n,savePath:a="/sdcard/Download"}=r,i=Be.basename(t),s=`${a}/${i}`.replace(/\/+/g,"/"),o=await lt.getDevice(e).push(t,s);return new Promise((u,c)=>{o.on("progress",l=>{n==null||n(l)}),o.on("end",()=>{u(s)}),o.on("error",l=>{c(l)})})}async function NF(e,t,r={}){const{progress:n,savePath:a="../"}=r,i=Be.basename(t),s=Be.resolve(a,i),o=await lt.getDevice(e).pull(t);return new Promise((u,c)=>{o.on("progress",l=>{n==null||n(l)}),o.on("end",()=>{u(s)}),o.on("error",l=>{c(l)}),o.pipe(Ae.createWriteStream(s))})}const RF=()=>{const e=cr.get("common.adbPath")||ea;return lt=ho.Adb.createClient({bin:e}),{shell:Yy,spawnShell:gF,getDevices:_F,deviceShell:Rd,kill:yF,connect:EF,disconnect:CF,getDeviceIP:Ky,tcpip:SF,screencap:bF,install:TF,isInstalled:AF,version:wF,display:IF,clearOverlayDisplayDevices:OF,push:$F,pull:NF,watch:xF,readdir:DF}},PF={ipcRenderer:{send(e,...t){We.ipcRenderer.send(e,...t)},sendTo(e,t,...r){const n=process.versions.electron;if((n?parseInt(n.split(".")[0]):0)>=28)throw new Error('"sendTo" method has been removed since Electron 28.');We.ipcRenderer.sendTo(e,t,...r)},sendSync(e,...t){return We.ipcRenderer.sendSync(e,...t)},sendToHost(e,...t){We.ipcRenderer.sendToHost(e,...t)},postMessage(e,t,r){We.ipcRenderer.postMessage(e,t,r)},invoke(e,...t){return We.ipcRenderer.invoke(e,...t)},on(e,t){return We.ipcRenderer.on(e,t),()=>{We.ipcRenderer.removeListener(e,t)}},once(e,t){return We.ipcRenderer.once(e,t),()=>{We.ipcRenderer.removeListener(e,t)}},removeListener(e,t){return We.ipcRenderer.removeListener(e,t),this},removeAllListeners(e){We.ipcRenderer.removeAllListeners(e)}},webFrame:{insertCSS(e){return We.webFrame.insertCSS(e)},setZoomFactor(e){typeof e=="number"&&e>0&&We.webFrame.setZoomFactor(e)},setZoomLevel(e){typeof e=="number"&&We.webFrame.setZoomLevel(e)}},process:{get platform(){return process.platform},get versions(){return process.versions},get env(){return{...process.env}}}},LF=()=>PF;function BF(e){if(typeof e=="string")return e;if(!e||typeof e!="object"||Array.isArray(e))throw new TypeError("Options must be a plain object");const t=[],r=a=>{if(typeof a!="string"||!a.length)throw new TypeError("Parameter name must be a non-empty string");return a.startsWith("-")?a:a.length===1?`-${a}`:`--${a.replace(/[A-Z]/g,i=>`-${i.toLowerCase()}`)}`},n=a=>{if(a==null)throw new TypeError("Value cannot be null or undefined");if(typeof a=="string")return a.length?/[\s"']/.test(a)?`"${a.replace(/"/g,'\\"')}"`:a:'""';if(typeof a=="number"){if(!Number.isFinite(a))throw new TypeError("Number values must be finite");return a.toString()}if(typeof a=="boolean")return"";if(Array.isArray(a))return n(a.join(","));throw new TypeError(`Unsupported value type: ${typeof a}`)};for(const[a,i]of Object.entries(e)){if([null,void 0,!1,""].includes(i))continue;const s=r(a);if(typeof i=="boolean"){i&&t.push(s);continue}if(Array.isArray(i)){if(i.length===0)continue;i.forEach(u=>{if(![null,void 0,!1,""].includes(u)){const c=n(u);c&&t.push(`${s}=${c}`)}});continue}const o=n(i);o&&t.push(`${s}=${o}`)}return t.join(" ")}const kF={stringify:BF};function UF(e){try{return e.split(`
`).filter(r=>{const n=r.trim();return n.startsWith("*")||n.startsWith("-")}).map(r=>{const a=r.trim().replace(/^[*\-]\s+/,"").match(/^([^[]+)\[([^\]]+)\]$/);if(!a)return null;const[,i,s]=a;return{name:i.trim(),packageName:s.trim(),isSystemApp:r.trim().startsWith("*")}}).filter(r=>r!==null)}catch(t){return console.error("Error parsing scrcpy app list:",t),[]}}function Hy(e){return cr.get(`scrcpy.${oR(e)}.--display-overlay`)||cr.get("scrcpy.global.--display-overlay")||""}let Mc;const FF=yt.promisify(Gs.exec);async function Pd(e,{stdout:t,stderr:r,signal:n,...a}={}){const i=cr.get("common.scrcpyPath")||Jc,s=cr.get("common.adbPath")||ea,o=e.split(" "),u=Gs.spawn(`"${i}"`,o,{env:{...process.env,ADB:s},shell:!0,encoding:"utf8",...a}),c=[];return new Promise((l,f)=>{u.stdout.on("data",d=>{const p=d.toString();t&&t(p,u);const h=p.match(n);h&&l(h,p,u)}),u.stderr.on("data",d=>{const p=d.toString();c.push(p),console.error("scrcpyProcess.stderr.data:",p),r&&r(p,u)}),u.on("close",d=>{d===0?l():f(new Error(c.join(",")||`Command failed with code ${d}`))}),u.on("error",d=>{f(d)})})}async function Ui(e){const t=cr.get("common.scrcpyPath")||Jc,r=cr.get("common.adbPath")||ea;return FF(`"${t}" ${e}`,{env:{...process.env,ADB:r},shell:!0,encoding:"utf8"})}async function MF(e){const r=(await Ui(`--serial="${e}" --list-encoders`)).stdout,n=/--video-codec=([\w-]+)\s+--video-encoder='([^']+)'/g,a=[...r.matchAll(n)].map(([,u,c])=>({decoder:u,encoder:c})),i=/--audio-codec=([\w-]+)\s+--audio-encoder='([^']+)'/g;return{audio:[...r.matchAll(i)].map(([,u,c])=>({decoder:u,encoder:c})),video:a}}async function Ld(e,{title:t,args:r="",exec:n=!1,...a}={}){const i=n?Ui:Pd;return console.log(`--serial="${e}" --window-title="${t}" ${r}`),i(`--serial="${e}" --window-title="${t}" ${r}`,a)}async function jF(e,{title:t,args:r="",savePath:n,...a}={}){return Pd(`--serial="${e}" --window-title="${t}" --record="${n}" ${r}`,a)}async function VF(e,{openNum:t=1,...r}={}){var u;const n=Hy(e),a=`settings put global overlay_display_devices "${[...Array.from({length:t}).keys()].map(()=>n).join(";")}"`;await Mc.deviceShell(e,a),await Tp();const s=(await Mc.display(e)).filter(c=>c!=="0"),o=[];for(let c=0;c<s.length;c++){const l=s[c];let f=r.args||"";f.includes("--display-id")?f=f.replace(/(--display-id=)"[^"]*"/,`$1"${l}"`):f+=` --display-id="${l}"`;const d=((u=r==null?void 0:r.title)==null?void 0:u.call(r,{displayId:l,index:c}))||(r==null?void 0:r.title),p=Ld(e,{...r,title:d,args:f,exec:!0});o.push(p),await Tp(1500)}return Promise.allSettled(o)}async function YF(e,t="",{hiddenWindow:r=!1,...n}={}){const a=kF.stringify(t);return Ui(`--serial="${e}" --window-title="EscrcpyHelper" ${r?"--window-x=-300 --window-y=-300":""} --no-video --no-audio --mouse=disabled ${a}`)}async function KF(e){const r=(await Ui(`--serial="${e}" --list-apps`)).stdout;return UF(r)}async function HF(e,t={}){let{commands:r,packageName:n,...a}=t;const i=Hy(e);r+=" --new-display",i&&(r+=`=${i}`),n&&(r+=` --start-app=${n}`);const s=await Ld(e,{...a,args:r,signal:/display id: (\d+)/i}),o=s==null?void 0:s[1];if(!o)throw new Error("The display ID was not obtained.");return o}const GF=(e={})=>(Mc=e.adbkit,{shell:Pd,execShell:Ui,getEncoders:MF,mirror:Ld,record:jF,mirrorGroup:VF,helper:YF,getAppList:KF,startApp:HF}),qF=cr.get("common.debug")||!1;qF&&Object.assign(console,{...Ss(oc.functions,oc.levels),raw:console.log});const zF={init(e){e("nodePath",Be),e("appLog",oc),e("appStore",cr),e("electron",{...LF(),configs:Hb});const t=RF();e("adbkit",t),e("scrcpy",GF({adbkit:t}))}};function WF(e=["complete","interactive"]){return new Promise(t=>{e.includes(document.readyState)?t(!0):document.addEventListener("readystatechange",()=>{e.includes(document.readyState)&&t(!0)})})}const cs={append(e,t){Array.from(e.children).find(r=>r===t)||e.appendChild(t)},remove(e,t){Array.from(e.children).find(r=>r===t)&&e.removeChild(t)}};function QF(){const e="electron-loading",t=`
  .${e}-core {
    font-size: 30px;
    text-indent: -9999em;
    overflow: hidden;
    width: 1em;
    height: 1em;
    border-radius: 50%;
    margin: 72px auto;
    position: relative;
    -webkit-transform: translateZ(0);
    -ms-transform: translateZ(0);
    transform: translateZ(0);
    -webkit-animation: electron-loading-dots 1.7s infinite ease, electron-loading-spin 1.7s infinite ease;
    animation: electron-loading-dots 1.7s infinite ease, electron-loading-spin 1.7s infinite ease;
  }

  @-webkit-keyframes electron-loading-dots {
    0% {
      box-shadow: 0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em, 0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em;
    }
    5%,
    95% {
      box-shadow: 0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em, 0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em;
    }
    10%,
    59% {
      box-shadow: 0 -0.83em 0 -0.4em, -0.087em -0.825em 0 -0.42em, -0.173em -0.812em 0 -0.44em, -0.256em -0.789em 0 -0.46em, -0.297em -0.775em 0 -0.477em;
    }
    20% {
      box-shadow: 0 -0.83em 0 -0.4em, -0.338em -0.758em 0 -0.42em, -0.555em -0.617em 0 -0.44em, -0.671em -0.488em 0 -0.46em, -0.749em -0.34em 0 -0.477em;
    }
    38% {
      box-shadow: 0 -0.83em 0 -0.4em, -0.377em -0.74em 0 -0.42em, -0.645em -0.522em 0 -0.44em, -0.775em -0.297em 0 -0.46em, -0.82em -0.09em 0 -0.477em;
    }
    100% {
      box-shadow: 0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em, 0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em;
    }
  }

  @keyframes electron-loading-dots {
    0% {
      box-shadow: 0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em, 0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em;
    }
    5%,
    95% {
      box-shadow: 0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em, 0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em;
    }
    10%,
    59% {
      box-shadow: 0 -0.83em 0 -0.4em, -0.087em -0.825em 0 -0.42em, -0.173em -0.812em 0 -0.44em, -0.256em -0.789em 0 -0.46em, -0.297em -0.775em 0 -0.477em;
    }
    20% {
      box-shadow: 0 -0.83em 0 -0.4em, -0.338em -0.758em 0 -0.42em, -0.555em -0.617em 0 -0.44em, -0.671em -0.488em 0 -0.46em, -0.749em -0.34em 0 -0.477em;
    }
    38% {
      box-shadow: 0 -0.83em 0 -0.4em, -0.377em -0.74em 0 -0.42em, -0.645em -0.522em 0 -0.44em, -0.775em -0.297em 0 -0.46em, -0.82em -0.09em 0 -0.477em;
    }
    100% {
      box-shadow: 0 -0.83em 0 -0.4em, 0 -0.83em 0 -0.42em, 0 -0.83em 0 -0.44em, 0 -0.83em 0 -0.46em, 0 -0.83em 0 -0.477em;
    }
  }

  @-webkit-keyframes electron-loading-spin {
    0% {
      -webkit-transform: rotate(0deg);
      transform: rotate(0deg);
    }
    100% {
      -webkit-transform: rotate(360deg);
      transform: rotate(360deg);
    }
  }

  @keyframes electron-loading-spin {
    0% {
      -webkit-transform: rotate(0deg);
      transform: rotate(0deg);
    }
    100% {
      -webkit-transform: rotate(360deg);
      transform: rotate(360deg);
    }
  }

  .${e}-wrap {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 3000;
    background: white;
    color: #028D71;
  }

  .${e}-text {
    margin-top: -45px;
  }
    `,r=document.createElement("style");r.id=`${e}-style`,r.innerHTML=t;const n=document.createElement("div");return n.className=`${e}-wrap`,n.innerHTML=`
    <div class="${e}-core"></div>
    <div class="${e}-text"> Initializing service...</div>
  `,{appendLoading(){cs.append(document.head,r),cs.append(document.body,n)},removeLoading(){cs.remove(document.head,r),cs.remove(document.body,n)}}}const{appendLoading:XF,removeLoading:Gy}=QF();WF().then(XF);window.onmessage=e=>{e.data.payload==="removeLoading"&&Gy()};setTimeout(Gy,4999);process.env.ELECTRON_DISABLE_SECURITY_WARNINGS="true";zF.init(gb);
